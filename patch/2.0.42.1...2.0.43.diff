diff --git a/README.md b/README.md
index 53b565a998c..8fceb76ede1 100644
--- a/README.md
+++ b/README.md
@@ -1,6 +1,6 @@
 <p align="center">
     <a href="https://www.yiiframework.com/" target="_blank">
-        <img src="https://www.yiiframework.com/files/logo/yii.png" width="400" alt="Yii Framework" />
+        <img src="https://www.yiiframework.com/image/yii_logo_light.svg" width="400" alt="Yii Framework" />
     </a>
 </p>
 
diff --git a/build/controllers/DevController.php b/build/controllers/DevController.php
index 5cb1b3263e2..6c9d3216355 100644
--- a/build/controllers/DevController.php
+++ b/build/controllers/DevController.php
@@ -52,6 +52,7 @@ class DevController extends Controller
         'authclient' => 'git@github.com:yiisoft/yii2-authclient.git',
         'bootstrap' => 'git@github.com:yiisoft/yii2-bootstrap.git',
         'bootstrap4' => 'git@github.com:yiisoft/yii2-bootstrap4.git',
+        'bootstrap5' => 'git@github.com:yiisoft/yii2-bootstrap5.git',
         'codeception' => 'git@github.com:yiisoft/yii2-codeception.git',
         'composer' => 'git@github.com:yiisoft/yii2-composer.git',
         'debug' => 'git@github.com:yiisoft/yii2-debug.git',
diff --git a/code-of-conduct.md b/code-of-conduct.md
index 82fdef14465..4428c7b15e4 100644
--- a/code-of-conduct.md
+++ b/code-of-conduct.md
@@ -62,7 +62,7 @@ the project's leadership.
 
 This Code of Conduct is adapted from the [Contributor Covenant][homepage],
 version 1.4.0, available at
-[http://contributor-covenant.org/version/1/4/][version]
+[https://contributor-covenant.org/version/1/4/][version]
 
-[homepage]: http://contributor-covenant.org
-[version]: http://contributor-covenant.org/version/1/4/
+[homepage]: https://contributor-covenant.org
+[version]: https://contributor-covenant.org/version/1/4/
diff --git a/composer.json b/composer.json
index ed87b7dd5d0..e7d0d34f037 100644
--- a/composer.json
+++ b/composer.json
@@ -5,20 +5,20 @@
         "yii2",
         "framework"
     ],
-    "homepage": "http://www.yiiframework.com/",
+    "homepage": "https://www.yiiframework.com/",
     "type": "yii2-extension",
     "license": "BSD-3-Clause",
     "authors": [
         {
             "name": "Qiang Xue",
             "email": "qiang.xue@gmail.com",
-            "homepage": "http://www.yiiframework.com/",
+            "homepage": "https://www.yiiframework.com/",
             "role": "Founder and project lead"
         },
         {
             "name": "Alexander Makarov",
             "email": "sam@rmcreative.ru",
-            "homepage": "http://rmcreative.ru/",
+            "homepage": "https://rmcreative.ru/",
             "role": "Core framework development"
         },
         {
@@ -29,7 +29,7 @@
         {
             "name": "Carsten Brandt",
             "email": "mail@cebe.cc",
-            "homepage": "http://cebe.cc/",
+            "homepage": "https://www.cebe.cc/",
             "role": "Core framework development"
         },
         {
@@ -57,9 +57,9 @@
     ],
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?state=open",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki",
+        "irc": "irc://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "minimum-stability": "dev",
@@ -75,10 +75,11 @@
         "yiisoft/yii2-composer": "~2.0.4",
         "ezyang/htmlpurifier": "~4.6",
         "cebe/markdown": "~1.0.0 | ~1.1.0 | ~1.2.0",
-        "bower-asset/jquery": "3.5.*@stable | 3.4.*@stable | 3.3.*@stable | 3.2.*@stable | 3.1.*@stable | 2.2.*@stable | 2.1.*@stable | 1.11.*@stable | 1.12.*@stable",
+        "bower-asset/jquery": "3.6.*@stable | 3.5.*@stable | 3.4.*@stable | 3.3.*@stable | 3.2.*@stable | 3.1.*@stable | 2.2.*@stable | 2.1.*@stable | 1.11.*@stable | 1.12.*@stable",
         "bower-asset/inputmask": "~3.2.2 | ~3.3.5",
         "bower-asset/punycode": "1.3.*",
-        "bower-asset/yii2-pjax": "~2.0.1"
+        "bower-asset/yii2-pjax": "~2.0.1",
+        "paragonie/random_compat": ">=1"
     },
     "require-dev": {
         "cweagans/composer-patches": "^1.7",
@@ -102,11 +103,6 @@
             "yii\\cs\\": "cs/src/"
         }
     },
-    "autoload-dev": {
-        "files": [
-            "tests/bootstrap.php"
-        ]
-    },
     "config": {
         "platform": {"php": "5.4"}
     },
diff --git a/composer.lock b/composer.lock
index f0d91e3aebf..35d4dd11f03 100644
--- a/composer.lock
+++ b/composer.lock
@@ -4,7 +4,7 @@
         "Read more about it at https://getcomposer.org/doc/01-basic-usage.md#installing-dependencies",
         "This file is @generated automatically"
     ],
-    "content-hash": "7e41c6fc0175fd049e0e52c4e8b25e5c",
+    "content-hash": "8f9a4d7e645592f806605d32d676f54e",
     "packages": [
         {
             "name": "bower-asset/inputmask",
@@ -199,6 +199,60 @@
             },
             "time": "2020-06-29T00:56:53+00:00"
         },
+        {
+            "name": "paragonie/random_compat",
+            "version": "v2.0.20",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/paragonie/random_compat.git",
+                "reference": "0f1f60250fccffeaf5dda91eea1c018aed1adc2a"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/paragonie/random_compat/zipball/0f1f60250fccffeaf5dda91eea1c018aed1adc2a",
+                "reference": "0f1f60250fccffeaf5dda91eea1c018aed1adc2a",
+                "shasum": ""
+            },
+            "require": {
+                "php": ">=5.2.0"
+            },
+            "require-dev": {
+                "phpunit/phpunit": "4.*|5.*"
+            },
+            "suggest": {
+                "ext-libsodium": "Provides a modern crypto API that can be used to generate random bytes."
+            },
+            "type": "library",
+            "autoload": {
+                "files": [
+                    "lib/random.php"
+                ]
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Paragon Initiative Enterprises",
+                    "email": "security@paragonie.com",
+                    "homepage": "https://paragonie.com"
+                }
+            ],
+            "description": "PHP 5.x polyfill for random_bytes() and random_int() from PHP 7",
+            "keywords": [
+                "csprng",
+                "polyfill",
+                "pseudorandom",
+                "random"
+            ],
+            "support": {
+                "email": "info@paragonie.com",
+                "issues": "https://github.com/paragonie/random_compat/issues",
+                "source": "https://github.com/paragonie/random_compat"
+            },
+            "time": "2021-04-17T09:33:01+00:00"
+        },
         {
             "name": "yiisoft/yii2-composer",
             "version": "2.0.10",
@@ -891,60 +945,6 @@
             },
             "time": "2015-09-13T19:01:00+00:00"
         },
-        {
-            "name": "paragonie/random_compat",
-            "version": "v2.0.20",
-            "source": {
-                "type": "git",
-                "url": "https://github.com/paragonie/random_compat.git",
-                "reference": "0f1f60250fccffeaf5dda91eea1c018aed1adc2a"
-            },
-            "dist": {
-                "type": "zip",
-                "url": "https://api.github.com/repos/paragonie/random_compat/zipball/0f1f60250fccffeaf5dda91eea1c018aed1adc2a",
-                "reference": "0f1f60250fccffeaf5dda91eea1c018aed1adc2a",
-                "shasum": ""
-            },
-            "require": {
-                "php": ">=5.2.0"
-            },
-            "require-dev": {
-                "phpunit/phpunit": "4.*|5.*"
-            },
-            "suggest": {
-                "ext-libsodium": "Provides a modern crypto API that can be used to generate random bytes."
-            },
-            "type": "library",
-            "autoload": {
-                "files": [
-                    "lib/random.php"
-                ]
-            },
-            "notification-url": "https://packagist.org/downloads/",
-            "license": [
-                "MIT"
-            ],
-            "authors": [
-                {
-                    "name": "Paragon Initiative Enterprises",
-                    "email": "security@paragonie.com",
-                    "homepage": "https://paragonie.com"
-                }
-            ],
-            "description": "PHP 5.x polyfill for random_bytes() and random_int() from PHP 7",
-            "keywords": [
-                "csprng",
-                "polyfill",
-                "pseudorandom",
-                "random"
-            ],
-            "support": {
-                "email": "info@paragonie.com",
-                "issues": "https://github.com/paragonie/random_compat/issues",
-                "source": "https://github.com/paragonie/random_compat"
-            },
-            "time": "2021-04-17T09:33:01+00:00"
-        },
         {
             "name": "phpdocumentor/reflection-docblock",
             "version": "2.0.5",
@@ -2919,5 +2919,5 @@
     "platform-overrides": {
         "php": "5.4"
     },
-    "plugin-api-version": "2.0.0"
+    "plugin-api-version": "2.1.0"
 }
diff --git a/docs/guide-ar/README.md b/docs/guide-ar/README.md
index 11b9e4272cf..2134d2b9421 100644
--- a/docs/guide-ar/README.md
+++ b/docs/guide-ar/README.md
@@ -1,7 +1,7 @@
  Yii 2.0 الدليل التقني الخاص ببيئة العمل
 ===============================
 
-تم تحرير هذا الملف اعتمادا على [الشروط الخاصة بتوثيف ال Yii](http://www.yiiframework.com/doc/terms/).
+تم تحرير هذا الملف اعتمادا على [الشروط الخاصة بتوثيف ال Yii](https://www.yiiframework.com/doc/terms/).
 
 جميع الحقوق محفوظة
 
diff --git a/docs/guide-ar/intro-yii.md b/docs/guide-ar/intro-yii.md
index 7177d094b8a..041c2ea12ac 100644
--- a/docs/guide-ar/intro-yii.md
+++ b/docs/guide-ar/intro-yii.md
@@ -28,7 +28,7 @@ Yii هو إطار عام لبرمجة الويب ، مما يعني أنه يم
 </p>
 
 <p dir="rtl">
-ال Yii إطار عمل صمم من قبل فريق برمجي متكامل، فهو ليس مجرد عمل فردي ،  بل يتكون من فريق تطوير أساسي وقوي(http://www.yiiframework.com/team/) ، بالإضافة إلى منتدى كبير
+ال Yii إطار عمل صمم من قبل فريق برمجي متكامل، فهو ليس مجرد عمل فردي ،  بل يتكون من <a href="https://www.yiiframework.com/team">فريق تطوير أساسي وقوي</a> ، بالإضافة إلى منتدى كبير
 من المهنيين الذين يساهمون باستمرار في تطوير هذا الإطار. فريق المطورين الخاص بال Yii
 يراقب عن كثب أحدث اتجاهات تطوير الويب وأفضل الممارسات والمميزات التي
 وجدت في الأطر والمشاريع الأخرى. وتدرج بانتظام بإضافة أفضل الممارسات والميزات الى ال Yii عبر واجهات بسيطة وأنيقة.
diff --git a/docs/guide-ar/start-installation.md b/docs/guide-ar/start-installation.md
index b8eb08af2c6..1ea59793615 100644
--- a/docs/guide-ar/start-installation.md
+++ b/docs/guide-ar/start-installation.md
@@ -87,7 +87,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 يتضمن تثبيت Yii من ملف أرشيف ثلاث خطوات وهي:
 </p>
 <ol dir="rtl">
-<li> تثبت الملف من خلال الموقع الرسمي <a href="http://www.yiiframework.com/download/">yiiframework.com</a>.</li>
+<li> تثبت الملف من خلال الموقع الرسمي <a href="https://www.yiiframework.com/download/">yiiframework.com</a>.</li>
 <li> قم بفك ضغط الملف الذي تم تنزيله إلى مجلد يمكن الوصول إليه عبر الويب.</li>
 <li> قم بتعديل ملف <code>config/web.php</code> عن طريق إدخال secret key ل<code> cookieValidationKey</code>
 (يتم ذلك تلقائيًا إذا قمت بتثبيت ال Yii باستخدام Composer): </li>
@@ -121,7 +121,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 --------------------------
 
 <p dir="rtl">
-    تعتمد ال Yii على حزم <a href="http://bower.io/">Bower</a> و/أو <a href="https://www.npmjs.org/">NPM</a> لتثبيت مكتبات ال (CSS و JavaScript). ويستخدم ال composer للحصول على هذه المكتبات ، مما يسمح بالحصول على إصدارات ال PHP و CSS/JavaScript في نفس الوقت. ويمكن تحقيق ذلك إما عن طريق استخدام <a href="https://asset-packagist.org/">asset-packagist.org</a> أو من خلال ال <a href="https://github.com/francoispluchino/composer-asset-plugin/">composer asset plugin</a>، يرجى الرجوع إلى <a href="../guide/structure-assets.md">Assets documentation</a> لمزيد من التفاصيل.
+    تعتمد ال Yii على حزم <a href="http://bower.io/">Bower</a> و/أو <a href="https://www.npmjs.com/">NPM</a> لتثبيت مكتبات ال (CSS و JavaScript). ويستخدم ال composer للحصول على هذه المكتبات ، مما يسمح بالحصول على إصدارات ال PHP و CSS/JavaScript في نفس الوقت. ويمكن تحقيق ذلك إما عن طريق استخدام <a href="https://asset-packagist.org/">asset-packagist.org</a> أو من خلال ال <a href="https://github.com/fxpio/composer-asset-plugin">composer asset plugin</a>، يرجى الرجوع إلى <a href="../guide/structure-assets.md">Assets documentation</a> لمزيد من التفاصيل.
 <br /><br />
 قد ترغب في إدارة ال assets عبر  ال native Bower/NPM أو استخدام ال CDN أو تجنب تثبيت ال assets بالكامل من حلال ال Composer ، ويمكن ذلك من خلال إضافة الأسطر التالية إلى "composer.json":
 </p>
diff --git a/docs/guide-ar/start-looking-ahead.md b/docs/guide-ar/start-looking-ahead.md
index 8fccb9caa74..f6b25c5d9e0 100644
--- a/docs/guide-ar/start-looking-ahead.md
+++ b/docs/guide-ar/start-looking-ahead.md
@@ -12,18 +12,18 @@
     <li>
         التوثيق
         <ul>
-            <li><a href="http://www.yiiframework.com/doc-2.0/guide-README.html">The Definitive Guide - الدليل الشامل</a>: كما يشير الإسم، فإن هذا الدليل يحدد آلية عمل ال Yii بدقة عالية، ويوفر إرشادات حول كيفية إستخدام ال Yii، هذا الجزء الأكثر أهمية في ال Yii، والذي يجب عليك قرائته قبل كتابة أي Yii code (ملاحظة: جزء البداية من هنا، والذي قمنا بدراسته هو أحد هذه الأجزاء، ومن أهمها للبدء بإنشاء التطبيقات من خلال ال Yii).</li>
-            <li><a href="http://www.yiiframework.com/doc-2.0/index.html">The Class Reference - المرجع الخاص بال Class</a> في هذا الجزء يتم تحديد الية إستخدام كل Class يقدمه ال Yii، في العادة يتم إستخدام هذا المرجع عند كتابة شيفرة برمجية وأنت ترغب في فهم آلية العمل ل Class معين، أو Method, او فهم Proporty معينة...الخ، من الأفضل إستخدام المرجع الخاص بال Class فقط عند فهم آلية العمل لل Yii. </li>
-            <li><a href="http://www.yiiframework.com/wiki/?tag=yii2">The Wiki Articles - مقالات الويكي</a> مقالات الويكي هي مجموعة من الخبرات العملية للمستخدمين، تمت كتابتها ونشرها على شكل مقالات لمشاركة الخبرات، ومعظم هذه الكتابات تكون مثل الوصفات الخاصة بالطبخ، موجودة لخدمة هدف معين، وحل مشكلة محددة باستخدام ال Yii، وبالرغم من أن هذه الكتابات قد لا تكون بجودة ودقة الدليل الشامل، الا أنها قد تغطي مواضيع أكثر، وتطرح أيضا حلولا مباشرة للإستخدام.</li>
-            <li><a href="http://www.yiiframework.com/doc/">الكتب</a></li>
+            <li><a href="https://www.yiiframework.com/doc-2.0/guide-README.html">The Definitive Guide - الدليل الشامل</a>: كما يشير الإسم، فإن هذا الدليل يحدد آلية عمل ال Yii بدقة عالية، ويوفر إرشادات حول كيفية إستخدام ال Yii، هذا الجزء الأكثر أهمية في ال Yii، والذي يجب عليك قرائته قبل كتابة أي Yii code (ملاحظة: جزء البداية من هنا، والذي قمنا بدراسته هو أحد هذه الأجزاء، ومن أهمها للبدء بإنشاء التطبيقات من خلال ال Yii).</li>
+            <li><a href="https://www.yiiframework.com/doc-2.0/index.html">The Class Reference - المرجع الخاص بال Class</a> في هذا الجزء يتم تحديد الية إستخدام كل Class يقدمه ال Yii، في العادة يتم إستخدام هذا المرجع عند كتابة شيفرة برمجية وأنت ترغب في فهم آلية العمل ل Class معين، أو Method, او فهم Proporty معينة...الخ، من الأفضل إستخدام المرجع الخاص بال Class فقط عند فهم آلية العمل لل Yii. </li>
+            <li><a href="https://www.yiiframework.com/wiki/?tag=yii2">The Wiki Articles - مقالات الويكي</a> مقالات الويكي هي مجموعة من الخبرات العملية للمستخدمين، تمت كتابتها ونشرها على شكل مقالات لمشاركة الخبرات، ومعظم هذه الكتابات تكون مثل الوصفات الخاصة بالطبخ، موجودة لخدمة هدف معين، وحل مشكلة محددة باستخدام ال Yii، وبالرغم من أن هذه الكتابات قد لا تكون بجودة ودقة الدليل الشامل، الا أنها قد تغطي مواضيع أكثر، وتطرح أيضا حلولا مباشرة للإستخدام.</li>
+            <li><a href="https://www.yiiframework.com/doc/">الكتب</a></li>
         </ul>
     </li>
-    <li><a href="http://www.yiiframework.com/extensions/">Extensions - الملحقات</a>: تفتخر ال Yii بوجود مكتبة ضخمة من الملحقات التي تمت برمجتها وإضافتها من قبل المستخدمين المتطوعين الذين شاركوا أعمالهم وطورها لتجعل مهمة المطورين الآخرين أسهل وأسرع في تطوير التطبيفات المبنية بواسطة ال Yii.</li>
+    <li><a href="https://www.yiiframework.com/extensions/">Extensions - الملحقات</a>: تفتخر ال Yii بوجود مكتبة ضخمة من الملحقات التي تمت برمجتها وإضافتها من قبل المستخدمين المتطوعين الذين شاركوا أعمالهم وطورها لتجعل مهمة المطورين الآخرين أسهل وأسرع في تطوير التطبيفات المبنية بواسطة ال Yii.</li>
     <li>
         المجتمع
         <ul>
-            <li>المنتدى: <a href="http://www.yiiframework.com/forum/">http://www.yiiframework.com/forum/</a></li>
-            <li>IRC chat: The #yii channel on the freenode network (irc://irc.freenode.net/yii)</li>
+            <li>المنتدى: <a href="https://forum.yiiframework.com/">https://forum.yiiframework.com/</a></li>
+            <li>IRC chat: The #yii channel on the Libera (ircs://irc.libera.chat:6697/yii)</li>
             <li>Slack chanel: <a href="https://yii.slack.com">https://yii.slack.com</a></li>
             <li>Gitter chat: <a href="https://gitter.im/yiisoft/yii2">https://gitter.im/yiisoft/yii2</a></li>
             <li>GitHub: <a href="https://github.com/yiisoft/yii2">https://github.com/yiisoft/yii2</a></li>
diff --git a/docs/guide-ar/start-workflow.md b/docs/guide-ar/start-workflow.md
index 826fa129e11..35ca010a9c5 100644
--- a/docs/guide-ar/start-workflow.md
+++ b/docs/guide-ar/start-workflow.md
@@ -51,7 +51,7 @@
     أكثر المسارات والملفات أهمية الموجودة داخل التطبيق (بافتراض أن ال application's root directory هو <code>basic</code>) هي:  
 </p>
 
-```
+```js
 basic/                  application base path
     composer.json       used by Composer, describes package information
     config/             contains application and other configurations
diff --git a/docs/guide-de/README.md b/docs/guide-de/README.md
index ca8d6c02c21..b09aee46e61 100644
--- a/docs/guide-de/README.md
+++ b/docs/guide-de/README.md
@@ -1,7 +1,7 @@
 Das umfassende Handbuch für Yii 2.0
 ===================================
 
-Dieses Tutorial wurde unter den [Bedingungen der Yii-Dokumentation](http://www.yiiframework.com/doc/terms/) veröffentlicht.
+Dieses Tutorial wurde unter den [Bedingungen der Yii-Dokumentation](https://www.yiiframework.com/doc/terms/) veröffentlicht.
 
 Alle Rechte vorbehalten.
 
diff --git a/docs/guide-es/README.md b/docs/guide-es/README.md
index 568694cde5a..80d5266fe87 100644
--- a/docs/guide-es/README.md
+++ b/docs/guide-es/README.md
@@ -1,7 +1,7 @@
 Guía Definitiva de Yii 2.0
 ==========================
 
-Este tutorial se publica bajo los [Términos de Documentación Yii](http://www.yiiframework.com/doc/terms/).
+Este tutorial se publica bajo los [Términos de Documentación Yii](https://www.yiiframework.com/doc/terms/).
 
 Todos los derechos reservados.
 
diff --git a/docs/guide-es/concept-aliases.md b/docs/guide-es/concept-aliases.md
index a44566d39b7..bf95bb9a52c 100644
--- a/docs/guide-es/concept-aliases.md
+++ b/docs/guide-es/concept-aliases.md
@@ -114,7 +114,7 @@ utilizadas regularmente. La siguiente es la lista de alias predefinidos por Yii:
 - `@web`: la URL base de la aplicación web se ejecuta actualmente. Tiene el mismo valor que [[yii\web\Request::baseUrl]].
 - `@vendor`: el [[yii\base\Application::vendorPath|directorio vendor de Composer]]. Por defecto `@app/vendor`.
 - `@bower`, el directorio raíz que contiene [paquetes bower](http://bower.io/). Por defecto `@vendor/bower`.
-- `@npm`, el directorio raíz que contiene [paquetes npm](https://www.npmjs.org/). Por defecto `@vendor/npm`.
+- `@npm`, el directorio raíz que contiene [paquetes npm](https://www.npmjs.com/). Por defecto `@vendor/npm`.
 
 El alias `@yii` se define cuando incluyes el archivo `Yii.php` en tu [script de entrada](structure-entry-scripts.md),
 mientras que el resto de los alias están definidos en el constructor de la aplicación cuando se aplica la
diff --git a/docs/guide-es/concept-behaviors.md b/docs/guide-es/concept-behaviors.md
index 61a85046bd1..67216fe8ea8 100644
--- a/docs/guide-es/concept-behaviors.md
+++ b/docs/guide-es/concept-behaviors.md
@@ -116,21 +116,21 @@ class User extends ActiveRecord
     {
         return [
             // anonymous behavior, behavior class name only
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // named behavior, behavior class name only
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // anonymous behavior, configuration array
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // named behavior, configuration array
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -151,14 +151,14 @@ que se le va a unir el comportamiento:
 use app\components\MyBehavior;
 
 // vincular un objeto comportamiento "behavior"
-$component->attachBehavior('myBehavior1', new MyBehavior);
+$component->attachBehavior('myBehavior1', new MyBehavior());
 
 // vincular una clase comportamiento
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // asociar una matriz de configuración
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -167,8 +167,8 @@ Puede vincular múltiples comportamientos a la vez mediante el uso del método [
 
 ```php
 $component->attachBehaviors([
-    'myBehavior1' => new MyBehavior,  // un comportamiento nombrado
-    MyBehavior::className(),          // un comportamiento anónimo
+    'myBehavior1' => new MyBehavior(), // un comportamiento nombrado
+    MyBehavior::class,                 // un comportamiento anónimo
 ]);
 ```
 
@@ -176,10 +176,10 @@ También puedes asociar comportamientos a traves de [configuraciones](concept-co
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -270,7 +270,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-es/concept-components.md b/docs/guide-es/concept-components.md
index 8c0e6923762..f4ebbe6aa60 100644
--- a/docs/guide-es/concept-components.md
+++ b/docs/guide-es/concept-components.md
@@ -67,7 +67,7 @@ Siguiendo esas directrices hará que tus componentes sean [configurables](concep
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // alternativamente
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-es/concept-events.md b/docs/guide-es/concept-events.md
index 436a719c60f..4f7f7cec556 100644
--- a/docs/guide-es/concept-events.md
+++ b/docs/guide-es/concept-events.md
@@ -217,7 +217,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' is inserted');
 });
 ```
@@ -236,11 +236,11 @@ invocación de los gestores de eventos a nivel de clase.
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // displays "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Tenga en cuenta que en este caso, el `$event->sender` hace referencia al nombre de la clase que lanza el evento en
@@ -254,10 +254,10 @@ Para desadjuntar un gestor de eventos a nivel de clase, se tiene que llamar a [[
 
 ```php
 // desadjunta $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // desadjunta todos los gestores de Foo::EVENT_HELLO
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Eventos Globales <span id="global-events"></span>
diff --git a/docs/guide-es/input-validation.md b/docs/guide-es/input-validation.md
index a64abefa88f..2f56fda3e73 100644
--- a/docs/guide-es/input-validation.md
+++ b/docs/guide-es/input-validation.md
@@ -434,7 +434,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide-es/intro-yii.md b/docs/guide-es/intro-yii.md
index 735dd4e011e..74b1f94411f 100644
--- a/docs/guide-es/intro-yii.md
+++ b/docs/guide-es/intro-yii.md
@@ -32,12 +32,12 @@ y muchas más.
 como se puede también aprovechar su sólida arquitectura de extensiones para utilizar o desarrollar extensiones distribuibles.
 - El alto rendimiento es siempre la meta principal de Yii.
 
-Yii no es un proyecto de un sola persona, detrás de Yii hay un [sólido equipo de desarrollo](http://www.yiiframework.com/team/), 
+Yii no es un proyecto de un sola persona, detrás de Yii hay un [sólido equipo de desarrollo](https://www.yiiframework.com/team/), 
 así como una gran comunidad en la que numerosos profesionales contribuyen constantemente a su desarrollo.
 El equipo de desarrollo de Yii se mantiene atento a las últimas tendencias de desarrollo web, así como a las mejores prácticas y características de otros frameworks y proyectos.
 Las buenas prácticas y características más relevantes de otros proyectos se incorporan regularmente a la base del framework y se exponen a través de interfaces simples y elegantes.
 
-[about_yii]: http://www.yiiframework.com/about/
+[about_yii]: https://www.yiiframework.com/about/
 
 Versiones de Yii
 ----------------
diff --git a/docs/guide-es/output-client-scripts.md b/docs/guide-es/output-client-scripts.md
index a1125c79e1b..f74ddcae224 100644
--- a/docs/guide-es/output-client-scripts.md
+++ b/docs/guide-es/output-client-scripts.md
@@ -30,7 +30,7 @@ en vez de agregar uno nuevo. En caso de no proveerlo, el código JS en sí será
 Un script externo puede ser agregado de esta manera:
 
 ```php
-$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::className()]]);
+$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::class]]);
 ```
 
 Los argumentos para [[yii\web\View::registerJsFile()|registerJsFile()]] son similares a los de
@@ -77,7 +77,7 @@ Si necesitas asegurarte que haya sólo una etiqueta style utiliza el cuarto argu
 
 ```php
 $this->registerCssFile("http://example.com/css/themes/black-and-white.css", [
-    'depends' => [BootstrapAsset::className()],
+    'depends' => [BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
diff --git a/docs/guide-es/rest-authentication.md b/docs/guide-es/rest-authentication.md
index eef25a98c66..7df5f6fbd27 100644
--- a/docs/guide-es/rest-authentication.md
+++ b/docs/guide-es/rest-authentication.md
@@ -57,7 +57,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -75,11 +75,11 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => CompositeAuth::className(),
+        'class' => CompositeAuth::class,
         'authMethods' => [
-            HttpBasicAuth::className(),
-            HttpBearerAuth::className(),
-            QueryParamAuth::className(),
+            HttpBasicAuth::class,
+            HttpBearerAuth::class,
+            QueryParamAuth::class,
         ],
     ];
     return $behaviors;
diff --git a/docs/guide-es/rest-controllers.md b/docs/guide-es/rest-controllers.md
index 81d6bceac8c..724fd567fe3 100644
--- a/docs/guide-es/rest-controllers.md
+++ b/docs/guide-es/rest-controllers.md
@@ -69,7 +69,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
diff --git a/docs/guide-es/security-authorization.md b/docs/guide-es/security-authorization.md
index 11d01a914a7..0cdb1cca387 100644
--- a/docs/guide-es/security-authorization.md
+++ b/docs/guide-es/security-authorization.md
@@ -25,7 +25,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -70,7 +70,7 @@ Puedes personalizar este comportamiento configurando la propiedad [[yii\filters\
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     ...
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('No tienes los suficientes permisos para acceder a esta página');
@@ -126,7 +126,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
diff --git a/docs/guide-es/start-installation.md b/docs/guide-es/start-installation.md
index 90e181ca3e6..2a78b79be12 100644
--- a/docs/guide-es/start-installation.md
+++ b/docs/guide-es/start-installation.md
@@ -44,7 +44,7 @@ composer global require "fxp/composer-asset-plugin:^1.4.1"
 composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 ```
 
-El primer comando instala [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/),
+El primer comando instala [composer asset plugin](https://github.com/fxpio/composer-asset-plugin),
 que permite administrar dependencias de paquetes bower y npm a través de Composer. Sólo necesitas ejecutar este comando
 una vez. El segundo comando instala Yii en un directorio llamado `basic`. Puedes elegir un nombre de directorio diferente si así lo deseas.
 
@@ -67,7 +67,7 @@ Instalar desde un Archivo Comprimido <span id="installing-from-archive-file"></s
 
 Instalar Yii desde un archivo comprimido involucra tres pasos:
 
-1. Descargar el archivo desde [yiiframework.com](http://www.yiiframework.com/download/yii2-basic).
+1. Descargar el archivo desde [yiiframework.com](https://www.yiiframework.com/download/yii2-basic).
 2. Descomprimirlo en un directorio accesible vía Web.
 3. Modificar el archivo `config/web.php` introduciendo una clave secreta para el ítem de configuración `cookieValidationKey`
    (esto se realiza automáticamente si estás instalando Yii a través de Composer):
diff --git a/docs/guide-es/start-looking-ahead.md b/docs/guide-es/start-looking-ahead.md
index 39129b378d7..11d7656da1b 100644
--- a/docs/guide-es/start-looking-ahead.md
+++ b/docs/guide-es/start-looking-ahead.md
@@ -9,24 +9,24 @@ código automáticamente. Utilizar Gii para la generación de código transforma
 Esta sección resumirá los recursos disponibles de Yii que te ayudarán a ser más productivo al utilizar el framework.
 
 * Documentación
-    - [La Guía Definitiva](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [La Guía Definitiva](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Como su nombre lo indica, la guía define precisamente cómo debería trabajar Yii y provee guías generales
       acerca de su utilización. Es el tutorial más importante de Yii, y el que deberías leer 
       antes de escribir cualquier código en Yii.
-    - [La Referencia de Clases](http://www.yiiframework.com/doc-2.0/index.html):
+    - [La Referencia de Clases](https://www.yiiframework.com/doc-2.0/index.html):
       Esta especifica el uso de cada clase provista por Yii. Debería ser utilizada principalmente cuando estás escribiendo
       código y deseas entender el uso de una clase, método o propiedad en particular. El uso de la referencia de clases es mejor luego de un entendimiento contextual del framework.
-    - [Los Artículos de la Wiki](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Los Artículos de la Wiki](https://www.yiiframework.com/wiki/?tag=yii2):
       Los artículos de la wiki son escritos por usuarios de Yii basados en sus propias experiencias. La mayoría de ellos están escritos
       como recetas de cocina, y muestran cómo resolver problemas particulares utilizando Yii. Si bien la calidad de estos
       puede no ser tan buena como la de la Guía Definitiva, son útiles ya que cubren un espectro muy amplio
       de temas y puede proveer a menudo soluciones listas para usar.
-    - [Libros](http://www.yiiframework.com/doc/)
-* [Extensiones](http://www.yiiframework.com/extensions/):
+    - [Libros](https://www.yiiframework.com/books)
+* [Extensiones](https://www.yiiframework.com/extensions/):
   Yii puede hacer alarde de una librería de miles de extensiones contribuidas por usuarios, que pueden fácilmente conectadas a tu aplicación, haciendo que el desarrollo de la misma sea todavía más fácil y rápido.
 * Comunidad
-    - Foro: <http://www.yiiframework.com/forum/>
-    - Chat IRC: El canal #yii en la red freenode (<irc://irc.freenode.net/yii>)
+    - Foro: <https://forum.yiiframework.com/>
+    - Chat IRC: El canal #yii en la red Libera (<ircs://irc.libera.chat:6697/yii>)
     - Chat Gitter: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
     - Facebook: <https://www.facebook.com/groups/yiitalk/>
diff --git a/docs/guide-es/start-workflow.md b/docs/guide-es/start-workflow.md
index 2695c3e8898..4ab14c68d63 100644
--- a/docs/guide-es/start-workflow.md
+++ b/docs/guide-es/start-workflow.md
@@ -42,7 +42,7 @@ Estructura de la aplicación <span id="application-structure"></span>
 
 Los archivos y directorios más importantes en tu aplicación son (asumiendo que la raíz de la aplicación es `basic`):
 
-```
+```js
 basic/                  base path de la aplicación
     composer.json       archivo utilizado por Composer, describe información de sus paquetes y librerías
     config/             contiene la configuración de las aplicaciones (y otras)
diff --git a/docs/guide-es/structure-assets.md b/docs/guide-es/structure-assets.md
index 0231d53c430..91b61ee1ad4 100644
--- a/docs/guide-es/structure-assets.md
+++ b/docs/guide-es/structure-assets.md
@@ -202,12 +202,12 @@ class FontAwesomeAsset extends AssetBundle
 }
 ```
 
-El ejemplo anterior define un asset bundle para el ["fontawesome" package](http://fontawesome.io/). Especificando
+El ejemplo anterior define un asset bundle para el ["fontawesome" package](https://fontawesome.com/). Especificando
 la opción de publicación `beforeCopy`, solo los subdirectorios `fonts` y `css` serán publicados.
 
 ### Bower y NPM Assets <span id="bower-npm-assets"></span>
 
-La mayoría de paquetes JavaScript/CSS se gestionan con [Bower](http://bower.io/) y/o [NPM](https://www.npmjs.org/).
+La mayoría de paquetes JavaScript/CSS se gestionan con [Bower](http://bower.io/) y/o [NPM](https://www.npmjs.com/).
 Si tu aplicación o extensión usa estos paquetes, se recomienda seguir los siguientes pasos para gestionar los assets en
  la librería:
 
@@ -425,14 +425,14 @@ en la página, en lugar de los assets originales en sintaxis extendidas.
 Yii usa las extensiones de archivo para identificar que sintaxis extendida se está usando. De forma predeterminada se
 reconocen las siguientes sintaxis y extensiones de archivo.
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
 Yii se basa en las herramientas pre-procesadoras instalada para convertir los assets. Por ejemplo, para usar
-[LESS](http://lesscss.org/) se debe instalar el comando pre-procesador `lessc`.
+[LESS](https://lesscss.org/) se debe instalar el comando pre-procesador `lessc`.
 
 Se pueden personalizar los comandos de los pre-procesadores y las sintaxis extendidas soportadas configurando
 [[yii\web\AssetManager::converter]] como en el siguiente ejemplo:
diff --git a/docs/guide-es/structure-entry-scripts.md b/docs/guide-es/structure-entry-scripts.md
index 162f9ecb6ed..b2f69af8da0 100644
--- a/docs/guide-es/structure-entry-scripts.md
+++ b/docs/guide-es/structure-entry-scripts.md
@@ -56,9 +56,9 @@ De la misma manera, el siguiente código es el script de entrada para la [aplica
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-es/structure-extensions.md b/docs/guide-es/structure-extensions.md
index 31d7585478b..6632f16f77a 100644
--- a/docs/guide-es/structure-extensions.md
+++ b/docs/guide-es/structure-extensions.md
@@ -135,9 +135,9 @@ muestra el archivo `composer.json` para la extensión `yiisoft/yii2-imagine`:
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -193,8 +193,8 @@ La extensión depende de Yii (por supuesto). Por ello se debe añadir (`yiisoft/
 apropiadas (ej. `1.*`, `@stable`) para cada paquete dependiente. Se deben usar dependencias estables en versiones
 estables de nuestras extensiones.
 
-La mayoría de paquetes JavaScript/CSS se gestionan usando [Bower](http://bower.io/) y/o [NPM](https://www.npmjs.org/),
-en lugar de Composer. Yii utiliza el [Composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin)
+La mayoría de paquetes JavaScript/CSS se gestionan usando [Bower](http://bower.io/) y/o [NPM](https://www.npmjs.com/),
+en lugar de Composer. Yii utiliza el [Composer asset plugin](https://github.com/fxpio/composer-asset-plugin)
  para habilitar la gestión de estos tipos de paquetes a través de Composer. Si la extensión depende de un paquete
  Bower, se puede, simplemente, añadir la dependencia de el archivo `composer.json` como se muestra a continuación:
 
@@ -392,7 +392,7 @@ mencionados a continuación para facilitar a otra gente el uso de nuestra extens
 
 > Info: Aunque no es un requerimiento, se recomienda que la extensión se adhiera a ciertos estilos de
   codificación. Se puede hacer referencia a
-  [estilo de código del núcleo del framework](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style) para
+  [estilo de código del núcleo del framework](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md) para
   obtener más detalles.
 
 ## Extensiones del Núcleo <span id="core-extensions"></span>
@@ -413,7 +413,7 @@ se describe en la subsección [Uso de Extensiones](#using-extensions)
   Yii. Cuando se usa esta extensión, aparece una barra de herramientas de depuración en la parte inferior de cada
   página. La extensión también proporciona un conjunto de páginas para mostrar información detallada de depuración.
 - [yiisoft/yii2-elasticsearch](https://github.com/yiisoft/yii2-elasticsearch): proporciona soporte para usar
-  [Elasticsearch](http://www.elasticsearch.org/). Incluye soporte básico para realizar consultas/búsquedas y también
+  [Elasticsearch](https://www.elastic.co/). Incluye soporte básico para realizar consultas/búsquedas y también
   implementa patrones de [Active Record](db-active-record.md) que permiten y permite guardar los `active records` en
   Elasticsearch.
 - [yiisoft/yii2-faker](https://github.com/yiisoft/yii2-faker): proporciona soporte para usar
@@ -439,4 +439,4 @@ se describe en la subsección [Uso de Extensiones](#using-extensions)
 - [yiisoft/yii2-swiftmailer](https://github.com/yiisoft/yii2-swiftmailer): proporciona características de envío de
   correos electrónicos basadas en [swiftmailer](http://swiftmailer.org/).
 - [yiisoft/yii2-twig](https://github.com/yiisoft/yii2-twig): proporciona un motor de plantillas basado en
-  [Twig](http://twig.sensiolabs.org/).
+  [Twig](https://twig.symfony.com/).
diff --git a/docs/guide-es/structure-filters.md b/docs/guide-es/structure-filters.md
index a54ddc3c08d..a6be6c2c130 100644
--- a/docs/guide-es/structure-filters.md
+++ b/docs/guide-es/structure-filters.md
@@ -124,7 +124,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // permitido para usuarios autenticados
@@ -160,7 +160,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -185,7 +185,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -212,7 +212,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -242,7 +242,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -270,11 +270,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -307,7 +307,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -339,7 +339,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -366,7 +366,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -387,7 +387,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-es/structure-modules.md b/docs/guide-es/structure-modules.md
index 5e7c282220e..19964295a73 100644
--- a/docs/guide-es/structure-modules.md
+++ b/docs/guide-es/structure-modules.md
@@ -14,7 +14,7 @@ módulo. Dentro de este directorio, hay subdirectorios tales como 'controllers',
 controladores, modelos, vistas y otro código, exactamente como una aplicación. El siguiente ejemplo muestra el 
 contenido dentro de un módulo:
 
-```
+```js
 forum/
     Module.php                   archivo clase módulo
     controllers/                 contiene archivos de la clase controlador
diff --git a/docs/guide-es/structure-views.md b/docs/guide-es/structure-views.md
index b32a3f3a82d..7bc206693dc 100644
--- a/docs/guide-es/structure-views.md
+++ b/docs/guide-es/structure-views.md
@@ -545,7 +545,7 @@ Los componentes de vista proveen las siguientes características útiles, cada u
 * [manejo de scripts del cliente](output-client-scripts.md): soporte para registro y renderización de CSS y JavaScript.
 * [manejo de asset bundle](structure-assets.md): soporte de registro y renderización de [asset bundles](structure-assets.md).
 * [motores de template alternativos](tutorial-template-engines.md): te permite utilizar otros motores de templates, como
-  [Twig](http://twig.sensiolabs.org/) o [Smarty](http://www.smarty.net/).
+  [Twig](https://twig.symfony.com/) o [Smarty](https://www.smarty.net/).
 
 Puedes también utilizar frecuentemente el siguiente menor pero útil grupo de características al desarrollar páginas Web.
 
@@ -616,14 +616,14 @@ $this->registerLinkTag([
     'title' => 'Noticias en Vivo de Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 El resultado del código es el siguiente:
 
 ```html
-<link title="Noticias en Vivo de Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Noticias en Vivo de Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Al igual que con [[yii\web\View::registerMetaTag()|registerMetaTags()]], puedes especificar una clave al llamar
diff --git a/docs/guide-es/test-fixtures.md b/docs/guide-es/test-fixtures.md
index 238f636aa32..24dc4dace93 100644
--- a/docs/guide-es/test-fixtures.md
+++ b/docs/guide-es/test-fixtures.md
@@ -129,7 +129,7 @@ class UserProfileTest extends DbTestCase
     public function fixtures()
     {
         return [
-            'profiles' => UserProfileFixture::className(),
+            'profiles' => UserProfileFixture::class,
         ];
     }
 
diff --git a/docs/guide-es/tutorial-template-engines.md b/docs/guide-es/tutorial-template-engines.md
index 931babc0006..100b1f920af 100644
--- a/docs/guide-es/tutorial-template-engines.md
+++ b/docs/guide-es/tutorial-template-engines.md
@@ -2,7 +2,7 @@ Usar motores de plantillas
 ==========================
 
 Por defecto, Yii utiliza PHP como su lenguaje de plantilla, pero puedes configurar Yii para que soporte otros motores de renderizado, tal como
-[Twig](http://twig.sensiolabs.org/) o [Smarty](http://www.smarty.net/), disponibles como extensiones.
+[Twig](https://twig.symfony.com/) o [Smarty](https://www.smarty.net/), disponibles como extensiones.
 
 El componente `view` es el responsable de renderizar las vistas. Puedes agregar un motor de plantillas personalizado reconfigurando
 el comportamiento (behavior) de este componente:
diff --git a/docs/guide-es/tutorial-yii-integration.md b/docs/guide-es/tutorial-yii-integration.md
index 22d80b1bfc9..d8f63857631 100644
--- a/docs/guide-es/tutorial-yii-integration.md
+++ b/docs/guide-es/tutorial-yii-integration.md
@@ -86,7 +86,7 @@ para instalar Yii:
     composer require yiisoft/yii2
     composer install
 
-El primer comando instala el [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/),
+El primer comando instala el [composer asset plugin](https://github.com/fxpio/composer-asset-plugin),
 que permite administrar paquetes bower y npm a través de Composer. Incluso si sólo quieres utilizar la capa de base de datos
 u otra característica de Yii no relacionada a assets, requiere que instales el paquete composer de Yii.
 
@@ -108,7 +108,7 @@ a la sección `extra` de tu `composer.json`:
 Visita también la [sección de cómo instalar Yii](start-installation.md#installing-via-composer) para más información
 sobre Composer y sobre cómo solucionar posibles problemas que surjan durante la instalación.
 
-En otro caso, puedes [descargar](http://www.yiiframework.com/download/) el archivo de la edición de Yii
+En otro caso, puedes [descargar](https://www.yiiframework.com/download/) el archivo de la edición de Yii
 y desempaquetarla en el directorio `BasePath/vendor`.
 
 Después, debes de modificar el script de entrada de sistema de terceros para incluir el siguiente código al principio:
diff --git a/docs/guide-fr/README.md b/docs/guide-fr/README.md
index 642d3484820..dc1bf735705 100644
--- a/docs/guide-fr/README.md
+++ b/docs/guide-fr/README.md
@@ -1,7 +1,7 @@
 Guide définitif pour Yii 2.0
 ============================
 
-Ce guide est soumis aux [Conditions de la Documentation de Yii](http://www.yiiframework.com/doc/terms/).
+Ce guide est soumis aux [Conditions de la Documentation de Yii](https://www.yiiframework.com/doc/terms/).
 
 Tous droits réservés.
 
diff --git a/docs/guide-fr/concept-aliases.md b/docs/guide-fr/concept-aliases.md
index 2d5f22a9f1b..c03103df0bc 100644
--- a/docs/guide-fr/concept-aliases.md
+++ b/docs/guide-fr/concept-aliases.md
@@ -101,7 +101,7 @@ Yii prédéfinit un jeu d'alias pour faire référence à des chemins de fichier
 - `@web`, l'URL de base de l'application en cours d'exécution. Cet alias a la même valeur que  [[yii\web\Request::baseUrl]].
 - `@vendor`, le [[yii\base\Application::vendorPath|dossier vendor de Composer]]. Valeur par défaut `@app/vendor`.
 - `@bower`, le dossier racine des [paquets bower](http://bower.io/). Valeur par défaut `@vendor/bower`.
-- `@npm`, le dossier racine des [paquets npm](https://www.npmjs.org/). Valeur par défaut `@vendor/npm`.
+- `@npm`, le dossier racine des [paquets npm](https://www.npmjs.com/). Valeur par défaut `@vendor/npm`.
 
 L'alias `@yii` est défini lorsque vous incluez le fichier `Yii.php` dans votre [script d'entrée](structure-entry-scripts.md). Les alias restants sont définis dans le constructeur de l'application au moment où la [configuration](concept-configurations.md) de l'application est appliquée.
  .
diff --git a/docs/guide-fr/concept-behaviors.md b/docs/guide-fr/concept-behaviors.md
index 239f541956e..bc8e86395e7 100644
--- a/docs/guide-fr/concept-behaviors.md
+++ b/docs/guide-fr/concept-behaviors.md
@@ -106,21 +106,21 @@ class User extends ActiveRecord
     {
         return [
             // comportement anonyme, nom de la classe de comportement seulement
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // comportement nommé, nom de classe de comportement seulement
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // comportement anonyme, tableau de configuration
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // comportement nommé, tableau de configuration
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -138,14 +138,14 @@ Pour attacher un comportement de manière dynamique, appelez la méthode [[yii\b
 use app\components\MyBehavior;
 
 // attache un objet comportement 
-$component->attachBehavior('myBehavior1', new MyBehavior);
+$component->attachBehavior('myBehavior1', new MyBehavior());
 
 // attache un classe de comportement
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // attache un tableau de configuration 
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -155,8 +155,8 @@ Vous pouvez attacher plusieurs comportements à la fois en utilisant la méthode
 
 ```php
 $component->attachBehaviors([
-    'myBehavior1' => new MyBehavior,  // un comportement nommé
-    MyBehavior::className(),          // un comportement anonyme
+    'myBehavior1' => new MyBehavior(), // un comportement nommé
+    MyBehavior::class,                 // un comportement anonyme
 ]);
 ```
 
@@ -164,10 +164,10 @@ Vous pouvez aussi attacher des comportements via les [configurations](concept-co
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -250,7 +250,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-fr/concept-components.md b/docs/guide-fr/concept-components.md
index 9fb1ff0d26e..fd61bbe0d29 100644
--- a/docs/guide-fr/concept-components.md
+++ b/docs/guide-fr/concept-components.md
@@ -67,7 +67,7 @@ Le respect de ces conseils rend vos composants  [configurables](concept-configur
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // alternatively
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-fr/concept-events.md b/docs/guide-fr/concept-events.md
index 88ccefaad72..0e81ad4ba0e 100644
--- a/docs/guide-fr/concept-events.md
+++ b/docs/guide-fr/concept-events.md
@@ -185,7 +185,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' is inserted');
 });
 ```
@@ -199,11 +199,11 @@ Vous pouvez déclencher un événement au *niveau de la classe* en appelant la m
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // displays "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Notez que, dans ce cas, `$event->sender` fait référence au nom de la classe qui a déclenché l'événement plutôt qu'à une instance de classe.
@@ -214,10 +214,10 @@ Pour détacher un gestionnaire attaché au niveau de la classe, appelez  [[yii\b
 
 ```php
 // détache $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // détache tous les gestionnaires de Foo::EVENT_HELLO
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 
@@ -271,10 +271,10 @@ Vous pouvez déclencher l'événement de ces classes :
 
 ```php
 // trigger event for Dog class
-Event::trigger(Dog::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Dog::class, DanceEventInterface::EVENT_DANCE);
 
 // trigger event for Developer class
-Event::trigger(Developer::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Developer::class, DanceEventInterface::EVENT_DANCE);
 ```
 
 Notez bien que vous ne pouvez pas déclencher l'événement de toutes les classes qui implémentent l'interface :,
diff --git a/docs/guide-fr/db-active-record.md b/docs/guide-fr/db-active-record.md
index 9a3ff0593c7..6a935209a0c 100644
--- a/docs/guide-fr/db-active-record.md
+++ b/docs/guide-fr/db-active-record.md
@@ -788,7 +788,7 @@ use yii\behaviors\OptimisticLockBehavior;
 public function behaviors()
 {
     return [
-        OptimisticLockBehavior::className(),
+        OptimisticLockBehavior::class,
     ];
 }
 ```
@@ -820,7 +820,7 @@ class Customer extends ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -830,7 +830,7 @@ class Order extends ActiveRecord
 
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -847,7 +847,7 @@ En déclarant une relation, vous devez spécifier les informations suivantes :
 soit la méthode [[yii\db\ActiveRecord::hasOne()|hasOne()]]. 
 Dans l'exemple ci-dessus vous pouvez facilement déduire en lisant la déclaration des relations qu'un client a beaucoup de commandes, tandis qu'une commande n'a qu'un client.
 - le nom de la classe d'enregistrement actif : spécifié comme le premier paramètre de [[yii\db\ActiveRecord::hasMany()|hasMany()]] ou de [[yii\db\ActiveRecord::hasOne()|hasOne()]]. 
-Une pratique conseillée est d'appeler `Xyz::className()` 
+Une pratique conseillée est d'appeler `Xyz::class` 
 pour obtenir la chaîne de caractères représentant le nom de la classe de manière à bénéficier 
 de l'auto-complètement de l'EDI et de la détection d'erreur dans l'étape de compilation. 
 - Le lien entre les deux types de données : spécifie le(s) colonne(s) via lesquelles les deux types de données sont en relation. 
@@ -926,7 +926,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100)
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -961,7 +961,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -974,12 +974,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1013,21 +1013,21 @@ class Customer extends ActiveRecord
     public function getPurchasedItems()
     {
         // items de clients pour lesquels la colonne 'id' de `Item` correspond à  'item_id' dans OrderItem
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
                     ->via('orderItems');
     }
 
     public function getOrderItems()
     {
         // items de commandes clients pour lesquels, la colonne 'id' de `Order` correspond à 'order_id' dans OrderItem
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id'])
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id'])
                     ->via('orders');
     }
 
     public function getOrders()
     {
         // idem à ci-dessus
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1280,7 +1280,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1288,7 +1288,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1322,7 +1322,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1433,7 +1433,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // a customer has many comments
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1448,7 +1448,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // un commentaire (comment) a un client (customer)
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1532,7 +1532,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1543,7 +1543,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1609,7 +1609,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1704,7 +1704,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1735,7 +1735,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide-fr/input-forms.md b/docs/guide-fr/input-forms.md
index 7db82ec89de..f49ff38e27a 100644
--- a/docs/guide-fr/input-forms.md
+++ b/docs/guide-fr/input-forms.md
@@ -93,7 +93,7 @@ Des balises additionnelles HTML peuvent être ajoutées au formulaire en utilisa
 Création d'une liste déroulante <span id="creating-activeform-dropdownlist"></span>
 -------------------------------
 
-Vous pouvez utiliser la méthode [dropDownList()](http://www.yiiframework.com/doc-2.0/yii-widgets-activefield.html#dropDownList()-detail) de ActiveForm pour créer une liste déroulante :
+Vous pouvez utiliser la méthode [dropDownList()](https://www.yiiframework.com/doc-2.0/yii-widgets-activefield.html#dropDownList()-detail) de ActiveForm pour créer une liste déroulante :
 
 
 ```php
diff --git a/docs/guide-fr/input-validation.md b/docs/guide-fr/input-validation.md
index 6e59fbfedeb..f8fee375ef8 100644
--- a/docs/guide-fr/input-validation.md
+++ b/docs/guide-fr/input-validation.md
@@ -370,7 +370,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide-fr/intro-yii.md b/docs/guide-fr/intro-yii.md
index 19e64bc5448..11214142e58 100644
--- a/docs/guide-fr/intro-yii.md
+++ b/docs/guide-fr/intro-yii.md
@@ -29,13 +29,13 @@ prise en charge de caches multi-niveaux; et plus.
 profiter de son architecture extensible solide, afin d'utiliser ou développer des extensions distribuables. 
 - La haute performance est toujours un des principaux objectifs de Yii.
 
-Yii n'est pas un one-man show, il est soutenu par une [solide équipe de développement du noyau][about_yii] ainsi que d'une grande communauté 
+Yii n'est pas un one-man show, il est soutenu par une [solide équipe de développement du noyau][yii_team] ainsi que d'une grande communauté 
 avec de nombreux professionnels qui contribuent constamment au développement de Yii. L'équipe de développeurs de Yii 
 garde un œil attentif sur les dernières tendances en développement Web, et sur les meilleures pratiques et caractéristiques 
 trouvées dans d'autres frameworks ou projets. Les meilleures pratiques et caractéristiques les plus pertinentes trouvées ailleurs sont régulièrement intégrées dans le code du noyau et utilisables
 via des interfaces simples et élégantes.
 
-[about_yii]: http://www.yiiframework.com/about/
+[yii_team]: https://www.yiiframework.com/team
 
 Versions de Yii
 ---------------
diff --git a/docs/guide-fr/output-client-scripts.md b/docs/guide-fr/output-client-scripts.md
index 5b386f1dc62..c45f4ce9474 100644
--- a/docs/guide-fr/output-client-scripts.md
+++ b/docs/guide-fr/output-client-scripts.md
@@ -28,7 +28,7 @@ Le dernier argument est un identifiant unique du script utilisé pour identifier
 Un script externe peut être ajouté comme expliqué ci-dessous : 
 
 ```php
-$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::className()]]);
+$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::class]]);
 ```
 
 Les arguments pour  [[yii\web\View::registerJsFile()|registerJsFile()]] sont semblables à ceux utilisés pour [[yii\web\View::registerCssFile()|registerCssFile()]]. Dans l'exemple précédent, nous enregistrons le fichier `main.js` avec une dépendance sur `JqueryAsset`. Cela siginifie que le fichier `main.js` sera ajouté APRÈS `jquery.js`. Sans la spécification de cette dépendance, l'ordre relatif entre `main.js` et `jquery.js` resterait indéfini.
@@ -65,7 +65,7 @@ Si vous désirez spécifier des propriétés additionnelles du style balise, pas
 
 ```php
 $this->registerCssFile("http://example.com/css/themes/black-and-white.css", [
-    'depends' => [BootstrapAsset::className()],
+    'depends' => [BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
diff --git a/docs/guide-fr/security-authorization.md b/docs/guide-fr/security-authorization.md
index a6a06c968ae..b94fdf84438 100644
--- a/docs/guide-fr/security-authorization.md
+++ b/docs/guide-fr/security-authorization.md
@@ -20,7 +20,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -57,7 +57,7 @@ Vous pouvez personnaliser ce comportement en configurant la propriété [[yii\fi
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     ...
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('You are not allowed to access this page');
@@ -99,7 +99,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
@@ -390,7 +390,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'rules' => [
                 [
                     'allow' => true,
diff --git a/docs/guide-fr/start-installation.md b/docs/guide-fr/start-installation.md
index 655796137ad..59db131ce0e 100644
--- a/docs/guide-fr/start-installation.md
+++ b/docs/guide-fr/start-installation.md
@@ -67,7 +67,7 @@ Installer depuis une archive <span id="installing-from-archive-file"></span>
 
 Installer Yii depuis une archive se fait en trois étapes :
 
-1. Télécharger l'archive sur le site [yiiframework.com](http://www.yiiframework.com/download/).
+1. Télécharger l'archive sur le site [yiiframework.com](https://www.yiiframework.com/download/).
 2. Décompresser l'archive dans un dossier accessible via le Web.
 3. Modifier le fichier `config/web.php` en entrant une clé secrète pour la configuration de `cookieValidationKey` (cela est fait automatiquement si vous installez Yii avec Composer) :
 
@@ -91,10 +91,10 @@ Mais il y a d'autres options d'installation disponibles :
 Installer les Assets (ici bibliothèques CSS et JavaScript) <span id="installing-assets"></span>
 -----------------
 
-Yii s'appuie sur les paquets [Bower](http://bower.io/) et/ou [NPM](https://www.npmjs.org/) pour l'installation des bibliothèques CSS et JavaScript.
+Yii s'appuie sur les paquets [Bower](http://bower.io/) et/ou [NPM](https://www.npmjs.com/) pour l'installation des bibliothèques CSS et JavaScript.
 
 Il utilise Composer pour les obtenir, permettant ainsi aux versions de paquet de PHP et à celles de CSS/JavaScript, d'être résolues en même temps.
-Cela peut être obtenue soit en utilisant [asset-packagist.org](https://asset-packagist.org) ou [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/).
+Cela peut être obtenue soit en utilisant [asset-packagist.org](https://asset-packagist.org) ou [composer asset plugin](https://github.com/fxpio/composer-asset-plugin).
 
 Reportez-vous à la documentation sur les  [Assets](structure-assets.md) pour plus de détail.
 
diff --git a/docs/guide-fr/start-looking-ahead.md b/docs/guide-fr/start-looking-ahead.md
index 8592ce84daf..1e512a15fc9 100644
--- a/docs/guide-fr/start-looking-ahead.md
+++ b/docs/guide-fr/start-looking-ahead.md
@@ -9,26 +9,26 @@ simples formulaires.
 Cette section va résumer les ressources Yii disponibles pour vous aider à être plus productif dans l'utilisation du framework.
 
 * Documentation
-    - [Le Guide complet](http://www.yiiframework.com/doc-2.0/guide-README.html) :
+    - [Le Guide complet](https://www.yiiframework.com/doc-2.0/guide-README.html) :
       Comme son nom l'indique, le guide définit précisément comment Yii fonctionne et fournit des instructions générales
       sur l'utilisation de Yii. C'est le tutoriel pour Yii le plus important, un que vous devriez lire avant d'écrire le
       moindre code Yii.
-    - [Le référentiel des Classes](http://www.yiiframework.com/doc-2.0/index.html) :
+    - [Le référentiel des Classes](https://www.yiiframework.com/doc-2.0/index.html) :
       Il spécifie le mode d'utilisation de toutes les classes fournies par Yii. Il doit être principalement utilisé lorsque 
       vous écrivez du code et souhaitez comprendre le mode d'utilisation d'une classe, méthode ou propriété particulière.
       L'utilisation du référentiel des classes est plus appropriée quand vous avez une compréhension contextuelle du framework entier.
-    - [Les Articles du Wiki](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Les Articles du Wiki](https://www.yiiframework.com/wiki/?tag=yii2):
       Les articles wiki sont écrits par des utilisateurs de Yii sur la base de leurs propres expériences. Ils sont en
       général écrits comme des recettes de cuisine, et montrent comment résoudre des problèmes pratiques en utilisant
       Yii. Bien que la qualité de ces articles puisse être moindre que celle du Guide complet, ils sont utiles du fait 
       qu'ils couvrent des sujets plus vastes et peuvent fournir des solutions clef-en-main.
-    - [Livres](http://www.yiiframework.com/doc/)
-* [Extensions](http://www.yiiframework.com/extensions/):
+    - [Livres](https://www.yiiframework.com/books)
+* [Extensions](https://www.yiiframework.com/extensions/):
   Yii est fort d'une librairie de milliers d'extensions créées par les utilisateurs, qui peuvent être facilement
   ajoutées à votre application, rendant son développement encore plus facile et plus rapide.
 * Communauté
-    - Forum : <http://www.yiiframework.com/forum/>
-    - Chat IRC : Les canal #yii sur le réseau freenode (<irc://irc.freenode.net/yii>)
+    - Forum : <https://forum.yiiframework.com/>
+    - Chat IRC : Les canal #yii sur le réseau Libera (<ircs://irc.libera.chat:6697/yii>)
     - Slack chanel: <https://yii.slack.com>
     - Gitter chat: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
diff --git a/docs/guide-fr/start-workflow.md b/docs/guide-fr/start-workflow.md
index 2058b6ce950..c68778c62a7 100644
--- a/docs/guide-fr/start-workflow.md
+++ b/docs/guide-fr/start-workflow.md
@@ -37,7 +37,7 @@ Structure de l'application <span id="application-structure"></span>
 
 Les répertoires et fichiers les plus importants de votre application sont (en supposant que le répertoire racine de l'application est `basic`) :
 
-```
+```js
 basic/                  chemin de base de l'application
     composer.json       utilisé par Composer, décrit les information de paquets
     config/             contient les configurations de l'application et autres
diff --git a/docs/guide-fr/structure-assets.md b/docs/guide-fr/structure-assets.md
index 1ea514dd90b..c0c67302cb0 100644
--- a/docs/guide-fr/structure-assets.md
+++ b/docs/guide-fr/structure-assets.md
@@ -201,12 +201,12 @@ class FontAwesomeAsset extends AssetBundle
 }  
 ```
 
-L'exemple ci-dessus définit un paquet de ressources pour le [paquet "fontawesome"](http://fontawesome.io/). En spécifiant l'option de publication `only`, seuls les sous-dossiers `fonts` et  `css` sont publiés.
+L'exemple ci-dessus définit un paquet de ressources pour le [paquet "fontawesome"](https://fontawesome.com/). En spécifiant l'option de publication `only`, seuls les sous-dossiers `fonts` et  `css` sont publiés.
 
 
 ### Installation des ressources Bower et NPM  <span id="bower-npm-assets"></span>
 
-La plupart des paquets JavaScript/CSS sont gérés par le gestionnaire de paquets [Bower](http://bower.io/) et/ou le gestionnaire de paquets [NPM](https://www.npmjs.org/). Dans le monde PHP, nous disposons de Composer, qui gère les dépendances, mais il est possible de charger des paquets Bower et NPM comme des paquets PHP en utilisant `composer.json`.
+La plupart des paquets JavaScript/CSS sont gérés par le gestionnaire de paquets [Bower](http://bower.io/) et/ou le gestionnaire de paquets [NPM](https://www.npmjs.com/). Dans le monde PHP, nous disposons de Composer, qui gère les dépendances, mais il est possible de charger des paquets Bower et NPM comme des paquets PHP en utilisant `composer.json`.
 
 Pour cela, nous devons configurer quelque peu notre composer. Il y a deux options possibles :
 
@@ -252,7 +252,7 @@ Comparé à asset-packagist, composer-asset-plugin ne nécessite aucun changemen
 composer global require "fxp/composer-asset-plugin:^1.4.1"
 ```
 
-Cette commande installe  [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) globalement, ce qui permet de gérer les dépendances des paquets Bower et NPM via Composer. Après l'installation du greffon, tout projet de votre ordinateur prendra en charge les paquets Bower et NPM via `composer.json`.
+Cette commande installe  [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) globalement, ce qui permet de gérer les dépendances des paquets Bower et NPM via Composer. Après l'installation du greffon, tout projet de votre ordinateur prendra en charge les paquets Bower et NPM via `composer.json`.
 
 Ajoutez les lignes suivantes au fichier `composer.json` de votre projet pour préciser les dossiers où seront installés les paquets, si vous voulez les publier en utilisant Yii :
 
@@ -494,13 +494,13 @@ Lorsque vous enregistrez une tel paquet de ressources dans une vue, le [[yii\web
 
 Yii utilise l'extension du nom de fichier pour identifier dans quelle syntaxe une ressource est écrite. Par défaut, il reconnaît les syntaxes et les extensions de nom suivants :
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
-Yii se fie aux outils de pré-traitement installés pour convertir les ressources. Par exemple, pour utiliser [LESS](http://lesscss.org/), vous devriez utiliser la commande de pré-traitement `lessc`.
+Yii se fie aux outils de pré-traitement installés pour convertir les ressources. Par exemple, pour utiliser [LESS](https://lesscss.org/), vous devriez utiliser la commande de pré-traitement `lessc`.
 
 Vous pouvez personnaliser les commandes de pré-traitement et la syntaxe étendue prise en charge en configurant [[yii\web\AssetManager::converter]] comme ci-après :
 
diff --git a/docs/guide-fr/structure-entry-scripts.md b/docs/guide-fr/structure-entry-scripts.md
index 118b8a74378..e81ac22a2d4 100644
--- a/docs/guide-fr/structure-entry-scripts.md
+++ b/docs/guide-fr/structure-entry-scripts.md
@@ -57,9 +57,9 @@ De même, le code qui suit est le code du script de démarrage d'une application
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-fr/structure-extensions.md b/docs/guide-fr/structure-extensions.md
index cbf06f8a7b3..0f5f229848e 100644
--- a/docs/guide-fr/structure-extensions.md
+++ b/docs/guide-fr/structure-extensions.md
@@ -101,9 +101,9 @@ L'exemple suivant montre le fichier `composer.json` de l'extension `yiisoft/yii2
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -148,8 +148,8 @@ Losqu'un utilisateur exécute `composer install` pour installer une extension, l
 
 Bien sûr, votre extension dépend de Yii. C'est pourquoi, vous devez lister  (`yiisoft/yii2`) dans l'entrée `require` dans `composer.json`. Si votre extension dépend aussi d'autres extensions ou bibliothèques de tierces parties, vous devez les lister également. Assurez-vous que vous de lister également les contraintes de versions appropriées (p. ex. `1.*`, `@stable`) pour chacun des paquets dont votre extension dépend. Utilisez des dépendances stables lorsque votre extension est publiée dans une version stable. 
 
-La plupart des paquets JavaScript/CSS sont gérés par [Bower](http://bower.io/) et/ou [NPM](https://www.npmjs.org/),
-plutôt que par Composer. Yii utilise le [greffon *assets* de Composer(https://github.com/francoispluchino/composer-asset-plugin) pour activer la gestion de ce genre de paquets par Composer. Si votre extension dépend d'un paquet Bower, vous pouvez simplement lister la dépendance dans  `composer.json` comme ceci : 
+La plupart des paquets JavaScript/CSS sont gérés par [Bower](http://bower.io/) et/ou [NPM](https://www.npmjs.com/),
+plutôt que par Composer. Yii utilise le [greffon *assets* de Composer(https://github.com/fxpio/composer-asset-plugin) pour activer la gestion de ce genre de paquets par Composer. Si votre extension dépend d'un paquet Bower, vous pouvez simplement lister la dépendance dans  `composer.json` comme ceci : 
 
 ```json
 {
@@ -294,7 +294,7 @@ Dans les versions de votre extension, en plus des fichiers de code, vous devez e
  
 > Info: les commentaires de votre code peuvent être écrits dans le format Markdown. L'extension `yiisoft/yii2-apidoc` vous fournit un outil pour générer une documentation d'API agréable et basée sur les commentaires de votre code. 
 
-> Info: bien que cela ne soit pas une exigence, nous suggérons que votre extension respecte un certain style de codage. Vous pouvez vous reporter au document [style du codage du noyau du framework](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style).
+> Info: bien que cela ne soit pas une exigence, nous suggérons que votre extension respecte un certain style de codage. Vous pouvez vous reporter au document [style du codage du noyau du framework](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md).
 
 
 ## Extensions du noyau <span id="core-extensions"></span>
@@ -306,7 +306,7 @@ Yii fournit les extensions du noyau suivantes (ou ["les extensions officielles"]
 - [yiisoft/yii2-bootstrap](https://www.yiiframework.com/extension/yiisoft/yii2-bootstrap) : fournit un jeu d'objets graphiques qui encapsulent les composants et les greffons de [Bootstrap](http://getbootstrap.com/).
 - [yiisoft/yii2-codeception](https://github.com/yiisoft/yii2-codeception)(obsolète) : fournit la prise en charge des fonctionnalités de test basées sur [Codeception](http://codeception.com/).
 - [yiisoft/yii2-debug](https://www.yiiframework.com/extension/yiisoft/yii2-debug) : fournit la prise en charge du débogage des applications Yii. Lorsque cette extension est utilisée, une barre de débogage apparaît au pied de chacune des pages. Cette extension fournit aussi un jeu de pages autonomes pour afficher des informations de débogage plus détaillées. 
-- [yiisoft/yii2-elasticsearch](https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch) : fournit la prise en charge d'[Elasticsearch](http://www.elasticsearch.org/). Elle inclut un moteur de requêtes/recherches de base et met en œuvre le motif [Active Record](db-active-record.md) qui permet de stocker des enregistrement actifs dans Elasticsearch.
+- [yiisoft/yii2-elasticsearch](https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch) : fournit la prise en charge d'[Elasticsearch](https://www.elastic.co/). Elle inclut un moteur de requêtes/recherches de base et met en œuvre le motif [Active Record](db-active-record.md) qui permet de stocker des enregistrement actifs dans Elasticsearch.
 - [yiisoft/yii2-faker](https://www.yiiframework.com/extension/yiisoft/yii2-faker) : fournit la prise en charge de [Faker](https://www.yiiframework.com/extension/fzaninotto/Faker) pour générer des données factices pour vous.
 - [yiisoft/yii2-gii](https://www.yiiframework.com/extension/yiisoft/yii2-gii) : fournit un générateur de code basé sur le Web qui est hautement extensible et peut être utilisé pour générer rapidement des modèles, des formulaires, des modules, des requêtes CRUD, etc. 
 - [yiisoft/yii2-httpclient](https://www.yiiframework.com/extension/yiisoft/yii2-httpclient) : provides an HTTP client.
@@ -319,7 +319,7 @@ Yii fournit les extensions du noyau suivantes (ou ["les extensions officielles"]
 - [yiisoft/yii2-smarty](https://www.yiiframework.com/extension/yiisoft/yii2-smarty) : fournit un moteur de modèles basé sur  [Smarty](http://www.smarty.net/).
 - [yiisoft/yii2-sphinx](https://github.com/yiisoft/yii2-sphinx) : fournit la prise en charge de [Sphinx](https://www.yiiframework.com/extension/yiisoft/yii2-sphinx). Elle inclut des fonctionnalités telles que les requêtes de base, les enregistrements actifs, la génération de code, etc.
 - [yiisoft/yii2-swiftmailer](https://www.yiiframework.com/extension/yiisoft/yii2-swiftmailer) : fournit les fonctionnalités d'envoi de courriels basées sur [swiftmailer](http://swiftmailer.org/).
-- [yiisoft/yii2-twig](https://www.yiiframework.com/extension/yiisoft/yii2-twig) : fournit un moteur de modèles basé sur [Twig](http://twig.sensiolabs.org/).
+- [yiisoft/yii2-twig](https://www.yiiframework.com/extension/yiisoft/yii2-twig) : fournit un moteur de modèles basé sur [Twig](https://twig.symfony.com/).
 
 Les extensions officielles suivantes sont valables pour les versions Yii 2.1 et plus récentes. Vous n'avez pas besoin de les installer car elles sont incluse dans le cœur du framework.
 
diff --git a/docs/guide-fr/structure-filters.md b/docs/guide-fr/structure-filters.md
index 90e44889e9f..1db31505c62 100644
--- a/docs/guide-fr/structure-filters.md
+++ b/docs/guide-fr/structure-filters.md
@@ -96,7 +96,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // autoriser les utilisateurs authentifiés
@@ -128,7 +128,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -151,7 +151,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -174,7 +174,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -204,7 +204,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -230,11 +230,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -264,7 +264,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -291,7 +291,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -318,7 +318,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -338,7 +338,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-fr/structure-modules.md b/docs/guide-fr/structure-modules.md
index d04e02b4706..2e3f04e7cfc 100644
--- a/docs/guide-fr/structure-modules.md
+++ b/docs/guide-fr/structure-modules.md
@@ -8,7 +8,7 @@ Les modules sont des unités logicielles auto-suffisantes constituées de [modè
 
 Un module est organisé comme un dossier qui est appelé le [[yii\base\Module::basePath|dossier de base (*basePath*)]] du module. Dans ce dossier, se trouvent des sous-dossiers, tels que `controllers`, `models` et `views`, qui contiennent les contrôleurs, les modèles , les vues et d'autres parties de code, juste comme une application. L'exemple suivant présente le contenu d'un module : 
 
-```
+```js
 forum/
     Module.php                   le fichier de classe du module 
     controllers/                 contient les fichiers de classe des contrôleurs
diff --git a/docs/guide-fr/structure-views.md b/docs/guide-fr/structure-views.md
index baa60b99e25..e23aa64f148 100644
--- a/docs/guide-fr/structure-views.md
+++ b/docs/guide-fr/structure-views.md
@@ -435,7 +435,7 @@ Les composants View fournissent les fonctionnalités utiles suivantes relatives
 * [mise en cache de fragments](caching-fragment.md): vous permet de mettre en cache un fragment de votre page Web.
 * [gestion des scripts client](output-client-scripts.md): prend en charge l'enregistrement et le rendu de code CSS et JavaScript. 
 * [gestion de paquets de ressources](structure-assets.md): prend en charge l'enregistrement et le rendu de [paquets de ressources](structure-assets.md).
-* [moteurs de modèle alternatif](tutorial-template-engines.md): vous permet d'utiliser d'autres moteur de modèles tels que [Twig](http://twig.sensiolabs.org/) et [Smarty](http://www.smarty.net/).
+* [moteurs de modèle alternatif](tutorial-template-engines.md): vous permet d'utiliser d'autres moteur de modèles tels que [Twig](https://twig.symfony.com/) et [Smarty](https://www.smarty.net/).
 
 Vous pouvez aussi utiliser les fonctionnalités suivantes qui, bien que mineures, sont néanmoins utiles, pour développer vos pages Web. 
 
@@ -497,14 +497,14 @@ $this->registerLinkTag([
     'title' => 'Live News for Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 Le code suivant produit le résultat suivant :
 
 ```html
-<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Comme avec  [[yii\web\View::registerMetaTag()|registerMetaTag()]], vous pouvez spécifier un clé lors de l'appel de [[yii\web\View::registerLinkTag()|registerLinkTag()]] pour éviter de générer des liens identiques.
diff --git a/docs/guide-id/README.md b/docs/guide-id/README.md
index 4fd9802ab87..999cc758660 100644
--- a/docs/guide-id/README.md
+++ b/docs/guide-id/README.md
@@ -1,7 +1,7 @@
 Panduan Definitif Untuk Yii 2.0
 ===============================
 
-Tutorial ini dirilis di bawah [Persyaratan Dokumentasi Yii](http://www.yiiframework.com/doc/terms/).
+Tutorial ini dirilis di bawah [Persyaratan Dokumentasi Yii](https://www.yiiframework.com/doc/terms/).
 
 Seluruh hak cipta dilindungi.
 
@@ -179,14 +179,14 @@ Topik Khusus
 Widget
 -------
 
-* [GridView](http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
-* [ListView](http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
-* [DetailView](http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
-* [ActiveForm](http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
-* [Pjax](http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
-* [Menu](http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
-* [LinkPager](http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
-* [LinkSorter](http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
+* [GridView](https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
+* [ListView](https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
+* [DetailView](https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
+* [ActiveForm](https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
+* [Pjax](https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
+* [Menu](https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
+* [LinkPager](https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
+* [LinkSorter](https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
 * [Bootstrap Widgets](https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide/README.md)
 * [JQuery UI Widgets](https://github.com/yiisoft/yii2-jui/blob/master/docs/guide/README.md)
 
diff --git a/docs/guide-id/intro-upgrade-from-v1.md b/docs/guide-id/intro-upgrade-from-v1.md
index caca199e1d4..7e0633e7cd4 100644
--- a/docs/guide-id/intro-upgrade-from-v1.md
+++ b/docs/guide-id/intro-upgrade-from-v1.md
@@ -506,7 +506,7 @@ Kelas `CUserIdentity`. Sebaliknya, Anda harus menerapkan [[yii\web\IdentityInter
 jauh lebih mudah untuk digunakan. Template proyek lanjutan memberikan contoh seperti itu.
 
 Silakan merujuk ke bagian [Otentikasi](security-authentication.md), [Otorisasi](security-authorization.md), 
-dan [Template Proyek Lanjutan](https://github.com/yiisoft/yii2-app-advanced/blob /master/docs/guide/README.md) untuk lebih jelasnya.
+dan [Template Proyek Lanjutan](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md) untuk lebih jelasnya.
 
 
 Manajemen URL
diff --git a/docs/guide-id/intro-yii.md b/docs/guide-id/intro-yii.md
index c6aea377854..f800ef55095 100644
--- a/docs/guide-id/intro-yii.md
+++ b/docs/guide-id/intro-yii.md
@@ -24,13 +24,13 @@ Jika Anda sudah akrab dengan framework lain, Anda mungkin menghargai pengetahuan
 - Yii sangat extensible. Anda dapat menyesuaikan atau mengganti hampir setiap bagian dari kode inti Yii. Anda juga bisa mengambil keuntungan dari arsitektur ekstensi Yii yang solid untuk menggunakan atau mengembangkan ekstensi untuk disebarkan kembali.
 - Kinerja tinggi selalu menjadi tujuan utama dari Yii.
 
-Yii tidak dikerjakan oleh satu orang, Yii didukung oleh [tim pengembang inti yang kuat][about_yii], serta komunitas besar
+Yii tidak dikerjakan oleh satu orang, Yii didukung oleh [tim pengembang inti yang kuat][yii_team], serta komunitas besar
 profesional yang terus memberikan kontribusi bagi pengembangan Yii. Tim pengembang Yii
 terus mengamati perkembangan tren terbaru Web, pada penerapan terbaik serta fitur yang
 ditemukan dalam framework dan proyek lain. Penerapan terbaik yang paling relevan dan fitur yang ditemukan di tempat lain secara teratur
 dimasukkan ke dalam kerangka inti dan menampakkannya melalui antarmuka yang sederhana dan elegan.
 
-[about_yii]: http://www.yiiframework.com/about/
+[yii_team]: https://www.yiiframework.com/team
 
 Versi Yii
 ----------
diff --git a/docs/guide-id/start-installation.md b/docs/guide-id/start-installation.md
index 802f5222384..c3aeda4be88 100644
--- a/docs/guide-id/start-installation.md
+++ b/docs/guide-id/start-installation.md
@@ -44,7 +44,7 @@ composer global require "fxp/composer-asset-plugin:^1.4.1"
 composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 ```
 
-Perintah pertama menginstal [komposer aset Plugin](https://github.com/francoispluchino/composer-asset-plugin/)
+Perintah pertama menginstal [komposer aset Plugin](https://github.com/fxpio/composer-asset-plugin)
 yang memungkinkan mengelola bower dan paket npm melalui Composer. Anda hanya perlu menjalankan perintah ini
 sekali untuk semua. Perintah kedua menginstal Yii dalam sebuah direktori bernama `basic`. Anda dapat memilih nama direktori yang berbeda jika Anda ingin.
 
@@ -67,7 +67,7 @@ Instalasi dari file Arsip <span id="installing-from-archive-file"></span>
 
 Instalasi Yii dari file arsip melibatkan tiga langkah:
 
-1. Download file arsip dari [yiiframework.com](http://www.yiiframework.com/download/).
+1. Download file arsip dari [yiiframework.com](https://www.yiiframework.com/download/).
 2. Uraikan file yang didownload ke folder yang bisa diakses web.
 3. Memodifikasi `config/web.php` dengan memasukkan kunci rahasia untuk `cookieValidationKey`.
    (Ini dilakukan secara otomatis jika Anda menginstal Yii menggunakan Composer):
diff --git a/docs/guide-id/start-looking-ahead.md b/docs/guide-id/start-looking-ahead.md
index 854a0438715..27ce98c8e2a 100644
--- a/docs/guide-id/start-looking-ahead.md
+++ b/docs/guide-id/start-looking-ahead.md
@@ -9,24 +9,24 @@ kode secara otomatis. Menggunakan Gii dalam membuat kode, mengubah tugas-tugas p
 Bagian ini akan merangkum bacaan Yii yang tersedia untuk membantu anda menjadi lebih produktif dalam menggunakan framework ini.
 
 * Dokumentasi
-    - [Panduan Definitif](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [Panduan Definitif](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Sesuai dengan judulnya, panduan ini merincikan bagaimana Yii seharusnya bekerja dan menyediakan petunjuk umum
       tentang menggunakan Yii. Panduan ini sangat-sangat penting, dan panduan ini yang harus anda baca
       sebelum menulis kode Yii.
-    - [Referensi Class](http://www.yiiframework.com/doc-2.0/index.html):
+    - [Referensi Class](https://www.yiiframework.com/doc-2.0/index.html):
       Ini menjelaskan bagaimana menggunakan semua class yang disediakan oleh Yii. Pada umumnya anda akan menggunakan ini ketika anda sedang menulis
       kode dan ingin memahami bagaimana penggunaan _class, method, property_. Sebaiknya anda membaca referensi class ini ketika anda memilik pemahaman dasar tentang seluruh bagian framework.
-    - [Artikel Wiki](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Artikel Wiki](https://www.yiiframework.com/wiki/?tag=yii2):
       Artikel wiki ditulis oleh para pengguna Yii berdasarkan pengalaman pribadi masing-masing. Kebanyakan dari artikel ini ditulis
       seperti layaknya panduan memasak, dan menunjukkan bagaimana menyelesaikan beberapa masalah dengan menggunakan Yii. Walaupun kualitas artikel-artikel ini
       mungkin tidak selengkap Panduan Definitif, tetapi artikel ini terkadang lebih bermanfaat karna membahas topik yang cukup luas
       dan mungkin mampu menyediakan solusi-solusi yang sederhana.
-    - [Buku](http://www.yiiframework.com/doc/)
-* [Extensions](http://www.yiiframework.com/extensions/):
+    - [Buku](https://www.yiiframework.com/books)
+* [Extensions](https://www.yiiframework.com/extensions/):
   Yang harus dibanggakan adalah Yii memiliki ribuan library extension yang dibuat oleh pengguna yang dapat dipasang di aplikasi anda dengan mudah, dan akan membuat pengembangan aplikasi anda lebih mudah dan cepat.
 * Komunitas
-    - Forum: <http://www.yiiframework.com/forum/>
-    - IRC: Kanal #yii di freenode (<irc://irc.freenode.net/yii>)
+    - Forum: <https://forum.yiiframework.com/>
+    - IRC: Kanal #yii di Libera (<ircs://irc.libera.chat:6697/yii>)
     - Gitter: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
     - Facebook: <https://www.facebook.com/groups/yiitalk/>
diff --git a/docs/guide-id/start-workflow.md b/docs/guide-id/start-workflow.md
index eaa19b566b6..0548572b761 100644
--- a/docs/guide-id/start-workflow.md
+++ b/docs/guide-id/start-workflow.md
@@ -43,7 +43,7 @@ Struktur aplikasi <span id="application-structure"></span>
 
 Direktori yang paling penting dan file dalam aplikasi Anda (dengan asumsi direktori root aplikasi adalah `basic`):
 
-```
+```js
 basic/                  path aplikasi dasar
     composer.json       digunakan oleh Composer, package information
     config/             berisi konfigurasi aplikasi dan yang lain
@@ -99,4 +99,4 @@ Diagram berikut menunjukkan bagaimana aplikasi menangani permintaan.
 8. Action memuat model data, mungkin dari database.
 9. Aksi meyiapkan view, menyediakannya dengan model data.
 10. Hasilnya diberikan dikembalikan ke komponen aplikasi [respon](runtime-responses.md).
-11. Komponen respon mengirimkan hasil yang diberikan ke browser pengguna.
\ No newline at end of file
+11. Komponen respon mengirimkan hasil yang diberikan ke browser pengguna.
diff --git a/docs/guide-id/structure-entry-scripts.md b/docs/guide-id/structure-entry-scripts.md
index 1c4e686cbf1..2280dcbfe72 100644
--- a/docs/guide-id/structure-entry-scripts.md
+++ b/docs/guide-id/structure-entry-scripts.md
@@ -57,9 +57,9 @@ Demikian juga dengan aplikasi konsol, kode berikut ini adalah kode yang terdapat
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-it/README.md b/docs/guide-it/README.md
index 53a001fc72a..8f85d10da03 100644
--- a/docs/guide-it/README.md
+++ b/docs/guide-it/README.md
@@ -1,7 +1,7 @@
 La guida definitiva a Yii 2.0
 =============================
 
-Questa guida è rilasciata nei [termini della documentazione di Yii](http://www.yiiframework.com/doc/terms/).
+Questa guida è rilasciata nei [termini della documentazione di Yii](https://www.yiiframework.com/doc/terms/).
 
 Tutti i diritti riservati.
 
diff --git a/docs/guide-it/intro-yii.md b/docs/guide-it/intro-yii.md
index 9dc805a6f47..1513ec65646 100644
--- a/docs/guide-it/intro-yii.md
+++ b/docs/guide-it/intro-yii.md
@@ -35,7 +35,7 @@ sott'occhio le ultime tendenze e tecnologie di sviluppo web, sulle pratiche otti
 framework e progetti. Le peculiarità più rilevanti che si trovano altrove sono regolarmente incorporate nel
 codice principale del framework, e rese disponibili tramite semplici ed eleganti interfacce.
 
-[about_yii]: http://www.yiiframework.com/about/
+[about_yii]: https://www.yiiframework.com/about/
 
 Versioni di Yii
 ---------------
diff --git a/docs/guide-it/start-installation.md b/docs/guide-it/start-installation.md
index 8c46674c561..8d92bce0b27 100644
--- a/docs/guide-it/start-installation.md
+++ b/docs/guide-it/start-installation.md
@@ -30,7 +30,7 @@ Una volta installato Composer, puoi installare Yii eseguendo questo comando in u
     composer global require "fxp/composer-asset-plugin:^1.4.1"
     composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
-Il primo comando installa il [plugin composer asset](https://github.com/francoispluchino/composer-asset-plugin/)
+Il primo comando installa il [plugin composer asset](https://github.com/fxpio/composer-asset-plugin)
 che consente di gestire le dipendenze di bower e npm tramite Composer. Devi eseguire questo comando solo una volta. Il secondo 
 installa Yii in una directory di nome `basic`. Puoi scegliere un nome diverso, se preferisci.
 
@@ -54,7 +54,7 @@ Installazione da un archivio <span id="installing-from-archive-file"></span>
 
 L'installazione da un archivio compresso comporta tre passaggi:
 
-1. Scaricare l'archivio da [yiiframework.com](http://www.yiiframework.com/download/).
+1. Scaricare l'archivio da [yiiframework.com](https://www.yiiframework.com/download/).
 2. Scompattare l'archivio in una directory accessible via web.
 3. Modificare il file `config/web.php` inserendo una chiave segreta per il parametro di configurazione `cookieValidationKey` 
    (questa operazione viene fatta automaticamente se installi tramite Composer):
diff --git a/docs/guide-ja/README.md b/docs/guide-ja/README.md
index fcc77e6156a..b86e3aaad98 100644
--- a/docs/guide-ja/README.md
+++ b/docs/guide-ja/README.md
@@ -1,7 +1,7 @@
 Yii 2.0 決定版ガイド
 ====================
 
-このチュートリアルは [Yii ドキュメント許諾条件](http://www.yiiframework.com/doc/terms/) の下にリリースされています。
+このチュートリアルは [Yii ドキュメント許諾条件](https://www.yiiframework.com/doc/terms/) の下にリリースされています。
 
 All Rights Reserved.
 
diff --git a/docs/guide-ja/concept-aliases.md b/docs/guide-ja/concept-aliases.md
index c97e12679d5..fc91d52e63d 100644
--- a/docs/guide-ja/concept-aliases.md
+++ b/docs/guide-ja/concept-aliases.md
@@ -117,7 +117,7 @@ Yii では、一般的に使用されるファイルのパスと URL を簡単
 - `@web`, 現在実行中のウェブ・アプリケーションのベース URL。これは、 [[yii\web\Request::baseUrl]] と同じ値を持ちます。
 - `@vendor`, [[yii\base\Application::vendorPath|Composer のベンダー・ディレクトリ]] 。デフォルトは `@app/vendor` 。
 - `@bower`, [bower パッケージ](http://bower.io/) が含まれるルート・ディレクトリ。デフォルトは `@vendor/bower` 。
-- `@npm`, [npm パッケージ](https://www.npmjs.org/) が含まれるルート・ディレクトリ。デフォルトは `@vendor/npm` 。
+- `@npm`, [npm パッケージ](https://www.npmjs.com/) が含まれるルート・ディレクトリ。デフォルトは `@vendor/npm` 。
 
 `@yii` エイリアスは [エントリ・スクリプト](structure-entry-scripts.md) に `Yii.php` ファイルを読み込んだ時点で定義されます。
 エイリアスの残りの部分は、アプリケーションのコンストラクタ内で、アプリケーションの [構成情報](concept-configurations.md)
diff --git a/docs/guide-ja/concept-behaviors.md b/docs/guide-ja/concept-behaviors.md
index d7c74a2c222..f0f086bbcda 100644
--- a/docs/guide-ja/concept-behaviors.md
+++ b/docs/guide-ja/concept-behaviors.md
@@ -120,21 +120,21 @@ class User extends ActiveRecord
     {
         return [
             // 無名ビヘイビア ビヘイビア・クラス名のみ
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // 名前付きビヘイビア ビヘイビア・クラス名のみ
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // 無名ビヘイビア 構成情報配列
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // 名前付きビヘイビア 構成情報配列
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -153,14 +153,14 @@ class User extends ActiveRecord
 use app\components\MyBehavior;
 
 // ビヘイビア・オブジェクトをアタッチ
-$component->attachBehavior('myBehavior1', new MyBehavior);
+$component->attachBehavior('myBehavior1', new MyBehavior());
 
 // ビヘイビア・クラスをアタッチ
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // 構成情報配列をアタッチ
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -170,8 +170,8 @@ $component->attachBehavior('myBehavior3', [
 
 ```php
 $component->attachBehaviors([
-    'myBehavior1' => new MyBehavior,  // 名前付きビヘイビア
-    MyBehavior::className(),          // 無名ビヘイビア
+    'myBehavior1' => new MyBehavior(), // 名前付きビヘイビア
+    MyBehavior::class,                 // 無名ビヘイビア
 ]);
 ```
 
@@ -179,10 +179,10 @@ $component->attachBehaviors([
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -272,7 +272,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-ja/concept-components.md b/docs/guide-ja/concept-components.md
index 3392a204854..2e542ca40ba 100644
--- a/docs/guide-ja/concept-components.md
+++ b/docs/guide-ja/concept-components.md
@@ -76,7 +76,7 @@ class MyClass extends BaseObject
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // あるいは、また
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-ja/concept-events.md b/docs/guide-ja/concept-events.md
index 567624c1a97..8d0869581e7 100644
--- a/docs/guide-ja/concept-events.md
+++ b/docs/guide-ja/concept-events.md
@@ -211,7 +211,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' が挿入されました');
 });
 ```
@@ -229,11 +229,11 @@ Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // "null" を表示
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 この場合、`$event->sender` は、オブジェクト・インスタンスではなく、`null` になることに注意してください。
@@ -245,10 +245,10 @@ Event::trigger(Foo::className(), Foo::EVENT_HELLO);
 
 ```php
 // $handler をデタッチ
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // Foo::EVENT_HELLO のすべてのハンドラをデタッチ
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 
@@ -304,10 +304,10 @@ Event::on('app\interfaces\DanceEventInterface', DanceEventInterface::EVENT_DANCE
 
 ```php
 // trigger event for Dog class
-Event::trigger(Dog::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Dog::class, DanceEventInterface::EVENT_DANCE);
 
 // trigger event for Developer class
-Event::trigger(Developer::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Developer::class, DanceEventInterface::EVENT_DANCE);
 ```
 
 ただし、このインタフェイスを実装する全クラスのイベントをトリガすることは出来ない、ということに注意して下さい。
diff --git a/docs/guide-ja/db-active-record.md b/docs/guide-ja/db-active-record.md
index 451cb3aebc6..0b9cefb64ed 100644
--- a/docs/guide-ja/db-active-record.md
+++ b/docs/guide-ja/db-active-record.md
@@ -789,7 +789,7 @@ use yii\behaviors\OptimisticLockBehavior;
 public function behaviors()
 {
     return [
-        OptimisticLockBehavior::className(),
+        OptimisticLockBehavior::class,
     ];
 }
 ```
@@ -821,7 +821,7 @@ class Customer extends ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -831,7 +831,7 @@ class Order extends ActiveRecord
 
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -849,7 +849,7 @@ class Order extends ActiveRecord
   上記の例では、リレーションの宣言において、顧客は複数の注文を持ち得るが、一方、注文は一人の顧客しか持たない、ということが容易に読み取れます。
 - 関連するアクティブ・レコード・クラスの名前: [[yii\db\ActiveRecord::hasMany()|hasMany()]] または [[yii\db\ActiveRecord::hasOne()|hasOne()]]
   の最初のパラメータとして指定されます。
-  クラス名を取得するのに `Xyz::className()` を呼ぶのが推奨されるプラクティスです。
+  クラス名を取得するのに `Xyz::class` を呼ぶのが推奨されるプラクティスです。
   そうすれば、IDE の自動補完のサポートを得ることことが出来るだけでなく、コンパイル段階でエラーを検出することが出来ます。
 - 二つの型のデータ間のリンク: 二つの型のデータの関連付けに用いられるカラムを指定します。
   配列の値は主たるデータ (リレーションを宣言しているアクティブ・レコード・クラスによって表されるデータ) のカラムであり、
@@ -859,6 +859,8 @@ class Order extends ActiveRecord
   続けて書く、ということです。ご覧のように、`customer_id` は `Order` のプロパティであり、
   `id` は`Customer` のプロパティです。
   
+> Warning: リレーション名としては `relation` は予約済みで使えません。これを使うと `ArgumentCountError` となります。
+
 
 ### リレーショナル・データにアクセスする <span id="accessing-relational-data"></span>
 
@@ -927,7 +929,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100)
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -962,7 +964,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -975,12 +977,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1014,21 +1016,21 @@ class Customer extends ActiveRecord
     public function getPurchasedItems()
     {
         // 顧客の購入品目、すなわち、`Item` の 'id' カラムが OrderItem の 'item_id' に合致するもの
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
                     ->via('orderItems');
     }
 
     public function getOrderItems()
     {
         // 顧客の OrderItems、すなわち、`Order` の `id` カラムが `OrderItem` の 'order_id' に合致するもの
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id'])
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id'])
                     ->via('orders');
     }
 
     public function getOrders()
     {
         // 顧客の注文
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1281,7 +1283,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1289,7 +1291,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1323,7 +1325,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1434,7 +1436,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // Customer は多くの Comment を持つ
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1449,7 +1451,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // Comment は 一つの Customer を持つ
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1533,7 +1535,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1544,7 +1546,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1610,7 +1612,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1705,7 +1707,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1736,7 +1738,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide-ja/db-migrations.md b/docs/guide-ja/db-migrations.md
index 76cdf9d38ba..ca850633ee9 100644
--- a/docs/guide-ja/db-migrations.md
+++ b/docs/guide-ja/db-migrations.md
@@ -187,6 +187,22 @@ class m150101_185401_create_news_table extends Migration
 
 カラムの型を定義するために利用できる全てのメソッドのリストは、[[yii\db\SchemaBuilderTrait]] の API ドキュメントで参照することが出来ます。
 
+> Info: 生成されるファイルのパーミッションと所有者は現在の環境によって決定されます。
+  これが原因でファイルにアクセス出来ない場合が生じ得ます。例えば、docker コンテナ内で作成されたマイグレーションのファイルをホストで編集するとそうなる場合があります。
+  このような場合には MigrateController の `newFileMode` および/または `newFileOwnership` を変更することが出来ます。
+  例えば、アプリケーション設定で次のように設定します。
+  ```php
+  <?php
+  return [
+      'controllerMap' => [
+          'migrate' => [
+              'class' => 'yii\console\controllers\MigrateController',
+              'newFileOwnership' => '1000:1000', # Default WSL user id
+              'newFileMode' => 0660,
+          ],
+      ],
+  ];
+  ```
 
 ## マイグレーションを生成する <span id="generating-migrations"></span>
 
diff --git a/docs/guide-ja/db-query-builder.md b/docs/guide-ja/db-query-builder.md
index 02221ea1edd..e779ba7a52f 100644
--- a/docs/guide-ja/db-query-builder.md
+++ b/docs/guide-ja/db-query-builder.md
@@ -716,6 +716,9 @@ $query = (new \yii\db\Query())
     ->all();
 ```
 
+インデックス付けが働くためには、[[yii\db\Query::indexBy()|indexBy()]] メソッドに渡されるカラム名が結果セットに存在する必要があります。
+そのことを保証するのは開発者の責任です。
+
 式の値によってインデックスするためには、[[yii\db\Query::indexBy()|indexBy()]] メソッドに無名関数を渡します。
 
 ```php
diff --git a/docs/guide-ja/helper-json.md b/docs/guide-ja/helper-json.md
new file mode 100644
index 00000000000..d3224447e8a
--- /dev/null
+++ b/docs/guide-ja/helper-json.md
@@ -0,0 +1,26 @@
+Json wp
+===========
+
+Json wp JSON GR[hуfR[hA̐ÓI\bh񋟂܂B
+`[[yii\helpers\Json::encode()]]` \bh̓GR[hEG[܂A
+ `[[yii\web\JsExpression]]` IuWFNǧ`ŕ\ꂽ JavaScript ̎̓GR[h܂B
+ł̓GR[h `JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE` ̃IvVōs܂B
+ڍׂɂĂ [PHP:json_encode](https://secure.php.net/manual/ja/function.json-encode.php) QƂĉB
+
+## `o <span id="pretty-print"></span>
+
+ł `[[yii\helpers\Json::encode()]]` \bh͐`ĂȂ JSON (Ȃ킿󔒖̂) o͂܂B
+lԂɂƂēǂ݂₷̂ɂ邽߂ɁAu`o pretty printingv ON ɂ邱Ƃo܂B
+
+> Note: `o͂͊J̃fobOɂ͖𗧂ł傤Aił͐܂B
+
+CX^XƂɐ`o͂Lɂ邽߂ɂ̓IvVw肷邱Ƃo܂BȂ킿 :
+
+```php
+$data = ['a' => 1, 'b' => 2];
+$json = yii\helpers\Json::encode($data, JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
+```
+JSON wp̐`o͂O[oɗLɂ邱Ƃo܂BႦ΁Aݒt@C index.php ̒ :
+```php
+yii\helpers\Json::$prettyPrint = YII_DEBUG; // fobOE[hł͐`o͂gp
+```
diff --git a/docs/guide-ja/helper-overview.md b/docs/guide-ja/helper-overview.md
index 9ae4e7df994..5e0818acdef 100644
--- a/docs/guide-ja/helper-overview.md
+++ b/docs/guide-ja/helper-overview.md
@@ -33,7 +33,7 @@ echo Html::encode('Test > test');
 - HtmlPurifier
 - Imagine (yii2-imagine エクステンションによって提供)
 - Inflector
-- Json
+- [Json](helper-json.md)
 - Markdown
 - StringHelper
 - [Url ヘルパ](helper-url.md)
diff --git a/docs/guide-ja/input-validation.md b/docs/guide-ja/input-validation.md
index 6850752d337..5847f003f45 100644
--- a/docs/guide-ja/input-validation.md
+++ b/docs/guide-ja/input-validation.md
@@ -469,7 +469,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide-ja/intro-yii.md b/docs/guide-ja/intro-yii.md
index fd50af34c31..606f1978658 100644
--- a/docs/guide-ja/intro-yii.md
+++ b/docs/guide-ja/intro-yii.md
@@ -31,7 +31,7 @@ Yii を他のフレームワークと比べると
   また、Yii の堅固なエクステンション・アーキテクチャを利用して、再配布可能なエクステンションを使用したり開発したりすることも出来ます。
 - 高性能であることは常に Yii の主たる目標です。
 
-Yii はワンマン・ショーではありません。Yii は [強力なコア開発チーム](http://www.yiiframework.com/team/) および
+Yii はワンマン・ショーではありません。Yii は [強力なコア開発チーム](https://www.yiiframework.com/team/) および
 Yii 開発に間断なく貢献してくれるプロフェッショナルの大きなコミュニティーに支えられたプロジェクトです。
 Yii 開発チームは、最新のウェブ開発の潮流と、他のフレームワークやプロジェクトに見出される最善のプラクティスと機能を、注意深く見守り続けています。
 他のところで見出された最善のプラクティスと機能で最も適切なものは、定期的にコア・フレームワークに組み込まれ、
diff --git a/docs/guide-ja/output-client-scripts.md b/docs/guide-ja/output-client-scripts.md
index edc10139759..f122af43bd7 100644
--- a/docs/guide-ja/output-client-scripts.md
+++ b/docs/guide-ja/output-client-scripts.md
@@ -56,7 +56,7 @@ $this->registerJs(
 ```php
 $this->registerJsFile(
     '@web/js/main.js',
-    ['depends' => [\yii\web\JqueryAsset::className()]]
+    ['depends' => [\yii\web\JqueryAsset::class]]
 );
 ```
 
@@ -95,7 +95,7 @@ CSS ファイルは次のようにして登録することが出来ます。
 
 ```php
 $this->registerCssFile("@web/css/themes/black-and-white.css", [
-    'depends' => [\yii\bootstrap\BootstrapAsset::className()],
+    'depends' => [\yii\bootstrap\BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
diff --git a/docs/guide-ja/rest-authentication.md b/docs/guide-ja/rest-authentication.md
index 4136aef146f..d057afff47f 100644
--- a/docs/guide-ja/rest-authentication.md
+++ b/docs/guide-ja/rest-authentication.md
@@ -57,7 +57,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -75,11 +75,11 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => CompositeAuth::className(),
+        'class' => CompositeAuth::class,
         'authMethods' => [
-            HttpBasicAuth::className(),
-            HttpBearerAuth::className(),
-            QueryParamAuth::className(),
+            HttpBasicAuth::class,
+            HttpBearerAuth::class,
+            QueryParamAuth::class,
         ],
     ];
     return $behaviors;
diff --git a/docs/guide-ja/rest-controllers.md b/docs/guide-ja/rest-controllers.md
index a17091ee302..bf265437c9d 100644
--- a/docs/guide-ja/rest-controllers.md
+++ b/docs/guide-ja/rest-controllers.md
@@ -69,7 +69,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -98,7 +98,7 @@ public function behaviors()
     
     // CORS フィルタを追加する
     $behaviors['corsFilter'] = [
-        'class' => \yii\filters\Cors::className(),
+        'class' => \yii\filters\Cors::class,
     ];
     
     // 認証フィルタを再度追加する
diff --git a/docs/guide-ja/runtime-sessions-cookies.md b/docs/guide-ja/runtime-sessions-cookies.md
index 1a5cf03f53c..d9a836d23f2 100644
--- a/docs/guide-ja/runtime-sessions-cookies.md
+++ b/docs/guide-ja/runtime-sessions-cookies.md
@@ -403,3 +403,4 @@ Yii 2.0.21 以降、[[yii\web\Cookie::sameSite]] 設定がサポートされて
 [PHP マニュアル](https://www.php.net/manual/ja/session.security.ini.php) で示されているように、`php.ini` にはセッションのセキュリティに関する重要な設定があります。
 推奨される設定を必ず適用して下さい。特に、PHP インストールのデフォルトでは有効にされていない
 `session.use_strict_mode` を有効にして下さい。
+この設定は [[yii\web\Session::useStrictMode]] を使って設定することも出来ます。
diff --git a/docs/guide-ja/security-authentication.md b/docs/guide-ja/security-authentication.md
index bb20efe823e..40ecc722b15 100644
--- a/docs/guide-ja/security-authentication.md
+++ b/docs/guide-ja/security-authentication.md
@@ -42,15 +42,16 @@ return [
   指定されたアクセス・トークンを使ってユーザ識別情報クラスのインスタンスを探します。
   単一の秘密のトークンでユーザを認証する必要がある場合 (ステートレスな RESTful アプリケーションなどの場合) に、このメソッドが使用されます。
 * [[yii\web\IdentityInterface::getId()|getId()]]: ユーザ識別情報クラスのインスタンスによって表されるユーザの ID を返します。
-* [[yii\web\IdentityInterface::getAuthKey()|getAuthKey()]]: クッキー・ベースのログインを検証するのに使用されるキーを返します。
-  このキーがログイン・クッキーに保存され、後でサーバ・サイドのキーと比較されて、
-  ログイン・クッキーが有効であることが確認されます。
+* [[yii\web\IdentityInterface::getAuthKey()|getAuthKey()]]: 自動ログインが有効にされている場合に、
+  セッションと自動ログインを検証するキーを返します。
 * [[yii\web\IdentityInterface::validateAuthKey()|validateAuthKey()]]: 
   クッキー・ベースのログイン・キーを検証するロジックを実装します。
 
 特定のメソッドが必要でない場合は、中身を空にして実装しても構いません。例えば、あなたのアプリケーションが純粋なステート・レス RESTful アプリケーションであるなら、
 実装する必要があるのは [[yii\web\IdentityInterface::findIdentityByAccessToken()|findIdentityByAccessToken()]] と
 [[yii\web\IdentityInterface::getId()|getId()]] だけであり、他のメソッドは全て中身を空にしておくことが出来ます。
+逆にあなたのアプリケーションがセッションのみの認証を使用する場合は、
+[[yii\web\IdentityInterface::findIdentityByAccessToken()|findIdentityByAccessToken()]] 以外の全てのメソッドを実装する必要があります。
 
 次の例では、[[yii\web\User::identityClass|ユーザ識別情報クラス]] は、`user` データベース・テーブルと関連付けられた
 [アクティブ・レコード](db-active-record.md) クラスとして実装されています。
@@ -99,7 +100,7 @@ class User extends ActiveRecord implements IdentityInterface
     }
 
     /**
-     * @return string 現在のユーザの認証キー
+     * @return string|null 現在のユーザの認証キー
      */
     public function getAuthKey()
     {
@@ -108,7 +109,7 @@ class User extends ActiveRecord implements IdentityInterface
 
     /**
      * @param string $authKey
-     * @return bool 認証キーが現在のユーザに対して有効か否か
+     * @return bool|null 認証キーが現在のユーザに対して有効か否か
      */
     public function validateAuthKey($authKey)
     {
@@ -117,9 +118,8 @@ class User extends ActiveRecord implements IdentityInterface
 }
 ```
 
-前述のように、`getAuthKey()` と `validateAuthKey()` は、
-あなたのアプリケーションがクッキー・ベースのログイン機能を使用する場合にのみ実装する必要があります。
-この場合、次のコードを使って、各ユーザに対して認証キーを生成して、`user` テーブルに保存しておくことが出来ます。
+次のコードを使って、各ユーザに対して認証キーを生成して、
+`user` テーブルに保存しておくことが出来ます。
 
 ```php
 class User extends ActiveRecord implements IdentityInterface
diff --git a/docs/guide-ja/security-authorization.md b/docs/guide-ja/security-authorization.md
index 84d1d023a1c..dc60b394f95 100644
--- a/docs/guide-ja/security-authorization.md
+++ b/docs/guide-ja/security-authorization.md
@@ -25,7 +25,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -70,7 +70,7 @@ ACF による権限付与のプロセスにおいては、現在の実行コン
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     ...
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('このページにアクセスする権限がありません。');
@@ -129,7 +129,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
@@ -538,7 +538,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'rules' => [
                 [
                     'allow' => true,
diff --git a/docs/guide-ja/security-best-practices.md b/docs/guide-ja/security-best-practices.md
index 558967dc2cc..24076635fea 100644
--- a/docs/guide-ja/security-best-practices.md
+++ b/docs/guide-ja/security-best-practices.md
@@ -353,3 +353,29 @@ return [
 
 > Note: 「ホスト・ヘッダ攻撃」に対する保護のためには、常に、フィルタの使用よりもウェブ・サーバの構成を優先すべきです。
   [[yii\filters\HostControl]] は、サーバの構成が出来ない場合にだけ使うべきものです。
+
+### SSL ピア検証を構成する
+
+SSL 証明書検証の問題、例えば :
+
+```
+cURL error 60: SSL certificate problem: unable to get local issuer certificate
+```
+
+または
+
+```
+stream_socket_enable_crypto(): SSL operation failed with code 1. OpenSSL Error messages: error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed
+```
+
+を解決する方法については、典型的な誤解があります。SSL ピア検証を無効化するよう示唆する間違った情報が数多くありますが、決して従ってはいけません。
+そんなことをすれば、マン・イン・ザ・ミドル型の攻撃を可能にします。そうするのではなく、PHP を適切に構成すべきです。
+
+1. [https://curl.haxx.se/ca/cacert.pem](https://curl.haxx.se/ca/cacert.pem) をダウンロードする。
+2. php.ini に以下を追加する。
+  ```
+  openssl.cafile="/path/to/cacert.pem"
+  curl.cainfo="/path/to/cacert.pem".
+  ```
+
+`cacert.pem` ファイルを最新に保つ必要があることに注意して下さい。
diff --git a/docs/guide-ja/security-passwords.md b/docs/guide-ja/security-passwords.md
index 45b4f0caa11..6049bd57cc2 100644
--- a/docs/guide-ja/security-passwords.md
+++ b/docs/guide-ja/security-passwords.md
@@ -3,7 +3,7 @@
 
 ほとんどの開発者はパスワードを平文テキストで保存してはいけないということを知っていますが、パスワードを `md5` や `sha1`
 でハッシュしてもまだ安全だと思っている開発者がたくさんいます。かつては、前述のハッシュ・アルゴリズムを使えば十分であった時もありましたが、
-現代のハードウェアをもってすれば、そのようなハッシュはブルート・フォース・アタックを使って非常に簡単に復元することが可能です。
+それらのハッシュや更に強力なハッシュでも、現代のハードウェアをもってすればブルート・フォース・アタックを使って非常に簡単にクラックすることが可能です。
 
 最悪のシナリオ (アプリケーションに侵入された場合) であっても、ユーザのパスワードについて強化されたセキュリティを提供することが出来るように、
 ブルート・フォース・アタックに対する耐性が強いハッシュ・アルゴリズムを使う必要があります。現在、最善の選択は `bcrypt` です。
diff --git a/docs/guide-ja/start-installation.md b/docs/guide-ja/start-installation.md
index 0a53d4f84a0..1444827d24d 100644
--- a/docs/guide-ja/start-installation.md
+++ b/docs/guide-ja/start-installation.md
@@ -85,7 +85,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
 アーカイブ・ファイルから Yii をインストールするには、三つの手順を踏みます。
 
-1. [yiiframework.com](http://www.yiiframework.com/download/) からアーカイブ・ファイルをダウンロードします。
+1. [yiiframework.com](https://www.yiiframework.com/download/) からアーカイブ・ファイルをダウンロードします。
 2. ダウンロードしたファイルをウェブ・アクセス可能なフォルダに展開します。
 3. `config/web.php` ファイルを編集して、`cookieValidationKey` という構成情報の項目に秘密キーを入力します
    (Composer を使って Yii をインストールするときは、これは自動的に実行されます)。
@@ -114,9 +114,9 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 アセットをインストールする <span id="installing-assets"></span>
 --------------------------
 
-Yii は、アセット (CSS および JavaScript) ライブラリのインストールについて [Bower](http://bower.io/) および/または [NPM](https://www.npmjs.org/) のパッケージに依存しています。
+Yii は、アセット (CSS および JavaScript) ライブラリのインストールについて [Bower](http://bower.io/) および/または [NPM](https://www.npmjs.com/) のパッケージに依存しています。
 Yii はこれらのライブラリを取得するのに Composer を使って、PHP と CSS/JavaScript のパッケージ・バージョンを同時に解決できるようにしています。
-このことは、[asset-packagist.org](https://asset-packagist.org) または [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) を使用することによって達成されます。
+このことは、[asset-packagist.org](https://asset-packagist.org) または [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) を使用することによって達成されます。
 詳細は [アセットのドキュメント](structure-assets.md) を参照して下さい。
 
 あなたは、アセットの管理をネイティブの Bower/NPM クライアントで行ったり、CND を使ったり、アセットのインストールを完全に避けたりしたいかも知れません。
diff --git a/docs/guide-ja/start-looking-ahead.md b/docs/guide-ja/start-looking-ahead.md
index 9f0ef2056ad..8db162f454b 100644
--- a/docs/guide-ja/start-looking-ahead.md
+++ b/docs/guide-ja/start-looking-ahead.md
@@ -9,24 +9,24 @@ Gii をコード生成に使うと、ウェブ開発のプロセスの大部分
 このセクションでは、Yii フレームワークを使うときの生産性を更に高めるために利用できるリソースについてまとめます。
 
 * ドキュメント
-    - [決定版ガイド](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [決定版ガイド](https://www.yiiframework.com/doc-2.0/guide-README.html):
       名前が示すように、このガイドは Yii がどのように動作すべきものかを正確に記述し、Yii を使用するについての全般的な手引きを提供するものです。
       これは唯一の最も重要な Yii のチュートリアルであり、Yii のコードを少しでも書く前にあなたが読まなければならないものです。
-    - [クラス・リファレンス](http://www.yiiframework.com/doc-2.0/index.html):
+    - [クラス・リファレンス](https://www.yiiframework.com/doc-2.0/index.html):
       これは Yii によって提供される全てのクラスの使用法を記述しています。
       主として、コードを書いている時に、特定のクラス、メソッド、プロパティについて理解したい場合に読まれるべきものです。
       クラス・リファレンスの使用は、フレームワーク全体の文脈的な理解が出来てからにするのが最善です。
-    - [Wiki の記事](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Wiki の記事](https://www.yiiframework.com/wiki/?tag=yii2):
       Wiki の記事は、Yii のユーザが自身の経験に基づいて書いたものです。
       ほとんどの記事は、料理本のレシピのように書かれており、特定の問題を Yii を使って解決する方法を示しています。
       これらの記事の品質は決定版ガイドほどには良くないかもしれませんが、より広範なトピックをカバーしていることと、たいていは即座に使えるソリューションを提供してくれることにおいて有用なものです。
-    - [書籍](http://www.yiiframework.com/doc/)
-* [エクステンション](http://www.yiiframework.com/extensions/):
+    - [書籍](https://www.yiiframework.com/books/)
+* [エクステンション](https://www.yiiframework.com/extensions/):
   Yii は、ユーザによって作られた数千におよぶエクステンションのライブラリを誇りとしています。
   エクステンションはあなたのアプリケーションに簡単に組み込むことが出来、そうすることでアプリケーションの開発作業をより一層速くて簡単なものにします。
 * コミュニティ
-    - フォーラム: <http://www.yiiframework.com/forum/>
-    - IRC チャット: freenode ネットワーク (<irc://irc.freenode.net/yii>) の #yii チャンネル
+    - フォーラム: <https://forum.yiiframework.com/>
+    - IRC チャット: Libera ネットワーク (<ircs://irc.libera.chat:6697/yii>) の #yii チャンネル
     - Slack チャンネル:  <https://join.slack.com/t/yii/shared_invite/enQtMzQ4MDExMDcyNTk2LTc0NDQ2ZTZhNjkzZDgwYjE4YjZlNGQxZjFmZDBjZTU3NjViMDE4ZTMxNDRkZjVlNmM1ZTA1ODVmZGUwY2U3NDA>
     - Gitter チャット: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
diff --git a/docs/guide-ja/start-workflow.md b/docs/guide-ja/start-workflow.md
index 5a0a61293e4..f922b421f94 100644
--- a/docs/guide-ja/start-workflow.md
+++ b/docs/guide-ja/start-workflow.md
@@ -42,7 +42,7 @@ Yii のインストールが終ると、実際に動く Yii のアプリケー
 
 アプリケーションにとって最も重要なディレクトリとファイルは (アプリケーションのルート・ディレクトリが `basic` だと仮定すると) 以下の通りです。
 
-```
+```js
 basic/                  アプリケーションのベース・パス
     composer.json       Composer によって使用される。パッケージ情報を記述
     config/             アプリケーションその他の構成情報を格納
diff --git a/docs/guide-ja/structure-assets.md b/docs/guide-ja/structure-assets.md
index f0f9083bb22..1d0ec6af9a4 100644
--- a/docs/guide-ja/structure-assets.md
+++ b/docs/guide-ja/structure-assets.md
@@ -201,13 +201,13 @@ class FontAwesomeAsset extends AssetBundle
 }  
 ```
 
-上記の例は、["fontawesome" パッケージ](http://fontawesome.io/) のためのアセット・バンドルを定義するものです。
+上記の例は、["fontawesome" パッケージ](https://fontawesome.com/) のためのアセット・バンドルを定義するものです。
 発行オプション `only` を指定して、`fonts` と `css` サブ・ディレクトリだけが発行されるようにしています。
 
 
 ### Bower と NPM のアセットのインストール <span id="bower-npm-assets"></span>
 
-ほとんどの JavaScript/CSS パッケージは、[Bower](http://bower.io/) および/または [NPM](https://www.npmjs.org/) によって管理されています。
+ほとんどの JavaScript/CSS パッケージは、[Bower](http://bower.io/) および/または [NPM](https://www.npmjs.com/) によって管理されています。
 PHP の世界には PHP の依存を管理する Composer がありますが、PHP のパッケージと全く同じように
 `composer.json` を使って Bower のパッケージも NPM のパッケージもロードすることが可能です。
 
@@ -257,7 +257,7 @@ asset-packagist と異なって、composer-asset-plugin はアプリケーショ
 composer global require "fxp/composer-asset-plugin:^1.4.1"
 ```
 
-このコマンドによって [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) がグローバルにインストールされ、
+このコマンドによって [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) がグローバルにインストールされ、
 Bower と NPM パッケージの依存関係を Composer によって管理することが出来るようになります。
 プラグインがインストールされた後は、あなたのコンピュータ上の全てのプロジェクトが `composer.json` を通じて Bower と NPM パッケージをサポートすることが出来ます。
 
@@ -610,14 +610,14 @@ class AppAsset extends AssetBundle
 Yii はファイル名の拡張子を使って、アセットが使っている拡張構文を識別します。
 デフォルトでは、下記の構文とファイル名拡張子を認識します。
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
 Yii はインストールされたプリ・プロセッサ・ツールに頼ってアセットを変換します。
-例えば、[LESS](http://lesscss.org/) を使うためには、`lessc` プリ・プロセッサ・コマンドをインストールしなければなりません。
+例えば、[LESS](https://lesscss.org/) を使うためには、`lessc` プリ・プロセッサ・コマンドをインストールしなければなりません。
 
 下記のように [[yii\web\AssetManager::converter]] を構成することで、
 プリ・プロセッサ・コマンドとサポートされる拡張構文をカスタマイズすることが出来ます。
diff --git a/docs/guide-ja/structure-entry-scripts.md b/docs/guide-ja/structure-entry-scripts.md
index 39e88403c68..45e600def34 100644
--- a/docs/guide-ja/structure-entry-scripts.md
+++ b/docs/guide-ja/structure-entry-scripts.md
@@ -57,9 +57,9 @@ $config = require __DIR__ . '/../config/web.php';
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-ja/structure-extensions.md b/docs/guide-ja/structure-extensions.md
index 7de1c538093..b613ff82155 100644
--- a/docs/guide-ja/structure-extensions.md
+++ b/docs/guide-ja/structure-extensions.md
@@ -127,9 +127,9 @@ Image::thumbnail('@webroot/img/test-image.jpg', 120, 120)
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -184,8 +184,8 @@ Yii のアプリケーションは、このファイルによって、どんな
 それぞれの依存パッケージについて、適切なバージョン制約 (例えば `1.*` や `@stable`) を指定することも忘れてはなりません。
 あなたのエクステンションを安定バージョンとしてリリースする場合は、安定した依存パッケージを使ってください。
 
-たいていの JavaScript/CSS パッケージは、Composer ではなく、[Bower](http://bower.io/) および/または [NPM](https://www.npmjs.org/) を使って管理されています。
-Yii は [Composer アセット・プラグイン](https://github.com/francoispluchino/composer-asset-plugin) を使って、この種のパッケージを Composer によって管理することを可能にしています。
+たいていの JavaScript/CSS パッケージは、Composer ではなく、[Bower](http://bower.io/) および/または [NPM](https://www.npmjs.com/) を使って管理されています。
+Yii は [Composer アセット・プラグイン](https://github.com/fxpio/composer-asset-plugin) を使って、この種のパッケージを Composer によって管理することを可能にしています。
 あなたのエクステンションが Bower パッケージに依存している場合でも、次のように、
 `composer.json` に依存パッケージをリストアップすることが簡単に出来ます。
 
@@ -383,7 +383,7 @@ Composer レポジトリに新しいリリースについて通知するだけ
   `yiisoft/yii2-apidoc` エクステンションが、コードのコメントに基づいて綺麗な API ドキュメントを生成するツールを提供しています。
 
 > Info: これは要求ではありませんが、あなたのエクステンションも一定のコーディング・スタイルを守るのが良いと思います。
-  [コア・フレームワーク・コード・スタイル](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style) を参照してください。
+  [コア・フレームワーク・コード・スタイル](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md) を参照してください。
 
 
 ## コア・エクステンション <span id="core-extensions"></span>
@@ -406,7 +406,7 @@ Yii は下記のコア・エクステンション (または ["公式エクス
   このエクステンションが使われると、全てのページの末尾にデバッガ・ツールバーが表示されます。
   このエクステンションは、より詳細なデバッグ情報を表示する一連のスタンドアロン・ページも提供します。
 - [yiisoft/yii2-elasticsearch](https://github.com/yiisoft/yii2-elasticsearch):
-  [Elasticsearch](http://www.elasticsearch.org/) の使用に対するサポートを提供します。
+  [Elasticsearch](https://www.elastic.co/) の使用に対するサポートを提供します。
   基本的なクエリ/サーチのサポートを含むだけでなく、Elasticsearch にアクティブ・レコードを保存することを可能にする
   [アクティブ・レコード](db-active-record.md) パターンをも実装しています。
 - [yiisoft/yii2-faker](https://github.com/yiisoft/yii2-faker):
@@ -439,7 +439,7 @@ Yii は下記のコア・エクステンション (または ["公式エクス
 - [yiisoft/yii2-swiftmailer](https://github.com/yiisoft/yii2-swiftmailer):
   [swiftmailer](http://swiftmailer.org/) に基づいたメール送信機能を提供します。
 - [yiisoft/yii2-twig](https://github.com/yiisoft/yii2-twig):
-  [Twig](http://twig.sensiolabs.org/) に基づいたテンプレート・エンジンを提供します。
+  [Twig](https://twig.symfony.com/) に基づいたテンプレート・エンジンを提供します。
 
 下記の公式エクステンションは Yii 2.1 以上のためのものです。
 これらは、Yii 2.0 ではコア・フレームワークに含まれていますので、インストールする必要はありません。.
diff --git a/docs/guide-ja/structure-filters.md b/docs/guide-ja/structure-filters.md
index 1eb078b3d6c..8cfd9236ff5 100644
--- a/docs/guide-ja/structure-filters.md
+++ b/docs/guide-ja/structure-filters.md
@@ -121,7 +121,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // 認証されたユーザに許可する
@@ -157,7 +157,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -183,7 +183,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -210,7 +210,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -241,7 +241,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -269,11 +269,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -307,7 +307,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -339,7 +339,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -366,7 +366,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -387,7 +387,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-ja/structure-models.md b/docs/guide-ja/structure-models.md
index 6eb85db4051..e469858faf0 100644
--- a/docs/guide-ja/structure-models.md
+++ b/docs/guide-ja/structure-models.md
@@ -477,8 +477,8 @@ public function fields()
     ];
 }
 
-// いくつかのフィールドを除外する方法。親の実装を継承しつつ、公開すべきでないフィールドは
-// 除外したいときに適している。
+// いくつかのフィールドを除外する方法。親の実装を継承しつつ、公開すべきでないフィールドを
+// 除外したいときに最適。
 public function fields()
 {
     $fields = parent::fields();
diff --git a/docs/guide-ja/structure-modules.md b/docs/guide-ja/structure-modules.md
index f94f2bdd28f..99a16445222 100644
--- a/docs/guide-ja/structure-modules.md
+++ b/docs/guide-ja/structure-modules.md
@@ -14,7 +14,7 @@
 このディレクトリの中に、ちょうどアプリケーションの場合と同じように、`controllers`、`models`、`views` のようなサブ・ディレクトリが存在して、コントローラ、モデル、ビュー、その他のコードを収納しています。
 次の例は、モジュール内の中身を示すものです。
 
-```
+```js
 forum/
     Module.php                   モジュール・クラス・ファイル
     controllers/                 コントローラ・クラス・ファイルを含む
diff --git a/docs/guide-ja/structure-views.md b/docs/guide-ja/structure-views.md
index c2e4645c629..87056ba9d85 100644
--- a/docs/guide-ja/structure-views.md
+++ b/docs/guide-ja/structure-views.md
@@ -544,7 +544,7 @@ Yii は舞台裏で二つのステップを踏んで、特定のコントロー
 * [フラグメント・キャッシュ](caching-fragment.md): ウェブ・ページの中の断片をキャッシュすることを可能にします。
 * [クライアント・スクリプトの取り扱い](output-client-scripts.md): CSS と JavaScript の登録とレンダリングをサポートします。
 * [アセット・バンドルの取り扱い](structure-assets.md): [アセット・バンドル](structure-assets.md) の登録とレンダリングをサポートします。
-* [代替のテンプレート・エンジン](tutorial-template-engines.md): [Twig](http://twig.sensiolabs.org/)、[Smarty](http://www.smarty.net/) など、
+* [代替のテンプレート・エンジン](tutorial-template-engines.md): [Twig](https://twig.symfony.com/)、[Smarty](https://www.smarty.net/) など、
   他のテンプレート・エンジンを使用することを可能にします。
 
 次に挙げるマイナーではあっても有用な諸機能は、ウェブ・ページを開発するときに頻繁に使用するでしょう。
@@ -616,14 +616,14 @@ $this->registerLinkTag([
     'title' => 'Yii ライブ・ニューズ',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 上記のコードは、次の結果になります。
 
 ```html
-<link title="Yii ライブ・ニューズ" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Yii ライブ・ニューズ" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 [[yii\web\View::registerMetaTag()|registerMetaTag()]] と同じように、[[yii\web\View::registerLinkTag()|registerLinkTag()]] を呼ぶときにキーを指定すると、
diff --git a/docs/guide-ja/test-environment-setup.md b/docs/guide-ja/test-environment-setup.md
index c999bc0f664..4c62e24bfea 100644
--- a/docs/guide-ja/test-environment-setup.md
+++ b/docs/guide-ja/test-environment-setup.md
@@ -17,7 +17,7 @@ Yii 2 は [`Codeception`](https://github.com/Codeception/Codeception) テスト
 Codeception をインストールすることが出来ます。
 
 ```
-composer require codeception/codeception
-composer require codeception/specify
-composer require codeception/verify
+composer require --dev codeception/codeception
+composer require --dev codeception/specify
+composer require --dev codeception/verify
 ```
diff --git a/docs/guide-ja/test-fixtures.md b/docs/guide-ja/test-fixtures.md
index 5f87cf75567..e7f1323f771 100644
--- a/docs/guide-ja/test-fixtures.md
+++ b/docs/guide-ja/test-fixtures.md
@@ -130,7 +130,7 @@ class UserProfileTest extends \Codeception\Test\Unit
     {
         return [
             'profiles' => [
-                'class' => UserProfileFixture::className(),
+                'class' => UserProfileFixture::class,
                 // フィクスチャ・データは tests/_data/user.php に配置されている
                 'dataFile' => codecept_data_dir() . 'user.php'
             ],
diff --git a/docs/guide-ja/tutorial-core-validators.md b/docs/guide-ja/tutorial-core-validators.md
index 100c1c1e51b..317dd432451 100644
--- a/docs/guide-ja/tutorial-core-validators.md
+++ b/docs/guide-ja/tutorial-core-validators.md
@@ -82,7 +82,7 @@ public function rules()
   このバリデータが属性を検証するのに使用されるとき、このプロパティのデフォルト値はその属性の名前に接尾辞
   `_repeat` を付けた名前になります。
   例えば、検証される属性が `password` であれば、このプロパティのデフォルト値は `password_repeat` となります。
-- `compareValue`: 入力値が比較される定数値。
+- `compareValue`: 入力値が比較される定数値（または値を返すクロージャ）。
   このプロパティと `compareAttribute` の両方が指定された場合は、このプロパティが優先されます。
 - `operator`: 比較演算子。デフォルト値は `==` で、入力値が `compareAttribute` の値または `compareValue` と等しいことを検証することを意味します。
   次の演算子がサポートされています。
@@ -156,6 +156,7 @@ compare バリデータは、文字列や数値を比較するためにしか使
 
 `timestampAttribute` を使う場合、入力値が UNIX タイムスタンプに変換されること、そして、UNIX タイムスタンプは定義により UTC であることに注意して下さい。
 すなわち、[[yii\validators\DateValidator::timeZone|入力のタイム・ゾーン]] から UTC への変換が実行されます。
+（この動作は、2.0.39 以降では、[[yii\validators\DateValidator::$defaultTimeZone|$defaultTimeZone]] を設定して変更することが出来ます）
 
 - バージョン 2.0.4 以降では、タイムスタンプの [[yii\validators\DateValidator::$min|最小値]] または
   [[yii\validators\DateValidator::$max|最大値]] を指定することも出来ます。
@@ -191,8 +192,8 @@ compare バリデータは、文字列や数値を比較するためにしか使
 このバリデータはデータを検証しません。
 その代りに、検証される属性が空のときに、その属性にデフォルト値を割り当てます。
 
-- `value`: デフォルト値、または、デフォルト値を返す PHP コーラブル。
-  検証される属性が空のときにこのデフォルト値が割り当てられます。PHP コーラブルのシグニチャは、次のものでなければなりません。
+- `value`: デフォルト値、または、デフォルト値をコールバックとして返すクロージャ。
+  検証される属性が空のときにこの値が割り当てられます。クロージャのシグニチャは、次のものでなければなりません。
 
 ```php
 function foo($model, $attribute) {
@@ -270,24 +271,49 @@ function foo($model, $attribute) {
 ```php
 [
     // a1 の入力値が a1 のカラムに存在する必要がある
+    // すなわち、a1 = 1 は、"a1" カラムに 1 の値が存在する場合に有効
     ['a1', 'exist'],
+    // 以下と同義
+    ['a1', 'exist', 'targetAttribute' => 'a1'],
+    ['a1', 'exist', 'targetAttribute' => ['a1' => 'a1']],
 
     // a1 の入力値が a2 のカラムに存在する必要がある
+    // すなわち、a1 = 2 は、"a2" カラムに 2 の値が存在する場合に有効
     ['a1', 'exist', 'targetAttribute' => 'a2'],
+    // 以下と同義
+    ['a1', 'exist', 'targetAttribute' => ['a1' => 'a2']],
+
+    // a2 の入力値が a2 のカラムに存在する必要がある。a1 がエラー・メッセージを受ける
+    // すなわち、a2 = 2 は、"a2" カラムに 2 の値が存在する場合に有効
+    ['a1', 'exist', 'targetAttribute' => ['a2']],
+    // 以下と同義
+    ['a1', 'exist', 'targetAttribute' => ['a2' => 'a2']],
 
     // a1 と a2 の両方が存在する必要がある。両者はともにエラー・メッセージを受け取る
+    // すなわち、a1 = 3, a2 = 4 は、"a1" カラムに 3, "a2" カラムに 4 が存在する場合に有効
     [['a1', 'a2'], 'exist', 'targetAttribute' => ['a1', 'a2']],
+    // 以下と同義
+    [['a1', 'a2'], 'exist', 'targetAttribute' => ['a1' => 'a1', 'a2' => 'a2']],
 
     // a1 と a2 の両方が存在する必要がある。a1 のみがエラー・メッセージを受け取る
+    // すなわち、a1 = 5, a2 = 6 は、"a1" カラムに 5, "a2" カラムに 6 が存在する場合に有効
     ['a1', 'exist', 'targetAttribute' => ['a1', 'a2']],
+    // 以下と同義
+    ['a1', 'exist', 'targetAttribute' => ['a1' => 'a1', 'a2' => 'a2']],
 
     // a2 の値が a2 のカラム、a1 の値が a3 のカラムに存在する必要がある。a1 がエラー・メッセージを受け取る
+    // すなわち、a1 = 7, a2 = 8 は、"a3" カラムに 7, "a2" カラムに 8 が存在する場合に有効
     ['a1', 'exist', 'targetAttribute' => ['a2', 'a1' => 'a3']],
+    // 以下と同義
+    ['a1', 'exist', 'targetAttribute' => ['a2' => 'a2', 'a1' => 'a3']],
 
     // a1 が存在する必要がある。a1 が配列である場合は、その全ての要素が存在する必要がある
     ['a1', 'exist', 'allowArray' => true],
+    // すなわち、a1 = 9 は、"a1" カラムに 9 が存在する場合に有効
+    //           a1 = [9, 10] は、"a1" カラムに 9 と 10 が存在する場合に有効
 
     // type_id が ProductType クラスで定義されているテーブルの id カラムに存在する必要がある
+    // すなわち、type_id = 1 は ProductType のテーブルの "id" カラムに 1 が存在する場合に有効
     ['type_id', 'exist', 'targetClass' => ProductType::class, 'targetAttribute' => ['type_id' => 'id']],    
     
     // 同上。定義済みの "type" リレーションを使用。
@@ -310,9 +336,18 @@ function foo($model, $attribute) {
   複数のカラムの存在を同時に検証するために配列を使うことが出来ます。
   配列の値は存在を検証するのに使用される属性であり、配列のキーは入力値が検証される属性です。
   キーと値が同じ場合は、値だけを指定することが出来ます。
+  検証されるモデルが ModelA であり、検証に使用されるモデルが ModelB であるとすると、
+  下記のように `targetAttribute` を構成することが出来ます。
+    - `null` => ModelA の現在検証されている属性の値が ModelB の同名の属性の保存されている値に対してチェックされる
+    - `'a'` => ModelA の現在検証されている属性の値が ModelB の属性 "a" の保存されている値に対してチェックされる
+    - `['a']` => ModelA の属性 "a" の値が ModelB の属性 "a" の保存されている値に対してチェックされる
+    - `['a' => 'a']` => 同上
+    - `['a', 'b']` => ModelA の属性 "a" の値が ModelB の属性 "a" の保存されている値に対してチェックされ、
+    同時に、ModelA の属性 "b" の値が ModelB の属性 "b" の保存されている値に対してチェックされる
+    - `['a' => 'b']` => ModelA の属性 "a" の値が ModelB の属性 "b" の保存されている値に対してチェックされる
+- `targetRelation`: バージョン 2.0.14 以降は簡便な `targetRelation` 属性が使えます。これは指定されたリレーションの定義によって `targetClass` と `targetAttribute` の属性をオーバーライドするものです。
 - `filter`: 入力値の存在をチェックするのに使用される DB クエリに適用される追加のフィルタ。
-  これには、文字列、または、追加のクエリ条件を表現する配列を使うことが出来ます
-  (クエリ条件の書式については、[[yii\db\Query::where()]] を参照してください)。
+  これには、追加のクエリ条件を表現する文字列または配列を使うことが出来ます (クエリ条件の書式については、[[yii\db\Query::where()]] を参照してください)。
   または、`function ($query)` というシグニチャを持つ無名関数でも構いません。
   `$query` は関数の中で修正できる [[yii\db\Query|Query]] オブジェクトです。
 - `allowArray`: 入力値が配列であることを許容するか否か。デフォルト値は `false`。
@@ -638,19 +673,34 @@ IPv4 アドレス `192.168.10.128` も、制約の前にリストされている
 ```php
 [
     // a1 の入力値が a1 のカラムにおいてユニークである必要がある
+    // すなわち、a1 = 1 は、"a1" カラムに 1 の値が存在しない場合に有効
     ['a1', 'unique'],
+    // 以下と同義
+    ['a1', 'unique', 'targetAttribute' => 'a1'],
+    ['a1', 'unique', 'targetAttribute' => ['a1' => 'a1']],
 
     // a1 の入力値が a2 のカラムにおいてユニークである必要がある
+    // すなわち、a1 = 2 は、"a2" カラムに 2 の値が存在しない場合に有効
     ['a1', 'unique', 'targetAttribute' => 'a2'],
+    // 以下と同義
+    ['a1', 'unique', 'targetAttribute' => ['a1' => 'a2']],
 
     // a1 と a2 の両方がユニークである必要がある。両者がともにエラー・メッセージを受け取る
+    // すなわち、a1 = 3, a2 = 4 は、"a1" カラムに 3 の値が存在せず、同時に、"a2" カラムに 4 の値が存在しない場合に有効
     [['a1', 'a2'], 'unique', 'targetAttribute' => ['a1', 'a2']],
+    // 以下と同義
+    [['a1', 'a2'], 'unique', 'targetAttribute' => ['a1' => 'a1', 'a2' => 'a2']],
 
     // a1 と a2 の両方がユニークである必要がある。a1 のみがエラー・メッセージを受け取る
     ['a1', 'unique', 'targetAttribute' => ['a1', 'a2']],
 
     // a2 の値が a2 のカラム、a1 の値が a3 のカラムにおいてユニークである必要がある。a1 がエラー・メッセージを受け取る
+    // すなわち、a1 = 5, a2 = 6 は、"a3" カラムに 5 の値が存在せず、同時に、"a2" カラムに 6 の値が存在しない場合に有効
     ['a1', 'unique', 'targetAttribute' => ['a2', 'a1' => 'a3']],
+    
+    // type_id が ProductType クラスで定義されているテーブルの "id" カラムにおいてユニークである必要がある
+    // すなわち、type_id = 1 は ProductType のテーブルの "id" カラムに 1 が存在しない場合に有効
+    ['type_id', 'unique', 'targetClass' => ProductType::class, 'targetAttribute' => 'id'],
 ]
 ```
 
@@ -665,10 +715,19 @@ IPv4 アドレス `192.168.10.128` も、制約の前にリストされている
   複数のカラムのユニーク性を同時に検証するために配列を使うことが出来ます。
   配列の値はユニーク性を検証するのに使用される属性であり、配列のキーはその入力値が検証される属性です。
   キーと値が同じ場合は、値だけを指定することが出来ます。
-- `filter`: 入力値のユニーク性をチェックするのに使用される DB クエリに適用される追加のフィルタ。
-  これには、文字列、または、追加のクエリ条件を表現する配列を使うことが出来ます
-  (クエリ条件の書式については、[[yii\db\Query::where()]] を参照してください)。
-  または、`function ($query)` というシグニチャを持つ無名関数でも構いません。`$query` は関数の中で修正できる [[yii\db\Query|Query]] オブジェクトです。
+  検証されるモデルが ModelA であり、検証に使用されるモデルが ModelB であるとすると、
+  下記のように `targetAttribute` を構成することが出来ます。
+    - `null` => ModelA の現在検証されている属性の値が ModelB の同名の属性の保存されている値に対してチェックされる
+    - `'a'` => ModelA の現在検証されている属性の値が ModelB の属性 "a" の保存されている値に対してチェックされる
+    - `['a']` => ModelA の属性 "a" の値が ModelB の属性 "a" の保存されている値に対してチェックされる
+    - `['a' => 'a']` => 同上
+    - `['a', 'b']` => ModelA の属性 "a" の値が ModelB の属性 "a" の保存されている値に対してチェックされ、
+    同時に、ModelA の属性 "b" の値が ModelB の属性 "b" の保存されている値に対してチェックされる
+    - `['a' => 'b']` => ModelA の属性 "a" の値が ModelB の属性 "b" の保存されている値に対してチェックされる
+- `filter`: 入力値がユニークであることをチェックするのに使用される DB クエリに適用される追加のフィルタ。
+  これには、追加のクエリ条件を表現する文字列または配列を使うことが出来ます (クエリ条件の書式については、[[yii\db\Query::where()]] を参照してください)。
+  これは、または、`function ($query)` というシグニチャを持つ無名関数でも構いません。
+  `$query` は関数の中で修正できる [[yii\db\Query|Query]] オブジェクトです。
 
 
 ## [[yii\validators\UrlValidator|url]] <span id="url"></span>
diff --git a/docs/guide-ja/tutorial-template-engines.md b/docs/guide-ja/tutorial-template-engines.md
index 9f7dd9e042d..d57c7a2d0e3 100644
--- a/docs/guide-ja/tutorial-template-engines.md
+++ b/docs/guide-ja/tutorial-template-engines.md
@@ -1,7 +1,7 @@
 テンプレートエンジンを使う
 ==========================
 
-デフォルトでは、Yii は PHP をテンプレート言語として使いますが、[Twig](http://twig.sensiolabs.org/) や
+デフォルトでは、Yii は PHP をテンプレート言語として使いますが、[Twig](https://twig.symfony.com/) や
 [Smarty](http://www.smarty.net/) などの他のレンダリング・エンジンをサポートするように Yii を構成することが出来ます。
 
 `view` コンポーネントがビューのレンダリングに責任を持っています。
diff --git a/docs/guide-ja/tutorial-yii-integration.md b/docs/guide-ja/tutorial-yii-integration.md
index 5b73fbdda66..18fcebd040d 100644
--- a/docs/guide-ja/tutorial-yii-integration.md
+++ b/docs/guide-ja/tutorial-yii-integration.md
@@ -93,7 +93,7 @@ Bower および NPM のパッケージのインストールを阻止する特別
 Composer に関する更なる情報や、インストールの過程で出現しうる問題に対する解決方法については、
 一般的な [Composer によるインストール](start-installation.md#installing-via-composer) のセクションを参照してください。
 
-そうでない場合は、Yii のリリースを [ダウンロード](http://www.yiiframework.com/download/) して、
+そうでない場合は、Yii のリリースを [ダウンロード](https://www.yiiframework.com/download/) して、
 `BasePath/vendor` ディレクトリに解凍してください。
 
 次に、サードパーティのシステムのエントリ・スクリプトを修正します。次のコードをエントリ・スクリプトの先頭に追加してください。
diff --git a/docs/guide-pl/README.md b/docs/guide-pl/README.md
index 0001c16c4d9..1e057c178b3 100644
--- a/docs/guide-pl/README.md
+++ b/docs/guide-pl/README.md
@@ -1,7 +1,7 @@
 Przewodnik po Yii 2.0
 =====================
 
-Ten poradnik udostępniony jest na [Warunkach dokumentacji Yii](http://www.yiiframework.com/doc/terms/).
+Ten poradnik udostępniony jest na [Warunkach dokumentacji Yii](https://www.yiiframework.com/doc/terms/).
 
 Wszelkie prawa zastrzeżone.
 
@@ -18,6 +18,7 @@ Wstęp
 Pierwsze kroki
 --------------
 
+* [Co musisz wiedzieć](start-prerequisites.md)
 * [Instalacja Yii](start-installation.md)
 * [Uruchamianie aplikacji](start-workflow.md)
 * [Witaj świecie](start-hello.md)
@@ -40,7 +41,7 @@ Struktura aplikacji
 * [Moduły](structure-modules.md)
 * [Filtry](structure-filters.md)
 * [Widżety](structure-widgets.md)
-* [Assety (Assets)](structure-assets.md)
+* [Zasoby (Assets)](structure-assets.md)
 * [Rozszerzenia](structure-extensions.md)
 
 
@@ -62,12 +63,12 @@ Kluczowe koncepcje
 
 * [Komponenty](concept-components.md)
 * [Właściwości](concept-properties.md)
-* [Eventy](concept-events.md)
-* [Behaviory](concept-behaviors.md)
+* [Zdarzenia (Events)](concept-events.md)
+* [Zachowania (Behaviors)](concept-behaviors.md)
 * [Konfiguracje](concept-configurations.md)
 * [Aliasy](concept-aliases.md)
 * [Autoładowanie klas](concept-autoloading.md)
-* [Lokator usług](concept-service-locator.md)
+* [Lokator usług (Service Locator)](concept-service-locator.md)
 * [Kontener wstrzykiwania zależności (DI Container)](concept-di-container.md)
 
 
@@ -78,10 +79,10 @@ Praca z bazami danych
 * [Konstruktor kwerend](db-query-builder.md): Zapytania do bazy danych z użyciem warstwy abstrakcyjnej.
 * [Active Record](db-active-record.md): Active Record ORM, otrzymywanie i manipulacja rekordami oraz definiowanie relacji.
 * [Migracje](db-migrations.md): Użycie systemu kontroli wersji bazy danych do pracy z wieloma środowiskami.
-* [Sphinx](https://github.com/yiisoft/yii2-sphinx/blob/master/docs/guide/README.md)
-* [Redis](https://github.com/yiisoft/yii2-redis/blob/master/docs/guide/README.md)
-* [MongoDB](https://github.com/yiisoft/yii2-mongodb/blob/master/docs/guide/README.md)
-* [ElasticSearch](https://github.com/yiisoft/yii2-elasticsearch/blob/master/docs/guide/README.md)
+* [Sphinx](https://www.yiiframework.com/extension/yiisoft/yii2-sphinx/doc/guide)
+* [Redis](https://www.yiiframework.com/extension/yiisoft/yii2-redis/doc/guide)
+* [MongoDB](https://www.yiiframework.com/extension/yiisoft/yii2-mongodb/doc/guide)
+* [ElasticSearch](https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch/doc/guide)
 
 
 Odbieranie danych od użytkowników
@@ -115,7 +116,7 @@ Bezpieczeństwo
 * [Autoryzacja](security-authorization.md)
 * [Praca z hasłami](security-passwords.md)
 * [Kryptografia](security-cryptography.md)
-* [Klienty autoryzacji](security-auth-clients.md)
+* [Klienty autoryzacji](https://www.yiiframework.com/extension/yiisoft/yii2-authclient/doc/guide)
 * [Bezpieczeństwo w praktyce](security-best-practices.md)
 
 
@@ -146,9 +147,9 @@ Webserwisy z wykorzystaniem REST
 Narzędzia wspomagające tworzenie aplikacji
 ------------------------------------------
 
-* [Pasek debugowania i debuger](https://github.com/yiisoft/yii2-debug/blob/master/docs/guide/README.md)
-* [Generowanie kodu przy użyciu Gii](https://github.com/yiisoft/yii2-gii/blob/master/docs/guide/README.md)
-* [Generowanie dokumentacji API](https://github.com/yiisoft/yii2-apidoc)
+* [Pasek debugowania i debuger](https://www.yiiframework.com/extension/yiisoft/yii2-debug/doc/guide)
+* [Generowanie kodu przy użyciu Gii](https://www.yiiframework.com/extension/yiisoft/yii2-gii/doc/guide)
+* [Generowanie dokumentacji API](https://www.yiiframework.com/extension/yiisoft/yii2-apidoc)
 
 
 Testowanie
@@ -165,10 +166,11 @@ Testowanie
 Tematy specjalne
 ----------------
 
-* [Szablon zaawansowanej aplikacji](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md)
+* [Szablon zaawansowanej aplikacji](https://www.yiiframework.com/extension/yiisoft/yii2-app-advanced/doc/guide)
 * [Tworzenie aplikacji od podstaw](tutorial-start-from-scratch.md)
 * [Komendy konsolowe](tutorial-console.md)
-* [Podstawowe walidatory](tutorial-core-validators.md)
+* [Wbudowane walidatory](tutorial-core-validators.md)
+* [Docker](tutorial-docker.md)
 * [Internacjonalizacja](tutorial-i18n.md)
 * [Wysyłanie poczty](tutorial-mailing.md)
 * [Poprawianie wydajności](tutorial-performance-tuning.md)
@@ -181,16 +183,16 @@ Tematy specjalne
 Widżety
 -------
 
-* [GridView](http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
-* [ListView](http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
-* [DetailView](http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
-* [ActiveForm](http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
-* [Pjax](http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
-* [Menu](http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
-* [LinkPager](http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
-* [LinkSorter](http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
-* [Widżety Bootstrapowe](https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide/README.md)
-* [Widżety jQuery UI](https://github.com/yiisoft/yii2-jui/blob/master/docs/guide/README.md)
+* [GridView](https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
+* [ListView](https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
+* [DetailView](https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
+* [ActiveForm](https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
+* [Pjax](https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
+* [Menu](https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
+* [LinkPager](https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
+* [LinkSorter](https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
+* [Widżety Bootstrapowe](https://www.yiiframework.com/extension/yiisoft/yii2-bootstrap/doc/guide)
+* [Widżety jQuery UI](https://www.yiiframework.com/extension/yiisoft/yii2-jui/doc/guide)
 
 
 Klasy pomocnicze
@@ -199,6 +201,7 @@ Klasy pomocnicze
 * [Przegląd](helper-overview.md)
 * [ArrayHelper](helper-array.md)
 * [Html](helper-html.md)
+* [Json](helper-json.md)
 * [Url](helper-url.md)
 
 
diff --git a/docs/guide-pl/concept-aliases.md b/docs/guide-pl/concept-aliases.md
index 63a9bac41ea..3d9d8395424 100644
--- a/docs/guide-pl/concept-aliases.md
+++ b/docs/guide-pl/concept-aliases.md
@@ -110,7 +110,7 @@ Yii predefiniuje zestaw aliasów do łatwego wskazywania często używanych ści
 - `@web`, bazowy adres URL aktualnie używanej aplikacji Web. Wskazuje na tą samą wartość co [[yii\web\Request::baseUrl]].
 - `@vendor`, [[yii\base\Application::vendorPath|folder pakietów composera]]. Domyślnie wskazuje na `@app/vendor`.
 - `@bower`, bazowy folder zawierający [pakiety bowera](http://bower.io/). Domyślnie wskazuje na `@vendor/bower`.
-- `@npm`, bazowy folder zawierający [pakiety npm](https://www.npmjs.org/). Domyślnie wskazuje na `@vendor/npm`.
+- `@npm`, bazowy folder zawierający [pakiety npm](https://www.npmjs.com/). Domyślnie wskazuje na `@vendor/npm`.
 
 Alias `@yii` jest definiowany poprzez dołączenie pliku `Yii.php` w [skrypcie wejścia](structure-entry-scripts.md).
 Pozostałe aliasy są definiowane w konstruktorze aplikacji podczas ładowania [konfiguracji](concept-configurations.md).
diff --git a/docs/guide-pl/concept-behaviors.md b/docs/guide-pl/concept-behaviors.md
index 622c2c130cc..2dbfb887acc 100644
--- a/docs/guide-pl/concept-behaviors.md
+++ b/docs/guide-pl/concept-behaviors.md
@@ -124,21 +124,21 @@ class User extends ActiveRecord
     {
         return [
             // anonimowy behavior, tylko nazwa klasy behavioru
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // imienny behavior, tylko nazwa klasy behavioru
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // anonimowy behavior, tablica konfiguracyjna
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // imienny behavior, tablica konfiguracyjna
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
@@ -162,11 +162,11 @@ use app\components\MyBehavior;
 $component->attachBehavior('myBehavior1', new MyBehavior);
 
 // załącz klasę behavioru
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // załącz tablicę konfiguracyjną
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -177,7 +177,7 @@ Możesz załączyć wiele behaviorów jednocześnie, korzystając z metody [[yii
 ```php
 $component->attachBehaviors([
     'myBehavior1' => new MyBehavior,  // imienny behavior
-    MyBehavior::className(),          // anonimowy behavior
+    MyBehavior::class,          // anonimowy behavior
 ]);
 ```
 
@@ -185,10 +185,10 @@ Możliwe jest również załączenie behaviorów poprzez [konfigurację](concept
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(), // zwróć uwagę na konstrukcję "as nazwaBehavioru"
+    'as myBehavior2' => MyBehavior::class, // zwróć uwagę na konstrukcję "as nazwaBehavioru"
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -279,7 +279,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-pl/concept-components.md b/docs/guide-pl/concept-components.md
index 7fa2fc9c6e2..ed0a3d49626 100644
--- a/docs/guide-pl/concept-components.md
+++ b/docs/guide-pl/concept-components.md
@@ -73,7 +73,7 @@ Postępowanie zgodnie z tymi zasadami zapewni [konfigurowalność](concept-confi
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // lub alternatywnie
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-pl/db-active-record.md b/docs/guide-pl/db-active-record.md
index 81d1226d51b..cf1d6a6fcd7 100644
--- a/docs/guide-pl/db-active-record.md
+++ b/docs/guide-pl/db-active-record.md
@@ -719,7 +719,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -727,7 +727,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -744,7 +744,7 @@ Deklarując relację powinno się zwrócić uwagę na następujące dane:
   klient może mieć wiele zamówień, podczas gdy zamówienie ma tylko jednego klienta.
 - nazwę powiązanej klasy Active Record: określoną jako pierwszy argument w [[yii\db\ActiveRecord::hasMany()|hasMany()]] lub 
   [[yii\db\ActiveRecord::hasOne()|hasOne()]].
-  Rekomendowany sposób uzyskania nazwy klasy to wywołanie `Xyz::className()`, dzięki czemu możemy posiłkować się wsparciem autouzupełniania IDE 
+  Rekomendowany sposób uzyskania nazwy klasy to wywołanie `Xyz::class`, dzięki czemu możemy posiłkować się wsparciem autouzupełniania IDE 
   i wykrywaniem błędów na poziomie kompilacji. 
 - powiązanie pomiędzy dwoma rodzajami danych: określone jako kolumna(y), poprzez którą dane nawiązują relację.
   Wartości tablicy są kolumnami głównych danych (reprezentowanymi przez klasę Active Record, w której deklaruje się relacje), a klucze tablicy są 
@@ -818,7 +818,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100)
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -852,7 +852,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -865,12 +865,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1123,7 +1123,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1131,7 +1131,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1163,7 +1163,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1267,7 +1267,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // klient posiada wiele komentarzy
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1282,7 +1282,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // komentarz jest przypisany do jednego klienta
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1365,7 +1365,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1376,7 +1376,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1440,7 +1440,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1534,7 +1534,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1565,7 +1565,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide-pl/input-validation.md b/docs/guide-pl/input-validation.md
index 7327a66ac05..bc3b76aa2c1 100644
--- a/docs/guide-pl/input-validation.md
+++ b/docs/guide-pl/input-validation.md
@@ -430,7 +430,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide-pl/intro-upgrade-from-v1.md b/docs/guide-pl/intro-upgrade-from-v1.md
index c528225a20a..6c3550bc43e 100644
--- a/docs/guide-pl/intro-upgrade-from-v1.md
+++ b/docs/guide-pl/intro-upgrade-from-v1.md
@@ -107,8 +107,8 @@ Więcej szczegółów na temat konfiguracji znajdziesz w sekcji [Konfiguracje](c
 Zdarzenia (Events)
 ------------------
 
-W Yii 1 zdarzenia były tworzone poprzez definiowanie `on`-metody (np., `onBeforeSave`). W Yii 2 możesz użyć dowolnej nazwy. Uruchomienie zdarzenia następuje 
-poprzez wywołanie metody [[yii\base\Component::trigger()|trigger()]]:
+W Yii 1 zdarzenia były tworzone poprzez definiowanie `on`-metody (np., `onBeforeSave`). W Yii 2 możesz użyć dowolnej nazwy. 
+Uruchomienie zdarzenia następuje poprzez wywołanie metody [[yii\base\Component::trigger()|trigger()]]:
 
 ```php
 $event = new \yii\base\Event;
diff --git a/docs/guide-pl/intro-yii.md b/docs/guide-pl/intro-yii.md
index 688d7984198..807f01f6169 100644
--- a/docs/guide-pl/intro-yii.md
+++ b/docs/guide-pl/intro-yii.md
@@ -21,25 +21,31 @@ Jak wygląda porównanie Yii z innymi frameworkami?
 
 Jeśli korzystałeś już z innych frameworków, na pewno docenisz, jak Yii wypada na ich tle:
 
-* Jak większość frameworków, Yii wykorzystuje architekturę MVC (Model-Widok-Kontroler) i wspiera organizację kodu zgodną z tym wzorcem.
-* Yii opiera się na filozofii, która mówi, że kod powinien być napisany w prosty, ale jednocześnie elegancki sposób. Yii nigdy nie będzie upierać się przy przeprojektowaniu 
-kodu jedynie w celu dokładnego trzymania się zasad wzorca projektowego.
-* Yii jest w pełni rozwiniętym frameworkiem dostarczającym sprawdzonych i gotowych do użycia funkcjonalności: konstruktorów zapytań
-oraz ActiveRecord dla baz danych relacyjnych i NoSQL, wsparcia dla tworzenia RESTful API oraz wielopoziomowych mechanizmów pamięci podręcznej i wielu, wielu innych.
+* Jak większość frameworków, Yii wykorzystuje architekturę MVC (Model-Widok-Kontroler) i wspiera organizację kodu zgodną 
+  z tym wzorcem.
+* Yii opiera się na filozofii, która mówi, że kod powinien być napisany w prosty, ale jednocześnie elegancki sposób. 
+  Yii nigdy nie będzie upierać się przy przeprojektowaniu kodu jedynie w celu dokładnego trzymania się zasad wzorca projektowego.
+* Yii jest w pełni rozwiniętym frameworkiem dostarczającym sprawdzonych i gotowych do użycia funkcjonalności: konstruktorów 
+  zapytań oraz ActiveRecord dla baz danych relacyjnych i NoSQL, wsparcia dla tworzenia RESTful API oraz wielopoziomowych 
+  mechanizmów pamięci podręcznej i wielu, wielu innych.
 * Yii jest ekstremalnie rozszerzalny. Możesz dostosować lub wymienić praktycznie każdy fragment podstawowego kodu. 
-Dodatkowo Yii wykorzystuje architekturę rozszerzeń, dzięki czemu możesz w prosty sposób stworzyć i opublikować swoje własne moduły i widżety.
+  Dodatkowo Yii wykorzystuje architekturę rozszerzeń, dzięki czemu możesz w prosty sposób stworzyć i opublikować swoje 
+  własne moduły i widżety.
 * Podstawowym celem, do którego Yii zawsze dąży, jest wysoka wydajność.
 
-Yii nie jest efektem pracy pojedynczego programisty - projekt wspiera zarówno [grupa doświadczonych deweloperów][http://www.yiiframework.com/team/], jak i ogromna społeczność programistyczna, nieustannie 
-przyczyniając się do jego rozwoju. Deweloperzy trzymają rękę na pulsie najnowszych trendów Internetu, za pomocą prostych i eleganckich interfejsów wzbogacając Yii w najlepsze sprawdzone 
-rozwiązania i funkcjonalności, dostępne w innych frameworkach i projektach.
+Yii nie jest efektem pracy pojedynczego programisty - projekt wspiera zarówno 
+[grupa doświadczonych deweloperów](https://www.yiiframework.com/team/), jak i ogromna społeczność programistyczna, 
+nieustannie przyczyniając się do jego rozwoju. Deweloperzy trzymają rękę na pulsie najnowszych trendów Internetu, 
+za pomocą prostych i eleganckich interfejsów wzbogacając Yii w najlepsze sprawdzone rozwiązania i funkcjonalności, 
+dostępne w innych frameworkach i projektach.
 
 Wersje Yii
 ----------
 
-Yii aktualnie dostępny jest w dwóch głównych wersjach: 1.1 i 2.0. Wersja 1.1 jest kodem starszej generacji, obecnie w fazie utrzymaniowej. 
-Wersja 2.0 jest całkowicie przepisaną wersją Yii z uwzględnieniem najnowszych protokołów i technologii, takich jak Composer, PSR, przestrzenie nazw, traity i wiele innych.
-2.0 reprezentuje aktualną generację frameworka i na niej skupi się głównie praca programistów w ciągu najbliższych lat. 
+Yii aktualnie dostępny jest w dwóch głównych wersjach: 1.1 i 2.0. Wersja 1.1 jest kodem starszej generacji, obecnie 
+w fazie utrzymaniowej. Wersja 2.0 jest całkowicie przepisaną wersją Yii z uwzględnieniem najnowszych protokołów i technologii, 
+takich jak Composer, PSR, przestrzenie nazw, traity i wiele innych. 2.0 reprezentuje aktualną generację frameworka i na 
+niej skupi się głównie praca programistów w ciągu najbliższych lat.   
 Ten przewodnik opisuje wersję 2.0.
 
 
@@ -53,4 +59,3 @@ Używanie Yii wymaga podstawowej wiedzy o programowaniu obiektowym w PHP (OOP),
 jest frameworkiem czysto obiektowym. Yii 2.0 wykorzystuje ostatnie udoskonalenia w PHP, jak 
 [przestrzenie nazw](https://secure.php.net/manual/pl/language.namespaces.php) i [traity](https://secure.php.net/manual/pl/language.oop5.traits.php). 
 Zrozumienie tych konstrukcji pomoże Ci szybciej i łatwiej rozpocząć pracę z Yii 2.0.
-
diff --git a/docs/guide-pl/output-client-scripts.md b/docs/guide-pl/output-client-scripts.md
index 5a2fcbbe93f..43576d1b2a1 100644
--- a/docs/guide-pl/output-client-scripts.md
+++ b/docs/guide-pl/output-client-scripts.md
@@ -29,7 +29,7 @@ Jeśli ten argument nie zostanie podany, kod JavaScript zostanie użyty jako ID.
 Skrypt zewnętrzny może zostać dodany następująco:
 
 ```php
-$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::className()]]);
+$this->registerJsFile('http://example.com/js/main.js', ['depends' => [\yii\web\JqueryAsset::class]]);
 ```
 
 Argumenty dla metod [[yii\web\View::registerCssFile()|registerCssFile()]] są podobne do [[yii\web\View::registerJsFile()|registerJsFile()]].
@@ -73,7 +73,7 @@ Jeśli chcesz się upewnić, że jest tylko jeden tag `style`, użyj trzeciego a
 
 ```php
 $this->registerCssFile("http://example.com/css/themes/black-and-white.css", [
-    'depends' => [BootstrapAsset::className()],
+    'depends' => [BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
@@ -86,4 +86,4 @@ Kod powyżej doda link w sekcji `head` strony do pliku CSS.
 * Ostatni argument określa ID identyfikujące ten plik CSS. W przypadku jego braku, zostanie użyty do tego celu adres URL pliku CSS.
 
 Jest mocno wskazane używanie [assetów](structure-assets.md) do rejestrowania zewnętrznych plików CSS. Użycie ich pozwala Ci na łączenie i kompresowanie 
-wielu plików CSS, które jest wręcz niezbędne na stronach internetowych o dużym natężeniu ruchu.
\ No newline at end of file
+wielu plików CSS, które jest wręcz niezbędne na stronach internetowych o dużym natężeniu ruchu.
diff --git a/docs/guide-pl/start-installation.md b/docs/guide-pl/start-installation.md
index 37c253e128e..71affbc97fd 100644
--- a/docs/guide-pl/start-installation.md
+++ b/docs/guide-pl/start-installation.md
@@ -2,28 +2,30 @@ Instalacja Yii
 ==============
 
 Yii możesz zainstalować na dwa sposoby, korzystając z [Composera](https://getcomposer.org/) lub pobierając plik archiwum.  
-Preferowanym sposobem jest ten pierwszy, ponieważ pozwala na instalację i aktualizację dodatkowych [rozszerzeń](structure-extensions.md) oraz samego Yii przy użyciu 
-zaledwie jednej komendy.
+Preferowanym sposobem jest ten pierwszy, ponieważ pozwala na instalację i aktualizację dodatkowych 
+[rozszerzeń](structure-extensions.md) oraz samego Yii przy użyciu zaledwie jednej komendy.
 
 Standardowa instalacja Yii skutkuje pobraniem i wstępnym skonfigurowaniem frameworka wraz z szablonem projektu.  
 Szablon projektu jest aplikacją Yii zawierającą podstawowe funkcjonalności, takie jak logowanie, formularz kontaktowy itp.  
-Struktura jego kodu została stworzona w oparciu o zalecany sposób pisania aplikacji opartych na Yii, dlatego może służyć jako dobry punkt wyjściowy dla stworzenia 
-Twojego bardziej zaawansowanego projektu.
+Struktura jego kodu została stworzona w oparciu o zalecany sposób pisania aplikacji opartych na Yii, dlatego może służyć 
+jako dobry punkt wyjściowy dla stworzenia Twojego bardziej zaawansowanego projektu.
     
-W tej oraz kilku kolejnych sekcjach opiszemy jak zainstalować Yii z tak zwanym "podstawowym szablonem projektu" oraz jak zaimplementować w nim nowe funkcjonalności.  
-Oprócz podstawowego, Yii dostarcza również drugi, [zaawansowany szablon projektu](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md), 
+W tej oraz kilku kolejnych sekcjach opiszemy jak zainstalować Yii z tak zwanym "podstawowym szablonem projektu" oraz jak 
+zaimplementować w nim nowe funkcjonalności. Oprócz podstawowego, Yii dostarcza również drugi, 
+[zaawansowany szablon projektu](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md), 
 przystosowany dla programistów tworzących wielowarstwowe aplikacje.
 
-> Info: Podstawowy szablon projektu jest odpowiedni dla 90% aplikacji webowych. Główną różnicą, w porównaniu do zaawansowanego szablonu projektu, jest organizacja kodu.  
-> Jeśli dopiero zaczynasz swoją przygodę z Yii, zalecamy zapoznać się z podstawowym szablonem, ze względu na jego prostotę oraz funkcjonalność.
+> Info: Podstawowy szablon projektu jest odpowiedni dla 90% aplikacji webowych. Główną różnicą, w porównaniu do 
+  zaawansowanego szablonu projektu, jest organizacja kodu. Jeśli dopiero zaczynasz swoją przygodę z Yii, zalecamy 
+  zapoznać się z podstawowym szablonem, ze względu na jego prostotę oraz funkcjonalność.
 
 Instalacja z użyciem Composera <span id="installing-via-composer"></span>
 ------------------------------
 
 ### Instalacja Composera
 
-Jeśli nie posiadasz jeszcze Composera, to możesz go zainstalować korzystając z instrukcji zamieszczonej na stronie [getcomposer.org](https://getcomposer.org/download/). 
-W systemach operacyjnych Linux i Mac OS X należy wywołać następujące komendy:
+Jeśli nie posiadasz jeszcze Composera, to możesz go zainstalować korzystając z instrukcji zamieszczonej na stronie 
+[getcomposer.org](https://getcomposer.org/download/). W systemach operacyjnych Linux i Mac OS X należy wywołać następujące komendy:
 
 ```bash
 curl -sS https://getcomposer.org/installer | php
@@ -44,32 +46,27 @@ pamiętaj, żeby odpowiednio zmodyfikować podane tu przykładowe komendy.
 Jeśli jesteś już posiadaczem Composera, upewnij się, że jest on zaktualizowany do najnowszej wersji (komenda `composer self-update`).
 
 > Note: Podczas instalacji Yii, Composer będzie potrzebował pobrać sporo informacji z API serwisu Github. 
-> Ilość zapytań zależy od liczby powiązanych wtyczek, rozszerzeń i modułów, których wymaga Twoja aplikacja, i może być większa niż 
-> **limit zapytań API GitHuba**. Jeśli faktycznie tak będzie, Composer może poprosić o Twoje dane logowania w serwisie Github, aby uzyskać 
-> token dostępowy API Githuba. Przy szybkim łączu napotkanie limitu może nastąpić szybciej niż Composer jest w stanie obsłużyć zapytania, 
-> zatem zalecane jest skonfigurowanie tokenu dostępowego przed instalacją Yii.  
-> Instrukcja opisująca jak tego dokonać znajduje się w 
-> [dokumentacji Composera dotyczącej tokenów API Githuba](https://getcomposer.org/doc/articles/troubleshooting.md#api-rate-limit-and-oauth-tokens).
+  Ilość zapytań zależy od liczby powiązanych wtyczek, rozszerzeń i modułów, których wymaga Twoja aplikacja, i może być 
+  większa niż **limit zapytań API GitHuba**. Jeśli faktycznie tak będzie, Composer może poprosić o Twoje dane logowania 
+  w serwisie Github, aby uzyskać token dostępowy API Githuba. Przy szybkim łączu napotkanie limitu może nastąpić szybciej 
+  niż Composer jest w stanie obsłużyć zapytania, zatem zalecane jest skonfigurowanie tokenu dostępowego przed instalacją Yii.  
+  Instrukcja opisująca jak tego dokonać znajduje się w  
+  [dokumentacji Composera dotyczącej tokenów API Githuba](https://getcomposer.org/doc/articles/troubleshooting.md#api-rate-limit-and-oauth-tokens).
 
 ### Installing Yii
 
 Teraz możesz przejść już do instalacji samego Yii, wywołując poniższe komendy w katalogu dostępnym z poziomu sieci web:
 
 ```bash
-composer global require "fxp/composer-asset-plugin:^1.4.1"
 composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 ```
 
-Pierwsza komenda instaluje [wtyczkę Composer Asset Plugin](https://github.com/francoispluchino/composer-asset-plugin), która pozwala na zarządzanie zasobami 
-[Bowera](http://bower.io) oraz [NPM](https://www.npmjs.com) z użyciem samego Composera.  
-Komendę tę wystarczy wywołać raz i od tej pory wtyczka będzie zainstalowana globalnie i dostępna dla każdej kolejnej instalacji Yii.  
-Druga komenda instaluje Yii w katalogu `basic`. Jeśli chcesz, możesz podać katalog o innej nazwie.
+Komenda ta zainstaluje najnowszą stabilną wersję szablonu aplikacji Yii w katalogu `basic`. Możesz oczywiście wybrać 
+inną nazwę.
 
-> Info: Jeśli komenda `composer create-project` zwróci błąd, upewnij się, czy Composer Asset Plugin jest poprawnie zainstalowany.
-> Możesz to zrobić wywołując komendę `composer global show`, która powinna wyświetlić wpis (pośród innych możliwych) `fxp/composer-asset-plugin`.
-> Aby sprawdzić, czy przypadkiem nie napotkałeś na jeden z częstych błędów, zerknij również do 
-> [dokumentacji Composera w sekcji Rozwiązywania problemów](https://getcomposer.org/doc/articles/troubleshooting.md). 
-> Kiedy uporasz się już z błędem, możesz wznowić przerwaną instalację uruchamiając komendę `composer update` w folderze `basic`.
+> Info: Jeśli komenda `composer create-project` zwróci błąd, sprawdź, czy przypadkiem nie jest on już opisany
+  w [dokumentacji Composera w sekcji Rozwiązywania problemów](https://getcomposer.org/doc/articles/troubleshooting.md). 
+  Kiedy uporasz się już z błędem, możesz wznowić przerwaną instalację uruchamiając komendę `composer update` w folderze `basic`.
 
 > Tip: Jeśli chcesz zainstalować najnowszą wersję deweloperską Yii, użyj poniższej komendy, która dodaje 
 > [opcję stabilności](https://getcomposer.org/doc/04-schema.md#minimum-stability):
@@ -78,14 +75,15 @@ Druga komenda instaluje Yii w katalogu `basic`. Jeśli chcesz, możesz podać ka
 > composer create-project --prefer-dist --stability=dev yiisoft/yii2-app-basic basic
 > ```
 >
-> Pamiętaj, że wersja deweloperska Yii nie powinna być używana w wersjach produkcyjnych Twojej aplikacji, ponieważ mogą wystąpić w niej niespodziewane błędy.
+> Pamiętaj, że wersja deweloperska Yii nie powinna być używana w wersjach produkcyjnych Twojej aplikacji, ponieważ mogą 
+> wystąpić w niej niespodziewane błędy.
 
 Instalacja z pliku archiwum <span id="installing-from-archive-file"></span>
 ---------------------------
 
 Instalacja Yii z pliku archiwum składa się z trzech kroków:
 
-1. Pobranie pliku archiwum z [yiiframework.com](http://www.yiiframework.com/download/).
+1. Pobranie pliku archiwum z [yiiframework.com](https://www.yiiframework.com/download/).
 2. Rozpakowanie pliku archiwum do katalogu dostępnego z poziomu sieci web.
 3. Zmodyfikowanie pliku `config/web.php` przez dodanie sekretnego klucza do elementu konfiguracji `cookieValidationKey`
    (jest to wykonywane automatycznie, jeśli instalujesz Yii używając Composera):
@@ -99,14 +97,44 @@ Inne opcje instalacji <span id="other-installation-options"></span>
 ---------------------
 
 Powyższe instrukcje pokazują, jak zainstalować Yii oraz utworzyć podstawową, gotową do uruchomienia aplikację web.
-To podejście jest dobrym punktem startowym dla większości projektów, zarówno małych jak i dużych. Jest to szczególnie korzystne, gdy zaczynasz naukę Yii.
+To podejście jest dobrym punktem startowym dla większości projektów, zarówno małych jak i dużych. Jest to szczególnie 
+korzystne, gdy zaczynasz naukę Yii.
 
 Dostępne są również inne opcje instalacji:
 
 * Jeśli chcesz zainstalować wyłącznie framework i samemu zbudować aplikację, zapoznaj się z rozdziałem 
   [Tworzenie aplikacji od podstaw](tutorial-start-from-scratch.md).
 * Jeśli chcesz utworzyć bardziej zaawansowaną aplikację, przystosowaną do programowania dla wielu środowisk, 
-  powinienieś rozważyć instalację [zaawansowanego szablonu aplikacji](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md).
+  powinienieś rozważyć instalację 
+  [zaawansowanego szablonu aplikacji](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md).
+
+
+Instalowanie zasobów <span id="installing-assets"></span>
+--------------------
+
+Yii używa menadżerów pakietów [Bower](http://bower.io/) i/lub [NPM](https://www.npmjs.com/) do instalacji bibliotek 
+zasobów (CSS i JavaScript). Proces pobierania tych bibliotek korzysta z Composera, pozwalając na rozwiązywanie zależności 
+pakietów PHP i CSS/JavaScript w tym samym czasie, za pomocą serwisu [asset-packagist.org](https://asset-packagist.org) 
+lub wtyczki [composer asset plugin](https://github.com/fxpio/composer-asset-plugin).  
+Po więcej informacji sięgnij do sekcji [dokumentacji Zasobów](structure-assets.md).
+
+Możesz, rzecz jasna, również zarządzać swoimi zasobami za pomocą natywnego klienta Bower/NPM, korzystać z CDN, albo też 
+całkowicie zrezygnować z instalacji zasobów. Aby zablokować automatyczne pobieranie zasobów podczas używania Composera, 
+dodaj poniższe linie w pliku 'composer.json':
+
+```json
+"replace": {
+    "bower-asset/jquery": ">=1.11.0",
+    "bower-asset/inputmask": ">=3.2.0",
+    "bower-asset/punycode": ">=1.3.0",
+    "bower-asset/yii2-pjax": ">=2.0.0"
+},
+```
+
+> Note: w przypadku zablokowania instalacji zasobów przez Composera, odpowiedzialność za ich instalację i rozwiązywanie 
+  zależności spada na Ciebie. Przygotuj się na potencjalne niezgodności w plikach zasobów pochodzących z różnych rozszerzeń.
+
+
 
 Weryfikacja instalacji <span id="verifying-installation"></span>
 ----------------------
@@ -119,8 +147,8 @@ uruchamiając poniższą komendę w konsoli z poziomu folderu `web` w projekcie:
 php yii serve
 ```
 
-> Note: Domyślnym portem, na którym serwer HTTP nasłuchuje, jest 8080. Jeśli jednak ten port jest już w użyciu lub też chcesz obsłużyć wiele aplikacji w ten sposób, 
-możesz podać inny numer portu, dodając argument --port:
+> Note: Domyślnym portem, na którym serwer HTTP nasłuchuje, jest 8080. Jeśli jednak ten port jest już w użyciu lub też 
+  chcesz obsłużyć wiele aplikacji w ten sposób, możesz podać inny numer portu, dodając argument --port:
 
 ```bash
 php yii serve --port=8888
@@ -134,10 +162,11 @@ http://localhost:8080/
 
 ![Poprawna instalacja Yii](images/start-app-installed.png)
 
-Powinienieś zobaczyć stronę z napisem "Congratulations!" ("Gratulacje!"). Jeśli nie, sprawdź czy zainstalowane elementy środowiska spełniają wymagania Yii. 
-Możesz sprawdzić minimalne wymagania na dwa sposoby:
+Powinienieś zobaczyć stronę z napisem "Congratulations!" ("Gratulacje!"). Jeśli nie, sprawdź, czy zainstalowane elementy 
+środowiska spełniają wymagania Yii. Możesz sprawdzić minimalne wymagania na dwa sposoby:
 
-* Skopiuj plik `/requirements.php` do `/web/requirements.php`, a następnie przejdź do przeglądarki i uruchom go przechodząc pod adres `http://localhost/requirements.php`
+* Skopiuj plik `/requirements.php` do `/web/requirements.php`, a następnie przejdź do przeglądarki i uruchom go 
+  przechodząc pod adres `http://localhost/requirements.php`
 * Lub też uruchom następujące komendy:
 
   ```bash
@@ -145,9 +174,10 @@ Możesz sprawdzić minimalne wymagania na dwa sposoby:
   php requirements.php
   ```
 
-Powinienieś skonfigurować swoją instalację PHP tak, aby spełniała minimalne wymogi Yii. Najważniejszym z nich jest posiadanie PHP w wersji 5.4 lub wyższej.
-Powinienieś również zainstalować [rozszerzenie PDO](https://secure.php.net/manual/en/pdo.installation.php) oraz odpowiedni sterownik bazy danych (np. `pdo_mysql` dla bazy danych 
-MySQL), jeśli Twoja aplikacja potrzebuje bazy danych.
+Powinienieś skonfigurować swoją instalację PHP tak, aby spełniała minimalne wymogi Yii. Najważniejszym z nich jest 
+posiadanie PHP w wersji 5.4 lub wyższej. Powinienieś również zainstalować 
+[rozszerzenie PDO](https://secure.php.net/manual/en/pdo.installation.php) oraz odpowiedni sterownik bazy danych 
+(np. `pdo_mysql` dla bazy danych MySQL), jeśli Twoja aplikacja potrzebuje bazy danych.
 
 
 Konfigurowanie serwerów WWW <span id="configuring-web-servers"></span>
@@ -157,25 +187,23 @@ Konfigurowanie serwerów WWW <span id="configuring-web-servers"></span>
 
 Aplikacja zainstalowana według powyższych instrukcji powinna działać bezproblemowo zarówno na 
 [serwerze HTTP Apache](http://httpd.apache.org) jak i [serwerze HTTP Nginx](http://nginx.org), na systemie 
-operacyjnym Windows, Mac OS X oraz Linux, posiadającym zainstalowane PHP 5.4 lub wyższe.
-Yii 2.0 jest również kompatybilne z [facebookowym HHVM](http://hhvm.com). 
-Są jednak przypadki, gdzie Yii zachowuje się inaczej w HHVM niż w natywnym PHP, dlatego powinieneś zachować 
-szczególną ostrożność używając HHVM.
-
-Na serwerze produkcyjnym możesz skonfigurować swój host tak, aby aplikacja była dostępna pod adresem `http://www.example.com/index.php` zamiast 
-`http://www.example.com/basic/web/index.php`.
-Taka konfiguracja wymaga wskazania głównego katalogu serwera jako katalogu `basic/web`. 
-Jeśli chcesz ukryć `index.php` w adresie URL, skorzystaj z informacji opisanych w dziale 
-[routing i tworzenie adresów URL](runtime-routing.md).
+operacyjnym Windows, Mac OS X oraz Linux, posiadającym zainstalowane PHP 5.4 lub nowsze. Yii 2.0 jest również kompatybilne 
+z [facebookowym HHVM](http://hhvm.com), są jednak przypadki, gdzie Yii zachowuje się inaczej w HHVM niż w natywnym PHP, 
+dlatego powinieneś zachować szczególną ostrożność używając HHVM.
+
+Na serwerze produkcyjnym możesz skonfigurować swój host tak, aby aplikacja była dostępna pod adresem 
+`http://www.example.com/index.php` zamiast `http://www.example.com/basic/web/index.php`. Taka konfiguracja wymaga wskazania 
+głównego katalogu serwera jako katalogu `basic/web`. Jeśli chcesz ukryć `index.php` w adresie URL, skorzystaj z informacji 
+opisanych w dziale [routing i tworzenie adresów URL](runtime-routing.md).  
 W tej sekcji dowiesz się, jak skonfigurować Twój serwer Apache lub Nginx, aby osiągnąć te cele.
 
-> Info: Ustawiając `basic/web` jako główny katalog serwera unikasz niechcianego dostępu użytkowników końcowych do prywatnego kodu oraz wrażliwych plików aplikacji, które są 
-> przechowywane w katalogu `basic`. 
-> Zablokowanie dostępu do tych folderów jest jednym z wymogów bezpieczeństwa aplikacji.
+> Info: Ustawiając `basic/web` jako główny katalog serwera, unikasz niechcianego dostępu użytkowników końcowych do 
+  prywatnego kodu oraz wrażliwych plików aplikacji, które są przechowywane w katalogu `basic`. Zablokowanie dostępu do 
+  tych folderów jest jednym z wymogów bezpieczeństwa aplikacji.
 
-> Info: W przypadku, gdy Twoja aplikacja działa na wspólnym środowisku hostingowym, gdzie nie masz dostępu do modyfikowania konfiguracji serwera, nadal możesz zmienić strukturę 
-> aplikacji dla lepszej ochrony. 
-> Po więcej informacji zajrzyj do działu [Współdzielone środowisko hostingowe](tutorial-shared-hosting.md).
+> Info: W przypadku, gdy Twoja aplikacja działa na wspólnym środowisku hostingowym, gdzie nie masz dostępu do modyfikowania 
+  konfiguracji serwera, nadal możesz zmienić strukturę aplikacji dla lepszej ochrony. Po więcej informacji zajrzyj do 
+  działu [Współdzielone środowisko hostingowe](tutorial-shared-hosting.md).
 
 ### Zalecane ustawienia Apache <span id="recommended-apache-configuration"></span>
 
@@ -189,9 +217,14 @@ DocumentRoot "path/to/basic/web"
 <Directory "path/to/basic/web">
     # użyj mod_rewrite do wsparcia "ładnych URLi"
     RewriteEngine on
+
+    # jeśli $showScriptName jest ustawione na false w UrlManager, nie pozwalaj na dostęp do URLi za pomocą nazwy skryptu
+    RewriteRule ^index.php/ - [L,R=404]
+
     # Jeśli katalog lub plik istnieje, użyj go bezpośrednio
     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d
+
     # W innym przypadku przekieruj żądanie na index.php
     RewriteRule . index.php
 
@@ -202,8 +235,8 @@ DocumentRoot "path/to/basic/web"
 ### Zalecane ustawienia Nginx <span id="recommended-nginx-configuration"></span>
 
 Aby użyć [Nginx](http://wiki.nginx.org/) powinienieś zainstalować PHP jako [FPM SAPI](https://secure.php.net/install.fpm).
-Możesz użyć przedstawionej poniżej konfiguracji Nginx, zastępując jedynie ścieżkę `path/to/basic/web` aktualną ścieżką do `basic/web` Twojej aplikacji oraz 
-`mysite.test` aktualną nazwą hosta.
+Możesz użyć przedstawionej poniżej konfiguracji Nginx, zastępując jedynie ścieżkę `path/to/basic/web` aktualną ścieżką 
+do `basic/web` Twojej aplikacji oraz `mysite.test` aktualną nazwą hosta.
 
 ```nginx
 server {
@@ -231,7 +264,7 @@ server {
     #}
     #error_page 404 /404.html;
 
-    # deny accessing php files for the /assets directory
+    # zablokuj dostęp do plików php w folderze /assets
     location ~ ^/assets/.*\.php$ {
         deny all;
     }
@@ -255,3 +288,96 @@ aby zapobiec wielu zbędnym wywołaniom `stat()`.
 
 Należy również pamiętać, że podczas pracy na serwerze HTTPS musisz dodać `fastcgi_param HTTPS on;`, 
 aby Yii prawidłowo wykrywało, że połączenie jest bezpieczne.
+
+### Zalecane ustawienia NGINX Unit <span id="recommended-nginx-unit-configuration"></span>
+
+Możesz uruchomić aplikacje oparte na Yii korzystając z [NGINX Unit](https://unit.nginx.org/) z modułem języka PHP. Poniżej 
+znajdziesz przykładową konfigurację.
+
+```json
+{
+    "listeners": {
+        "*:80": {
+            "pass": "routes/yii"
+        }
+    },
+
+    "routes": {
+        "yii": [
+            {
+                "match": {
+                    "uri": [
+                        "!/assets/*",
+                        "*.php",
+                        "*.php/*"
+                    ]
+                },
+
+                "action": {
+                    "pass": "applications/yii/direct"
+                }
+            },
+            {
+                "action": {
+                    "share": "/path/to/app/web/",
+                    "fallback": {
+                        "pass": "applications/yii/index"
+                    }
+                }
+            }
+        ]
+    },
+
+    "applications": {
+        "yii": {
+            "type": "php",
+            "user": "www-data",
+            "targets": {
+                "direct": {
+                    "root": "/path/to/app/web/"
+                },
+
+                "index": {
+                    "root": "/path/to/app/web/",
+                    "script": "index.php"
+                }
+            }
+        }
+    }
+}
+```
+
+Możesz również [skonfigurować](https://unit.nginx.org/configuration/#php) swoje środowisko PHP lub przygotować 
+spersonalizowany plik `php.ini` w tej samej konfiguracji.
+
+### Konfiguracja IIS <span id="iis-configuration"></span>
+
+Zalecane jest hostowanie aplikacji na wirtualnym hoście (strona Web), gdzie podstawowa ścieżka dokumentów wskazuje na folder 
+`path/to/app/web` i strona Web jest skonfigurowana do uruchamiania PHP. W folderze `web` musisz umieścić plik `web.config` 
+(`path/to/app/web/web.config`). Zawartość tego pliku powinna wyglądać jak poniżej:
+
+```xml
+<?xml version="1.0" encoding="UTF-8"?>
+<configuration>
+<system.webServer>
+<directoryBrowse enabled="false" />
+  <rewrite>
+    <rules>
+      <rule name="Hide Yii Index" stopProcessing="true">
+        <match url="." ignoreCase="false" />
+        <conditions>
+        <add input="{REQUEST_FILENAME}" matchType="IsFile" 
+              ignoreCase="false" negate="true" />
+        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" 
+              ignoreCase="false" negate="true" />
+        </conditions>
+        <action type="Rewrite" url="index.php" appendQueryString="true" />
+      </rule> 
+    </rules>
+  </rewrite>
+</system.webServer>
+</configuration>
+```
+Sprawdź również poniższe oficjalne poradniki firmy Microsoft, opisujące jak poprawnie skonfigurować PHP dla IIS:
+1. [Jak uruchomić swoją pierwszą stronę Web na IIS](https://docs.microsoft.com/en-us/iis/manage/creating-websites/scenario-build-a-static-website-on-iis)
+2. [Konfiguracja strony Web PHP dla IIS](https://docs.microsoft.com/en-us/iis/application-frameworks/scenario-build-a-php-website-on-iis/configure-a-php-website-on-iis)
diff --git a/docs/guide-pl/start-looking-ahead.md b/docs/guide-pl/start-looking-ahead.md
index ea6403acce2..f0f19514df2 100644
--- a/docs/guide-pl/start-looking-ahead.md
+++ b/docs/guide-pl/start-looking-ahead.md
@@ -9,24 +9,24 @@ rozwoju Twojej aplikacji w tak proste zadanie, jak uzupełnienie formularza.
 Ta sekcja podsumuje dostępne zasoby Yii, które pomogą Ci być bardziej produktywnym podczas używania frameworka.
 
 * Dokumentacja
-    - [Przewodnik po Yii](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [Przewodnik po Yii](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Jak sama nazwa wskazuje, jest to przewodnik, który opisuje jak działa Yii oraz dostarcza generalnych porad o użyciu Yii.
       Jest jednym z najważniejszych poradników, które powinieneś przeczytać przed napisaniem kodu w Yii.
-    - [Dokumentacja klas](http://www.yiiframework.com/doc-2.0/index.html):
+    - [Dokumentacja klas](https://www.yiiframework.com/doc-2.0/index.html):
       Określa korzystanie z każdej klasy dostarczonej przez Yii. Powinna być stosowana głównie przy pisaniu kodu oraz chęci zrozumienia, jak działa poszczególna klasa, metoda lub 
       właściwość.
       Najlepiej używać jej po zrozumieniu działania całego frameworka.
-    - [Artykuły Wiki](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Artykuły Wiki](https://www.yiiframework.com/wiki/?tag=yii2):
       Artykuły w Wiki są pisane przez użytkowników Yii i są oparte na ich doświadczeniu. Większość z nich jest pisana w stylu przepisów kucharskich, pokazując jak rozwiązać poszczególne 
       problemy używając Yii.
       Chociaż jakość tych artykułów może nie być tak dobra jak przewodnik, są one bardzo użyteczne oraz mogą dostarczać gotowych do użycia rozwiązań.
-    - [Książki](http://www.yiiframework.com/doc/)
-* [Rozszerzenia](http://www.yiiframework.com/extensions/):
+    - [Książki](https://www.yiiframework.com/books)
+* [Rozszerzenia](https://www.yiiframework.com/extensions/):
   Yii może pochwalić się biblioteką tysięcy rozszerzeń użytkowników, które mogą być łatwo zainstalowane w Twojej aplikacji, dzięki czemu tworzenie Twojej aplikacji jest jeszcze prostsze 
   i szybsze.
 * Społeczność
-    - Forum: <http://www.yiiframework.com/forum/>
-    - IRC chat: Kanał #yii w sieci freenode (<irc://irc.freenode.net/yii>)
+    - Forum: <https://forum.yiiframework.com/>
+    - IRC chat: Kanał #yii w sieci Libera (<ircs://irc.libera.chat:6697/yii>)
     - GitHub: <https://github.com/yiisoft/yii2>
     - Facebook: <https://www.facebook.com/groups/yiitalk/>
     - Twitter: <https://twitter.com/yiiframework>
diff --git a/docs/guide-pl/start-workflow.md b/docs/guide-pl/start-workflow.md
index 5d073c73680..7436ed61ba1 100644
--- a/docs/guide-pl/start-workflow.md
+++ b/docs/guide-pl/start-workflow.md
@@ -36,7 +36,7 @@ Struktura aplikacji <span id="application-structure"></span>
 
 Najważniejsze katalogi oraz pliki w Twojej aplikacji to (zakładając, że główny katalog aplikacji to `basic`):
 
-```
+```js
 basic/                  bazowa ścieżka aplikacji
     composer.json       plik używany przez Composer, opisuje informacje paczek
     config/             zawiera wszystkie konfiguracje, w tym aplikacji
@@ -90,4 +90,4 @@ Poniższy schemat pokazuje jak aplikacja przetwarza żądania.
 8. Akcja wczytuje model danych, prawdopodobnie z bazy danych.
 9. Akcja renderuje widok, dostarczając mu model danych.
 10. Wynik zwracany jest do komponentu [odpowiedzi](runtime-responses.md) aplikacji.
-11. Komponent odpowiedzi wysyła wynik do przeglądarki użytkownika.
\ No newline at end of file
+11. Komponent odpowiedzi wysyła wynik do przeglądarki użytkownika.
diff --git a/docs/guide-pl/structure-entry-scripts.md b/docs/guide-pl/structure-entry-scripts.md
index 2abca2dcd3c..d99b85e48ae 100644
--- a/docs/guide-pl/structure-entry-scripts.md
+++ b/docs/guide-pl/structure-entry-scripts.md
@@ -56,9 +56,9 @@ Podobnie poniżej kod skryptu wejściowego dla aplikacji konsolowej:
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-pl/tutorial-template-engines.md b/docs/guide-pl/tutorial-template-engines.md
index 2c87fedefe5..88d9923af70 100644
--- a/docs/guide-pl/tutorial-template-engines.md
+++ b/docs/guide-pl/tutorial-template-engines.md
@@ -2,7 +2,7 @@ Silniki szablonów
 =================
 
 Yii domyślnie używa PHP jako języka szablonów, ale nic nie stoi na przeszkodzie, aby skonfigurować wsparcie dla innych silników renderujących widok, 
-takich jak [Twig](http://twig.sensiolabs.org/) lub [Smarty](http://www.smarty.net/), dostępnych w postaci rozszerzeń.
+takich jak [Twig](https://twig.symfony.com/) lub [Smarty](https://www.smarty.net/), dostępnych w postaci rozszerzeń.
 
 Komponent `view` jest odpowiedzialny za renderowanie widoków. Aby dodać niestandardowy silnik szablonów, należy skonfigurować komponent jak poniżej:
 
@@ -45,4 +45,4 @@ Po zapisaniu pliku można zainstalować rozszerzenia uruchamiając komendę `com
 Szczegóły na temat każdego z powyższych silników szablonów dostępne są w ich dokumentacjach:
 
 - [Przewodnik po Twig](https://github.com/yiisoft/yii2-twig/tree/master/docs/guide)
-- [Przewodnik po Smarty](https://github.com/yiisoft/yii2-smarty/tree/master/docs/guide)
\ No newline at end of file
+- [Przewodnik po Smarty](https://github.com/yiisoft/yii2-smarty/tree/master/docs/guide)
diff --git a/docs/guide-pt-BR/README.md b/docs/guide-pt-BR/README.md
index 3b008cf8d47..9406a8facbd 100644
--- a/docs/guide-pt-BR/README.md
+++ b/docs/guide-pt-BR/README.md
@@ -1,7 +1,7 @@
 Guia Definitivo para Yii 2.0
 ============================
 
-Esse tutorial está disponível sob os [termos da documentação do Yii](http://www.yiiframework.com/doc/terms/).
+Esse tutorial está disponível sob os [termos da documentação do Yii](https://www.yiiframework.com/doc/terms/).
 
 Todos os Direitos Reservados.
 
diff --git a/docs/guide-pt-BR/concept-aliases.md b/docs/guide-pt-BR/concept-aliases.md
index 2494eb1dd9a..6b6e0ae42b9 100644
--- a/docs/guide-pt-BR/concept-aliases.md
+++ b/docs/guide-pt-BR/concept-aliases.md
@@ -102,7 +102,7 @@ O Yii já predefine uma gama de aliases para referenciar facilmente caminhos de
 - `@vendor`, o [[yii\base\Application::vendorPath|caminho da pasta vendor do Composer]]. 
    Seu padrão é `@app/vendor`.
 - `@bower`, o caminho raiz que contém os [pacotes bower](http://bower.io/). Seu padrão é `@vendor/bower`.
-- `@npm`, o caminho raiz que contém [pacotes npm](https://www.npmjs.org/). Seu padrão é `@vendor/npm`.
+- `@npm`, o caminho raiz que contém [pacotes npm](https://www.npmjs.com/). Seu padrão é `@vendor/npm`.
 
 O alias `@yii` é definido quando você inclui o arquivo `Yii.php` em seu [script de entrada](structure-entry-scripts.md).
 O resto dos aliases são definidos no construtor da aplicação ao aplicar a [configuração](concept-configurations.md) da aplicação.
diff --git a/docs/guide-pt-BR/concept-behaviors.md b/docs/guide-pt-BR/concept-behaviors.md
index 75869fffc1d..902276d61fe 100644
--- a/docs/guide-pt-BR/concept-behaviors.md
+++ b/docs/guide-pt-BR/concept-behaviors.md
@@ -111,21 +111,21 @@ class User extends ActiveRecord
    {
        return [
            // behavior anônimo, somente o nome da classe
-           MyBehavior::className(),
+           MyBehavior::class,
 
            // behavior nomeado, somente o nome da classe
-           'myBehavior2' => MyBehavior::className(),
+           'myBehavior2' => MyBehavior::class,
 
            // behavior anônimo, array de configuração
            [
-               'class' => MyBehavior::className(),
+               'class' => MyBehavior::class,
                'prop1' => 'value1',
                'prop2' => 'value2',
            ],
 
            // behavior nomeado, array de configuração
            'myBehavior4' => [
-               'class' => MyBehavior::className(),
+               'class' => MyBehavior::class,
                'prop1' => 'value1',
                'prop2' => 'value2',
            ]
@@ -145,11 +145,11 @@ use app\components\MyBehavior;
 $component->attachBehavior('myBehavior1', new MyBehavior);
 
 // anexando uma classe behavior 
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // anexando através de um array de configuração
 $component->attachBehavior('myBehavior3', [
-   'class' => MyBehavior::className(),
+   'class' => MyBehavior::class,
    'prop1' => 'value1',
    'prop2' => 'value2',
 ]);
@@ -160,7 +160,7 @@ Você pode anexar vários behaviors de uma só vez usando o método [[yii\base\C
 ```php
 $component->attachBehaviors([
    'myBehavior1' => new MyBehavior,  // um behavior nomeado
-   MyBehavior::className(),          // um behavior anônimo 
+   MyBehavior::class,          // um behavior anônimo 
 ]);
 ```
 
@@ -168,10 +168,10 @@ Você também pode anexar behaviors através de [configurações](concept-config
 
 ```php
 [
-   'as myBehavior2' => MyBehavior::className(),
+   'as myBehavior2' => MyBehavior::class,
 
    'as myBehavior3' => [
-       'class' => MyBehavior::className(),
+       'class' => MyBehavior::class,
        'prop1' => 'value1',
        'prop2' => 'value2',
    ],
@@ -255,7 +255,7 @@ class User extends ActiveRecord
    {
        return [
            [
-               'class' => TimestampBehavior::className(),
+               'class' => TimestampBehavior::class,
                'attributes' => [
                    ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                    ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-pt-BR/concept-components.md b/docs/guide-pt-BR/concept-components.md
index 56684d1c7c8..1950698e9b1 100644
--- a/docs/guide-pt-BR/concept-components.md
+++ b/docs/guide-pt-BR/concept-components.md
@@ -68,7 +68,7 @@ Seguindo essas orientações fará com que seus componentes sejam [configurávei
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // alternatively
 $component = \Yii::createObject([
-   'class' => MyClass::className(),
+   'class' => MyClass::class,
    'prop1' => 3,
    'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-pt-BR/concept-events.md b/docs/guide-pt-BR/concept-events.md
index 84ca7daaa3d..49cbaa65298 100644
--- a/docs/guide-pt-BR/concept-events.md
+++ b/docs/guide-pt-BR/concept-events.md
@@ -191,7 +191,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
    Yii::debug(get_class($event->sender) . ' is inserted');
 });
 ```
@@ -205,11 +205,11 @@ Você pode disparar um evento de *nível de classe* chamando o método estático
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
    var_dump($event->sender);  // displays "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Note que, neste caso, `$event->sender` refere-se ao nome da classe acionando o evento em vez de uma instância do objeto.
@@ -220,10 +220,10 @@ Para desvincular um manipulador de evento de nível de classe, chame [[yii\base\
 
 ```php
 // desvincula $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // Desvincula todos os manipuladores de Foo::EVENT_HELLO
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 
diff --git a/docs/guide-pt-BR/db-active-record.md b/docs/guide-pt-BR/db-active-record.md
index 5139cc68645..368a7819f5c 100644
--- a/docs/guide-pt-BR/db-active-record.md
+++ b/docs/guide-pt-BR/db-active-record.md
@@ -576,7 +576,7 @@ class Customer extends ActiveRecord
 {
    public function getOrders()
    {
-       return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+       return $this->hasMany(Order::class, ['customer_id' => 'id']);
    }
 }
 
@@ -584,7 +584,7 @@ class Order extends ActiveRecord
 {
    public function getCustomer()
    {
-       return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+       return $this->hasOne(Customer::class, ['id' => 'customer_id']);
    }
 }
 ```
@@ -596,7 +596,7 @@ Cada método de relação deve ser nomeado como `getXyz`. Nós chamamos de `xyz`
 Ao declarar uma relação, você deve especificar as seguintes informações:
 
 - A multiplicidade da relação: especificada chamando tanto o método [[yii\db\ActiveRecord::hasMany()|hasMany()]] quanto o método [[yii\db\ActiveRecord::hasOne()|hasOne()]]. No exemplo acima você pode facilmente ler nas declarações de relação que um `customer` tem vários `orders` enquanto uma `order` só tem um `customer`.
-- O nome da classe Active Record relacionada: especificada no primeiro parâmetro dos métodos [[yii\db\ActiveRecord::hasMany()|hasMany()]] e [[yii\db\ActiveRecord::hasOne()|hasOne()]]. Uma prática recomendada é chamar `Xyz::className()` para obter o nome da classe para que você possa receber suporte do preenchimento automático de IDEs bem como detecção de erros. 
+- O nome da classe Active Record relacionada: especificada no primeiro parâmetro dos métodos [[yii\db\ActiveRecord::hasMany()|hasMany()]] e [[yii\db\ActiveRecord::hasOne()|hasOne()]]. Uma prática recomendada é chamar `Xyz::class` para obter o nome da classe para que você possa receber suporte do preenchimento automático de IDEs bem como detecção de erros. 
 - A ligação entre os dois tipos de dados: especifica a(s) coluna(s) por meio do qual os dois tipos de dados se relacionam. Os valores do array são as colunas da tabela primária (representada pela classe Active Record que você declarou as relações), enquanto as chaves do array são as colunas da tabela relacionada.
 
 Uma regra fácil de lembrar é, como você pode ver no exemplo acima, você escreve a coluna que pertence ao Active Record relacionado diretamente ao lado dele. Você pode ver que `customer_id` é uma propriedade de `Order` e `id` é uma propriedade de  `Customer`.
@@ -654,7 +654,7 @@ class Customer extends ActiveRecord
 {
    public function getBigOrders($threshold = 100)
    {
-       return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+       return $this->hasMany(Order::class, ['customer_id' => 'id'])
            ->where('subtotal > :threshold', [':threshold' => $threshold])
            ->orderBy('id');
    }
@@ -683,7 +683,7 @@ class Order extends ActiveRecord
 {
    public function getItems()
    {
-       return $this->hasMany(Item::className(), ['id' => 'item_id'])
+       return $this->hasMany(Item::class, ['id' => 'item_id'])
            ->viaTable('order_item', ['order_id' => 'id']);
    }
 }
@@ -696,12 +696,12 @@ class Order extends ActiveRecord
 {
    public function getOrderItems()
    {
-       return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+       return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
    }
 
    public function getItems()
    {
-       return $this->hasMany(Item::className(), ['id' => 'item_id'])
+       return $this->hasMany(Item::class, ['id' => 'item_id'])
            ->via('orderItems');
    }
 }
@@ -892,7 +892,7 @@ class Customer extends ActiveRecord
 {
    public function getOrders()
    {
-       return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+       return $this->hasMany(Order::class, ['customer_id' => 'id']);
    }
 }
 
@@ -900,7 +900,7 @@ class Order extends ActiveRecord
 {
    public function getCustomer()
    {
-       return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+       return $this->hasOne(Customer::class, ['id' => 'customer_id']);
    }
 }
 ```
@@ -930,7 +930,7 @@ class Customer extends ActiveRecord
 {
    public function getOrders()
    {
-       return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+       return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
    }
 }
 ```
@@ -1023,7 +1023,7 @@ class Customer extends \yii\db\ActiveRecord
    public function getComments()
    {
        // a customer tem muitos comments
-       return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+       return $this->hasMany(Comment::class, ['customer_id' => 'id']);
    }
 }
 
@@ -1038,7 +1038,7 @@ class Comment extends \yii\mongodb\ActiveRecord
    public function getCustomer()
    {
        // um comment tem um customer
-       return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+       return $this->hasOne(Customer::class, ['id' => 'customer_id']);
    }
 }
 
@@ -1106,7 +1106,7 @@ class Customer extends \yii\db\ActiveRecord
 {
    public function getActiveComments()
    {
-       return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+       return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
    }
 }
 
@@ -1166,7 +1166,7 @@ class Customer extends \yii\db\ActiveRecord
 
    public function getOrders()
    {
-       return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+       return $this->hasMany(Order::class, ['customer_id' => 'id']);
    }
 }
 ```
diff --git a/docs/guide-pt-BR/intro-yii.md b/docs/guide-pt-BR/intro-yii.md
index e6ef18423a0..0990cea848a 100644
--- a/docs/guide-pt-BR/intro-yii.md
+++ b/docs/guide-pt-BR/intro-yii.md
@@ -35,7 +35,7 @@ Se já estiver familiarizado com um outro framework, você pode gostar de saber
   que podem ser redistribuídas.
 - Alta performance é sempre um objetivo principal do Yii.
 
-Yii não é um show de um homem só, ele é apoiado por uma [forte equipe de desenvolvedores do código central (core)][about_yii]
+Yii não é um show de um homem só, ele é apoiado por uma [forte equipe de desenvolvedores do código central (core)][yii_team]
 bem como por uma ampla comunidade de profissionais constantemente
 contribuindo com o desenvolvimento do Yii. A equipe de desenvolvedores do Yii
 acompanha de perto às últimas tendências do desenvolvimento Web e as
@@ -44,7 +44,7 @@ As mais relevantes e melhores práticas e características encontradas em outros
 são incorporadas regularmente no core do framework e expostas via interfaces
 simples e elegantes.
 
-[about_yii]: http://www.yiiframework.com/about/
+[yii_team]: https://www.yiiframework.com/team
 
 Versões do Yii
 --------------
diff --git a/docs/guide-pt-BR/rest-authentication.md b/docs/guide-pt-BR/rest-authentication.md
index 5f3aa83c6f0..07d1edc2f8d 100644
--- a/docs/guide-pt-BR/rest-authentication.md
+++ b/docs/guide-pt-BR/rest-authentication.md
@@ -42,7 +42,7 @@ public function behaviors()
 {
    $behaviors = parent::behaviors();
    $behaviors['authenticator'] = [
-       'class' => HttpBasicAuth::className(),
+       'class' => HttpBasicAuth::class,
    ];
    return $behaviors;
 }
@@ -60,11 +60,11 @@ public function behaviors()
 {
    $behaviors = parent::behaviors();
    $behaviors['authenticator'] = [
-       'class' => CompositeAuth::className(),
+       'class' => CompositeAuth::class,
        'authMethods' => [
-           HttpBasicAuth::className(),
-           HttpBearerAuth::className(),
-           QueryParamAuth::className(),
+           HttpBasicAuth::class,
+           HttpBearerAuth::class,
+           QueryParamAuth::class,
        ],
    ];
    return $behaviors;
diff --git a/docs/guide-pt-BR/rest-controllers.md b/docs/guide-pt-BR/rest-controllers.md
index cabbff5bfe1..d2bedec4c79 100644
--- a/docs/guide-pt-BR/rest-controllers.md
+++ b/docs/guide-pt-BR/rest-controllers.md
@@ -51,7 +51,7 @@ public function behaviors()
 {
    $behaviors = parent::behaviors();
    $behaviors['authenticator'] = [
-       'class' => HttpBasicAuth::className(),
+       'class' => HttpBasicAuth::class,
    ];
    return $behaviors;
 }
diff --git a/docs/guide-pt-BR/security-authorization.md b/docs/guide-pt-BR/security-authorization.md
index 721aaf4552e..418872ff6a5 100644
--- a/docs/guide-pt-BR/security-authorization.md
+++ b/docs/guide-pt-BR/security-authorization.md
@@ -20,7 +20,7 @@ class SiteController extends Controller
    {
        return [
            'access' => [
-               'class' => AccessControl::className(),
+               'class' => AccessControl::class,
                'only' => ['login', 'logout', 'signup'],
                'rules' => [
                    [
@@ -59,7 +59,7 @@ Você pode personalizar este behavior configurando a propriedade  [[yii\filters\
 
 ```php
 [
-   'class' => AccessControl::className(),
+   'class' => AccessControl::class,
    ...
    'denyCallback' => function ($rule, $action) {
        throw new \Exception('Você não está autorizado a acessar esta página');
@@ -103,7 +103,7 @@ class SiteController extends Controller
    {
        return [
            'access' => [
-               'class' => AccessControl::className(),
+               'class' => AccessControl::class,
                'only' => ['special-callback'],
                'rules' => [
                    [
diff --git a/docs/guide-pt-BR/start-installation.md b/docs/guide-pt-BR/start-installation.md
index c670e07f580..3a24dcb3ce3 100644
--- a/docs/guide-pt-BR/start-installation.md
+++ b/docs/guide-pt-BR/start-installation.md
@@ -86,7 +86,7 @@ Instalando a partir de um Arquivo Compactado <span id="installing-from-archive-f
 
 A instalação do Yii a partir de um arquivo compactado envolve três passos:
 
-1. Baixe o arquivo compactado em [yiiframework.com](http://www.yiiframework.com/download/).
+1. Baixe o arquivo compactado em [yiiframework.com](https://www.yiiframework.com/download/).
 2. Descompacte o arquivo baixado em um diretório acessível pela Web.
 3. Modifique o arquivo `config/web.php` informando uma chave secreta no item de
 configuração `cookieValidationKey` (isto é feito automaticamente se você instalar
@@ -120,9 +120,9 @@ No entanto, existem outras opções de instalação disponíveis:
 Instalando Recursos Estáticos (Assets) <span id="installing-assets"></span>
 -----------------
 
-Yii utiliza os pacotes [Bower](http://bower.io/) e/ou [NPM](https://www.npmjs.org/) para a instalação das bibliotecas de recursos estáticos (CSS and JavaScript).
+Yii utiliza os pacotes [Bower](http://bower.io/) e/ou [NPM](https://www.npmjs.com/) para a instalação das bibliotecas de recursos estáticos (CSS and JavaScript).
 Ele usa composer para obter essa bibliotecas, permitindo que versões de pacotes PHP, CSS e Javascrtip possam ser definidas/instaladas ao mesmo tempo.
-Isto é possível por usar ou [asset-packagist.org](https://asset-packagist.org) ou [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/).
+Isto é possível por usar ou [asset-packagist.org](https://asset-packagist.org) ou [composer asset plugin](https://github.com/fxpio/composer-asset-plugin).
 Por favor, consulta a [documentação sobre Assets](structure-assets.md) para mais detalhes.
 
 Você pode querer gerenciar assets através de clientes nativos do Bower ou NPM, pode querer utilizar CDNs ou até evitar completamente a instalação de recursos estáticos.
diff --git a/docs/guide-pt-BR/start-looking-ahead.md b/docs/guide-pt-BR/start-looking-ahead.md
index 11cc12ef3aa..9e9af91ba9f 100644
--- a/docs/guide-pt-BR/start-looking-ahead.md
+++ b/docs/guide-pt-BR/start-looking-ahead.md
@@ -11,28 +11,28 @@ Web uma tarefa tão simples quanto preencher alguns formulários.
 Esta seção resume recursos Yii disponíveis que o ajudarão a ser mais produtivo usando o framework.
 
 * Documentação
-    - [O Guia Definitivo](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [O Guia Definitivo](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Conforme o nome indica, o guia define precisamente como o Yii deve funcionar
       e fornece orientações gerais sobre como usá-lo. É o tutorial mais importante e que você deveria ler antes de escrever qualquer código Yii.
-    - [A Referência de Classes](http://www.yiiframework.com/doc-2.0/index.html):
+    - [A Referência de Classes](https://www.yiiframework.com/doc-2.0/index.html):
       Especifica o uso de todas as classes fornecidas pelo Yii. Deve ser
       principalmente usada quando você estiver escrevendo código e quiser entender o uso de uma classe, método ou propriedade específicos. O uso da referência
       de classes é idealmente melhor somente depois de um entendimento contextual do framework como um todo.
-    - [Os Artigos Wiki](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Os Artigos Wiki](https://www.yiiframework.com/wiki/?tag=yii2):
       Os artigos wiki são escritos por usuários do Yii baseados em suas próprias experiências. A maioria deles são escritos como receitas de bolo e mostram
       como resolver problemas específicos usando o Yii. Ainda que a qualidade desses artigos possa não ser tão boa quanto a do Guia Definitivo, eles são úteis porque são abrangem assuntos adicionais e frequentemente fornecem
       soluções prontas para serem usadas.
-    - [Livros](http://www.yiiframework.com/doc/)
-* [Extensões](http://www.yiiframework.com/extensions/):
+    - [Livros](https://www.yiiframework.com/books)
+* [Extensões](https://www.yiiframework.com/extensions/):
   O Yii ostenta uma biblioteca de milhares de extensões contribuídas por usuários que podem facilmente ser plugadas em suas aplicações, tornando
   o seu desenvolvimento ainda mais rápido e mais fácil.
 * Comunidade
-    - Fórum: <http://www.yiiframework.com/forum/>
-    - Chat IRC: O canal #yii na rede freenode (<irc://irc.freenode.net/yii>)
+    - Fórum: <https://forum.yiiframework.com/>
+    - Chat IRC: O canal #yii na rede Libera (<ircs://irc.libera.chat:6697/yii>)
     - Canal Slack: <https://yii.slack.com>
     - Chat Gitter: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
     - Facebook: <https://www.facebook.com/groups/yiitalk/>
     - Twitter: <https://twitter.com/yiiframework>
     - LinkedIn: <https://www.linkedin.com/groups/yii-framework-1483367>
-    - Stackoverflow: <http://stackoverflow.com/questions/tagged/yii2>
\ No newline at end of file
+    - Stackoverflow: <http://stackoverflow.com/questions/tagged/yii2>
diff --git a/docs/guide-pt-BR/start-workflow.md b/docs/guide-pt-BR/start-workflow.md
index 1ff74a8f878..e5c63002da8 100644
--- a/docs/guide-pt-BR/start-workflow.md
+++ b/docs/guide-pt-BR/start-workflow.md
@@ -42,7 +42,7 @@ Estrutura da Aplicação <span id="application-structure"></span>
 
 Os diretórios e arquivos mais importantes em sua aplicação, assumindo que o diretório raiz dela é o `basico`, são:
 
-```
+```js
 basico/                  caminho base de sua aplicação
     composer.json       usado pelo Composer, descreve informações de pacotes
     config/             contém as configurações da aplicação e outras
diff --git a/docs/guide-pt-BR/structure-assets.md b/docs/guide-pt-BR/structure-assets.md
index 304e7f0950b..ba1f7392bdc 100644
--- a/docs/guide-pt-BR/structure-assets.md
+++ b/docs/guide-pt-BR/structure-assets.md
@@ -250,14 +250,14 @@ class FontAwesomeAsset extends AssetBundle
 ```
 
 O exemplo anterior define um asset bundle para o 
-[pacode de "fontawesome"](http://fontawesome.io/). Ao especificar a opção de 
+[pacode de "fontawesome"](https://fontawesome.com/). Ao especificar a opção de 
 publicação `beforeCopy`, apenas os subdiretórios `fonts` e `css` serão publicados.
 
 
 ### Assets do Bower e NPM<span id="bower-npm-assets"></span>
 
 A maioria dos pacotes JavaScript/CSS são gerenciados pelo [Bower](http://bower.io/) 
-e/ou [NPM](https://www.npmjs.org/).
+e/ou [NPM](https://www.npmjs.com/).
 Se sua aplicação ou extensão estiver usando um destes pacotes, é recomendado que 
 você siga os passos a seguir para gerenciar os assets na biblioteca:
 
@@ -542,14 +542,14 @@ O Yii usa as extensões dos nomes de arquivos para identificar se é um asset co
 sintaxe estendida. Por padrão, o Yii reconhecerá as seguintes sintaxes e extensões 
 de arquivos:
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
 O Yii conta com ferramentas de pré-processamento instalados para converter os 
-assets. Por exemplo, para usar o [LESS](http://lesscss.org/) você deve instalar 
+assets. Por exemplo, para usar o [LESS](https://lesscss.org/) você deve instalar 
 o comando de pré-processamento `lessc`.
 
 Você pode personalizar os comandos de pré-processamento e o da sintaxe estendida 
diff --git a/docs/guide-pt-BR/structure-entry-scripts.md b/docs/guide-pt-BR/structure-entry-scripts.md
index 1b887f0616a..d615fec3add 100644
--- a/docs/guide-pt-BR/structure-entry-scripts.md
+++ b/docs/guide-pt-BR/structure-entry-scripts.md
@@ -62,9 +62,9 @@ do console:
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-pt-BR/structure-extensions.md b/docs/guide-pt-BR/structure-extensions.md
index 336099307d8..1e590b0ca96 100644
--- a/docs/guide-pt-BR/structure-extensions.md
+++ b/docs/guide-pt-BR/structure-extensions.md
@@ -153,9 +153,9 @@ O exemplo a seguir mostra o arquivo `composer.json` para a extensão `yiisoft/yi
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -220,8 +220,8 @@ para cada pacote dependente. Utilize dependências estáveis quando sua extensã
 estiver em uma versão estável.
 
 A maioria dos pacotes JavaScript/CSS são gerenciados pelo [Bower](http://bower.io/) 
-e/ou pelo [NPM](https://www.npmjs.org/), ao invés do Composer. O Yii usa o 
-[plugin de asset do Composer](https://github.com/francoispluchino/composer-asset-plugin) 
+e/ou pelo [NPM](https://www.npmjs.com/), ao invés do Composer. O Yii usa o 
+[plugin de asset do Composer](https://github.com/fxpio/composer-asset-plugin) 
 para habilitar a gerência destes tipos de pacotes através do Composer. Se sua 
 extensão depender do pacote do Bower, você pode simplesmente listar a dependência 
 no `composer.json` conforme o exemplo a seguir:
@@ -465,7 +465,7 @@ a sua extensão:
 
 > Informação: Embora não seja um requisito, sugerimos que sua extensão se conforme 
   a determinados estilos de codificação. Você pode consultar o 
-  [estilo de codificação do framework](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style).
+  [estilo de codificação do framework](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md).
 
 
 ## Extensões Nativas <span id="core-extensions"></span>
@@ -491,7 +491,7 @@ e podem ser facilmente instalados como descrito na subseção [Usando Extensões
   A extensão também fornece um conjunto de páginas independentes para exibir mais 
   detalhes das informações de depuração.
 - [yiisoft/yii2-elasticsearch](https://github.com/yiisoft/yii2-elasticsearch):
-  fornece suporte para o uso de [Elasticsearch](http://www.elasticsearch.org/). 
+  fornece suporte para o uso de [Elasticsearch](https://www.elastic.co/). 
   Este inclui suporte a consultas/pesquisas básicas e também implementa o padrão 
   [Active Record](db-active-record.md) que permite que você armazene os active 
   records no Elasticsearch.
@@ -524,4 +524,4 @@ e podem ser facilmente instalados como descrito na subseção [Usando Extensões
 - [yiisoft/yii2-swiftmailer](https://github.com/yiisoft/yii2-swiftmailer):
   fornece recursos para envio de e-mails baseados no [swiftmailer](http://swiftmailer.org/).
 - [yiisoft/yii2-twig](https://github.com/yiisoft/yii2-twig):
-  fornece um motor de template baseado no [Twig](http://twig.sensiolabs.org/).
+  fornece um motor de template baseado no [Twig](https://twig.symfony.com/).
diff --git a/docs/guide-pt-BR/structure-filters.md b/docs/guide-pt-BR/structure-filters.md
index 409f213af90..2aecde82ddb 100644
--- a/docs/guide-pt-BR/structure-filters.md
+++ b/docs/guide-pt-BR/structure-filters.md
@@ -140,7 +140,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // permite aos usuários autenticados
@@ -180,7 +180,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -208,7 +208,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -238,7 +238,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -270,7 +270,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -301,11 +301,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -343,7 +343,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -380,7 +380,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -414,7 +414,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -436,7 +436,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-pt-BR/structure-modules.md b/docs/guide-pt-BR/structure-modules.md
index 9186321108b..73de5703082 100644
--- a/docs/guide-pt-BR/structure-modules.md
+++ b/docs/guide-pt-BR/structure-modules.md
@@ -20,7 +20,7 @@ controllers (controladores), models (modelos), views (visões) e outros códigos
 assim como em uma aplicação. O exemplo a seguir mostra o conteúdo dentro de um 
 módulo:
 
-```
+```js
 forum/
     Module.php                   o arquivo da classe do módulo 
     controllers/                 contém os arquivos da classe controller
diff --git a/docs/guide-pt-BR/structure-views.md b/docs/guide-pt-BR/structure-views.md
index e92a4191f5c..3eeeb745976 100644
--- a/docs/guide-pt-BR/structure-views.md
+++ b/docs/guide-pt-BR/structure-views.md
@@ -606,7 +606,7 @@ Componentes de view fornecem úteis recursos relacionados. Cada um deles está d
   fragmento de uma página.
 * [manipulação de client scripts](output-client-scripts.md): permite que você registre e renderize CSS e JavaScript.
 * [manipulando asset bundle](structure-assets.md): permite que você registre e renderize [recursos estáticos (asset bundles)](structure-assets.md).
-* [template engines alternativos](tutorial-template-engines.md): permite que você use outros template engines, tais como o [Twig](http://twig.sensiolabs.org/)
+* [template engines alternativos](tutorial-template-engines.md): permite que você use outros template engines, tais como o [Twig](https://twig.symfony.com/)
   e [Smarty](http://www.smarty.net/).
 
 Você também pode usar os seguintes recursos que, embora simples, são úteis quando estiver desenvolvendo suas páginas.
@@ -681,14 +681,14 @@ $this->registerLinkTag([
     'title' => 'Notícias sobre o Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 O código acima resultará em
 
 ```html
-<link title="Notícias sobre o Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Notícias sobre o Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Assim como no método [[yii\web\View::registerMetaTag()|registerMetaTags()]],
diff --git a/docs/guide-pt-BR/tutorial-yii-integration.md b/docs/guide-pt-BR/tutorial-yii-integration.md
index d318b99b2e1..126e4f03294 100644
--- a/docs/guide-pt-BR/tutorial-yii-integration.md
+++ b/docs/guide-pt-BR/tutorial-yii-integration.md
@@ -70,11 +70,11 @@ Se o sistema em questão utilizar o Composer para gerenciar suas dependências,
     composer require yiisoft/yii2
     composer install
 
-O primeiro comando instala o [Composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/)
+O primeiro comando instala o [Composer asset plugin](https://github.com/fxpio/composer-asset-plugin)
 que permite gerenciar o bower e dependências de pacotes npm através do Composer. Mesmo que você apenas queira utilizar a camada de banco de dados ou outros recursos não-ativos relacionados do Yii, isto é necessário para instalar o pacote Composer do Yii.
 Veja também a seção [sobre a instalação do Yii](start-installation.md#installing-via-composer) para obter mais informações do Composer e solução para os possíveis problemas que podem surgir durante a instalação.
 
-Caso contrário, você pode fazer o [download](http://www.yiiframework.com/download/) do Yii e descompactá-lo no diretório `BasePath/vendor`.
+Caso contrário, você pode fazer o [download](https://www.yiiframework.com/download/) do Yii e descompactá-lo no diretório `BasePath/vendor`.
 
 Em seguida, você deve modificar o script de entrada do sistema de terceiros incluindo o seguinte código no início:
 
diff --git a/docs/guide-ru/README.md b/docs/guide-ru/README.md
index 71f4d9ff21c..9cff24a678b 100644
--- a/docs/guide-ru/README.md
+++ b/docs/guide-ru/README.md
@@ -1,7 +1,7 @@
 Полное руководство по Yii 2.0
 =============================
 
-Данное руководство выпущено в соответствии с [положениями о документации Yii](http://www.yiiframework.com/doc/terms/).
+Данное руководство выпущено в соответствии с [положениями о документации Yii](https://www.yiiframework.com/doc/terms/).
 
 All Rights Reserved.
 
@@ -181,14 +181,14 @@ All Rights Reserved.
 Виджеты
 -------
 
-* [GridView](http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
-* [ListView](http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
-* [DetailView](http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
-* [ActiveForm](http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
-* [Pjax](http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
-* [Menu](http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
-* [LinkPager](http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
-* [LinkSorter](http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
+* [GridView](https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
+* [ListView](https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
+* [DetailView](https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
+* [ActiveForm](https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
+* [Pjax](https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
+* [Menu](https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
+* [LinkPager](https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
+* [LinkSorter](https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
 * [Виджеты Bootstrap](https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-ru/README.md)
 * [Виджеты Jquery UI](https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-ru/README.md)
 
diff --git a/docs/guide-ru/concept-behaviors.md b/docs/guide-ru/concept-behaviors.md
index de7126df509..0983d6f298b 100644
--- a/docs/guide-ru/concept-behaviors.md
+++ b/docs/guide-ru/concept-behaviors.md
@@ -126,21 +126,21 @@ class User extends ActiveRecord
     {
         return [
             // анонимное поведение, прикрепленное по имени класса
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // именованное поведение, прикрепленное по имени класса
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // анонимное поведение, сконфигурированное с использованием массива
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // именованное поведение, сконфигурированное с использованием массива
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -164,11 +164,11 @@ use app\components\MyBehavior;
 $component->attachBehavior('myBehavior1', new MyBehavior);
 
 // прикрепляем по имени класса поведения
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // прикрепляем используя массив конфигураций
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -180,7 +180,7 @@ $component->attachBehavior('myBehavior3', [
 ```php
 $component->attachBehaviors([
     'myBehavior1' => new MyBehavior,  // именованное поведение
-    MyBehavior::className(),          // анонимное поведение
+    MyBehavior::class,          // анонимное поведение
 ]);
 ```
 
@@ -188,10 +188,10 @@ $component->attachBehaviors([
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -280,7 +280,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-ru/concept-components.md b/docs/guide-ru/concept-components.md
index b76a2637d83..05c91df1554 100644
--- a/docs/guide-ru/concept-components.md
+++ b/docs/guide-ru/concept-components.md
@@ -77,7 +77,7 @@ class MyClass extends BaseObject
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // альтернативный способ
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-ru/concept-events.md b/docs/guide-ru/concept-events.md
index f9eb47d0dcb..a6f7dba9e12 100644
--- a/docs/guide-ru/concept-events.md
+++ b/docs/guide-ru/concept-events.md
@@ -187,7 +187,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' добавлен');
 });
 ```
@@ -201,11 +201,11 @@ Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // выводит "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Обратите внимание, что в данном случае `$event->sender` имеет значение `null` вместо экзепляра класса, который инициировал событие.
@@ -216,10 +216,10 @@ Event::trigger(Foo::className(), Foo::EVENT_HELLO);
 
 ```php
 // отсоединение $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // отсоединяются все обработчики Foo::EVENT_HELLO
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Обработчики событий на уровне интерфейсов <span id="interface-level-event-handlers"></span>
@@ -274,10 +274,10 @@ Event::on('app\interfaces\DanceEventInterface', DanceEventInterface::EVENT_DANCE
 
 ```php
 // trigger event for Dog class
-Event::trigger(Dog::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Dog::class, DanceEventInterface::EVENT_DANCE);
 
 // trigger event for Developer class
-Event::trigger(Developer::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Developer::class, DanceEventInterface::EVENT_DANCE);
 ```
 
 Однако невозможно инициализировать событие во всех классах, которые реализуют интерфейс:
diff --git a/docs/guide-ru/db-active-record.md b/docs/guide-ru/db-active-record.md
index 2602fd600b4..b05914748b3 100644
--- a/docs/guide-ru/db-active-record.md
+++ b/docs/guide-ru/db-active-record.md
@@ -809,7 +809,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -817,7 +817,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -834,7 +834,7 @@ class Order extends ActiveRecord
   что покупатель может иметь много заказов в то время, как заказ может быть сделан лишь одним покупателем.
 - название связного Active Record класса: указывается в качестве первого параметра для метода 
   [[yii\db\ActiveRecord::hasMany()|hasMany()]] или для метода [[yii\db\ActiveRecord::hasOne()|hasOne()]]. Рекомендуется
-  использовать код `Xyz::className()`, чтобы получить строку с именем класса, при этом вы сможете воспользоваться
+  использовать код `Xyz::class`, чтобы получить строку с именем класса, при этом вы сможете воспользоваться
   возможностями авто-дополнения кода, встроенного в IDE, а также получите обработку ошибок на этапе компиляции.
 - связь между двумя типами данных: указываются столбцы с помощью которых два типа данных связаны. Значения массива - это
   столбцы  основного объекта данных (представлен классом Active Record, в котором объявляется связь), в то время как
@@ -844,6 +844,7 @@ class Order extends ActiveRecord
   указывается сразу после указания самого класса Active Record. Вы видите, что `customer_id` - это свойство класса
   `Order`, а `id` - свойство класса `Customer`.
   
+> Warning: Имя связи `relation` зарезервировано. Его использование приведёт к ошибке `ArgumentCountError`.
 
 ### Доступ к связным данным <span id="accessing-relational-data"></span>
 
@@ -910,7 +911,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100)
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -946,7 +947,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -959,12 +960,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1235,7 +1236,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1243,7 +1244,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1277,7 +1278,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1390,7 +1391,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // у покупателя может быть много комментариев
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1405,7 +1406,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // комментарий принадлежит одному покупателю
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1485,7 +1486,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1556,7 +1557,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1652,7 +1653,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1683,7 +1684,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide-ru/intro-yii.md b/docs/guide-ru/intro-yii.md
index 9bed6ab5f3a..699809109e0 100644
--- a/docs/guide-ru/intro-yii.md
+++ b/docs/guide-ru/intro-yii.md
@@ -26,7 +26,7 @@ Yii – это универсальный фреймворк и может бы
 - Yii отлично расширяем. Вы можете настроить или заменить практически любую часть основного кода. Используя архитектуру расширений, легко делиться кодом или использовать код сообщества.
 - Одна из главных целей Yii – производительность.
 
-Yii — не проект одного человека. Он поддерживается и развивается [сильной командой](http://www.yiiframework.com/team/) и большим сообществом разработчиков,
+Yii — не проект одного человека. Он поддерживается и развивается [сильной командой](https://www.yiiframework.com/team/) и большим сообществом разработчиков,
 которые ей помогают. Авторы фреймворка следят за тенденциями веб-разработки и развитием других проектов. Наиболее
 подходящие возможности и лучшие практики регулярно внедряются в фреймворк в виде простых и элегантных интерфейсов.
 
diff --git a/docs/guide-ru/output-client-scripts.md b/docs/guide-ru/output-client-scripts.md
index e4499049958..03066e1d949 100644
--- a/docs/guide-ru/output-client-scripts.md
+++ b/docs/guide-ru/output-client-scripts.md
@@ -46,7 +46,7 @@ $this->registerJs(
 ```php
 $this->registerJsFile(
     '@web/js/main.js',
-    ['depends' => [\yii\web\JqueryAsset::className()]]
+    ['depends' => [\yii\web\JqueryAsset::class]]
 );
 ```
 
@@ -80,7 +80,7 @@ body { background: #f00; }
 
 ```php
 $this->registerCssFile("@web/css/themes/black-and-white.css", [
-    'depends' => [\yii\bootstrap\BootstrapAsset::className()],
+    'depends' => [\yii\bootstrap\BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
@@ -170,4 +170,4 @@ JS
 > - Обработчик `data-confirm`
 > - Обработчик `data-method`
 > - Фильтрация скриптов
-> - Обработка перенаправления
\ No newline at end of file
+> - Обработка перенаправления
diff --git a/docs/guide-ru/output-pagination.md b/docs/guide-ru/output-pagination.md
index 59dac20f77c..2545528f487 100644
--- a/docs/guide-ru/output-pagination.md
+++ b/docs/guide-ru/output-pagination.md
@@ -31,7 +31,7 @@ function actionIndex()
 }
 ```
 
-Затем в представлении мы выводим модели для текущей страницы и передаем объект постраничного разделение данных в элемент нумерации страниц:
+Затем в представлении мы выводим модели для текущей страницы и передаем объект постраничного разделения данных в элемент нумерации страниц:
 
 ```php
 foreach ($models as $model) {
diff --git a/docs/guide-ru/rest-authentication.md b/docs/guide-ru/rest-authentication.md
index b4ef119e8de..b35d46d68f8 100644
--- a/docs/guide-ru/rest-authentication.md
+++ b/docs/guide-ru/rest-authentication.md
@@ -57,7 +57,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -75,11 +75,11 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => CompositeAuth::className(),
+        'class' => CompositeAuth::class,
         'authMethods' => [
-            HttpBasicAuth::className(),
-            HttpBearerAuth::className(),
-            QueryParamAuth::className(),
+            HttpBasicAuth::class,
+            HttpBearerAuth::class,
+            QueryParamAuth::class,
         ],
     ];
     return $behaviors;
diff --git a/docs/guide-ru/rest-controllers.md b/docs/guide-ru/rest-controllers.md
index a8e45033b95..4dfff0da310 100644
--- a/docs/guide-ru/rest-controllers.md
+++ b/docs/guide-ru/rest-controllers.md
@@ -70,7 +70,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
diff --git a/docs/guide-ru/security-authorization.md b/docs/guide-ru/security-authorization.md
index d32d72efc65..cd791049c26 100644
--- a/docs/guide-ru/security-authorization.md
+++ b/docs/guide-ru/security-authorization.md
@@ -25,7 +25,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -68,7 +68,7 @@ class SiteController extends Controller
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('У вас нет доступа к этой странице');
     }
@@ -122,7 +122,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
@@ -447,7 +447,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'rules' => [
                 [
                     'allow' => true,
diff --git a/docs/guide-ru/start-installation.md b/docs/guide-ru/start-installation.md
index 40b22e81ba7..fdc405c35c2 100644
--- a/docs/guide-ru/start-installation.md
+++ b/docs/guide-ru/start-installation.md
@@ -72,7 +72,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
 Установка Yii из архива состоит из трёх шагов:
 
-1. Скачайте архив с [yiiframework.com](http://www.yiiframework.com/download/);
+1. Скачайте архив с [yiiframework.com](https://www.yiiframework.com/download/);
 2. Распакуйте скачанный архив в папку, доступную из Web.
 3. В файле `config/web.php` добавьте секретный ключ в значение `cookieValidationKey` (при установке через Composer
    это происходит автоматически):
diff --git a/docs/guide-ru/start-looking-ahead.md b/docs/guide-ru/start-looking-ahead.md
index 9872ae0e356..d10becc34b1 100644
--- a/docs/guide-ru/start-looking-ahead.md
+++ b/docs/guide-ru/start-looking-ahead.md
@@ -22,11 +22,11 @@
 	  Причём качество этих статей может быть таким же хорошим, как в Подробном руководстве. 
 	  Они полезны тем, что охватывают более широкие темы и часто могут предоставить вам готовые решения для дальнейшего использования.
     - Книги
-* [Расширения](http://www.yiiframework.com/extensions/):
+* [Расширения](https://www.yiiframework.com/extensions/):
   Yii гордится библиотекой из тысяч внесённых пользователями расширений, 
   которые могут быть легко подключены в ваши приложения и сделать разработку приложений ещё быстрее и проще.
 * Сообщество
-    - [Форум](http://www.yiiframework.com/forum/)
+    - [Форум](https://forum.yiiframework.com/)
     - [Чат Gitter](https://gitter.im/yiisoft/yii2/rus)
     - [GitHub](https://github.com/yiisoft/yii2)
     - [Facebook](https://www.facebook.com/groups/yiitalk/)
diff --git a/docs/guide-ru/start-workflow.md b/docs/guide-ru/start-workflow.md
index 2357de2714d..43f53bb25b5 100644
--- a/docs/guide-ru/start-workflow.md
+++ b/docs/guide-ru/start-workflow.md
@@ -35,7 +35,7 @@
 
 Ниже приведен список основных директорий и файлов вашего приложения (считаем, что приложение установлено в директорию `basic`):
 
-```
+```js
 basic/                  корневой каталог приложения
     composer.json       используется Composer'ом, содержит описание приложения
     config/             конфигурационные файлы
diff --git a/docs/guide-ru/structure-assets.md b/docs/guide-ru/structure-assets.md
index aa4c412f637..e7aeaaf4f9d 100644
--- a/docs/guide-ru/structure-assets.md
+++ b/docs/guide-ru/structure-assets.md
@@ -162,11 +162,11 @@ class FontAwesomeAsset extends AssetBundle
 }  
 ```
 
-В выше указанном примере определён комплект ресурсов для [пакета "fontawesome"](http://fontawesome.io/). Задан параметр публикации `beforeCopy`, здесь только `fonts` и `css` поддиректории будут опубликованы.
+В выше указанном примере определён комплект ресурсов для [пакета "fontawesome"](https://fontawesome.com/). Задан параметр публикации `beforeCopy`, здесь только `fonts` и `css` поддиректории будут опубликованы.
 
 ### Установка ресурсов Bower и NPM<span id="bower-npm-assets"></span>
 
-Большинство JavaScript/CSS пакетов управляются [Bower](http://bower.io/) и/или [NPM](https://www.npmjs.org/).
+Большинство JavaScript/CSS пакетов управляются [Bower](http://bower.io/) и/или [NPM](https://www.npmjs.com/).
 В мире PHP мы испольуем Composer для управления зависимостями, но он не позволяет устанавливать пакеты Bower и NPM, просто указывая их в `composer.json`.
 
 Чтобы получить такую возможность, нужно немного настроить Composer. Существует два варианта:
@@ -215,7 +215,7 @@ $config = [
 composer global require "fxp/composer-asset-plugin:^1.4.1"
 ```
 
-Эта команда устанавливает [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) глобально,
+Эта команда устанавливает [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) глобально,
 что позволит устанавливать зависимости из Bower и NPM. После установки все проекты на вашем комьютере будут поддерживать
 установку Bower и NPM пакетов, описанных в `composer.json`.
 
@@ -511,13 +511,13 @@ class AppAsset extends AssetBundle
 
 Yii использует имена расширений файлов для идентификации расширенного синтаксиса внутри ресурса. По умолчанию признаны следующие синтаксисы и имена расширений файлов:
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
-Yii ориентируется на установленные инструменты конвертации ресурсов препроцессора. Например, используя [LESS](http://lesscss.org/), Вы должны установить команду `lessc` препроцессора.
+Yii ориентируется на установленные инструменты конвертации ресурсов препроцессора. Например, используя [LESS](https://lesscss.org/), Вы должны установить команду `lessc` препроцессора.
 
 Вы можете настроить команды препроцессора и поддерживать расширенный синтаксис сконфигурировав [[yii\web\AssetManager::converter]] следующим образом:
 
diff --git a/docs/guide-ru/structure-entry-scripts.md b/docs/guide-ru/structure-entry-scripts.md
index 71fbf54ebd9..a04daeeabe5 100644
--- a/docs/guide-ru/structure-entry-scripts.md
+++ b/docs/guide-ru/structure-entry-scripts.md
@@ -57,9 +57,9 @@ $config = require __DIR__ . '/../config/web.php';
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-ru/structure-extensions.md b/docs/guide-ru/structure-extensions.md
index 038cf761764..9b4979b170b 100644
--- a/docs/guide-ru/structure-extensions.md
+++ b/docs/guide-ru/structure-extensions.md
@@ -130,9 +130,9 @@ Image::thumbnail('@webroot/img/test-image.jpg', 120, 120)
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -369,7 +369,7 @@ class MyBootstrapClass implements BootstrapInterface
   предоставляет инструмент для генерации документации API на основе ваших комментариев.
 
 > Info: Пока это не обязательно, но мы всё-таки рекомендуем вам придерживаться определённого стиля кодирования.
-  Вы можете обратиться к [стилю кодирования фреймворка](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style).
+  Вы можете обратиться к [стилю кодирования фреймворка](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md).
 
 
 ## Базовые расширения <span id="core-extensions"></span>
@@ -393,7 +393,7 @@ Yii предоставляет следующие базовые расшире
   нижней части каждой страницы. Это расширение также предоставляет набор отдельных страниц для отображения более
   подробной отладочной информации.
 - [yiisoft/yii2-elasticsearch](https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch):
-  предоставляет поддержку использования [Elasticsearch](http://www.elasticsearch.org/). Оно включает в себя поддержку
+  предоставляет поддержку использования [Elasticsearch](https://www.elastic.co/). Оно включает в себя поддержку
   основных поисковых запросов, а также реализует шаблон проектирования [Active Record](db-active-record.md), который
   позволяет хранить записи Active Record в Elasticsearch.
 - [yiisoft/yii2-faker](https://github.com/yiisoft/yii2-faker):
@@ -422,4 +422,4 @@ Yii предоставляет следующие базовые расшире
 - [yiisoft/yii2-swiftmailer](https://github.com/yiisoft/yii2-swiftmailer):
   предоставляет возможности отправки email, основанные на [swiftmailer](http://swiftmailer.org/).
 - [yiisoft/yii2-twig](https://github.com/yiisoft/yii2-twig):
-  предоставляет шаблонизатор, основанный на [Twig](http://twig.sensiolabs.org/).
+  предоставляет шаблонизатор, основанный на [Twig](https://twig.symfony.com/).
diff --git a/docs/guide-ru/structure-filters.md b/docs/guide-ru/structure-filters.md
index fcc630835f5..a1fe490dc98 100644
--- a/docs/guide-ru/structure-filters.md
+++ b/docs/guide-ru/structure-filters.md
@@ -118,7 +118,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // разрешаем аутентифицированным пользователям
@@ -154,7 +154,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -180,7 +180,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -206,7 +206,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -236,7 +236,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -264,11 +264,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -302,7 +302,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -334,7 +334,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -365,7 +365,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -387,7 +387,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-ru/structure-modules.md b/docs/guide-ru/structure-modules.md
index 8b1fce134f6..a8fc39ab042 100644
--- a/docs/guide-ru/structure-modules.md
+++ b/docs/guide-ru/structure-modules.md
@@ -10,7 +10,7 @@
 директории приложения, в этой директории существуют поддиректории `controllers`, `models`, `views` и другие, в которых
 размещаются контроллеры, модели, представления и другие элементы. В следующем примере показано примерное содержимое модуля:
 
-```
+```js
 forum/
     Module.php                   файл класса модуля
     controllers/                 содержит файлы классов контроллеров
diff --git a/docs/guide-ru/structure-views.md b/docs/guide-ru/structure-views.md
index 8012681318c..c2903821691 100644
--- a/docs/guide-ru/structure-views.md
+++ b/docs/guide-ru/structure-views.md
@@ -468,7 +468,7 @@ Yii определяет какой шаблон использовать для
 * [работа с клиентскими скриптами](output-client-scripts.md): Поддерживает регистрацию и рендеринг CSS и Javascript.
 * [управление связками](structure-assets.md): позволяет регистрацию и управление [связками клиентского кода](structure-assets.md).
 * [альтернативные движки шаблонов](tutorial-template-engines.md): позволяет использовать другие шаблонные движки, такие как 
-  [Twig](http://twig.sensiolabs.org/), [Smarty](http://www.smarty.net/).
+  [Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/).
 
 
 Также удобно пользоваться мелкими, но удобными фичами при разработке веб страниц, которые приведены ниже.
@@ -539,14 +539,14 @@ $this->registerLinkTag([
     'title' => 'Сводка новостей по Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 Этот код выведет
 
 ```html
-<link title="Сводка новостей по Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Сводка новостей по Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Как и в случае с [[yii\web\View::registerMetaTag()|registerMetaTag()]], вы можете указать ключ вторым параметром при вызове 
diff --git a/docs/guide-ru/test-fixtures.md b/docs/guide-ru/test-fixtures.md
index 56a054ccb09..0795599b191 100644
--- a/docs/guide-ru/test-fixtures.md
+++ b/docs/guide-ru/test-fixtures.md
@@ -128,7 +128,7 @@ class UserProfileTest extends DbTestCase
     public function fixtures()
     {
         return [
-            'profiles' => UserProfileFixture::className(),
+            'profiles' => UserProfileFixture::class,
         ];
     }
 
diff --git a/docs/guide-ru/tutorial-template-engines.md b/docs/guide-ru/tutorial-template-engines.md
index e69bb5f17cc..1d07331328f 100644
--- a/docs/guide-ru/tutorial-template-engines.md
+++ b/docs/guide-ru/tutorial-template-engines.md
@@ -2,7 +2,7 @@
 ======================
 
 По умолчанию, Yii использует PHP в шаблонах, но вы можете настроить Yii на поддержку других шаблонизаторов, таких как
-[Twig](http://twig.sensiolabs.org/) или [Smarty](http://www.smarty.net/), которые доступны в расширениях.
+[Twig](https://twig.symfony.com/) или [Smarty](https://www.smarty.net/), которые доступны в расширениях.
 
 Компонент `view`, отвественный за генерацию видов. Вы можете добавить шаблонизатор с помощью перенастройки поведения компонента:
 
diff --git a/docs/guide-ru/tutorial-yii-integration.md b/docs/guide-ru/tutorial-yii-integration.md
index 6df394f094a..86b034a0a4e 100644
--- a/docs/guide-ru/tutorial-yii-integration.md
+++ b/docs/guide-ru/tutorial-yii-integration.md
@@ -71,10 +71,10 @@ composer require yiisoft/yii2
 [ресурсов](structure-assets.md), вы можете установить специальный пакет, который предотвращает загрузку Bower и NPM
 пакетов. Смотрите [cebe/assetfree-yii2](https://github.com/cebe/assetfree-yii2) для деталей.
 
-Первая команда устанавливает [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/), который позволяет управлять зависимостями пакетов bower и npm через Composer. Даже если вы хотите воспользоваться слоем абстракции баз данных или другими элементами Yii, не связанными с ресурсами, этот плагин все равно придется установить, так как без него не установится пакет Yii.
+Первая команда устанавливает [composer asset plugin](https://github.com/fxpio/composer-asset-plugin), который позволяет управлять зависимостями пакетов bower и npm через Composer. Даже если вы хотите воспользоваться слоем абстракции баз данных или другими элементами Yii, не связанными с ресурсами, этот плагин все равно придется установить, так как без него не установится пакет Yii.
 В разделе [об установке Yii](start-installation.md#installing-via-composer) более подробно описана работа с Composer и даны решения проблем, которые могут возникнуть при установке.
 
-Также можно [скачать](http://www.yiiframework.com/download/) файл релиза Yii и распаковать его в директорию `BasePath/vendor`.
+Также можно [скачать](https://www.yiiframework.com/download/) файл релиза Yii и распаковать его в директорию `BasePath/vendor`.
 
 Далее следует изменить входной скрипт сторонней системы, поместив в его начало следующий код:
 
diff --git a/docs/guide-tr/README.md b/docs/guide-tr/README.md
index 03e7b38eab7..5e2061cfbf6 100644
--- a/docs/guide-tr/README.md
+++ b/docs/guide-tr/README.md
@@ -1,7 +1,7 @@
 Yii 2.0 için Açıklayıcı Rehber
 ==============================
 
-Bu döküman, [Yii Dökümantasyon Koşulları](http://www.yiiframework.com/doc/terms/) altında yayınlandı.
+Bu döküman, [Yii Dökümantasyon Koşulları](https://www.yiiframework.com/doc/terms/) altında yayınlandı.
 
 Tüm hakları saklıdır.
 
diff --git a/docs/guide-tr/intro-yii.md b/docs/guide-tr/intro-yii.md
index 330cad30944..0de94ce865c 100644
--- a/docs/guide-tr/intro-yii.md
+++ b/docs/guide-tr/intro-yii.md
@@ -19,7 +19,7 @@ Eğer zaten başka bir kütüphane ailesine dahilseniz, Yii'yi karşılaştırma
 - Yii son derece genişletilebilir. Neredeyse her bir çekirdek kodunu kişiselleştirebilir veya değiştirebilirsiniz. Yeniden dağıtılabilir uzantıları kullanmak veya geliştirmek için Yii'nin katı uzantı mimarisinden de yararlanabilirsiniz.
 - Yüksek performans her zaman Yii'nin öncelikli hedefidir.
 
-Yii tek kişilik bir gösteri değildir, [güçlü çekirdek geliştirici ekibi](http://www.yiiframework.com/team/) ve Yii'nin gelişimine sürekli katkıda bulunan büyük bir profesyonel geliştirici topluluğu tarafından da destekleniyor. Yii geliştirici ekibi, en yeni Web geliştirme teknikleri ile diğer kütüphaneler ve projelerde bulunan en iyi uygulamalara ve özelliklere yakından göz atmaktadır. Basit ve zarif arayüzler aracılığıyla, başka yerde bulunan en uygun, en iyi uygulamalar ve özellikler, düzenli olarak çekirdek kütüphaneye dahil edilir.
+Yii tek kişilik bir gösteri değildir, [güçlü çekirdek geliştirici ekibi](https://www.yiiframework.com/team/) ve Yii'nin gelişimine sürekli katkıda bulunan büyük bir profesyonel geliştirici topluluğu tarafından da destekleniyor. Yii geliştirici ekibi, en yeni Web geliştirme teknikleri ile diğer kütüphaneler ve projelerde bulunan en iyi uygulamalara ve özelliklere yakından göz atmaktadır. Basit ve zarif arayüzler aracılığıyla, başka yerde bulunan en uygun, en iyi uygulamalar ve özellikler, düzenli olarak çekirdek kütüphaneye dahil edilir.
 
 
 Yii'nin Sürümleri
diff --git a/docs/guide-uk/README.md b/docs/guide-uk/README.md
index c44f93736bf..b7e1a65d460 100644
--- a/docs/guide-uk/README.md
+++ b/docs/guide-uk/README.md
@@ -1,7 +1,7 @@
 Повний посібник з Yii 2.0
 =========================
 
-Даний посібник випущено відповідно до [положень про документацію Yii](http://www.yiiframework.com/doc/terms/).
+Даний посібник випущено відповідно до [положень про документацію Yii](https://www.yiiframework.com/doc/terms/).
 
 All Rights Reserved.
 
diff --git a/docs/guide-uk/concept-aliases.md b/docs/guide-uk/concept-aliases.md
index cebb6911a1c..856f8e8bf20 100644
--- a/docs/guide-uk/concept-aliases.md
+++ b/docs/guide-uk/concept-aliases.md
@@ -113,7 +113,7 @@ $cache = new FileCache([
 - `@web`, базовий URL поточного додатку. Має таке ж значення, як і [[yii\web\Request::baseUrl]].
 - `@vendor`, [[yii\base\Application::vendorPath|директорія vendor Composer]]. За замовчуванням `@app/vendor`.
 - `@bower`, директорія, що містить [пакунки Bower](http://bower.io/). За замовчуванням `@vendor/bower`.
-- `@npm`, директорія, що містить [пакунки NPM](https://www.npmjs.org/). За замовчуванням `@vendor/npm`.
+- `@npm`, директорія, що містить [пакунки NPM](https://www.npmjs.com/). За замовчуванням `@vendor/npm`.
 
 Псевдонім `@yii` задається в момент підключення файлу `Yii.php` у [вхідному скрипті](structure-entry-scripts.md).
 Решта псевдонімів задаються в конструкторі додатка в момент застосування [конфигурації](concept-configurations.md).
diff --git a/docs/guide-uk/intro-upgrade-from-v1.md b/docs/guide-uk/intro-upgrade-from-v1.md
index 308bcf27817..5fabdd52ee7 100644
--- a/docs/guide-uk/intro-upgrade-from-v1.md
+++ b/docs/guide-uk/intro-upgrade-from-v1.md
@@ -512,7 +512,7 @@ User та IdentityInterface
 Замість цього, необхідно реалізувати інтерфейс [[yii\web\IdentityInterface]], що набагато простіше у використанні.
 
 Більш детальна інформація представлена у розділах [Аутентифікація](security-authentication.md),
-[Авторизація](security-authorization.md) та [Розширений шаблон додатка](https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide-uk/README.md).
+[Авторизація](security-authorization.md) та [Розширений шаблон додатка](https://www.yiiframework.com/extension/yiisoft/yii2-app-advanced/doc/guide).
 
 
 Керування URL
diff --git a/docs/guide-uk/start-hello.md b/docs/guide-uk/start-hello.md
index dae433bcf7b..d80c1e853aa 100644
--- a/docs/guide-uk/start-hello.md
+++ b/docs/guide-uk/start-hello.md
@@ -22,9 +22,9 @@
 параметр `message` із запиту і відображає його значення користувачу. Якщо в запиті
 відсутній параметр `message`, то дія буде відображати "Привіт".
 
-> Інформація: [Дії](structure-controllers.md#creating-actions) являються об’єктами, на які користувач може посилатись для
-виконання. Дії згруповані в [контролери](structure-controllers.md). Результатом виконання
-дії є відповідь, яку отримує користувач.
+> Info: [Дії](structure-controllers.md#creating-actions) являються об’єктами, на які користувач може посилатись для
+  виконання. Дії згруповані в [контролери](structure-controllers.md). Результатом виконання
+  дії є відповідь, яку отримує користувач.
 
 Дії повинні оголошуватись в [контролерах](structure-controllers.md). Для простоти, ви можете
 оголосити дію `say` в уже наявному контролері `SiteController`, який визначений
diff --git a/docs/guide-uk/start-installation.md b/docs/guide-uk/start-installation.md
index 7fdbf46dd0b..fef5e47952e 100644
--- a/docs/guide-uk/start-installation.md
+++ b/docs/guide-uk/start-installation.md
@@ -44,7 +44,7 @@
     composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 ```
 
-Перша команда встановить [плагін ресурсів composer (composer-asset-plugin)](https://github.com/francoispluchino/composer-asset-plugin/),
+Перша команда встановить [плагін ресурсів composer (composer-asset-plugin)](https://github.com/fxpio/composer-asset-plugin),
 що дозволить керувати залежностями пакунків Bower та NPM за допомогою Composer. Цю команду потрібно виконати лише
 один раз. Друга команда встановить Yii у директорію під назвою `basic`. За бажанням, ви можете обрати інше ім’я для директорії.
 
@@ -69,7 +69,7 @@
 
 Встановлення Yii з архіву складається з трьох кроків:
 
-1. Завантажте архів за адресою [yiiframework.com](http://www.yiiframework.com/download/);
+1. Завантажте архів за адресою [yiiframework.com](https://www.yiiframework.com/download/);
 2. Розпакуйте архів в директорію, доступну через Web.
 3. Відредагуйте файл конфігурації `config/web.php` - необхідно ввести таємний ключ до пункту `cookieValidationKey`
    (це виконується автоматично при вставленні Yii через Composer):
diff --git a/docs/guide-uk/start-looking-ahead.md b/docs/guide-uk/start-looking-ahead.md
index a1f072eb283..c99ce0f01aa 100644
--- a/docs/guide-uk/start-looking-ahead.md
+++ b/docs/guide-uk/start-looking-ahead.md
@@ -9,23 +9,23 @@
 У цьому розділі зібрані ресурси пов’язані з Yii, які допоможуть вам бути більш продуктивними при використанні фреймворку.
 
 * Документація
-    - [Докладний Посібник](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [Докладний Посібник](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Як випливає з назви, посібник точно визначає, як Yii повинен працювати і дає вам загальні вказівки
       щодо його застосування. Це найважливіший Yii підручник, з яким ви маєте ознайомитись, перш ніж писати Yii код.
-    - [Довідник класів](http://www.yiiframework.com/doc-2.0/index.html):
+    - [Довідник класів](https://www.yiiframework.com/doc-2.0/index.html):
       Визначає використання кожного класу, представленого в Yii. Ним слід користуватися, коли ви пишете
       код і хочете розібратися у використанні конкретного класу, методу, властивості. Довідник класів найкраще використовувати після контекстного розуміння всього фреймворку.
-    - [Wiki-статті](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Wiki-статті](https://www.yiiframework.com/wiki/?tag=yii2):
       Wiki-статті написані користувачами Yii на основі їх власного досвіду. Більшість з них написані
       як рецепти з куховарської книги, які показують, як вирішити конкретні проблеми, використовуючи Yii. 
       Варто зауважити, що якість даних статей може бути не такою гарною, як у Докладному Посібнику, але вони корисні тим,
       що охоплюють ширші теми і часто можуть забезпечити готовими рішеннями для подальшого використання.
-    - [Книги](http://www.yiiframework.com/doc/)
-* [Розширення](http://www.yiiframework.com/extensions/):
+    - [Книги](https://www.yiiframework.com/books)
+* [Розширення](https://www.yiiframework.com/extensions/):
   Yii пишається бібліотекою із тисяч розширень, внесених користувачами, які можуть бути легко підключені у ваші додатки та зробити розробку додатків ще швидшим і простішим.
 * Спільнота
-    - Форум: <http://www.yiiframework.com/forum/>
-    - Чат IRC: Канал #yii мережі freenode (<irc://irc.freenode.net/yii>)
+    - Форум: <https://forum.yiiframework.com/>
+    - Чат IRC: Канал #yii мережі Libera (<ircs://irc.libera.chat:6697/yii>)
     - Чат Gitter: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
     - Фейсбук: <https://www.facebook.com/groups/yiitalk/>
diff --git a/docs/guide-uk/start-workflow.md b/docs/guide-uk/start-workflow.md
index ce378f7e5bf..e1084e0ed3c 100644
--- a/docs/guide-uk/start-workflow.md
+++ b/docs/guide-uk/start-workflow.md
@@ -39,7 +39,7 @@
 
 Нижче наведений перелік основних директорій і файлів вашого додатку (вважаємо, що додаток встановлений в директорію `basic`):
 
-```
+```js
 basic/                  базова директорія додатка
     composer.json       використовується Composer'ом, містить опис додатку
     config/             містить конфігураційні файли
diff --git a/docs/guide-uk/structure-entry-scripts.md b/docs/guide-uk/structure-entry-scripts.md
index c15bf3a08f8..1f3145e3085 100644
--- a/docs/guide-uk/structure-entry-scripts.md
+++ b/docs/guide-uk/structure-entry-scripts.md
@@ -57,9 +57,9 @@ $config = require __DIR__ . '/../config/web.php';
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-uk/structure-views.md b/docs/guide-uk/structure-views.md
index 272c5c98bac..a3da564c3a7 100644
--- a/docs/guide-uk/structure-views.md
+++ b/docs/guide-uk/structure-views.md
@@ -545,7 +545,7 @@ class PostController extends Controller
 * [опрацювання клієнтських скриптів](output-client-scripts.md): підтримує реєстрацію та формування CSS та JavaScript;
 * [опрацювання колекції ресурсів](structure-assets.md): підтримує реєстрацію та формування [колекцій ресурсів](structure-assets.md);
 * [альтернативні шаблонізатори](tutorial-template-engines.md): дозволяє використовувати інші шаблонізатори, такі як
-  [Twig](http://twig.sensiolabs.org/), [Smarty](http://www.smarty.net/).
+  [Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/).
 
 Ви також можете часто використовувати наступні другорядні, але корисні, можливості в процесі розробки веб-сторінок.
 
@@ -616,14 +616,14 @@ $this->registerLinkTag([
     'title' => 'Свіжі новини про Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 Результатом вищенаведеного коду буде
 
 ```html
-<link title="Свіжі новини про Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Свіжі новини про Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Подібно до [[yii\web\View::registerMetaTag()|registerMetaTags()]], ви можете визначати ключ під час виклику
diff --git a/docs/guide-uk/tutorial-template-engines.md b/docs/guide-uk/tutorial-template-engines.md
index 4527c6d0590..e6af4b57656 100644
--- a/docs/guide-uk/tutorial-template-engines.md
+++ b/docs/guide-uk/tutorial-template-engines.md
@@ -2,7 +2,7 @@
 ===========================
 
 За замовчуванням, Yii використовує PHP в якості мови шаблонів, але ви можете налаштувати Yii для підтримки інших шаблонізаторів,
-таких як [Twig](http://twig.sensiolabs.org/) або [Smarty](http://www.smarty.net/), які доступні в якості розширеннь.
+таких як [Twig](https://twig.symfony.com/) або [Smarty](https://www.smarty.net/), які доступні в якості розширеннь.
 
 Компонент `View` відповідає за рендиренг видів. Ви можете додати користувальницький шаблон, шляхом зміни конфігурації поведінки
 цього компонента:
diff --git a/docs/guide-uk/tutorial-yii-integration.md b/docs/guide-uk/tutorial-yii-integration.md
index ccd4edc4a76..db147fe04ab 100644
--- a/docs/guide-uk/tutorial-yii-integration.md
+++ b/docs/guide-uk/tutorial-yii-integration.md
@@ -89,7 +89,7 @@ Yii::$classMap['Class2'] = 'path/to/Class2.php';
     composer install
 ```
 
-Перша команда встановлює [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/),
+Перша команда встановлює [composer asset plugin](https://github.com/fxpio/composer-asset-plugin),
 який дозволяє керувати залежностями пакунків Bower і NPM через Composer. Навіть якщо ви захочете використовувати тільки
 прошарки бази даних або інші, не повʼязані ресурсами, можливості Yii, вам все-одно необхідно встановити даний пакунок composer.
 
@@ -111,7 +111,7 @@ Yii::$classMap['Class2'] = 'path/to/Class2.php';
 Дивіться також загальний [розділ про встановлення Yii](start-installation.md#installing-via-composer), для отримання додаткової
 інформації про Composer та проблеми, які можуть виникнути під час встановлення.
 
-В іншому випадку, ви можете [завантажити](http://www.yiiframework.com/download/) файли релізу Yii і розархівувати його
+В іншому випадку, ви можете [завантажити](https://www.yiiframework.com/download/) файли релізу Yii і розархівувати його
 в каталог `BasePath/vendor`.
 
 Далі вам необхідно змінити вхідний скрипт сторонньої системи помістивши на його початок наступний код:
diff --git a/docs/guide-uz/README.md b/docs/guide-uz/README.md
index 16315917dff..97142c12d02 100644
--- a/docs/guide-uz/README.md
+++ b/docs/guide-uz/README.md
@@ -1,7 +1,7 @@
 Yii 2.0 bo'yicha to'liq qo'llanma
 =================================
 
-Ushbu qo'llanma [Yii qo'llanmalarining holati](http://www.yiiframework.com/doc/terms/) bilan mos holda yo'lga qo'yildi.
+Ushbu qo'llanma [Yii qo'llanmalarining holati](https://www.yiiframework.com/doc/terms/) bilan mos holda yo'lga qo'yildi.
 
 All Rights Reserved.
 
@@ -201,4 +201,4 @@ Xelperlar
 * **TBD** [ArrayHelper](helper-array.md)
 * **TBD** [Html](helper-html.md)
 * **TBD** [Url](helper-url.md)
-* **TBD** [Security](helper-security.md)
\ No newline at end of file
+* **TBD** [Security](helper-security.md)
diff --git a/docs/guide-uz/blocktypes.json b/docs/guide-uz/blocktypes.json
new file mode 100644
index 00000000000..e94cf5bb7fb
--- /dev/null
+++ b/docs/guide-uz/blocktypes.json
@@ -0,0 +1,3 @@
+{
+  "Info:": "Ma'lumot uchun:"
+}
diff --git a/docs/guide-uz/intro-yii.md b/docs/guide-uz/intro-yii.md
index 3791aa8488d..f4bb201642a 100644
--- a/docs/guide-uz/intro-yii.md
+++ b/docs/guide-uz/intro-yii.md
@@ -19,9 +19,9 @@ Yii ni boshqa freymvorklar bilan solishtirish
 - Yii juda yaxhsi kengayishi mumkin. Siz asosiy kodni ixtiyoriy qismini almashtirishingiz yoki sozlashingiz mumkin. Kengaytirish arxitekturasiga bo'ysunib kodni boshqalar bilan ulashish yoki jamoatning kodidan foydalanish mumkin.
 - Yii ning asosiy maqsadlaridan biri - ishlash tezligi.
 
-Yii — bir odamning loyihasi emas. U unga yordam berayotgan ishlab chiquvchilar [katta jamoa][about_yii]si  tomonidan qo'llab quvvatlanadi va rivojlantiriladi. Freymvork ishlab chiquvchilari web ishlab chiqish va boshqa ilovalarni maromini kuzatishadi. Ko'proq mos keluvchi imkoniyatlar va eng yaxshi sinalgan amaliyotlar freymvork sodda va elegantli interfeysi tarzida qo'llaniladi.
+Yii — bir odamning loyihasi emas. U unga yordam berayotgan ishlab chiquvchilar [katta jamoa][yii_team]si  tomonidan qo'llab quvvatlanadi va rivojlantiriladi. Freymvork ishlab chiquvchilari web ishlab chiqish va boshqa ilovalarni maromini kuzatishadi. Ko'proq mos keluvchi imkoniyatlar va eng yaxshi sinalgan amaliyotlar freymvork sodda va elegantli interfeysi tarzida qo'llaniladi.
 
-[about_yii]: http://www.yiiframework.com/about/
+[yii_team]: https://www.yiiframework.com/team
 
 Yii talqinlari
 --------------
diff --git a/docs/guide-uz/start-databases.md b/docs/guide-uz/start-databases.md
index b6a4ce49164..1d7308b5a26 100644
--- a/docs/guide-uz/start-databases.md
+++ b/docs/guide-uz/start-databases.md
@@ -64,7 +64,7 @@ Fayl `config/db.php` — oddiy [sozlamalar](concept-configurations.md) vositasid
 
 Ma'lumotlar omboriga yuqoridagi sozlamalar sozlab bo'lgandan so'ng ulanish, undan foydalanish uchun `Yii::$app->db` orqali amalga oshiriladi.
 
-> Ma'lumot uchun: fayl `config/db.php` ilovaning assosiy sozlama fayli orqali ulanadi `config/web.php`,
+> Info: fayl `config/db.php` ilovaning assosiy sozlama fayli orqali ulanadi `config/web.php`,
   u esa [web-ilova](structure-applications.md) nusxasini sozlamalarini o'z ichiga oladi.
   qo'shimcha ma'lumot uchun, iltimos, ushbu [Sozlamalar](concept-configurations.md) bo'limga ko'rib chiqing.
 
@@ -94,7 +94,7 @@ class Country extends ActiveRecord
 
 `Country` klassi [[yii\db\ActiveRecord]]ni kengaytirmoqda. Siz uning ichida bir satr kod ham yozmasligingiz mumkin! Yuqoridagi kod assosida Yii o'zi ma'lumotlar omboridagi jadval va klass orasida aloqa yasaydi.
 
-> Ma'lumot uchun: Agar ma'lumotlar omboridagi nom va klassnomi orasida bir xillikni saqlash imkoni  bo'lmasa siz klassga aynan jadal ismini [[yii\db\ActiveRecord::tableName()]] usuli orqali yozishingiz mumkin.
+> Info: Agar ma'lumotlar omboridagi nom va klassnomi orasida bir xillikni saqlash imkoni  bo'lmasa siz klassga aynan jadal ismini [[yii\db\ActiveRecord::tableName()]] usuli orqali yozishingiz mumkin.
 
 `Country` klassini ishlatganingizda, siz osonlikcha `country` jadvalidagi ma'lumotlar bilan boshqarishingiz mumkin, misol uchun pastdagi qatorlarda shuni ko'rishingiz mumkin:
 
@@ -115,7 +115,7 @@ $country->name = 'U.S.A.';
 $country->save();
 ```
 
-> Ma'lumot uchun: Active Record — bu ma'lumotlar ombori bilan ishlash uchun juda ham mukammal vosita hisoblanadi.
+> Info: Active Record — bu ma'lumotlar ombori bilan ishlash uchun juda ham mukammal vosita hisoblanadi.
   Yana ko'oproq ma'lumotni siz [Active Record](db-active-record.md) bo'limida topishingiz mumkin. Qo'shimcha tariqasida, siz yana boshqa yanada past qism vositasi [Data Access Objects](db-dao.md)dan foydalanishingiz mumkin.
 
 
diff --git a/docs/guide-uz/start-forms.md b/docs/guide-uz/start-forms.md
index 79e507891c5..df1752f305c 100644
--- a/docs/guide-uz/start-forms.md
+++ b/docs/guide-uz/start-forms.md
@@ -97,7 +97,7 @@ usuli ishlatilayapti.
 Agar hammasi yaxshi o'tsa, amal `entry-confirm` ko'rinishini qaytaradi, u esa foydalanuvchi tomonidan kiritilgan ma'lumotlarini ko'rsatadi.
 Aks holda esa `entry` ko'rinishi qaytariladi, u esa HTML-shaklni va xatolarni chiqarib beradi, agar ular bor bo'lsa.
 
-> Ma'lumot uchun: `Yii::$app` yagona global xossasi Yiining nusxasini o'z ichiga oladi
+> Info: `Yii::$app` yagona global xossasi Yiining nusxasini o'z ichiga oladi
 [ilova](structure-applications.md) (singleton). Bir vaqtni o'zida u [Service Locator](concept-service-locator.md) ham hisoblanadi,
 undan esa quydagi komponentlar bilan foydalanish mumkin  `request`, `response`, `db` va boshqa. Yuqorida ko'rsatilgan kodda `$_POST`
 massivini qabul qilish uchun biz `request` komponentini ishlatdik.
@@ -186,7 +186,7 @@ Moydonlar uchun yasalgan yorlig'lar xossalar nomlari assosida quydagi usul `fiel
 <?= $form->field($model, 'email')->label('Sizning elektron qutingiz') ?>
 ```
 
-> Ma'lumot uchun: Yiida juda ham ko'p vidjetlar bor, ular sizga tez va murakkab ko'rinishlarni yasashga yordam beradi.
+> Info: Yiida juda ham ko'p vidjetlar bor, ular sizga tez va murakkab ko'rinishlarni yasashga yordam beradi.
   Vijetlarni yasash judda oson va sodda ekanligini keyin (oldinda) bilishingiz mumkin. Ko'rinishdagi narsalarni ko'p narsani vijetlarga chiqarsa bo'ladi, 
   nimaga? keyinchalik ham boshqa joylarda ishlatish uchun, bu esa ishni soddalashtiradi.
 
diff --git a/docs/guide-uz/start-hello.md b/docs/guide-uz/start-hello.md
index 76f40a40d6b..5832630bbdf 100644
--- a/docs/guide-uz/start-hello.md
+++ b/docs/guide-uz/start-hello.md
@@ -20,7 +20,7 @@ Amal yaratish <span id="creating-action"></span>
 
 Bizning vazifamiz uchun so'rovdan `message` parametrini o'qiydigan va uning qiymatini foydalanuvchiga ko'rsatadigan `say` deb ataladigan [amal](structure-controllers.md) kerak.
 Agar so'rovda `message` parametri bo'lmasa, [amal](structure-controllers.md) o'z novbatida "Salom" matnini qaytaradi.
-> Malumot uchun: [amal](structure-controllers.md) to'g'ridan-to'g'ri foydalanuvchi tomonidan boshqarilishi va [nazoratchilar](structure-controllers.md) ichida guruhlarga bo'linishi mumkin. Amal natijasi foydalanuvchiga qaytariladi.
+> Info: [amal](structure-controllers.md) to'g'ridan-to'g'ri foydalanuvchi tomonidan boshqarilishi va [nazoratchilar](structure-controllers.md) ichida guruhlarga bo'linishi mumkin. Amal natijasi foydalanuvchiga qaytariladi.
 
 Amallar [nazoratchilar](structure-controllers.md) (tomonidan) ichida e'lon qilinadi.
 Oddiylik uchun siz mavjud bo'lgan SiteController nazoratchisi ichida `say` amalini yaratishingiz mumkin, Ushbu nazoratchi fayli `controllers/SiteControllers.php` yo'li bo`yicha joylashgan
@@ -45,7 +45,7 @@ class SiteController extends Controller
 Quyidagi kodda `say` amali `SiteController` sinfi (klassi) `actionSay` usuli (metodi) e'lon qilinmoqda.
 Yii amallari usullari (metodlari) oldidan `action` qo'shiladi bu oddiy usullarni (metodlarni) ajratish uchun prefiksidan foydalanadi.
 
-> Malumot uchun: Amalar nomlari kichik harflar berilishi kerak.Agar identifikator (nom) bir necha so'zdan iborat bo'lsa, ular
+> Info: Amalar nomlari kichik harflar berilishi kerak.Agar identifikator (nom) bir necha so'zdan iborat bo'lsa, ular
   chiziq (minus -) bilan ajiraladi, yani `create-comment`. Amallar usullarining (metodlar) nomlari defislarni olib tashlash yo'li bilan olinib, har bir so'zni katta harfga aylantiradi va `action` prefiksi qo'shadi.
   Misol uchun, amal nomi `create-comment` quydagi usullga to'g'ri keladi `actionCreateComment`.
 
@@ -92,14 +92,14 @@ http://hostname/index.php?r=site%2Fsay&message=Salom+dunyo
 Sizga "Salom, dunyo" matni chiqishi kerak. Header (yuqori bo'lim) va  Footer (pastki bo'lim) hamma sahifalardek chiqadi.
 Agar siz `message` kiritmasangiz, siz «Salom» matnini ko'rishingiz mumkin. Bunaqa mantiq chiqishi sababi shundagi, `actionSay` usuli (metod)dagi `message` parametri oldindan "Salom" matni berilgan.
 
-> Ma'lumot uchun: Yangi sahifa hamma ishlatayotgan Header (yuqori bo'limi) va Footer (pastki bo'lim) ishlatadi, chunki 
+> Info: Yangi sahifa hamma ishlatayotgan Header (yuqori bo'limi) va Footer (pastki bo'lim) ishlatadi, chunki 
   [[yii\web\Controller::render()|render()]] usuli `say` ko'rinishini o'zi [maketga](structure-views.md) `views/layouts/main.php`  topib qo'yadi.
 
 Parametr `r` qo'shimcha tushuncha ta'lab qiladi. U [yo'nalishlar (route)](runtime-routing.md) bilan bo'liqdir va nomi boyicha kerakli amalni topib chiqaradi. Uning formati `ControllerID/ActionID`. Web-ilova so'rovni qabul qilishni boshlaganida u `r` paraterni tekshirishni boshlaydi va `ControllerID` ni ishlatadi, va nomi bo'yicha so'ralayotgan nazoratchini topib, `ActionID` bo'yicha shu topilgan nazoratchi ichidan so'raloyotgan amalni topib chiqaradi.
 Bizning misolimiz bo'yicha `site/say` so'rovi boyicha `SiteController` nazoratchisi ichidan `say` amalini chiqaradi.
 Natijada esa, so'rovni qabul qilish `SiteController::actionSay()` topshiriladi.
 
-> Ma'lumot uchun: Nazoratchilar ham hudi amalar kabi web-ilovada yagona nomga (identifikator) ega.
+> Info: Nazoratchilar ham hudi amalar kabi web-ilovada yagona nomga (identifikator) ega.
   Nazoratchilar nomlash tartibi hudi amalardaqadir. Klasslar nomlari So'larga bo'linib defizlar orqali aniqlanadi, so'zlarni birinchi katta harf bilan yozib o'tib va oxiriga `Controller` qo'shib qidirishni boshlaydi. Misol uchun, nazoratchi `post-comment` nomi `PostCommentController` klassiga teng bo`ladi.
 
 
diff --git a/docs/guide-uz/start-installation.md b/docs/guide-uz/start-installation.md
index b3c33f5df24..5925ef0e1c2 100644
--- a/docs/guide-uz/start-installation.md
+++ b/docs/guide-uz/start-installation.md
@@ -39,7 +39,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
 Ushbu buyruq Yining oxirgi ishlaydigan versiyasini `basic` katalogiga o'rnatadi. Agar xohlasangiz, boshqa katalog nomini tanlashingiz mumkin. 
 
-> Ma'lumot uchun: Agar `composer create-project` buyrug'i yaxshi ishlamasa , Composer hujjatining ["Muammo bartaraf qilish"](https://getcomposer.org/doc/articles/troubleshooting.md) bo'limiga murojaat qiling . Yozib otilgan boshqa odatiy xatolar mavjud. Xatolikni bartaraf qilganingizdan so'ng, `basic` katalogda `composer update` ishga tushiring.
+> Info: Agar `composer create-project` buyrug'i yaxshi ishlamasa , Composer hujjatining ["Muammo bartaraf qilish"](https://getcomposer.org/doc/articles/troubleshooting.md) bo'limiga murojaat qiling . Yozib otilgan boshqa odatiy xatolar mavjud. Xatolikni bartaraf qilganingizdan so'ng, `basic` katalogda `composer update` ishga tushiring.
 
 > Maslahat: Agar siz Yii ning eng so`ngi tekshirilmagan taxririni o'rnatmoqchi bo'lsangiz, [stability](https://getcomposer.org/doc/04-schema.md#minimum-stability) sozlamasini ozgartirib quydagi quyidagi buyruqni ishlatishingiz mumkin::
 >
@@ -55,7 +55,7 @@ Arxivdan o'rnatish  <span id="installing-from-archive-file"></span>
 
 Yining arxivdan o'rnatilishi uch bosqichdan iborat:
 
-1. Yiiframework.com dan [arxivni](http://www.yiiframework.com/download/) yuklab oling.
+1. Yiiframework.com dan [arxivni](https://www.yiiframework.com/download/) yuklab oling.
 2. Yuklangan arxivni Internetdan kirib boladigan katalogiga tashlab, arxivni oching. 
 3. `config/web.php` `cookieValidationKey` (Composer orqali o'rnatilganda, bu avtomatik tarzda amalga oshiriladi) uchun maxsus kalitni qo'shing:
 
@@ -103,16 +103,16 @@ Freymvork to'g'ri ishlashi uchun PHPni minimal talablarga javob beradigan tarzda
 Web-server sozlamasi<span id="configuring-web-servers"></span>
 -----------------------
 
-> Ma'lumot uchun:Agar siz faqatgina freymvork bilan tanishishni boshlagan bo'lsangiz va uni ish  serveriga joylashtirmagan bo'lsangiz, ushbu bo'limni o'tkazib yuborishingiz mumkin. 
+> Info: Agar siz faqatgina freymvork bilan tanishishni boshlagan bo'lsangiz va uni ish  serveriga joylashtirmagan bo'lsangiz, ushbu bo'limni o'tkazib yuborishingiz mumkin. 
 
 Yuqoridagi ko'rsatmalarga muvofiq o'rnatilgan ilovalar Windows va Linux ostida PHP 5.4 va undan yuqori taxrirlarda o'rnatilgan [Apache](http://httpd.apache.org/) va [Nginx](http://nginx.org/) bilan ishlaydi.Yii 2.0 [HHVM](http://hhvm.com/) bilan ham mos keladi. Etiborli bo'ling, ba'zi hollarda, HHVM bilan ishlashda odatdagi PHPdan farq qiladi.
 
 Ish serverida siz `http://www.example.com/basic/web/index.php` dan `http://www.example.com/index.php` manziliga dastur URL manzilini o'zgartirishni xohlasangiz. 
 Buni amalga oshirish uchun veb-server parametrlarida ildiz katalogini `basic/web` ga o'zgartiring. Bundan tashqari, ["URL sozlamalari"](runtime-routing.md) qismidagi malumotga ko'ra, `index.php` yashirishi mumkin. Keyinchalik Apache va Nginx ni qanday sozlashni ko'rsatamiz.
 
-> Ma'lumot uchun: Veb-serverning `basic/web` ildiz katalogini o'rnatib, siz ruxsat berilmagan kirish kodidan va `basic/web` sahifadagi ma'lumotlardan himoya qilasiz. Bu ilovani yanada xavfsiz holga keltiradi. 
+> Info: Veb-serverning `basic/web` ildiz katalogini o'rnatib, siz ruxsat berilmagan kirish kodidan va `basic/web` sahifadagi ma'lumotlardan himoya qilasiz. Bu ilovani yanada xavfsiz holga keltiradi. 
 
-> Ma'lumot uchun: Agar dastur veb-server sozlamalariga kirish imkoni bo'lmagan hosting bilan ishlayotgan bo'lsa, siz ["Birgalikda Hosting ustida ishlash"](tutorial-shared-hosting.md) bo'limida ko'rsatilganidek, ilovaning tuzilishini o'zgartirishingiz mumkin.
+> Info: Agar dastur veb-server sozlamalariga kirish imkoni bo'lmagan hosting bilan ishlayotgan bo'lsa, siz ["Birgalikda Hosting ustida ishlash"](tutorial-shared-hosting.md) bo'limida ko'rsatilganidek, ilovaning tuzilishini o'zgartirishingiz mumkin.
 
 
 ### Ta'vsiya etilgan Apache sozlamalari <span id="recommended-apache-configuration"></span>
diff --git a/docs/guide-uz/start-looking-ahead.md b/docs/guide-uz/start-looking-ahead.md
index 1512d9f7568..72bca6a9e7f 100644
--- a/docs/guide-uz/start-looking-ahead.md
+++ b/docs/guide-uz/start-looking-ahead.md
@@ -18,11 +18,11 @@ avtomatik tarzda kod yaratishni o'rgandingiz, bu esa HTML-shaklni to'ldirishdek
 	  Shuni aytish keraki ularning sifati qo'lanmadagi yozilgan ma'lumotdaqa yaxshi yoritilib berilgani ham bor
 	  Ularni shunisi yaxshiki ular mavzuni to'liq va amaliy yoritib berib sizga tayyor yechim berishi ham mumkin
     - Kitoblar
-* [Kengaytmalar](http://www.yiiframework.com/extensions/):
+* [Kengaytmalar](https://www.yiiframework.com/extensions/):
   Yiining foydalanuvchilar tomonidan yaratilgan minglab kengaytmalar ombori bor 
   ular ilovangizga ulashingiz va ishlanmani juda ham tez oborishingizga yordam beradi
 * Jamoa
-    - [Forum](http://www.yiiframework.com/forum/)
+    - [Forum](https://forum.yiiframework.com/)
     - [Chat Gitter](https://gitter.im/yiisoft/yii2/rus)
     - [GitHub](https://github.com/yiisoft/yii2)
     - [Facebook](https://www.facebook.com/groups/yiitalk/)
diff --git a/docs/guide-uz/start-workflow.md b/docs/guide-uz/start-workflow.md
index d66ab54de40..42f83bbb002 100644
--- a/docs/guide-uz/start-workflow.md
+++ b/docs/guide-uz/start-workflow.md
@@ -3,7 +3,7 @@ Ilovani ishga tushirish
 
 `http://hostname/basic/web/index.php` o'rnatganingizdan so'ng, asosiy dastur `http://hostname/basic/web/index.php` URL manzilida yoki `http://hostname/index.php` orqali Veb-server sozlamalariga qarab mavjud bo'ladi. Ushbu bo'lim - kodni tashkil qilishning umumiy ta'rifi, o'rnatilgan funksionallik va murojaatlar bilan ishlash. 
 
-> Ma'lumot uchun: Ushbu qo'llanmada Yii `basic/web` katalogiga o'rnatilganini inobatga oladi va u o'z navbatida veb-server sozlamalaridagi ildiz katalogi sifatida o'rnatiladi. Natijada `http://hostname/index.php` URL manziliga kirish orqali `basic/web` joylashgan ilovaga kirishingiz mumkin. Boshlang'ich konfiguratsiya jarayonida batafsil ma'lumotni [Yii-ni o'rnatish bo'limida](start-installation.md) topishingiz mumkin.
+> Info: Ushbu qo'llanmada Yii `basic/web` katalogiga o'rnatilganini inobatga oladi va u o'z navbatida veb-server sozlamalaridagi ildiz katalogi sifatida o'rnatiladi. Natijada `http://hostname/index.php` URL manziliga kirish orqali `basic/web` joylashgan ilovaga kirishingiz mumkin. Boshlang'ich konfiguratsiya jarayonida batafsil ma'lumotni [Yii-ni o'rnatish bo'limida](start-installation.md) topishingiz mumkin.
 
 Freymvorkdan farqli o'laroq, dastur o'rnatilgandan so'ng, u sizniki bolib qoladi. Siz o`zingizni kodingizni o'zingiz xohlagan tarzda o'zgartirishingiz mumkin. 
 
@@ -28,7 +28,7 @@ Yii web-ilovasi tuzilmasi <span id="application-structure"></span>
 
 Quyidagida veb-ilovaning tuzilmasi asosiy kataloglari va fayllari ro'yxati berilgan (ilovaning `basic` katalogga o'rnatilgan deb hisoblaymiz): 
 
-```
+```js
 basic/                  ilovaning ildiz katalogi
     composer.json       Composer ishlatadigan fayl
     config/             Sozlamalar (konfiguratsion) fayl
diff --git a/docs/guide-vi/README.md b/docs/guide-vi/README.md
index 0524c90cdec..a38ba36f7c3 100644
--- a/docs/guide-vi/README.md
+++ b/docs/guide-vi/README.md
@@ -1,7 +1,7 @@
 The Definitive Guide to Yii 2.0
 ===============================
 
-Các hướng dẫn được phát hành theo [Các điều khoản về tài liệu Yii](http://www.yiiframework.com/doc/terms/).
+Các hướng dẫn được phát hành theo [Các điều khoản về tài liệu Yii](https://www.yiiframework.com/doc/terms/).
 
 Tất cả bản quyền đã được bảo hộ (All Rights Reserved).
 
diff --git a/docs/guide-vi/blocktypes.json b/docs/guide-vi/blocktypes.json
new file mode 100644
index 00000000000..0808dfeb71b
--- /dev/null
+++ b/docs/guide-vi/blocktypes.json
@@ -0,0 +1,3 @@
+{
+  "Info:": "Lưu ý:"
+}
diff --git a/docs/guide-vi/intro-yii.md b/docs/guide-vi/intro-yii.md
index bd2fc0807e4..92581329f46 100644
--- a/docs/guide-vi/intro-yii.md
+++ b/docs/guide-vi/intro-yii.md
@@ -28,12 +28,12 @@ Nếu bạn có kinh nghiệm làm việc với các framework khác, bạn sẽ
   tận dụng lợi thế của kiến trúc mở rộng chuẩn Yii để sử dụng hoặc phát triển mở rộng phân phối..
 - Hiệu suất cao luôn luôn là một trong những mục tiêu chính của Yii.
 
-Yii không chỉ được phát triển từ một người, nó được hỗ trợ bởi [đội ngũ phát triển cốt lõi mạnh mẽ][about_yii], cũng như một cộng đồng lớn, trong đó các chuyên gia liên tục
+Yii không chỉ được phát triển từ một người, nó được hỗ trợ bởi [đội ngũ phát triển cốt lõi mạnh mẽ][yii_team], cũng như một cộng đồng lớn, trong đó các chuyên gia liên tục
 đóng góp cho sự phát triển của Yii. Nhóm nghiên cứu phát triển Yii giữ một mắt đóng trên các xu hướng phát triển Web mới nhất và trên thực hành tốt nhất và 
 các tính năng được tìm thấy trong các khuôn khổ và các dự án khác. Các thực hành tốt nhất và các tính năng được tìm thấy ở những nơi khác có liên quan nhất thường xuyên 
 được đưa vào khuôn khổ lõi và tiếp xúc thông qua giao diện đơn giản và thanh lịch.
 
-[about_yii]: http://www.yiiframework.com/about/
+[yii_team]: https://www.yiiframework.com/team
 
 Các phiên bản Yii
 ------------
diff --git a/docs/guide-vi/start-hello.md b/docs/guide-vi/start-hello.md
index eb44e55cf44..5730286ab20 100644
--- a/docs/guide-vi/start-hello.md
+++ b/docs/guide-vi/start-hello.md
@@ -22,7 +22,7 @@ Với nhiệm vụ tạo ra thông điệp "Hello", bạn sẽ tạo một  [act
 sẽ lấy các tham số `message` từ request và hiển thị thông điệp trở lại user. Nếu request không cung cấp tham số `message`, 
 action sẽ mặc định hiển thị thông điệp  "Hello".
 
-> Lưu ý: [Hành động (Actions)](structure-controllers.md#creating-actions) là người dùng cuối có thể truy cập các đối tượng và thực hiện trực tiếp.
+> Info: [Hành động (Actions)](structure-controllers.md#creating-actions) là người dùng cuối có thể truy cập các đối tượng và thực hiện trực tiếp.
  Các Actions được nằm trong [bộ điều khiển (controllers)](structure-controllers.md).
  Các kết quả của một action là người sử dụng cuối cùng nhận được các thông điệp.
 
@@ -111,7 +111,7 @@ URL này sẽ trả về một trang và hiển thị lời chào "Hello World".
 Nếu bạn không nhập tham số `message` vào URL, bạn chỉ xem thấy mỗi dòng "Hello" được hiển thị. Bởi vì tham số `message` được thông qua phương thức `actionSay()`, và mỗi khi tham số này không được nhập,
 thì giá trị mặc đinh `"Hello"` sẽ được thay thế.
 
-> Lưu ý: Trang này có cùng phần header và footer như những trang khác là bởi vì phương thức [[yii\web\Controller::render()|render()]]
+> Info: Trang này có cùng phần header và footer như những trang khác là bởi vì phương thức [[yii\web\Controller::render()|render()]]
   sẽ tự động nhúng nội dung của view `say` vào một [layout](structure-views.md#layouts) layout này nằm ở `views/layouts/main.php`.
 
 Tham số `r` ở trên URL sẽ được giải thích thêm. Nó là chuẩn cho bộ định tuyến [route](runtime-routing.md), mỗi ứng dụng sẽ cung cấp ID
@@ -120,7 +120,7 @@ theo cùng request đó, sử dụng `ControllerID` để xác định lớp đi
 xác dịnh `ActionID` cần được khởi tạo để xử lý công việc. Trong ví dụ này, route `site/say`
 sẽ gán (ám chỉ tới) bộ điều khiển `SiteController` và action `say`. Điều này sẽ có kết quả là, phương thức `SiteController::actionSay()` sẽ được gọi để xử lý các request.
 
-> Lưu ý: Giống như actions, ứng dụng sử dụng các định danh ID để nhận diện các controller. Các Controller ID
+> Info: Giống như actions, ứng dụng sử dụng các định danh ID để nhận diện các controller. Các Controller ID
   có quy tắc đặt tên giống với các action IDs. Tên của controller được chuyển đổi từ các controller IDs 
   bằng việc loại bỏ dấu gạch ngang từ đinh danh ID, tận dụng các chữ cái đầu tiên trong mỗi từ,
   và từ đứng trước `Controller`. Ví dụ, bộ điều khiển controller ID có tên là `post-comment` sẽ tương ứng
diff --git a/docs/guide-vi/start-installation.md b/docs/guide-vi/start-installation.md
index 60ced474549..f354d1d9294 100644
--- a/docs/guide-vi/start-installation.md
+++ b/docs/guide-vi/start-installation.md
@@ -38,7 +38,7 @@ Sau khi cài đặt Composer, bạn có thể cài đặt Yii bằng cách chạ
     composer global require "fxp/composer-asset-plugin:^1.4.1"
     composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
-Câu lệnh đầu tiên sẽ cài đặt [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/)
+Câu lệnh đầu tiên sẽ cài đặt [composer asset plugin](https://github.com/fxpio/composer-asset-plugin)
 và cho phép Composer có thể quản lý những package dependencies của bower và npm. Câu lệnh này chỉ cần chạy một lần.
 Câu lệnh thứ hai sẽ cài đặt phiên bản Yii có tên là  `basic`. Bạn có thể chọn một tên thư mục khác nếu bạn muốn.
 
@@ -59,7 +59,7 @@ Cài đặt từ tập tin lưu trữ <span id="installing-from-archive-file"></
 
 Việc cài đặt Yii từ một tập tin lưu trữ bao gồm ba bước:
 
-1. Tải gói cài đặt từ [yiiframework.com](http://www.yiiframework.com/download/).
+1. Tải gói cài đặt từ [yiiframework.com](https://www.yiiframework.com/download/).
 2. Giải nén file tải về vào một thư mục Web của ứng dụng cần chạy.
 3. Sửa đồi file `config/web.php`  bởi nhập thông tin secret key `cookieValidationKey` ở mục cấu hình
    (này được thực hiện tự động nếu bạn đang cài đặt Yii sử dụng Composer):
diff --git a/docs/guide-vi/start-looking-ahead.md b/docs/guide-vi/start-looking-ahead.md
index 1c0a86c8f52..3ea700d3fd1 100644
--- a/docs/guide-vi/start-looking-ahead.md
+++ b/docs/guide-vi/start-looking-ahead.md
@@ -9,22 +9,22 @@ các chức năng tương tự.
 Trong phần này sẽ tổng hợp những tài nguyên về tìm hiểu Yii framework.
 
 * Tài liệu tham khảo
-    - [Giới thiệu tổng quan](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [Giới thiệu tổng quan](https://www.yiiframework.com/doc-2.0/guide-README.html):
       Như tiêu đề, các hướng dẫn sẽ cung cấp tổng quan về sử dụng Yii và cách thức Yii hoạt động
       . Đây là các hướng dẫn quan trọng để bắt đầu với Yii, vì vậy bạn cần tìm hiểu trước khi đi sâu và viết code về Yii.
-    - [Thông tin chi tiết Class](http://www.yiiframework.com/doc-2.0/index.html):
+    - [Thông tin chi tiết Class](https://www.yiiframework.com/doc-2.0/index.html):
       Phần này sẽ mô tả và cách dùng các class được cung cấp bởi Yii. Phần này là quan trọng khi bạn viết code và muốn hiểu về cách dùng từng phần trong lớp, phương thức,
       các thuộc tính. Tham khảo cách dùng các lớp sẽ giúp bạn hiểu sâu về từng phần trong framework.
-    - [Các bài hướng dẫn khác](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [Các bài hướng dẫn khác](https://www.yiiframework.com/wiki/?tag=yii2):
       Các bài hướng dẫn được viết bởi những người có kinh nghiệm về lập trình Yii. Hầu hết trong số đó, được viết theo những kinh nghiệm lập trình lâu năm.
       , và đưa ra các giải pháp về từng phần, vấn đề khi lập trình Yii. Các bài viết có thể không chi tiết và dễ hiểu như phần giới thiệu, tuy nhiên các bài viết có
       những chủ đề rộng hơn và thường có những ví dụ và giải pháp với các vấn đề lập trình.
-    - [Sách](http://www.yiiframework.com/doc/)
-* [Extensions](http://www.yiiframework.com/extensions/):
+    - [Sách](https://www.yiiframework.com/books)
+* [Extensions](https://www.yiiframework.com/extensions/):
   Yii tự hào có một thư viện của hàng ngàn các phần mở rộng với sự đóng góp lớn của cộng động, bạn có thể dễ dàng tích hợp vào các ứng dụng của bạn, do đó làm cho phát triển ứng dụng của bạn nhanh hơn và dễ dàng hơn.
 * Cộng dồng
-    - Diễn đàn: <http://www.yiiframework.com/forum/>
-    - IRC chat: The #yii channel on the freenode network (<irc://irc.freenode.net/yii>)
+    - Diễn đàn: <https://forum.yiiframework.com/>
+    - IRC chat: The #yii channel on the Libera (<ircs://irc.libera.chat:6697/yii>)
     - GitHub: <https://github.com/yiisoft/yii2>
     - Facebook: <https://www.facebook.com/groups/yiitalk/>
     - Twitter: <https://twitter.com/yiiframework>
diff --git a/docs/guide-vi/start-prerequisites.md b/docs/guide-vi/start-prerequisites.md
new file mode 100644
index 00000000000..d67ba552c2f
--- /dev/null
+++ b/docs/guide-vi/start-prerequisites.md
@@ -0,0 +1,19 @@
+# Những gì bạn cần biết
+
+Quá trình học Yii không quá khó cũng như các framework PHP khác nhưng vẫn có một số điều bạn nên học trước khi bắt đầu với Yii.
+
+## PHP
+
+Yii là một framework PHP nên hãy đảm bảo bạn đã [đọc và hiểu ngôn ngữ của nó](https://secure.php.net/manual/en/langref.php).
+Khi phát triển với Yii, bạn sẽ viết code theo hướng đối tượng, vì vậy hãy đảm bảo rằng bạn đã quen với [Classes và Objects](https://secure.php.net/manual/en/language.oop5.basic.php) cũng như [namespaces](https://secure.php.net/manual/en/language.namespaces.php).
+
+## Lập trình hướng đối tượng
+
+Hiểu cơ bản về lập trình hướng đối tượng là bắt buộc. Nếu bạn không biết, hãy học theo những hướng dẫn trên google, youtube, chẳng hạn như [the one from tuts+](https://code.tutsplus.com/tutorials/object-oriented-php-for-beginners--net-12762).
+
+Lưu ý rằng ứng dụng của bạn càng phức tạp thì các khái niệm OOP nâng cao hơn mà bạn nên học để thành công quản lý sự phức tạp đó.
+
+## Command line và composer
+
+Yii sử dụng rộng rãi trình quản lý gói PHP tiêu chuẩn de-facto, [Composer](https://getcomposer.org/) vì vậy hãy chắc chắn rằng bạn đọc
+và hiểu [hướng dẫn](https://getcomposer.org/doc/01-basic-usage.md) của nó. Nếu bạn không quen với việc sử dụng command line thì đã đến lúc bắt đầu thử. Khi bạn học những cái cơ bản mà bạn sẽ không bao giờ muốn làm việc nếu thiếu nó.
diff --git a/docs/guide-vi/start-workflow.md b/docs/guide-vi/start-workflow.md
index 7768b06d71c..88b89ecd9b6 100644
--- a/docs/guide-vi/start-workflow.md
+++ b/docs/guide-vi/start-workflow.md
@@ -37,7 +37,7 @@ Cấu trúc ứng dụng (Application Structure) <span id="application-structure
 
 Những thư mục và tập tin quan trọng nhất của ứng dụng (giả sử thư mục gốc của ứng dụng tên là `basic`):
 
-```
+```js
 basic/                  Thư mục gốc ứng dụng
     composer.json       Tập tin cấu hình Composer, mô tả thông tin gói
     config/             Chứa các cấu hình ứng dụng và cấu hình khác
diff --git a/docs/guide-vi/structure-entry-scripts.md b/docs/guide-vi/structure-entry-scripts.md
index 64447032c58..d13696b46ad 100644
--- a/docs/guide-vi/structure-entry-scripts.md
+++ b/docs/guide-vi/structure-entry-scripts.md
@@ -57,9 +57,9 @@ Tương tự, Mã nguồn dưới đây là các dòng lệnh trong mục script
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-vi/structure-modules.md b/docs/guide-vi/structure-modules.md
index 28885c20970..6bfe0e941dd 100644
--- a/docs/guide-vi/structure-modules.md
+++ b/docs/guide-vi/structure-modules.md
@@ -14,7 +14,7 @@ Một module được tổ chức dưới dạng như một thư mục được
 Trong thư mục, còn có các thư mục con, như là `controllers`, `models`, `views`, những thư mục này chứa các controllers,
 models, views, và các đoạn mã khác, giống như trong một ứng dụng. Ví dụ sau đây cho thấy nội dung trong một module:
 
-```
+```js
 forum/
     Module.php                   tập tin lớp module
     controllers/                 chứa các tệp controller
diff --git a/docs/guide-vi/structure-views.md b/docs/guide-vi/structure-views.md
index 43e2d8ebc0a..86b2084671d 100644
--- a/docs/guide-vi/structure-views.md
+++ b/docs/guide-vi/structure-views.md
@@ -542,7 +542,7 @@ Các thành phần View cung cấp các tính năng hữu ích được liệt k
 * [client script handling](output-client-scripts.md): hỗ trợ đăng ký vào xuất bản các nội dung về CSS và JavaScript.
 * [asset bundle handling](structure-assets.md): hỗ trợ việc đăng ký và xuất bản các [asset bundles](structure-assets.md).
 * [alternative template engines](tutorial-template-engines.md): cho phép bạn sử dụng các bộ giao diện, chẳng hạn như
-  [Twig](http://twig.sensiolabs.org/), [Smarty](http://www.smarty.net/).
+  [Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/).
 
 Bạn cũng có thể thường xuyên sử dụng các tính năng nhỏ nhưng hữu ích sau đây khi bạn đang phát triển các trang Web.
 
@@ -613,14 +613,14 @@ $this->registerLinkTag([
     'title' => 'Live News for Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 Đoạn mã trên sẽ ra kết quả như sau
 
 ```html
-<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Giống như phương thức [[yii\web\View::registerMetaTag()|registerMetaTag()]], bạn có thể chỉ định từ khóa khi gọi phương thức
diff --git a/docs/guide-zh-CN/README.md b/docs/guide-zh-CN/README.md
index ddb2baa1737..9a73e090c21 100644
--- a/docs/guide-zh-CN/README.md
+++ b/docs/guide-zh-CN/README.md
@@ -1,7 +1,7 @@
 Yii 2.0 权威指南
 ===============================
 
-本教程的发布遵循 [Yii 文档使用许可](http://www.yiiframework.com/doc/terms/)。
+本教程的发布遵循 [Yii 文档使用许可](https://www.yiiframework.com/doc/terms/)。
 
 版权所有。
 
@@ -183,14 +183,14 @@ RESTful Web 服务（RESTful Web Services）
 小部件（Widgets）
 ---------------
 
-* [GridView](http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
-* [ListView](http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
-* [DetailView](http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
-* [ActiveForm](http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
-* [Pjax](http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
-* [Menu](http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
-* [LinkPager](http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
-* [LinkSorter](http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
+* [GridView](https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)
+* [ListView](https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html)
+* [DetailView](https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html)
+* [ActiveForm](https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform)
+* [Pjax](https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html)
+* [Menu](https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html)
+* [LinkPager](https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html)
+* [LinkSorter](https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html)
 * [Bootstrap Widgets](https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-zh-CN/README.md)
 * [jQuery UI Widgets](https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-zh-CN/README.md)
 
diff --git a/docs/guide-zh-CN/concept-aliases.md b/docs/guide-zh-CN/concept-aliases.md
index 816eb8d4c18..e2f1a4214d6 100644
--- a/docs/guide-zh-CN/concept-aliases.md
+++ b/docs/guide-zh-CN/concept-aliases.md
@@ -117,7 +117,7 @@ Yii 预定义了一系列别名来简化常用路径和 URL 的使用：
 - `@web`，当前运行的Web应用程序的 base URL。它的值与 [[yii\web\Request::baseUrl]] 相同。
 - `@vendor`，[[yii\base\Application::vendorPath|Composer vendor 目录]]。
 - `@bower`，包含 [bower 包](http://bower.io/) 的根目录。默认为 `@vendor/bower`。
-- `@npm`，包含 [npm 包](https://www.npmjs.org/) 的根目录。默认为 `@vendor/npm`。
+- `@npm`，包含 [npm 包](https://www.npmjs.com/) 的根目录。默认为 `@vendor/npm`。
 
 `@yii` 别名是在[入口脚本](structure-entry-scripts.md)里包含 `Yii.php` 文件时定义的，
 其他的别名都是在[配置应用](concept-configurations.md)的时候，
diff --git a/docs/guide-zh-CN/concept-behaviors.md b/docs/guide-zh-CN/concept-behaviors.md
index 7b206f4dd48..58794f12432 100644
--- a/docs/guide-zh-CN/concept-behaviors.md
+++ b/docs/guide-zh-CN/concept-behaviors.md
@@ -120,21 +120,21 @@ class User extends ActiveRecord
     {
         return [
             // 匿名行为，只有行为类名
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // 命名行为，只有行为类名
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // 匿名行为，配置数组
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // 命名行为，配置数组
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -156,11 +156,11 @@ use app\components\MyBehavior;
 $component->attachBehavior('myBehavior1', new MyBehavior);
 
 // 附加行为类
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // 附加配置数组
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -171,7 +171,7 @@ $component->attachBehavior('myBehavior3', [
 ```php
 $component->attachBehaviors([
     'myBehavior1' => new MyBehavior,  // 命名行为
-    MyBehavior::className(),          // 匿名行为
+    MyBehavior::class,          // 匿名行为
 ]);
 ```
 
@@ -179,10 +179,10 @@ $component->attachBehaviors([
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -272,7 +272,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide-zh-CN/concept-components.md b/docs/guide-zh-CN/concept-components.md
index 3b8b82a9a2f..30eb34aa6c3 100644
--- a/docs/guide-zh-CN/concept-components.md
+++ b/docs/guide-zh-CN/concept-components.md
@@ -76,7 +76,7 @@ class MyClass extends BaseObject
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // 方法二：
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide-zh-CN/concept-events.md b/docs/guide-zh-CN/concept-events.md
index 030fe41401c..c23b8fcce59 100644
--- a/docs/guide-zh-CN/concept-events.md
+++ b/docs/guide-zh-CN/concept-events.md
@@ -211,7 +211,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' is inserted');
 });
 ```
@@ -229,11 +229,11 @@ Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // 显示 "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 注意这种情况下 `$event->sender` 指向触发事件的类名而不是对象实例。
@@ -245,10 +245,10 @@ Event::trigger(Foo::className(), Foo::EVENT_HELLO);
 
 ```php
 // 移除 $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // 移除 Foo::EVENT_HELLO 事件的全部处理器
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 
@@ -304,10 +304,10 @@ Event::on('app\interfaces\DanceEventInterface', DanceEventInterface::EVENT_DANCE
 
 ```php
 // trigger event for Dog class
-Event::trigger(Dog::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Dog::class, DanceEventInterface::EVENT_DANCE);
 
 // trigger event for Developer class
-Event::trigger(Developer::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Developer::class, DanceEventInterface::EVENT_DANCE);
 ```
 
 但是请注意, 你不能让所有实现这个接口的类都触发事件：
diff --git a/docs/guide-zh-CN/db-active-record.md b/docs/guide-zh-CN/db-active-record.md
index c14cd807eb8..81d9a867795 100644
--- a/docs/guide-zh-CN/db-active-record.md
+++ b/docs/guide-zh-CN/db-active-record.md
@@ -789,7 +789,7 @@ use yii\behaviors\OptimisticLockBehavior;
 public function behaviors()
 {
     return [
-        OptimisticLockBehavior::className(),
+        OptimisticLockBehavior::class,
     ];
 }
 ```
@@ -821,7 +821,7 @@ class Customer extends ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -831,7 +831,7 @@ class Order extends ActiveRecord
 
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -849,7 +849,7 @@ class Order extends ActiveRecord
   一个客户可以有很多订单，而每个订单只有一个客户。
 - 相关联 Active Record 类名：用来指定为 [[yii\db\ActiveRecord::hasMany()|hasMany()]] 或者 
   [[yii\db\ActiveRecord::hasOne()|hasOne()]] 方法的第一个参数。
-  推荐的做法是调用 `Xyz::className()` 来获取类名称的字符串，以便您
+  推荐的做法是调用 `Xyz::class` 来获取类名称的字符串，以便您
   可以使用 IDE 的自动补全，以及让编译阶段的错误检测生效。
 - 两组数据的关联列：用以指定两组数据相关的列（hasOne()/hasMany() 的第二个参数）。
   数组的值填的是主数据的列（当前要声明关联的 Active Record 类为主数据），
@@ -927,7 +927,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100) // 老司机的提醒：$threshold 参数一定一定要给个默认值
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -962,7 +962,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -975,12 +975,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1014,21 +1014,21 @@ class Customer extends ActiveRecord
     public function getPurchasedItems()
     {
         // 客户的商品，将 Item 中的 'id' 列与 OrderItem 中的 'item_id' 相匹配
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
                     ->via('orderItems');
     }
 
     public function getOrderItems()
     {
         // 客户订单中的商品，将 `Order` 的 'id' 列和 OrderItem 的 'order_id' 列相匹配
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id'])
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id'])
                     ->via('orders');
     }
 
     public function getOrders()
     {
         // 见上述列子
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1281,7 +1281,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1289,7 +1289,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1323,7 +1323,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1434,7 +1434,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // 一个 customer 有很多条评论（comments）
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1449,7 +1449,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // 一条评论对应一位 customer
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1533,7 +1533,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1544,7 +1544,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1610,7 +1610,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1705,7 +1705,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1736,7 +1736,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide-zh-CN/input-validation.md b/docs/guide-zh-CN/input-validation.md
index 6ba0ae9c691..9940f328b99 100644
--- a/docs/guide-zh-CN/input-validation.md
+++ b/docs/guide-zh-CN/input-validation.md
@@ -465,7 +465,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide-zh-CN/intro-yii.md b/docs/guide-zh-CN/intro-yii.md
index 48890767ffc..8c70927874f 100644
--- a/docs/guide-zh-CN/intro-yii.md
+++ b/docs/guide-zh-CN/intro-yii.md
@@ -31,7 +31,7 @@ Yii 和其他框架相比呢？
   坚实可靠的扩展架构，使用、再开发或再发布扩展。
 - 高性能始终是 Yii 的首要目标之一。
 
-Yii 不是一场独角戏，它由一个[强大的开发者团队](http://www.yiiframework.com/about/)提供支持，
+Yii 不是一场独角戏，它由一个[强大的开发者团队](https://www.yiiframework.com/team)提供支持，
 也有一个庞大的专家社区，持续不断地对 Yii 的开发作出贡献。
 Yii 开发者团队始终对 Web 开发趋势和其他框架及项目中的最佳实践和特性保持密切关注，
 那些有意义的最佳实践及特性会被不定期的整合进核心框架中，
diff --git a/docs/guide-zh-CN/output-client-scripts.md b/docs/guide-zh-CN/output-client-scripts.md
index 685ac18fb78..88087665616 100644
--- a/docs/guide-zh-CN/output-client-scripts.md
+++ b/docs/guide-zh-CN/output-client-scripts.md
@@ -56,7 +56,7 @@ $this->registerJs(
 ```php
 $this->registerJsFile(
     '@web/js/main.js',
-    ['depends' => [\yii\web\JqueryAsset::className()]]
+    ['depends' => [\yii\web\JqueryAsset::class]]
 );
 ```
 
@@ -95,7 +95,7 @@ body { background: #f00; }
 
 ```php
 $this->registerCssFile("@web/css/themes/black-and-white.css", [
-    'depends' => [\yii\bootstrap\BootstrapAsset::className()],
+    'depends' => [\yii\bootstrap\BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
diff --git a/docs/guide-zh-CN/rest-authentication.md b/docs/guide-zh-CN/rest-authentication.md
index 570d2f2d3a4..41bc24dc1ac 100644
--- a/docs/guide-zh-CN/rest-authentication.md
+++ b/docs/guide-zh-CN/rest-authentication.md
@@ -57,7 +57,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -75,11 +75,11 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => CompositeAuth::className(),
+        'class' => CompositeAuth::class,
         'authMethods' => [
-            HttpBasicAuth::className(),
-            HttpBearerAuth::className(),
-            QueryParamAuth::className(),
+            HttpBasicAuth::class,
+            HttpBearerAuth::class,
+            QueryParamAuth::class,
         ],
     ];
     return $behaviors;
diff --git a/docs/guide-zh-CN/rest-controllers.md b/docs/guide-zh-CN/rest-controllers.md
index 739043b5223..a1e04641d7f 100644
--- a/docs/guide-zh-CN/rest-controllers.md
+++ b/docs/guide-zh-CN/rest-controllers.md
@@ -69,7 +69,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -98,7 +98,7 @@ public function behaviors()
     
     // add CORS filter
     $behaviors['corsFilter'] = [
-        'class' => \yii\filters\Cors::className(),
+        'class' => \yii\filters\Cors::class,
     ];
     
     // re-add authentication filter
diff --git a/docs/guide-zh-CN/security-authorization.md b/docs/guide-zh-CN/security-authorization.md
index 0a1e7a75e43..7ffead1a6b0 100644
--- a/docs/guide-zh-CN/security-authorization.md
+++ b/docs/guide-zh-CN/security-authorization.md
@@ -25,7 +25,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -70,7 +70,7 @@ ACF 自顶向下逐一检查存取规则，直到找到一个与当前
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     ...
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('You are not allowed to access this page');
@@ -129,7 +129,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
@@ -538,7 +538,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'rules' => [
                 [
                     'allow' => true,
diff --git a/docs/guide-zh-CN/start-installation.md b/docs/guide-zh-CN/start-installation.md
index 4144f8e2de5..c9a1b9c7e91 100644
--- a/docs/guide-zh-CN/start-installation.md
+++ b/docs/guide-zh-CN/start-installation.md
@@ -85,7 +85,7 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 
 通过归档文件安装 Yii 包括三个步骤：
 
-1. 从 [yiiframework.com](http://www.yiiframework.com/download/) 下载归档文件。
+1. 从 [yiiframework.com](https://www.yiiframework.com/download/) 下载归档文件。
 2. 将下载的文件解压缩到 Web 访问的文件夹中。
 3. 修改 `config/web.php` 文件，给 `cookieValidationKey` 配置项
    添加一个密钥（若你通过 Composer 安装，则此步骤会自动完成）：
@@ -114,9 +114,9 @@ composer create-project --prefer-dist yiisoft/yii2-app-basic basic
 安装 Assets <span id="installing-assets"></span>
 -----------
 
-Yii依靠 [Bower](http://bower.io/) 和/或 [NPM](https://www.npmjs.org/) 软件包来安装 asset（CSS 和 JavaScript）库。
+Yii依靠 [Bower](http://bower.io/) 和/或 [NPM](https://www.npmjs.com/) 软件包来安装 asset（CSS 和 JavaScript）库。
 它使用Composer来获取这些库，允许 PHP 和 CSS/JavaScript 包版本同时解析。
-这可以通过使用 [asset-packagist.org](https://asset-packagist.org) 或 [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) 来实现。
+这可以通过使用 [asset-packagist.org](https://asset-packagist.org) 或 [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) 来实现。
 有关更多详细信息，请参阅 [Assets 文档](structure-assets.md)。
 
 您可能希望通过本地 Bower/NPM 客户端管理您的 assets，使用 CDN 或完全避免 assets 的安装。
diff --git a/docs/guide-zh-CN/start-looking-ahead.md b/docs/guide-zh-CN/start-looking-ahead.md
index 02bbb6c8460..f118afc5fca 100644
--- a/docs/guide-zh-CN/start-looking-ahead.md
+++ b/docs/guide-zh-CN/start-looking-ahead.md
@@ -22,11 +22,11 @@
       但它们往往覆盖了更广泛的话题，并常常提供解决方案，
       所以它们也很有用。
     - 书籍
-* [扩展](http://www.yiiframework.com/extensions/)：Yii 拥有数以千计用户提供的扩展，这些扩展能非常方便的插入到应用中，
+* [扩展](https://www.yiiframework.com/extensions/)：Yii 拥有数以千计用户提供的扩展，这些扩展能非常方便的插入到应用中，
   使你的应用开发过程更加方便快捷。
 * 社区
-    - 官方论坛：<http://www.yiiframework.com/forum/>
-    - IRC 聊天室：Freenode 网络上的 #yii 频道 (<irc://irc.freenode.net/yii>)
+    - 官方论坛：<https://forum.yiiframework.com/>
+    - IRC 聊天室：Libera 网络上的 #yii 频道 (<ircs://irc.libera.chat:6697>)
     - Slack chanel：<https://yii.slack.com>
     - Gitter chat：<https://gitter.im/yiisoft/yii2>
     - GitHub：<https://github.com/yiisoft/yii2>
diff --git a/docs/guide-zh-CN/start-workflow.md b/docs/guide-zh-CN/start-workflow.md
index fc3628dceef..2ba8d445c24 100644
--- a/docs/guide-zh-CN/start-workflow.md
+++ b/docs/guide-zh-CN/start-workflow.md
@@ -42,7 +42,7 @@
 
 应用中最重要的目录和文件（假设应用根目录是 `basic`）：
 
-```
+```js
 basic/                  应用根目录
     composer.json       Composer 配置文件, 描述包信息
     config/             包含应用配置及其它配置
diff --git a/docs/guide-zh-CN/structure-assets.md b/docs/guide-zh-CN/structure-assets.md
index 822bebd2779..e7bf7e091be 100644
--- a/docs/guide-zh-CN/structure-assets.md
+++ b/docs/guide-zh-CN/structure-assets.md
@@ -201,13 +201,13 @@ class FontAwesomeAsset extends AssetBundle
 }  
 ```
 
-上述的代码为 ["fontawesome" package](http://fontawesome.io/) 定义了资源包。
+上述的代码为 ["fontawesome" package](https://fontawesome.com/) 定义了资源包。
 通过配置发布选项的 only 下标，只有 `fonts` 和 `css` 子目录会发布。
 
 
 ### Bower 和 NPM 资源安装 <span id="bower-npm-assets"></span>
 
-大多数 JavaScript/CSS 包使用 [Bower](http://bower.io/) 或 [NPM](https://www.npmjs.org/) 来管理。
+大多数 JavaScript/CSS 包使用 [Bower](http://bower.io/) 或 [NPM](https://www.npmjs.com/) 来管理。
 在 PHP 中，我们用 Composer 来管理 PHP 依赖。像 PHP 包一样，
 也可以使用 `composer.json` 管理 Bower 和 NPM 包。
 
@@ -257,7 +257,7 @@ $config = [
 composer global require "fxp/composer-asset-plugin:^1.4.1"
 ```
 
-这个命令会全局安装 [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) 插件，
+这个命令会全局安装 [composer asset plugin](https://github.com/fxpio/composer-asset-plugin) 插件，
 以便使用 Composer 来管理对 Bower 和 NPM 包的依赖。 在这个插件安装后，
 你计算机上的每个项目都可以通过 `composer.json` 来管理 Bower 和 NPM 包。
 
@@ -608,14 +608,14 @@ class AppAsset extends AssetBundle
 Yii 使用文件扩展名来表示资源使用哪种扩展语法，
 默认可以识别如下语法和文件扩展名：
 
-- [LESS](http://lesscss.org/)：`.less`
-- [SCSS](http://sass-lang.com/)：`.scss`
-- [Stylus](http://learnboost.github.io/stylus/)：`.styl`
-- [CoffeeScript](http://coffeescript.org/)：`.coffee`
-- [TypeScript](http://www.typescriptlang.org/)：`.ts`
+- [LESS](https://lesscss.org/)：`.less`
+- [SCSS](https://sass-lang.com/)：`.scss`
+- [Stylus](https://stylus-lang.com/)：`.styl`
+- [CoffeeScript](https://coffeescript.org/)：`.coffee`
+- [TypeScript](https://www.typescriptlang.org/)：`.ts`
 
 Yii 依靠安装的预处理工具来转换资源，例如，
-为使用 [LESS](http://lesscss.org/)，应安装 `lessc` 预处理命令。
+为使用 [LESS](https://lesscss.org/)，应安装 `lessc` 预处理命令。
 
 可配置 [[yii\web\AssetManager::converter]] 自定义预处理命令和支持的扩展语法，
 如下所示：
diff --git a/docs/guide-zh-CN/structure-entry-scripts.md b/docs/guide-zh-CN/structure-entry-scripts.md
index 4ed6adb77e0..d89c98809c4 100644
--- a/docs/guide-zh-CN/structure-entry-scripts.md
+++ b/docs/guide-zh-CN/structure-entry-scripts.md
@@ -57,9 +57,9 @@ $config = require __DIR__ . '/../config/web.php';
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide-zh-CN/structure-extensions.md b/docs/guide-zh-CN/structure-extensions.md
index dfae19aea69..b86aaf5b624 100644
--- a/docs/guide-zh-CN/structure-extensions.md
+++ b/docs/guide-zh-CN/structure-extensions.md
@@ -127,9 +127,9 @@ Image::thumbnail('@webroot/img/test-image.jpg', 120, 120)
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -185,7 +185,7 @@ Image::thumbnail('@webroot/img/test-image.jpg', 120, 120)
 当你发布一个稳定版本时，你所依赖的包也应当使用稳定版本。
 
 大多数 JavaScript/CSS 包是用 [Bower](http://bower.io/) 来管理的，而非 Composer。你可使用 
-[Composer asset 插件](https://github.com/francoispluchino/composer-asset-plugin) 使之可以
+[Composer asset 插件](https://github.com/fxpio/composer-asset-plugin) 使之可以
 通过 Composer 来管理这类包。如果你的扩展依赖 Bower 软件包，你可以如下例所示那样简单地
 在 `composer.json` 文件的依赖中列出它。
 
@@ -383,7 +383,7 @@ Yii 提供了测试支持，使你更容易写单元测试、验收测试和功
   代码注释生成漂亮的 API 文档。
 
 > Info: 虽然不做要求，我们还是建议你的扩展遵循某个编码规范。
-  你可以参照 [core framework code style](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style)。
+  你可以参照 [core framework code style](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md)。
 
 
 ## 核心扩展 <span id="core-extensions"></span>
@@ -406,7 +406,7 @@ Yii 提供了下列核心扩展，由 Yii 开发团队开发和维护。这些
   在每个页面的底部将显示一个调试工具条。
   该扩展还提供了一个独立的页面，以显示更详细的调试信息。
 - [yiisoft/yii2-elasticsearch](https://github.com/yiisoft/yii2-elasticsearch)：
-  提供对 [Elasticsearch](http://www.elasticsearch.org/) 的使用支持。它包含基本的查询/搜索支持，
+  提供对 [Elasticsearch](https://www.elastic.co/) 的使用支持。它包含基本的查询/搜索支持，
   并实现了 [Active Record](db-active-record.md) 模式让你可以将活动记录
   存储在 Elasticsearch 中。
 - [yiisoft/yii2-faker](https://github.com/yiisoft/yii2-faker)：
@@ -439,7 +439,7 @@ Yii 提供了下列核心扩展，由 Yii 开发团队开发和维护。这些
 - [yiisoft/yii2-swiftmailer](https://github.com/yiisoft/yii2-swiftmailer)：
   提供了基于 [swiftmailer](http://swiftmailer.org/) 的邮件发送功能。
 - [yiisoft/yii2-twig](https://github.com/yiisoft/yii2-twig)：
-  提供了一个基于 [Twig](http://twig.sensiolabs.org/) 的模板引擎。
+  提供了一个基于 [Twig](https://twig.symfony.com/) 的模板引擎。
 
 以下官方扩展适用于 Yii 2.1 及以上版本。
 您不需要为 Yii 2.0 安装它们，因为它们包含在核心框架中。
diff --git a/docs/guide-zh-CN/structure-filters.md b/docs/guide-zh-CN/structure-filters.md
index 3fc25ea7a92..58ed3a58727 100644
--- a/docs/guide-zh-CN/structure-filters.md
+++ b/docs/guide-zh-CN/structure-filters.md
@@ -121,7 +121,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // 允许认证用户
@@ -157,7 +157,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -183,7 +183,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -210,7 +210,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -241,7 +241,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -269,11 +269,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -307,7 +307,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -339,7 +339,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -366,7 +366,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -387,7 +387,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide-zh-CN/structure-modules.md b/docs/guide-zh-CN/structure-modules.md
index 7c245fb873c..25c4d575c03 100644
--- a/docs/guide-zh-CN/structure-modules.md
+++ b/docs/guide-zh-CN/structure-modules.md
@@ -14,7 +14,7 @@
 在该目录中有子目录如 `controllers`，`models`，`views` 分别为对应控制器，模型，视图和其他代码，和应用非常类似。
 如下例子显示一个模型的目录结构：
 
-```
+```js
 forum/
     Module.php                   模块类文件
     controllers/                 包含控制器类文件
diff --git a/docs/guide-zh-CN/structure-views.md b/docs/guide-zh-CN/structure-views.md
index eb161e30e5c..48116649354 100644
--- a/docs/guide-zh-CN/structure-views.md
+++ b/docs/guide-zh-CN/structure-views.md
@@ -545,7 +545,7 @@ class PostController extends Controller
 - [客户脚本处理](output-client-scripts.md): 支持CSS 和 JavaScript 注册和渲染；
 - [资源包处理](structure-assets.md): 支持 [资源包](structure-assets.md)的注册和渲染；
 - [模板引擎](tutorial-template-engines.md): 允许你使用其他模板引擎，如
-  [Twig](http://twig.sensiolabs.org/), [Smarty](http://www.smarty.net/)。
+  [Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/)。
 
 开发Web页面时，也可能频繁使用以下实用的小特性。
 
@@ -616,14 +616,14 @@ $this->registerLinkTag([
     'title' => 'Live News for Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 上述代码会转换成
 
 ```html
-<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 和 [[yii\web\View::registerMetaTag()|registerMetaTags()]] 类似，
diff --git a/docs/guide-zh-CN/test-fixtures.md b/docs/guide-zh-CN/test-fixtures.md
index b89d5472a3c..edaf5fb7710 100644
--- a/docs/guide-zh-CN/test-fixtures.md
+++ b/docs/guide-zh-CN/test-fixtures.md
@@ -130,7 +130,7 @@ class UserProfileTest extends \Codeception\Test\Unit
     {
         return [
             'profiles' => [
-                'class' => UserProfileFixture::className(),
+                'class' => UserProfileFixture::class,
                 // fixture data located in tests/_data/user.php
                 'dataFile' => codecept_data_dir() . 'user.php'
             ],
diff --git a/docs/guide-zh-CN/tutorial-template-engines.md b/docs/guide-zh-CN/tutorial-template-engines.md
index ac6e3b3f77c..a77422f8f8c 100644
--- a/docs/guide-zh-CN/tutorial-template-engines.md
+++ b/docs/guide-zh-CN/tutorial-template-engines.md
@@ -2,7 +2,7 @@
 ====================================
 
 默认情况下，Yii 使用 PHP 作为其默认的模板引擎语言，但是，你可以配置 Yii 以扩展的方式支持其他的渲染引擎，
-比如 [Twig](http://twig.sensiolabs.org/) 或 [Smarty](http://www.smarty.net/)等。
+比如 [Twig](https://twig.symfony.com/) 或 [Smarty](https://www.smarty.net/)等。
 
 组件 `view` 就是用于渲染视图的。
 你可以重新配置这个组件的行为以增加一个自定义的模板引擎。
diff --git a/docs/guide-zh-CN/tutorial-yii-integration.md b/docs/guide-zh-CN/tutorial-yii-integration.md
index 684ce960a72..f068f3a951a 100644
--- a/docs/guide-zh-CN/tutorial-yii-integration.md
+++ b/docs/guide-zh-CN/tutorial-yii-integration.md
@@ -93,7 +93,7 @@ composer require yiisoft/yii2
 有关 Composer 的更多信息以及安装过程中可能出现的问题的解决方案，另请参见
 [关于安装 Yii 的部分](start-installation.md#installing-via-composer)。
 
-不然的话，你可以[下载](http://www.yiiframework.com/download/) Yii 的发布包，
+不然的话，你可以[下载](https://www.yiiframework.com/download/) Yii 的发布包，
 并把它解压到对应系统的 `BasePath/vendor` 目录内。
 
 之后，你需要修改该第三方应用的入口脚本，在开头位置添加 Yii 的引入代码：
diff --git a/docs/guide-zh-CN/yii2-redis.md b/docs/guide-zh-CN/yii2-redis.md
index 858d4fd1f23..f7c95f34a60 100644
--- a/docs/guide-zh-CN/yii2-redis.md
+++ b/docs/guide-zh-CN/yii2-redis.md
@@ -193,7 +193,7 @@ class Customer extends \yii\redis\ActiveRecord
      */
     public function getOrders()
     {
-         return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+         return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
 }
diff --git a/docs/guide/README.md b/docs/guide/README.md
index a802d3024e3..87edd6d4f73 100644
--- a/docs/guide/README.md
+++ b/docs/guide/README.md
@@ -1,7 +1,7 @@
 The Definitive Guide to Yii 2.0
 ===============================
 
-This tutorial is released under the [Terms of Yii Documentation](http://www.yiiframework.com/doc/terms/).
+This tutorial is released under the [Terms of Yii Documentation](https://www.yiiframework.com/doc/terms/).
 
 All Rights Reserved.
 
@@ -201,5 +201,6 @@ Helpers
 * [Helpers Overview](helper-overview.md)
 * [ArrayHelper](helper-array.md)
 * [Html](helper-html.md)
+* [Json](helper-json.md)
 * [Url](helper-url.md)
 
diff --git a/docs/guide/concept-aliases.md b/docs/guide/concept-aliases.md
index aa37e4f69b5..381ee86c696 100644
--- a/docs/guide/concept-aliases.md
+++ b/docs/guide/concept-aliases.md
@@ -117,7 +117,7 @@ Yii predefines a set of aliases to easily reference commonly used file paths and
 - `@web`, the base URL of the currently running Web application. It has the same value as [[yii\web\Request::baseUrl]].
 - `@vendor`, the [[yii\base\Application::vendorPath|Composer vendor directory]]. Defaults to `@app/vendor`.
 - `@bower`, the root directory that contains [bower packages](http://bower.io/). Defaults to `@vendor/bower`.
-- `@npm`, the root directory that contains [npm packages](https://www.npmjs.org/). Defaults to `@vendor/npm`.
+- `@npm`, the root directory that contains [npm packages](https://www.npmjs.com/). Defaults to `@vendor/npm`.
 
 The `@yii` alias is defined when you include the `Yii.php` file in your [entry script](structure-entry-scripts.md).
 The rest of the aliases are defined in the application constructor when applying the application
diff --git a/docs/guide/concept-behaviors.md b/docs/guide/concept-behaviors.md
index 6811df732cf..3ff95ebc123 100644
--- a/docs/guide/concept-behaviors.md
+++ b/docs/guide/concept-behaviors.md
@@ -120,21 +120,21 @@ class User extends ActiveRecord
     {
         return [
             // anonymous behavior, behavior class name only
-            MyBehavior::className(),
+            MyBehavior::class,
 
             // named behavior, behavior class name only
-            'myBehavior2' => MyBehavior::className(),
+            'myBehavior2' => MyBehavior::class,
 
             // anonymous behavior, configuration array
             [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ],
 
             // named behavior, configuration array
             'myBehavior4' => [
-                'class' => MyBehavior::className(),
+                'class' => MyBehavior::class,
                 'prop1' => 'value1',
                 'prop2' => 'value2',
             ]
@@ -153,14 +153,14 @@ To attach a behavior dynamically, call the [[yii\base\Component::attachBehavior(
 use app\components\MyBehavior;
 
 // attach a behavior object
-$component->attachBehavior('myBehavior1', new MyBehavior);
+$component->attachBehavior('myBehavior1', new MyBehavior());
 
 // attach a behavior class
-$component->attachBehavior('myBehavior2', MyBehavior::className());
+$component->attachBehavior('myBehavior2', MyBehavior::class);
 
 // attach a configuration array
 $component->attachBehavior('myBehavior3', [
-    'class' => MyBehavior::className(),
+    'class' => MyBehavior::class,
     'prop1' => 'value1',
     'prop2' => 'value2',
 ]);
@@ -170,8 +170,8 @@ You may attach multiple behaviors at once using the [[yii\base\Component::attach
 
 ```php
 $component->attachBehaviors([
-    'myBehavior1' => new MyBehavior,  // a named behavior
-    MyBehavior::className(),          // an anonymous behavior
+    'myBehavior1' => new MyBehavior(), // a named behavior
+    MyBehavior::class,                 // an anonymous behavior
 ]);
 ```
 
@@ -179,10 +179,10 @@ You may also attach behaviors through [configurations](concept-configurations.md
 
 ```php
 [
-    'as myBehavior2' => MyBehavior::className(),
+    'as myBehavior2' => MyBehavior::class,
 
     'as myBehavior3' => [
-        'class' => MyBehavior::className(),
+        'class' => MyBehavior::class,
         'prop1' => 'value1',
         'prop2' => 'value2',
     ],
@@ -272,7 +272,7 @@ class User extends ActiveRecord
     {
         return [
             [
-                'class' => TimestampBehavior::className(),
+                'class' => TimestampBehavior::class,
                 'attributes' => [
                     ActiveRecord::EVENT_BEFORE_INSERT => ['created_at', 'updated_at'],
                     ActiveRecord::EVENT_BEFORE_UPDATE => ['updated_at'],
diff --git a/docs/guide/concept-components.md b/docs/guide/concept-components.md
index 4aa1f448265..309bd032fe9 100644
--- a/docs/guide/concept-components.md
+++ b/docs/guide/concept-components.md
@@ -76,7 +76,7 @@ Following these guidelines will make your components [configurable](concept-conf
 $component = new MyClass(1, 2, ['prop1' => 3, 'prop2' => 4]);
 // alternatively
 $component = \Yii::createObject([
-    'class' => MyClass::className(),
+    'class' => MyClass::class,
     'prop1' => 3,
     'prop2' => 4,
 ], [1, 2]);
diff --git a/docs/guide/concept-events.md b/docs/guide/concept-events.md
index b89c9807eb5..6a784292e35 100644
--- a/docs/guide/concept-events.md
+++ b/docs/guide/concept-events.md
@@ -211,7 +211,7 @@ use Yii;
 use yii\base\Event;
 use yii\db\ActiveRecord;
 
-Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
     Yii::debug(get_class($event->sender) . ' is inserted');
 });
 ```
@@ -229,11 +229,11 @@ handlers only. For example:
 ```php
 use yii\base\Event;
 
-Event::on(Foo::className(), Foo::EVENT_HELLO, function ($event) {
+Event::on(Foo::class, Foo::EVENT_HELLO, function ($event) {
     var_dump($event->sender);  // displays "null"
 });
 
-Event::trigger(Foo::className(), Foo::EVENT_HELLO);
+Event::trigger(Foo::class, Foo::EVENT_HELLO);
 ```
 
 Note that, in this case, `$event->sender` is `null` instead of an object instance.
@@ -245,10 +245,10 @@ To detach a class-level event handler, call [[yii\base\Event::off()]]. For examp
 
 ```php
 // detach $handler
-Event::off(Foo::className(), Foo::EVENT_HELLO, $handler);
+Event::off(Foo::class, Foo::EVENT_HELLO, $handler);
 
 // detach all handlers of Foo::EVENT_HELLO
-Event::off(Foo::className(), Foo::EVENT_HELLO);
+Event::off(Foo::class, Foo::EVENT_HELLO);
 ```
 
 
@@ -304,10 +304,10 @@ You can trigger the event of those classes:
 
 ```php
 // trigger event for Dog class
-Event::trigger(Dog::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Dog::class, DanceEventInterface::EVENT_DANCE);
 
 // trigger event for Developer class
-Event::trigger(Developer::className(), DanceEventInterface::EVENT_DANCE);
+Event::trigger(Developer::class, DanceEventInterface::EVENT_DANCE);
 ```
 
 But please notice, that you can not trigger all the classes, that implement the interface:
diff --git a/docs/guide/db-active-record.md b/docs/guide/db-active-record.md
index ca3e19fdb59..79b140eb1f3 100644
--- a/docs/guide/db-active-record.md
+++ b/docs/guide/db-active-record.md
@@ -789,7 +789,7 @@ use yii\behaviors\OptimisticLockBehavior;
 public function behaviors()
 {
     return [
-        OptimisticLockBehavior::className(),
+        OptimisticLockBehavior::class,
     ];
 }
 ```
@@ -821,7 +821,7 @@ class Customer extends ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -831,7 +831,7 @@ class Order extends ActiveRecord
 
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -849,7 +849,7 @@ While declaring a relation, you should specify the following information:
   declarations that a customer has many orders while an order only has one customer.
 - the name of the related Active Record class: specified as the first parameter to 
   either [[yii\db\ActiveRecord::hasMany()|hasMany()]] or [[yii\db\ActiveRecord::hasOne()|hasOne()]].
-  A recommended practice is to call `Xyz::className()` to get the class name string so that you can receive
+  A recommended practice is to call `Xyz::class` to get the class name string so that you can receive
   IDE auto-completion support as well as error detection at compiling stage. 
 - the link between the two types of data: specifies the column(s) through which the two types of data are related.
   The array values are the columns of the primary data (represented by the Active Record class that you are declaring
@@ -859,6 +859,7 @@ While declaring a relation, you should specify the following information:
   Active Record directly next to it. You see there that `customer_id` is a property of `Order` and `id` is a property
   of `Customer`.
   
+> Warning: Relation name `relation` is reserved. When used it will produce `ArgumentCountError`.
 
 ### Accessing Relational Data <span id="accessing-relational-data"></span>
 
@@ -927,7 +928,7 @@ class Customer extends ActiveRecord
 {
     public function getBigOrders($threshold = 100)
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])
             ->where('subtotal > :threshold', [':threshold' => $threshold])
             ->orderBy('id');
     }
@@ -962,7 +963,7 @@ class Order extends ActiveRecord
 {
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->viaTable('order_item', ['order_id' => 'id']);
     }
 }
@@ -975,12 +976,12 @@ class Order extends ActiveRecord
 {
     public function getOrderItems()
     {
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
     }
 
     public function getItems()
     {
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
             ->via('orderItems');
     }
 }
@@ -1014,21 +1015,21 @@ class Customer extends ActiveRecord
     public function getPurchasedItems()
     {
         // customer's items, matching 'id' column of `Item` to 'item_id' in OrderItem
-        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+        return $this->hasMany(Item::class, ['id' => 'item_id'])
                     ->via('orderItems');
     }
 
     public function getOrderItems()
     {
         // customer's order items, matching 'id' column of `Order` to 'order_id' in OrderItem
-        return $this->hasMany(OrderItem::className(), ['order_id' => 'id'])
+        return $this->hasMany(OrderItem::class, ['order_id' => 'id'])
                     ->via('orders');
     }
 
     public function getOrders()
     {
         // same as above
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1281,7 +1282,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1289,7 +1290,7 @@ class Order extends ActiveRecord
 {
     public function getCustomer()
     {
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 ```
@@ -1323,7 +1324,7 @@ class Customer extends ActiveRecord
 {
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+        return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
     }
 }
 ```
@@ -1434,7 +1435,7 @@ class Customer extends \yii\db\ActiveRecord
     public function getComments()
     {
         // a customer has many comments
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1449,7 +1450,7 @@ class Comment extends \yii\mongodb\ActiveRecord
     public function getCustomer()
     {
         // a comment has one customer
-        return $this->hasOne(Customer::className(), ['id' => 'customer_id']);
+        return $this->hasOne(Customer::class, ['id' => 'customer_id']);
     }
 }
 
@@ -1533,7 +1534,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getActiveComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id'])->active();
+        return $this->hasMany(Comment::class, ['customer_id' => 'id'])->active();
     }
 }
 
@@ -1544,7 +1545,7 @@ class Customer extends \yii\db\ActiveRecord
 {
     public function getComments()
     {
-        return $this->hasMany(Comment::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Comment::class, ['customer_id' => 'id']);
     }
 }
 
@@ -1610,7 +1611,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1705,7 +1706,7 @@ class Customer extends \yii\db\ActiveRecord
 
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 }
 ```
@@ -1736,7 +1737,7 @@ class Customer extends \yii\db\ActiveRecord
      */
     public function getOrders()
     {
-        return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+        return $this->hasMany(Order::class, ['customer_id' => 'id']);
     }
 
     /**
diff --git a/docs/guide/db-migrations.md b/docs/guide/db-migrations.md
index cbc9ef5d7ef..326e0f55914 100644
--- a/docs/guide/db-migrations.md
+++ b/docs/guide/db-migrations.md
@@ -187,6 +187,22 @@ class m150101_185401_create_news_table extends Migration
 
 A list of all available methods for defining the column types is available in the API documentation of [[yii\db\SchemaBuilderTrait]].
 
+> Info: The generated file permissions and ownership will be determined by the current environment. This might lead to
+  inaccessible files. This could, for example, happen when the migration is created within a docker container
+  and the files are edited on the host. In this case the `newFileMode` and/or `newFileOwnership` of the MigrateController
+  can be changed. E.g. in the application config:
+  ```php
+  <?php
+  return [
+      'controllerMap' => [
+          'migrate' => [
+              'class' => 'yii\console\controllers\MigrateController',
+              'newFileOwnership' => '1000:1000', # Default WSL user id
+              'newFileMode' => 0660,
+          ],
+      ],
+  ];
+  ```
 
 ## Generating Migrations <span id="generating-migrations"></span>
 
diff --git a/docs/guide/helper-json.md b/docs/guide/helper-json.md
new file mode 100644
index 00000000000..c8aed96f123
--- /dev/null
+++ b/docs/guide/helper-json.md
@@ -0,0 +1,26 @@
+Json Helper
+==========
+
+Json helper provides a set of static methods for encoding and decoding JSON.
+It handles encoding errors and the `[[yii\helpers\Json::encode()]]` method will not encode a JavaScript expression that is represented in 
+terms of a `[[yii\web\JsExpression]]` object.
+By default, ecoding is done with the `JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE` options.
+Please see [PHP:json_encode](https://secure.php.net/manual/en/function.json-encode.php) for more information.
+
+## Pretty Print <span id="pretty-print"></span>
+
+By default the `[[yii\helpers\Json::encode()]]` method will output unformatted JSON (e.g. without whitespaces).
+To make it more readable for humans you can turn on "pretty printing".
+
+> Note: Pretty Print can useful for debugging during development but is not recommended in a production environment. 
+
+To enable pretty print in a single instance you can specify it as an option. E.g.
+
+```php
+$data = ['a' => 1, 'b' => 2];
+$json = yii\helpers\Json::encode($data, JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
+```
+You can also enable pretty printing of the JSON helper globally. For example in your config for or index.php: 
+```php
+yii\helpers\Json::$prettyPrint = YII_DEBUG; // use "pretty" output in debug mode
+```
diff --git a/docs/guide/helper-overview.md b/docs/guide/helper-overview.md
index f6f85c357a3..087b7657f53 100644
--- a/docs/guide/helper-overview.md
+++ b/docs/guide/helper-overview.md
@@ -33,7 +33,7 @@ The following core helper classes are provided in the Yii releases:
 - HtmlPurifier
 - Imagine (provided by yii2-imagine extension)
 - Inflector
-- Json
+- [Json](helper-json.md)
 - Markdown
 - StringHelper
 - [Url](helper-url.md)
diff --git a/docs/guide/input-validation.md b/docs/guide/input-validation.md
index 30f51372e69..a77e873a4fe 100644
--- a/docs/guide/input-validation.md
+++ b/docs/guide/input-validation.md
@@ -469,7 +469,7 @@ class EntryForm extends Model
     {
         return [
             [['name', 'email'], 'required'],
-            ['country', CountryValidator::className()],
+            ['country', CountryValidator::class],
             ['email', 'email'],
         ];
     }
diff --git a/docs/guide/intro-yii.md b/docs/guide/intro-yii.md
index 56a6213ff15..d56ea04f1ca 100644
--- a/docs/guide/intro-yii.md
+++ b/docs/guide/intro-yii.md
@@ -31,7 +31,7 @@ If you're already familiar with another framework, you may appreciate knowing ho
   take advantage of Yii's solid extension architecture to use or develop redistributable extensions.
 - High performance is always a primary goal of Yii.
 
-Yii is not a one-man show, it is backed up by a [strong core developer team](http://www.yiiframework.com/team/), as well as a large community
+Yii is not a one-man show, it is backed up by a [strong core developer team](https://www.yiiframework.com/team/), as well as a large community
 of professionals constantly contributing to Yii's development. The Yii developer team
 keeps a close eye on the latest Web development trends and on the best practices and features
 found in other frameworks and projects. The most relevant best practices and features found elsewhere are regularly incorporated into the core framework and exposed
diff --git a/docs/guide/output-client-scripts.md b/docs/guide/output-client-scripts.md
index e2d41fff753..40736f7bae6 100644
--- a/docs/guide/output-client-scripts.md
+++ b/docs/guide/output-client-scripts.md
@@ -56,7 +56,7 @@ An external script can be added like the following:
 ```php
 $this->registerJsFile(
     '@web/js/main.js',
-    ['depends' => [\yii\web\JqueryAsset::className()]]
+    ['depends' => [\yii\web\JqueryAsset::class]]
 );
 ```
 
@@ -95,7 +95,7 @@ A CSS file can be registered using the following:
 
 ```php
 $this->registerCssFile("@web/css/themes/black-and-white.css", [
-    'depends' => [\yii\bootstrap\BootstrapAsset::className()],
+    'depends' => [\yii\bootstrap\BootstrapAsset::class],
     'media' => 'print',
 ], 'css-print-theme');
 ```
diff --git a/docs/guide/rest-authentication.md b/docs/guide/rest-authentication.md
index 39a6516d84c..cd7e5d19af0 100644
--- a/docs/guide/rest-authentication.md
+++ b/docs/guide/rest-authentication.md
@@ -57,7 +57,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -75,11 +75,11 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => CompositeAuth::className(),
+        'class' => CompositeAuth::class,
         'authMethods' => [
-            HttpBasicAuth::className(),
-            HttpBearerAuth::className(),
-            QueryParamAuth::className(),
+            HttpBasicAuth::class,
+            HttpBearerAuth::class,
+            QueryParamAuth::class,
         ],
     ];
     return $behaviors;
diff --git a/docs/guide/rest-controllers.md b/docs/guide/rest-controllers.md
index 321fa2ecf9e..3bf8e1dc871 100644
--- a/docs/guide/rest-controllers.md
+++ b/docs/guide/rest-controllers.md
@@ -69,7 +69,7 @@ public function behaviors()
 {
     $behaviors = parent::behaviors();
     $behaviors['authenticator'] = [
-        'class' => HttpBasicAuth::className(),
+        'class' => HttpBasicAuth::class,
     ];
     return $behaviors;
 }
@@ -98,7 +98,7 @@ public function behaviors()
     
     // add CORS filter
     $behaviors['corsFilter'] = [
-        'class' => \yii\filters\Cors::className(),
+        'class' => \yii\filters\Cors::class,
     ];
     
     // re-add authentication filter
diff --git a/docs/guide/security-authorization.md b/docs/guide/security-authorization.md
index aee2570f2e0..6e69e17a91e 100644
--- a/docs/guide/security-authorization.md
+++ b/docs/guide/security-authorization.md
@@ -25,7 +25,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['login', 'logout', 'signup'],
                 'rules' => [
                     [
@@ -70,7 +70,7 @@ You may customize this behavior by configuring the [[yii\filters\AccessControl::
 
 ```php
 [
-    'class' => AccessControl::className(),
+    'class' => AccessControl::class,
     ...
     'denyCallback' => function ($rule, $action) {
         throw new \Exception('You are not allowed to access this page');
@@ -129,7 +129,7 @@ class SiteController extends Controller
     {
         return [
             'access' => [
-                'class' => AccessControl::className(),
+                'class' => AccessControl::class,
                 'only' => ['special-callback'],
                 'rules' => [
                     [
@@ -538,7 +538,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'rules' => [
                 [
                     'allow' => true,
diff --git a/docs/guide/security-passwords.md b/docs/guide/security-passwords.md
index 68d19505788..5edce289c07 100644
--- a/docs/guide/security-passwords.md
+++ b/docs/guide/security-passwords.md
@@ -3,7 +3,7 @@ Working with Passwords
 
 Most developers know that passwords cannot be stored in plain text, but many developers believe it's still safe to hash
 passwords using `md5` or `sha1`. There was a time when using the aforementioned hashing algorithms was sufficient,
-but modern hardware makes it possible to reverse such hashes and even stronger ones very quickly using brute force attacks.
+but modern hardware makes it possible to crack such hashes and even stronger ones very quickly using brute force attacks.
 
 In order to provide increased security for user passwords, even in the worst case scenario (your application is breached),
 you need to use a hashing algorithm that is resilient against brute force attacks. The best current choice is `bcrypt`.
diff --git a/docs/guide/start-installation.md b/docs/guide/start-installation.md
index 7d14124edc6..27e3ba3313f 100644
--- a/docs/guide/start-installation.md
+++ b/docs/guide/start-installation.md
@@ -85,7 +85,7 @@ Installing from an Archive File <span id="installing-from-archive-file"></span>
 
 Installing Yii from an archive file involves three steps:
 
-1. Download the archive file from [yiiframework.com](http://www.yiiframework.com/download/).
+1. Download the archive file from [yiiframework.com](https://www.yiiframework.com/download/).
 2. Unpack the downloaded file to a Web-accessible folder.
 3. Modify the `config/web.php` file by entering a secret key for the `cookieValidationKey` configuration item
    (this is done automatically if you are installing Yii using Composer):
@@ -114,9 +114,9 @@ But there are other installation options available:
 Installing Assets <span id="installing-assets"></span>
 -----------------
 
-Yii relies on [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.org/) packages for the asset (CSS and JavaScript) libraries installation.
+Yii relies on [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.com/) packages for the asset (CSS and JavaScript) libraries installation.
 It uses Composer to obtain these libraries, allowing PHP and CSS/JavaScript package versions to resolve at the same time.
-This can be achieved either by usage of [asset-packagist.org](https://asset-packagist.org) or [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/).
+This can be achieved either by usage of [asset-packagist.org](https://asset-packagist.org) or [composer asset plugin](https://github.com/fxpio/composer-asset-plugin).
 Please refer to [Assets documentation](structure-assets.md) for more details.
 
 You may want to either manage your assets via native Bower/NPM client, use CDN or avoid assets installation entirely.
@@ -378,5 +378,5 @@ It's recommended to host the application in a virtual host (Web site) where docu
 </configuration>
 ```
 Also the following list of Microsoft's official resources could be useful in order to configure PHP on IIS:
- 1. [How to set up your first IIS Web site](https://support.microsoft.com/en-us/help/323972/how-to-set-up-your-first-iis-web-site)
+ 1. [How to set up your first IIS Web site](https://docs.microsoft.com/en-us/iis/manage/creating-websites/scenario-build-a-static-website-on-iis)
  2. [Configure a PHP Website on IIS](https://docs.microsoft.com/en-us/iis/application-frameworks/scenario-build-a-php-website-on-iis/configure-a-php-website-on-iis)
diff --git a/docs/guide/start-looking-ahead.md b/docs/guide/start-looking-ahead.md
index a9ba1b31f64..621d91d6279 100644
--- a/docs/guide/start-looking-ahead.md
+++ b/docs/guide/start-looking-ahead.md
@@ -9,24 +9,24 @@ code automatically. Using Gii for code generation turns the bulk of your Web dev
 This section will summarize the Yii resources available to help you be more productive when using the framework.
 
 * Documentation
-    - [The Definitive Guide](http://www.yiiframework.com/doc-2.0/guide-README.html):
+    - [The Definitive Guide](https://www.yiiframework.com/doc-2.0/guide-README.html):
       As the name indicates, the guide precisely defines how Yii should work and provides general guidance
       about using Yii. It is the single most important Yii tutorial, and one that you should read 
       before writing any Yii code.
-    - [The Class Reference](http://www.yiiframework.com/doc-2.0/index.html):
+    - [The Class Reference](https://www.yiiframework.com/doc-2.0/index.html):
       This specifies the usage of every class provided by Yii. It should be mainly used when you are writing
       code and want to understand the usage of a particular class, method, property. Usage of the class reference is best only after a contextual understanding of the entire framework.
-    - [The Wiki Articles](http://www.yiiframework.com/wiki/?tag=yii2):
+    - [The Wiki Articles](https://www.yiiframework.com/wiki/?tag=yii2):
       The wiki articles are written by Yii users based on their own experiences. Most of them are written
       like cookbook recipes, and show how to solve particular problems using Yii. While the quality of these
       articles may not be as good as the Definitive Guide, they are useful in that they cover broader topics
       and can often provide ready-to-use solutions.
-    - [Books](http://www.yiiframework.com/doc/)
-* [Extensions](http://www.yiiframework.com/extensions/):
+    - [Books](https://www.yiiframework.com/books)
+* [Extensions](https://www.yiiframework.com/extensions/):
   Yii boasts a library of thousands of user-contributed extensions that can be easily plugged into your applications, thereby making your application development even faster and easier.
 * Community
-    - Forum: <http://www.yiiframework.com/forum/>
-    - IRC chat: The #yii channel on the freenode network (<irc://irc.freenode.net/yii>)
+    - Forum: <https://forum.yiiframework.com/>
+    - IRC chat: The #yii channel on the Libera (<ircs://irc.libera.chat:6697/yii>)
     - Slack chanel: <https://join.slack.com/t/yii/shared_invite/enQtMzQ4MDExMDcyNTk2LTc0NDQ2ZTZhNjkzZDgwYjE4YjZlNGQxZjFmZDBjZTU3NjViMDE4ZTMxNDRkZjVlNmM1ZTA1ODVmZGUwY2U3NDA>
     - Gitter chat: <https://gitter.im/yiisoft/yii2>
     - GitHub: <https://github.com/yiisoft/yii2>
diff --git a/docs/guide/start-workflow.md b/docs/guide/start-workflow.md
index 454b07e2de3..202841cdc81 100644
--- a/docs/guide/start-workflow.md
+++ b/docs/guide/start-workflow.md
@@ -42,7 +42,7 @@ Application Structure <span id="application-structure"></span>
 
 The most important directories and files in your application are (assuming the application's root directory is `basic`):
 
-```
+```js
 basic/                  application base path
     composer.json       used by Composer, describes package information
     config/             contains application and other configurations
diff --git a/docs/guide/structure-assets.md b/docs/guide/structure-assets.md
index 8f178c836cd..336c135cf21 100644
--- a/docs/guide/structure-assets.md
+++ b/docs/guide/structure-assets.md
@@ -201,13 +201,13 @@ class FontAwesomeAsset extends AssetBundle
 }  
 ```
 
-The above example defines an asset bundle for the ["fontawesome" package](http://fontawesome.io/). By specifying 
+The above example defines an asset bundle for the ["fontawesome" package](https://fontawesome.com/). By specifying 
 the `only` publishing option, only the `fonts` and `css` subdirectories will be published.
 
 
 ### Bower and NPM Assets installation <span id="bower-npm-assets"></span>
 
-Most JavaScript/CSS packages are managed by [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.org/) package 
+Most JavaScript/CSS packages are managed by [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.com/) package 
 managers. In PHP world we have Composer, that manages PHP dependencies, but it is possible to load
 both Bower and NPM packages using `composer.json` just as PHP packages.
 
@@ -257,7 +257,7 @@ requires global installation of a special Composer plugin by running the followi
 composer global require "fxp/composer-asset-plugin:^1.4.1"
 ```
 
-This command installs [composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin/) globally
+This command installs [composer asset plugin](https://github.com/fxpio/composer-asset-plugin/) globally
 which allows managing Bower and NPM package dependencies through Composer. After the plugin installation, 
 every single project on your computer will support Bower and NPM packages through `composer.json`. 
 
@@ -610,13 +610,13 @@ in extended syntax.
 Yii uses the file name extensions to identify which extended syntax an asset is in. By default it recognizes
 the following syntax and file name extensions:
 
-- [LESS](http://lesscss.org/): `.less`
-- [SCSS](http://sass-lang.com/): `.scss`
-- [Stylus](http://learnboost.github.io/stylus/): `.styl`
-- [CoffeeScript](http://coffeescript.org/): `.coffee`
-- [TypeScript](http://www.typescriptlang.org/): `.ts`
+- [LESS](https://lesscss.org/): `.less`
+- [SCSS](https://sass-lang.com/): `.scss`
+- [Stylus](https://stylus-lang.com/): `.styl`
+- [CoffeeScript](https://coffeescript.org/): `.coffee`
+- [TypeScript](https://www.typescriptlang.org/): `.ts`
 
-Yii relies on the installed pre-processor tools to convert assets. For example, to use [LESS](http://lesscss.org/)
+Yii relies on the installed pre-processor tools to convert assets. For example, to use [LESS](https://lesscss.org/)
 you should install the `lessc` pre-processor command.
 
 You can customize the pre-processor commands and the supported extended syntax by configuring
diff --git a/docs/guide/structure-entry-scripts.md b/docs/guide/structure-entry-scripts.md
index 93f92963b09..fd03f1dc2b0 100644
--- a/docs/guide/structure-entry-scripts.md
+++ b/docs/guide/structure-entry-scripts.md
@@ -57,9 +57,9 @@ Similarly, the following is the code for the entry script of a console applicati
 /**
  * Yii console bootstrap file.
  *
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 
 defined('YII_DEBUG') or define('YII_DEBUG', true);
diff --git a/docs/guide/structure-extensions.md b/docs/guide/structure-extensions.md
index a0f10956390..c7dc96dd020 100644
--- a/docs/guide/structure-extensions.md
+++ b/docs/guide/structure-extensions.md
@@ -127,9 +127,9 @@ The following example shows the `composer.json` file for the `yiisoft/yii2-imagi
     "license": "BSD-3-Clause",
     "support": {
         "issues": "https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine",
-        "forum": "http://www.yiiframework.com/forum/",
-        "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "forum": "https://forum.yiiframework.com/",
+        "wiki": "https://www.yiiframework.com/wiki/",
+        "irc": "ircs://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "authors": [
@@ -184,8 +184,8 @@ If your extension also depends on other extensions or third-party libraries, you
 Make sure you also list appropriate version constraints (e.g. `1.*`, `@stable`) for each dependent package. Use stable
 dependencies when your extension is released in a stable version.
 
-Most JavaScript/CSS packages are managed using [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.org/),
-instead of Composer. Yii uses the [Composer asset plugin](https://github.com/francoispluchino/composer-asset-plugin)
+Most JavaScript/CSS packages are managed using [Bower](http://bower.io/) and/or [NPM](https://www.npmjs.com/),
+instead of Composer. Yii uses the [Composer asset plugin](https://github.com/fxpio/composer-asset-plugin)
 to enable managing these kinds of packages through Composer. If your extension depends on a Bower package, you can
 simply list the dependency in `composer.json` like the following:
 
@@ -383,7 +383,7 @@ help other people learn about and use your extension:
   for you to generate pretty API documentation based on your code comments.
 
 > Info: While not a requirement, we suggest your extension adhere to certain coding styles. You may refer to
-  the [core framework code style](https://github.com/yiisoft/yii2/wiki/Core-framework-code-style).
+  the [core framework code style](https://github.com/yiisoft/yii2/blob/master/docs/internals/core-code-style.md).
 
 
 ## Core Extensions <span id="core-extensions"></span>
@@ -406,7 +406,7 @@ registered on [Packagist](https://packagist.org/) and can be easily installed as
   at the bottom of every page. The extension also provides a set of standalone pages to display more detailed
   debug information.
 - [yiisoft/yii2-elasticsearch](https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch):
-  provides the support for using [Elasticsearch](http://www.elasticsearch.org/). It includes basic querying/search
+  provides the support for using [Elasticsearch](https://www.elastic.co/). It includes basic querying/search
   support and also implements the [Active Record](db-active-record.md) pattern that allows you to store active records
   in Elasticsearch.
 - [yiisoft/yii2-faker](https://www.yiiframework.com/extension/yiisoft/yii2-faker):
@@ -439,7 +439,7 @@ registered on [Packagist](https://packagist.org/) and can be easily installed as
 - [yiisoft/yii2-swiftmailer](https://www.yiiframework.com/extension/yiisoft/yii2-swiftmailer):
   provides email sending features based on [swiftmailer](http://swiftmailer.org/).
 - [yiisoft/yii2-twig](https://www.yiiframework.com/extension/yiisoft/yii2-twig):
-  provides a template engine based on [Twig](http://twig.sensiolabs.org/).
+  provides a template engine based on [Twig](https://twig.symfony.com/).
 
 The following official extensions are for Yii 2.1 and above.
 You don't need to install them for Yii 2.0, since they are included in the core framework.
diff --git a/docs/guide/structure-filters.md b/docs/guide/structure-filters.md
index 0789814fc7a..2ede0f02dd7 100644
--- a/docs/guide/structure-filters.md
+++ b/docs/guide/structure-filters.md
@@ -121,7 +121,7 @@ public function behaviors()
 {
     return [
         'access' => [
-            'class' => AccessControl::className(),
+            'class' => AccessControl::class,
             'only' => ['create', 'update'],
             'rules' => [
                 // allow authenticated users
@@ -157,7 +157,7 @@ public function behaviors()
 {
     return [
         'basicAuth' => [
-            'class' => HttpBasicAuth::className(),
+            'class' => HttpBasicAuth::class,
         ],
     ];
 }
@@ -183,7 +183,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -210,7 +210,7 @@ use yii\web\Response;
 [
     'bootstrap' => [
         [
-            'class' => ContentNegotiator::className(),
+            'class' => ContentNegotiator::class,
             'formats' => [
                 'application/json' => Response::FORMAT_JSON,
                 'application/xml' => Response::FORMAT_XML,
@@ -241,7 +241,7 @@ public function behaviors()
 {
     return [
         [
-            'class' => HttpCache::className(),
+            'class' => HttpCache::class,
             'only' => ['index'],
             'lastModified' => function ($action, $params) {
                 $q = new \yii\db\Query();
@@ -269,11 +269,11 @@ public function behaviors()
 {
     return [
         'pageCache' => [
-            'class' => PageCache::className(),
+            'class' => PageCache::class,
             'only' => ['index'],
             'duration' => 60,
             'dependency' => [
-                'class' => DbDependency::className(),
+                'class' => DbDependency::class,
                 'sql' => 'SELECT COUNT(*) FROM post',
             ],
             'variations' => [
@@ -307,7 +307,7 @@ public function behaviors()
 {
     return [
         'verbs' => [
-            'class' => VerbFilter::className(),
+            'class' => VerbFilter::class,
             'actions' => [
                 'index'  => ['get'],
                 'view'   => ['get'],
@@ -339,7 +339,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
         ],
     ], parent::behaviors());
 }
@@ -366,7 +366,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
@@ -387,7 +387,7 @@ public function behaviors()
 {
     return ArrayHelper::merge([
         [
-            'class' => Cors::className(),
+            'class' => Cors::class,
             'cors' => [
                 'Origin' => ['http://www.myserver.net'],
                 'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
diff --git a/docs/guide/structure-modules.md b/docs/guide/structure-modules.md
index 35ca09b8f1f..3567a1443e2 100644
--- a/docs/guide/structure-modules.md
+++ b/docs/guide/structure-modules.md
@@ -14,7 +14,7 @@ A module is organized as a directory which is called the [[yii\base\Module::base
 Within the directory, there are sub-directories, such as `controllers`, `models`, `views`, which hold controllers,
 models, views, and other code, just like in an application. The following example shows the content within a module:
 
-```
+```js
 forum/
     Module.php                   the module class file
     controllers/                 containing controller class files
diff --git a/docs/guide/structure-views.md b/docs/guide/structure-views.md
index 980ee11b2e1..9e37a892edd 100644
--- a/docs/guide/structure-views.md
+++ b/docs/guide/structure-views.md
@@ -545,7 +545,7 @@ View components provide the following useful view-related features, each describ
 * [client script handling](output-client-scripts.md): supports CSS and JavaScript registration and rendering.
 * [asset bundle handling](structure-assets.md): supports registering and rendering of [asset bundles](structure-assets.md).
 * [alternative template engines](tutorial-template-engines.md): allows you to use other template engines, such as
-  [Twig](http://twig.sensiolabs.org/), [Smarty](http://www.smarty.net/).
+  [Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/).
 
 You may also frequently use the following minor yet useful features when you are developing Web pages.
 
@@ -616,14 +616,14 @@ $this->registerLinkTag([
     'title' => 'Live News for Yii',
     'rel' => 'alternate',
     'type' => 'application/rss+xml',
-    'href' => 'http://www.yiiframework.com/rss.xml/',
+    'href' => 'https://www.yiiframework.com/rss.xml/',
 ]);
 ```
 
 The code above will result in
 
 ```html
-<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/">
+<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
 ```
 
 Similar as [[yii\web\View::registerMetaTag()|registerMetaTag()]], you can specify a key when calling
diff --git a/docs/guide/test-fixtures.md b/docs/guide/test-fixtures.md
index 8ba5a9a80a7..73d140321aa 100644
--- a/docs/guide/test-fixtures.md
+++ b/docs/guide/test-fixtures.md
@@ -130,7 +130,7 @@ class UserProfileTest extends \Codeception\Test\Unit
     {
         return [
             'profiles' => [
-                'class' => UserProfileFixture::className(),
+                'class' => UserProfileFixture::class,
                 // fixture data located in tests/_data/user.php
                 'dataFile' => codecept_data_dir() . 'user.php'
             ],
diff --git a/docs/guide/tutorial-template-engines.md b/docs/guide/tutorial-template-engines.md
index 70f35619195..c6017fb7fe1 100644
--- a/docs/guide/tutorial-template-engines.md
+++ b/docs/guide/tutorial-template-engines.md
@@ -2,7 +2,7 @@ Using template engines
 ======================
 
 By default, Yii uses PHP as its template language, but you can configure Yii to support other rendering engines, such as
-[Twig](http://twig.sensiolabs.org/) or [Smarty](http://www.smarty.net/) available as extensions.
+[Twig](https://twig.symfony.com/) or [Smarty](https://www.smarty.net/) available as extensions.
 
 The `view` component is responsible for rendering views. You can add a custom template engine by reconfiguring this
 component's behavior:
diff --git a/docs/guide/tutorial-yii-integration.md b/docs/guide/tutorial-yii-integration.md
index 49b7d4481e7..f00d8e05376 100644
--- a/docs/guide/tutorial-yii-integration.md
+++ b/docs/guide/tutorial-yii-integration.md
@@ -93,7 +93,7 @@ you should require a special composer package that prevent Bower and NPM package
 See also the general [section about installing Yii](start-installation.md#installing-via-composer) for more information
 on Composer and solution to possible issues popping up during the installation.
 
-Otherwise, you can [download](http://www.yiiframework.com/download/) the Yii release file and unpack it in
+Otherwise, you can [download](https://www.yiiframework.com/download/) the Yii release file and unpack it in
 the `BasePath/vendor` directory.
 
 Next, you should modify the entry script of the 3rd-party system by including the following code at the beginning:
diff --git a/docs/internals-fa/core-code-style.md b/docs/internals-fa/core-code-style.md
index dfce6988bac..e1abe931d62 100644
--- a/docs/internals-fa/core-code-style.md
+++ b/docs/internals-fa/core-code-style.md
@@ -356,9 +356,9 @@ $mul = array_reduce($numbers, function($r, $x) use($n) {
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals-ja/core-code-style.md b/docs/internals-ja/core-code-style.md
index fa1a2a3cec1..6879a8f097c 100644
--- a/docs/internals-ja/core-code-style.md
+++ b/docs/internals-ja/core-code-style.md
@@ -395,9 +395,9 @@ $mul = array_reduce($numbers, function($r, $x) use($n) {
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals-ja/report-an-issue.md b/docs/internals-ja/report-an-issue.md
index 6b2a41a068a..b79adf4b4df 100644
--- a/docs/internals-ja/report-an-issue.md
+++ b/docs/internals-ja/report-an-issue.md
@@ -13,8 +13,8 @@
 
 **以下の場合は課題を報告しないでください**
 
-* Yii の何らかの機能の使い方に関する質問。この目的のためには、[フォーラム](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) または [チャット・ルーム](http://www.yiiframework.com/chat/) を使うべきです。
-* 問題がセキュリティに関するものである場合。セキュリティ問題を報告するときは、[開発者に直接コンタクト](http://www.yiiframework.com/security/) してください。
+* Yii の何らかの機能の使い方に関する質問。この目的のためには、[フォーラム](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) または [チャット・ルーム](https://www.yiiframework.com/chat/) を使うべきです。
+* 問題がセキュリティに関するものである場合。セキュリティ問題を報告するときは、[開発者に直接コンタクト](https://www.yiiframework.com/security/) してください。
 
 **課題の重複を避ける**
 
diff --git a/docs/internals-pl/core-code-style.md b/docs/internals-pl/core-code-style.md
index 736a736755b..e2077ab58f8 100644
--- a/docs/internals-pl/core-code-style.md
+++ b/docs/internals-pl/core-code-style.md
@@ -391,9 +391,9 @@ Dokumentacja
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals-pl/report-an-issue.md b/docs/internals-pl/report-an-issue.md
index 9b7faa791bb..fd6a4fa7d32 100644
--- a/docs/internals-pl/report-an-issue.md
+++ b/docs/internals-pl/report-an-issue.md
@@ -13,8 +13,8 @@ Jeśli nie jesteś pewien, gdzie powinno trafić zgłoszenie, [wyślij je do gł
 
 **Nie zgłaszaj problemu jeśli**
 
-* pytasz o to, w jaki sposób użyć którejś z funkcjonalności Yii. Do tego celu użyj [forum](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) lub [chatu](http://www.yiiframework.com/chat/).
-* dotyczy on bezpieczeństwa. W takim wypadku prosimy o [bezpośredni kontakt](http://www.yiiframework.com/security/).
+* pytasz o to, w jaki sposób użyć którejś z funkcjonalności Yii. Do tego celu użyj [forum](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) lub [chatu](https://www.yiiframework.com/chat/).
+* dotyczy on bezpieczeństwa. W takim wypadku prosimy o [bezpośredni kontakt](https://www.yiiframework.com/security/).
 
 **Unikaj duplikowania zgłoszeń**
 
diff --git a/docs/internals-ru/core-code-style.md b/docs/internals-ru/core-code-style.md
index d53c62389c6..fb3414065a3 100644
--- a/docs/internals-ru/core-code-style.md
+++ b/docs/internals-ru/core-code-style.md
@@ -364,9 +364,9 @@ public function getErrors($attribute = null)
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals-ru/report-an-issue.md b/docs/internals-ru/report-an-issue.md
index 89b9f963b47..e71f3d388cc 100644
--- a/docs/internals-ru/report-an-issue.md
+++ b/docs/internals-ru/report-an-issue.md
@@ -13,8 +13,8 @@
 
 **Не сообщайте о проблеме, если:**
 
-* Вы хотите спросить как использовать ту или иную возможность Yii. Для этого пользуйтесь [форумом](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) или [чатом](http://www.yiiframework.com/chat/).
-* Проблема касается безопасности. Пожалуйста, [обращайтесь непосредственно к разработчикам](http://www.yiiframework.com/security/) для сообщения о проблемах с безопасностью.
+* Вы хотите спросить как использовать ту или иную возможность Yii. Для этого пользуйтесь [форумом](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) или [чатом](https://www.yiiframework.com/chat/).
+* Проблема касается безопасности. Пожалуйста, [обращайтесь непосредственно к разработчикам](https://www.yiiframework.com/security/) для сообщения о проблемах с безопасностью.
 
 **Избегайте дублирования вопросов**
 
diff --git a/docs/internals-sr-Latn/report-an-issue.md b/docs/internals-sr-Latn/report-an-issue.md
index 0f334eecfb4..0ca6f19a789 100644
--- a/docs/internals-sr-Latn/report-an-issue.md
+++ b/docs/internals-sr-Latn/report-an-issue.md
@@ -13,8 +13,8 @@ Ukoliko niste sigurni, [prijavite problem u glavnom repozitorijumu](https://gith
 
 **Ne prijavljujte problem ako**
 
-* tražite pomoć pri korišćenju nekih Yii funkcionalnosti. Koristite [forum](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) ili [čet sobu](http://www.yiiframework.com/chat/) u te svrhe.
-* je vaš problem sigurnosnog tipa. Molimo da nas [kontaktirate direktno](http://www.yiiframework.com/security/) za prijavu sigurnosnih problema.
+* tražite pomoć pri korišćenju nekih Yii funkcionalnosti. Koristite [forum](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) ili [čet sobu](https://www.yiiframework.com/chat/) u te svrhe.
+* je vaš problem sigurnosnog tipa. Molimo da nas [kontaktirate direktno](https://www.yiiframework.com/security/) za prijavu sigurnosnih problema.
 
 **Izbegavajte duple probleme**
 
diff --git a/docs/internals-uk/core-code-style.md b/docs/internals-uk/core-code-style.md
index 559cfba4727..6075a1bfddb 100644
--- a/docs/internals-uk/core-code-style.md
+++ b/docs/internals-uk/core-code-style.md
@@ -365,9 +365,9 @@ $mul = array_reduce($numbers, function($r, $x) use($n) {
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals-uk/report-an-issue.md b/docs/internals-uk/report-an-issue.md
index b9fee14a964..4d11a9bde2a 100644
--- a/docs/internals-uk/report-an-issue.md
+++ b/docs/internals-uk/report-an-issue.md
@@ -13,8 +13,8 @@
 
 **Не повідомляйте про проблему, якщо:**
 
-* Ви хочете спитати як використовувати ту чи іншу можливість Yii. Для цього користуйтесь [форумом](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) або [чатом](http://www.yiiframework.com/chat/).
-* Проблема стосується безпеки. Будь ласка, [звертайтесь безпосередньо до розробників](http://www.yiiframework.com/security/), щодо проблем з безпекою.
+* Ви хочете спитати як використовувати ту чи іншу можливість Yii. Для цього користуйтесь [форумом](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) або [чатом](https://www.yiiframework.com/chat/).
+* Проблема стосується безпеки. Будь ласка, [звертайтесь безпосередньо до розробників](https://www.yiiframework.com/security/), щодо проблем з безпекою.
 
 **Уникайте дублювання питань**
 
diff --git a/docs/internals/core-code-style.md b/docs/internals/core-code-style.md
index 09b8ca5b5b3..45c2e933ba3 100644
--- a/docs/internals/core-code-style.md
+++ b/docs/internals/core-code-style.md
@@ -395,9 +395,9 @@ Documentation
 ```php
 <?php
 /**
- * @link http://www.yiiframework.com/
+ * @link https://www.yiiframework.com/
  * @copyright Copyright (c) 2008 Yii Software LLC
- * @license http://www.yiiframework.com/license/
+ * @license https://www.yiiframework.com/license/
  */
 ```
 
diff --git a/docs/internals/report-an-issue.md b/docs/internals/report-an-issue.md
index 1705a112984..11a1ce70590 100644
--- a/docs/internals/report-an-issue.md
+++ b/docs/internals/report-an-issue.md
@@ -13,8 +13,8 @@ If you are unsure, [report it to the main repository](https://github.com/yiisoft
 
 **Do not report an issue if**
 
-* you are asking how to use some Yii feature. You should use [the forum](http://www.yiiframework.com/forum/index.php/forum/42-general-discussions-for-yii-20/) or [chat room](http://www.yiiframework.com/chat/) for this purpose.
-* your issue is about security. Please [contact us directly](http://www.yiiframework.com/security/) to report security issues.
+* you are asking how to use some Yii feature. You should use [the forum](https://forum.yiiframework.com/index.php/forum/42-general-discussions-for-yii-20/) or [chat room](https://www.yiiframework.com/chat/) for this purpose.
+* your issue is about security. Please [contact us directly](https://www.yiiframework.com/security/) to report security issues.
 
 **Avoid duplicated issues**
 
diff --git a/framework/BaseYii.php b/framework/BaseYii.php
index 4e0d2caa2b5..4a5302a0fa0 100644
--- a/framework/BaseYii.php
+++ b/framework/BaseYii.php
@@ -68,7 +68,7 @@ class BaseYii
      */
     public static $classMap = [];
     /**
-     * @var \yii\console\Application|\yii\web\Application the application instance
+     * @var \yii\console\Application|\yii\web\Application|\yii\base\Application the application instance
      */
     public static $app;
     /**
@@ -93,7 +93,7 @@ class BaseYii
      */
     public static function getVersion()
     {
-        return '2.0.42.1';
+        return '2.0.43';
     }
 
     /**
@@ -124,7 +124,7 @@ public static function getVersion()
      * @param string $alias the alias to be translated.
      * @param bool $throwException whether to throw an exception if the given alias is invalid.
      * If this is false and an invalid alias is given, false will be returned by this method.
-     * @return string|bool the path corresponding to the alias, false if the root alias is not previously registered.
+     * @return string|false the path corresponding to the alias, false if the root alias is not previously registered.
      * @throws InvalidArgumentException if the alias is invalid while $throwException is true.
      * @see setAlias()
      */
@@ -162,7 +162,7 @@ public static function getAlias($alias, $throwException = true)
      * A root alias is an alias that has been registered via [[setAlias()]] previously.
      * If a given alias matches multiple root aliases, the longest one will be returned.
      * @param string $alias the alias
-     * @return string|bool the root alias, or false if no root alias is found
+     * @return string|false the root alias, or false if no root alias is found
      */
     public static function getRootAlias($alias)
     {
diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 3f475b789b5..eaf515e26df 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -1,6 +1,34 @@
 Yii Framework 2 Change Log
 ==========================
 
+2.0.43 August 09, 2021
+----------------------
+
+- Bug #14663: Do not convert int to string if database type of column is numeric (egorrishe)
+- Bug #18274: Fix `yii\log\Logger` to calculate profile timings no matter the value of the flush interval (bizley)
+- Bug #18648: Fix `yii\web\Request` to properly handle HTTP Basic Auth headers (olegbaturin)
+- Bug #18650: Refactor `framework/assets/yii.activeForm.js` arrow function into traditional function for IE11 compatibility (marcovtwout)
+- Bug #18678: Fix `yii\caching\DbCache` to use configured cache table name instead of the default one in case of MSSQL varbinary column type detection (aidanbek)
+- Bug #18749: Fix `yii\web\ErrorHandler::encodeHtml()` to support strings with invalid UTF symbols (vjik)
+- Bug #18756: Fix `\yii\validators\ExistValidator::queryValueExists` to validate against an array of unique values (DrDeath72)
+- Bug #18807: Fix replacing source whitespaces and optimize code of `yii\helpers\BaseStringHelper::mb_ucwords()` (WinterSilence)
+- Enh #18274: Add `profilingAware` option to `yii\log\Logger` to prevent breaking the profiling block messages pair when flushing them (bizley)
+- Enh #18628: Add strings "software", and "hardware" to `$specials` array in `yii\helpers\BaseInflector` (kjusupov)
+- Enh #18653: Add method `yii\helpers\BaseHtml::getInputIdByName()` (WinterSilence)
+- Enh #18656: Add ability for `yii serve`'s `--router` param to take an alias (markhuot)
+- Enh #18669: Change visibility of `yii\web\User::checkRedirectAcceptable()` to `public` (rhertogh)
+- Enh #18674: Add more user-friendly exception messages for `yii\i18n\Formatter` (bizley)
+- Enh #18676: Add method `yii\helpers\BaseFileHelper::changeOwnership()` and `newFileMode`/`newFileOwnership` properties to `yii\console\controllers\BaseMigrateController` (rhertogh)
+- Enh #18695: Add `yii\web\Cookie::SAME_SITE_NONE` constant (rhertogh)
+- Enh #18707: Change the base error handler to not expose `$_SERVER` details unless `YII_DEBUG` is enabled (coolgoose)
+- Enh #18712: Add `scheme` option for `$options` argument for `yii\i18n\Formatter::asUrl()` (bizley)
+- Enh #18724: Allow jQuery 3.6 to be installed (marcovtwout)
+- Enh #18726: Add `yii\helpers\Json::$prettyPrint` (rhertogh)
+- Enh #18734: Add `yii\validators\EmailValidator::$enableLocalIDN` (brandonkelly)
+- Enh #18789: Add JSONP support in `yii\web\JsonParser::parse()` (WinterSilence)
+- Enh #18817: Use `paragonie/random_compat` for random bytes and int generation (samdark)
+
+
 2.0.42.1 May 06, 2021
 ---------------------
 
diff --git a/framework/UPGRADE.md b/framework/UPGRADE.md
index 5a3588064b8..7ec63dcd92e 100644
--- a/framework/UPGRADE.md
+++ b/framework/UPGRADE.md
@@ -51,6 +51,21 @@ if you want to upgrade from version A to version C and there is
 version B between A and C, you need to follow the instructions
 for both A and B.
 
+Upgrade from Yii 2.0.42
+-----------------------
+
+* `yii\base\ErrorHandler` does not expose the `$_SERVER` information implicitly anymore.
+* The methods `phpTypecast()` and `dbTypecast()` of `yii\db\ColumnSchema` will no longer convert `$value` from `int` to 
+  `string`, if database column type is `INTEGER UNSIGNED` or `BIGINT UNSIGNED`.
+  * I.e. it affects update and insert queries. For example:
+  ```php
+  \Yii::$app->db->createCommand()->insert('{{some_table}}', ['int_unsigned_col' => 22])->execute();
+  ```
+  will execute next SQL:
+  ```sql
+  INSERT INTO `some_table` (`int_unsigned_col`) VALUES (22)
+  ```
+
 Upgrade from Yii 2.0.41
 -----------------------
 
diff --git a/framework/assets/yii.activeForm.js b/framework/assets/yii.activeForm.js
index c61df82b27b..ab44e0cbd8b 100644
--- a/framework/assets/yii.activeForm.js
+++ b/framework/assets/yii.activeForm.js
@@ -329,7 +329,9 @@
                 this.$form = $form;
                 var $input = findInput($form, this);
 
-                var disabled = $input.toArray().reduce((result, next) => result && $(next).is(':disabled'), true);
+                var disabled = $input.toArray().reduce(function(result, next) {
+                    return result && $(next).is(':disabled');
+                }, true);
                 if (disabled) {
                     return true;
                 }
diff --git a/framework/base/Controller.php b/framework/base/Controller.php
index f2d655bac19..0c79060ceff 100644
--- a/framework/base/Controller.php
+++ b/framework/base/Controller.php
@@ -514,6 +514,7 @@ public function setViewPath($path)
     public function findLayoutFile($view)
     {
         $module = $this->module;
+        $layout = null;
         if (is_string($this->layout)) {
             $layout = $this->layout;
         } elseif ($this->layout === null) {
@@ -525,7 +526,7 @@ public function findLayoutFile($view)
             }
         }
 
-        if (!isset($layout)) {
+        if ($layout === null) {
             return false;
         }
 
diff --git a/framework/base/ErrorHandler.php b/framework/base/ErrorHandler.php
index 8d98dafe789..4b36d481ec3 100644
--- a/framework/base/ErrorHandler.php
+++ b/framework/base/ErrorHandler.php
@@ -169,10 +169,10 @@ protected function handleFallbackExceptionMessage($exception, $previousException
             } else {
                 echo '<pre>' . htmlspecialchars($msg, ENT_QUOTES, Yii::$app->charset) . '</pre>';
             }
+            $msg .= "\n\$_SERVER = " . VarDumper::export($_SERVER);
         } else {
             echo 'An internal server error occurred.';
         }
-        $msg .= "\n\$_SERVER = " . VarDumper::export($_SERVER);
         error_log($msg);
         if (defined('HHVM_VERSION')) {
             flush();
diff --git a/framework/base/Event.php b/framework/base/Event.php
index 29bc0a8dacf..3cb85dce018 100644
--- a/framework/base/Event.php
+++ b/framework/base/Event.php
@@ -73,7 +73,7 @@ class Event extends BaseObject
      * `afterInsert` event:
      *
      * ```php
-     * Event::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
+     * Event::on(ActiveRecord::class, ActiveRecord::EVENT_AFTER_INSERT, function ($event) {
      *     Yii::trace(get_class($event->sender) . ' is inserted.');
      * });
      * ```
diff --git a/framework/base/Module.php b/framework/base/Module.php
index fa84e553c74..2562f0ca1fa 100644
--- a/framework/base/Module.php
+++ b/framework/base/Module.php
@@ -238,7 +238,7 @@ public function setBasePath($path)
     {
         $path = Yii::getAlias($path);
         $p = strncmp($path, 'phar://', 7) === 0 ? $path : realpath($path);
-        if ($p !== false && is_dir($p)) {
+        if (is_string($p) && is_dir($p)) {
             $this->_basePath = $p;
         } else {
             throw new InvalidArgumentException("The directory does not exist: $path");
diff --git a/framework/base/Security.php b/framework/base/Security.php
index e3a2373ab8a..49972d17bde 100644
--- a/framework/base/Security.php
+++ b/framework/base/Security.php
@@ -116,14 +116,6 @@ protected function shouldUseLibreSSL()
         return $this->_useLibreSSL;
     }
 
-    /**
-     * @return bool if operating system is Windows
-     */
-    private function isWindows()
-    {
-        return DIRECTORY_SEPARATOR !== '/';
-    }
-
     /**
      * Encrypts data using a password.
      * Derives keys for encryption and authentication from the password using PBKDF2 and a random salt,
@@ -471,8 +463,6 @@ public function validateData($data, $key, $rawHash = false)
         return false;
     }
 
-    private $_randomFile;
-
     /**
      * Generates specified number of random bytes.
      * Note that output may not be ASCII.
@@ -493,84 +483,7 @@ public function generateRandomKey($length = 32)
             throw new InvalidArgumentException('First parameter ($length) must be greater than 0');
         }
 
-        // always use random_bytes() if it is available
-        if (function_exists('random_bytes')) {
-            return random_bytes($length);
-        }
-
-        // The recent LibreSSL RNGs are faster and likely better than /dev/urandom.
-        // Since 5.4.0, openssl_random_pseudo_bytes() reads from CryptGenRandom on Windows instead
-        // of using OpenSSL library. LibreSSL is OK everywhere but don't use OpenSSL on non-Windows.
-        if (function_exists('openssl_random_pseudo_bytes')
-            && ($this->shouldUseLibreSSL() || $this->isWindows())
-        ) {
-            $key = openssl_random_pseudo_bytes($length, $cryptoStrong);
-            if ($cryptoStrong === false) {
-                throw new Exception(
-                    'openssl_random_pseudo_bytes() set $crypto_strong false. Your PHP setup is insecure.'
-                );
-            }
-            if ($key !== false && StringHelper::byteLength($key) === $length) {
-                return $key;
-            }
-        }
-
-        // mcrypt_create_iv() does not use libmcrypt. Since PHP 5.3.7 it directly reads
-        // CryptGenRandom on Windows. Elsewhere it directly reads /dev/urandom.
-        if (function_exists('mcrypt_create_iv')) {
-            $key = mcrypt_create_iv($length, MCRYPT_DEV_URANDOM);
-            if (StringHelper::byteLength($key) === $length) {
-                return $key;
-            }
-        }
-
-        // If not on Windows, try to open a random device.
-        if ($this->_randomFile === null && !$this->isWindows()) {
-            // urandom is a symlink to random on FreeBSD.
-            $device = PHP_OS === 'FreeBSD' ? '/dev/random' : '/dev/urandom';
-            // Check random device for special character device protection mode. Use lstat()
-            // instead of stat() in case an attacker arranges a symlink to a fake device.
-            $lstat = @lstat($device);
-            if ($lstat !== false && ($lstat['mode'] & 0170000) === 020000) {
-                $this->_randomFile = fopen($device, 'rb') ?: null;
-
-                if (is_resource($this->_randomFile)) {
-                    // Reduce PHP stream buffer from default 8192 bytes to optimize data
-                    // transfer from the random device for smaller values of $length.
-                    // This also helps to keep future randoms out of user memory space.
-                    $bufferSize = 8;
-
-                    if (function_exists('stream_set_read_buffer')) {
-                        stream_set_read_buffer($this->_randomFile, $bufferSize);
-                    }
-                    // stream_set_read_buffer() isn't implemented on HHVM
-                    if (function_exists('stream_set_chunk_size')) {
-                        stream_set_chunk_size($this->_randomFile, $bufferSize);
-                    }
-                }
-            }
-        }
-
-        if (is_resource($this->_randomFile)) {
-            $buffer = '';
-            $stillNeed = $length;
-            while ($stillNeed > 0) {
-                $someBytes = fread($this->_randomFile, $stillNeed);
-                if ($someBytes === false) {
-                    break;
-                }
-                $buffer .= $someBytes;
-                $stillNeed -= StringHelper::byteLength($someBytes);
-                if ($stillNeed === 0) {
-                    // Leaving file pointer open in order to make next generation faster by reusing it.
-                    return $buffer;
-                }
-            }
-            fclose($this->_randomFile);
-            $this->_randomFile = null;
-        }
-
-        throw new Exception('Unable to generate a random key');
+        return random_bytes($length);
     }
 
     /**
diff --git a/framework/behaviors/AttributeBehavior.php b/framework/behaviors/AttributeBehavior.php
index c50f180f6cc..0b4ba8b3a62 100644
--- a/framework/behaviors/AttributeBehavior.php
+++ b/framework/behaviors/AttributeBehavior.php
@@ -28,7 +28,7 @@
  * {
  *     return [
  *         [
- *             'class' => AttributeBehavior::className(),
+ *             'class' => AttributeBehavior::class,
  *             'attributes' => [
  *                 ActiveRecord::EVENT_BEFORE_INSERT => 'attribute1',
  *                 ActiveRecord::EVENT_BEFORE_UPDATE => 'attribute2',
diff --git a/framework/behaviors/AttributeTypecastBehavior.php b/framework/behaviors/AttributeTypecastBehavior.php
index c9c02cfe25d..33520bde3bc 100644
--- a/framework/behaviors/AttributeTypecastBehavior.php
+++ b/framework/behaviors/AttributeTypecastBehavior.php
@@ -37,7 +37,7 @@
  *     {
  *         return [
  *             'typecast' => [
- *                 'class' => AttributeTypecastBehavior::className(),
+ *                 'class' => AttributeTypecastBehavior::class,
  *                 'attributeTypes' => [
  *                     'amount' => AttributeTypecastBehavior::TYPE_INTEGER,
  *                     'price' => AttributeTypecastBehavior::TYPE_FLOAT,
@@ -77,7 +77,7 @@
  *     {
  *         return [
  *             'typecast' => [
- *                 'class' => AttributeTypecastBehavior::className(),
+ *                 'class' => AttributeTypecastBehavior::class,
  *                 // 'attributeTypes' will be composed automatically according to `rules()`
  *             ],
  *         ];
@@ -132,7 +132,7 @@ class AttributeTypecastBehavior extends Behavior
      *     'price' => 'float',
      *     'is_active' => 'boolean',
      *     'date' => function ($value) {
-     *         return ($value instanceof \DateTime) ? $value->getTimestamp(): (int)$value;
+     *         return ($value instanceof \DateTime) ? $value->getTimestamp(): (int) $value;
      *     },
      * ]
      * ```
@@ -346,7 +346,7 @@ public function beforeSave($event)
     {
         $this->typecastAttributes();
     }
-    
+
     /**
      * Handles owner 'afterInsert' and 'afterUpdate' events, ensuring attribute typecasting.
      * @param \yii\base\Event $event event instance.
diff --git a/framework/behaviors/AttributesBehavior.php b/framework/behaviors/AttributesBehavior.php
index 1ac025f16e4..e1b0f874ea5 100644
--- a/framework/behaviors/AttributesBehavior.php
+++ b/framework/behaviors/AttributesBehavior.php
@@ -28,7 +28,7 @@
  * {
  *     return [
  *         [
- *             'class' => AttributesBehavior::className(),
+ *             'class' => AttributesBehavior::class,
  *             'attributes' => [
  *                 'attribute1' => [
  *                     ActiveRecord::EVENT_BEFORE_INSERT => new Expression('NOW()'),
diff --git a/framework/behaviors/BlameableBehavior.php b/framework/behaviors/BlameableBehavior.php
index 38d1a8b1441..b4c7ab07882 100755
--- a/framework/behaviors/BlameableBehavior.php
+++ b/framework/behaviors/BlameableBehavior.php
@@ -21,7 +21,7 @@
  * public function behaviors()
  * {
  *     return [
- *         BlameableBehavior::className(),
+ *         BlameableBehavior::class,
  *     ];
  * }
  * ```
@@ -41,7 +41,7 @@
  * {
  *     return [
  *         [
- *             'class' => BlameableBehavior::className(),
+ *             'class' => BlameableBehavior::class,
  *             'createdByAttribute' => 'author_id',
  *             'updatedByAttribute' => 'updater_id',
  *         ],
diff --git a/framework/behaviors/CacheableWidgetBehavior.php b/framework/behaviors/CacheableWidgetBehavior.php
index 60db7ec023c..c6d4cd32c5c 100644
--- a/framework/behaviors/CacheableWidgetBehavior.php
+++ b/framework/behaviors/CacheableWidgetBehavior.php
@@ -30,7 +30,7 @@
  * {
  *     return [
  *         [
- *             'class' => CacheableWidgetBehavior::className(),
+ *             'class' => CacheableWidgetBehavior::class,
  *             'cacheDuration' => 0,
  *             'cacheDependency' => [
  *                 'class' => 'yii\caching\DbDependency',
diff --git a/framework/behaviors/OptimisticLockBehavior.php b/framework/behaviors/OptimisticLockBehavior.php
index fb01a1a488f..b3fd6a405b3 100644
--- a/framework/behaviors/OptimisticLockBehavior.php
+++ b/framework/behaviors/OptimisticLockBehavior.php
@@ -33,7 +33,7 @@
  * public function behaviors()
  * {
  *     return [
- *         OptimisticLockBehavior::className(),
+ *         OptimisticLockBehavior::class,
  *     ];
  * }
  * ```
diff --git a/framework/behaviors/SluggableBehavior.php b/framework/behaviors/SluggableBehavior.php
index 13ebab3b5cf..b62ade8ea2c 100644
--- a/framework/behaviors/SluggableBehavior.php
+++ b/framework/behaviors/SluggableBehavior.php
@@ -29,7 +29,7 @@
  * {
  *     return [
  *         [
- *             'class' => SluggableBehavior::className(),
+ *             'class' => SluggableBehavior::class,
  *             'attribute' => 'title',
  *             // 'slugAttribute' => 'slug',
  *         ],
@@ -50,7 +50,7 @@
  * {
  *     return [
  *         [
- *             'class' => SluggableBehavior::className(),
+ *             'class' => SluggableBehavior::class,
  *             'slugAttribute' => 'alias',
  *         ],
  *     ];
diff --git a/framework/behaviors/TimestampBehavior.php b/framework/behaviors/TimestampBehavior.php
index 12a6ff6f9f5..4b4f54c2af6 100644
--- a/framework/behaviors/TimestampBehavior.php
+++ b/framework/behaviors/TimestampBehavior.php
@@ -21,7 +21,7 @@
  * public function behaviors()
  * {
  *     return [
- *         TimestampBehavior::className(),
+ *         TimestampBehavior::class,
  *     ];
  * }
  * ```
@@ -45,7 +45,7 @@
  * {
  *     return [
  *         [
- *             'class' => TimestampBehavior::className(),
+ *             'class' => TimestampBehavior::class,
  *             'createdAtAttribute' => 'create_time',
  *             'updatedAtAttribute' => 'update_time',
  *             'value' => new Expression('NOW()'),
diff --git a/framework/caching/DbCache.php b/framework/caching/DbCache.php
index 191ba5c005f..3cd211ec013 100644
--- a/framework/caching/DbCache.php
+++ b/framework/caching/DbCache.php
@@ -276,7 +276,8 @@ protected function deleteValue($key)
      */
     public function gc($force = false)
     {
-        if ($force || mt_rand(0, 1000000) < $this->gcProbability) {
+
+        if ($force || random_int(0, 1000000) < $this->gcProbability) {
             $this->db->createCommand()
                 ->delete($this->cacheTable, '[[expire]] > 0 AND [[expire]] < ' . time())
                 ->execute();
@@ -305,7 +306,7 @@ protected function isVarbinaryDataField()
     {
         if ($this->isVarbinaryDataField === null) {
             $this->isVarbinaryDataField = in_array($this->db->getDriverName(), ['sqlsrv', 'dblib']) &&
-                $this->db->getTableSchema('cache')->columns['data']->dbType === 'varbinary';
+                $this->db->getTableSchema($this->cacheTable)->columns['data']->dbType === 'varbinary';
         }
         return $this->isVarbinaryDataField;
     }
diff --git a/framework/caching/FileCache.php b/framework/caching/FileCache.php
index b221998db88..378a84fb736 100644
--- a/framework/caching/FileCache.php
+++ b/framework/caching/FileCache.php
@@ -245,7 +245,7 @@ protected function flushValues()
      */
     public function gc($force = false, $expiredOnly = true)
     {
-        if ($force || mt_rand(0, 1000000) < $this->gcProbability) {
+        if ($force || random_int(0, 1000000) < $this->gcProbability) {
             $this->gcRecursive($this->cachePath, $expiredOnly);
         }
     }
diff --git a/framework/captcha/CaptchaAction.php b/framework/captcha/CaptchaAction.php
index 40e1aa03a0a..e61a9ed34ae 100644
--- a/framework/captcha/CaptchaAction.php
+++ b/framework/captcha/CaptchaAction.php
@@ -214,16 +214,17 @@ protected function generateVerifyCode()
         if ($this->maxLength > 20) {
             $this->maxLength = 20;
         }
-        $length = mt_rand($this->minLength, $this->maxLength);
+
+        $length = random_int($this->minLength, $this->maxLength);
 
         $letters = 'bcdfghjklmnpqrstvwxyz';
         $vowels = 'aeiou';
         $code = '';
         for ($i = 0; $i < $length; ++$i) {
-            if ($i % 2 && mt_rand(0, 10) > 2 || !($i % 2) && mt_rand(0, 10) > 9) {
-                $code .= $vowels[mt_rand(0, 4)];
+            if ($i % 2 && random_int(0, 10) > 2 || !($i % 2) && random_int(0, 10) > 9) {
+                $code .= $vowels[random_int(0, 4)];
             } else {
-                $code .= $letters[mt_rand(0, 20)];
+                $code .= $letters[random_int(0, 20)];
             }
         }
 
@@ -298,8 +299,8 @@ protected function renderImageByGD($code)
         $x = 10;
         $y = round($this->height * 27 / 40);
         for ($i = 0; $i < $length; ++$i) {
-            $fontSize = (int) (mt_rand(26, 32) * $scale * 0.8);
-            $angle = mt_rand(-10, 10);
+            $fontSize = (int) (random_int(26, 32) * $scale * 0.8);
+            $angle = random_int(-10, 10);
             $letter = $code[$i];
             $box = imagettftext($image, $fontSize, $angle, $x, $y, $foreColor, $this->fontFile, $letter);
             $x = $box[2] + $this->offset;
@@ -341,9 +342,9 @@ protected function renderImageByImagick($code)
         for ($i = 0; $i < $length; ++$i) {
             $draw = new \ImagickDraw();
             $draw->setFont($this->fontFile);
-            $draw->setFontSize((int) (mt_rand(26, 32) * $scale * 0.8));
+            $draw->setFontSize((int) (random_int(26, 32) * $scale * 0.8));
             $draw->setFillColor($foreColor);
-            $image->annotateImage($draw, $x, $y, mt_rand(-10, 10), $code[$i]);
+            $image->annotateImage($draw, $x, $y, random_int(-10, 10), $code[$i]);
             $fontMetrics = $image->queryFontMetrics($draw, $code[$i]);
             $x += (int) $fontMetrics['textWidth'] + $this->offset;
         }
diff --git a/framework/composer.json b/framework/composer.json
index 40bfe5dc56c..b211cb5eea3 100644
--- a/framework/composer.json
+++ b/framework/composer.json
@@ -5,20 +5,20 @@
         "yii2",
         "framework"
     ],
-    "homepage": "http://www.yiiframework.com/",
+    "homepage": "https://www.yiiframework.com/",
     "type": "library",
     "license": "BSD-3-Clause",
     "authors": [
         {
             "name": "Qiang Xue",
             "email": "qiang.xue@gmail.com",
-            "homepage": "http://www.yiiframework.com/",
+            "homepage": "https://www.yiiframework.com/",
             "role": "Founder and project lead"
         },
         {
             "name": "Alexander Makarov",
             "email": "sam@rmcreative.ru",
-            "homepage": "http://rmcreative.ru/",
+            "homepage": "https://rmcreative.ru/",
             "role": "Core framework development"
         },
         {
@@ -29,7 +29,7 @@
         {
             "name": "Carsten Brandt",
             "email": "mail@cebe.cc",
-            "homepage": "http://cebe.cc/",
+            "homepage": "https://cebe.cc/",
             "role": "Core framework development"
         },
         {
@@ -59,7 +59,7 @@
         "issues": "https://github.com/yiisoft/yii2/issues?state=open",
         "forum": "http://www.yiiframework.com/forum/",
         "wiki": "http://www.yiiframework.com/wiki/",
-        "irc": "irc://irc.freenode.net/yii",
+        "irc": "irc://irc.libera.chat:6697/yii",
         "source": "https://github.com/yiisoft/yii2"
     },
     "require": {
@@ -70,10 +70,11 @@
         "yiisoft/yii2-composer": "~2.0.4",
         "ezyang/htmlpurifier": "~4.6",
         "cebe/markdown": "~1.0.0 | ~1.1.0 | ~1.2.0",
-        "bower-asset/jquery": "3.5.*@stable | 3.4.*@stable | 3.3.*@stable | 3.2.*@stable | 3.1.*@stable | 2.2.*@stable | 2.1.*@stable | 1.11.*@stable | 1.12.*@stable",
+        "bower-asset/jquery": "3.6.*@stable | 3.5.*@stable | 3.4.*@stable | 3.3.*@stable | 3.2.*@stable | 3.1.*@stable | 2.2.*@stable | 2.1.*@stable | 1.11.*@stable | 1.12.*@stable",
         "bower-asset/inputmask": "~3.2.2 | ~3.3.5",
         "bower-asset/punycode": "1.3.*",
-        "bower-asset/yii2-pjax": "~2.0.1"
+        "bower-asset/yii2-pjax": "~2.0.1",
+        "paragonie/random_compat": ">=1"
     },
     "autoload": {
         "psr-4": {"yii\\": ""}
diff --git a/framework/console/ErrorHandler.php b/framework/console/ErrorHandler.php
index 16127a1b2d5..526de75dfac 100644
--- a/framework/console/ErrorHandler.php
+++ b/framework/console/ErrorHandler.php
@@ -39,7 +39,7 @@ protected function renderException($exception)
             } elseif (count($alternatives) > 1) {
                 $message .= "\n\nDid you mean one of these?\n    - " . implode("\n    - ", $alternatives);
             }
-        } elseif ($exception instanceof Exception && ($exception instanceof UserException || !YII_DEBUG)) {
+        } elseif ($exception instanceof UserException && ($exception instanceof Exception || !YII_DEBUG)) {
             $message = $this->formatMessage($exception->getName() . ': ') . $exception->getMessage();
         } elseif (YII_DEBUG) {
             if ($exception instanceof Exception) {
diff --git a/framework/console/controllers/BaseMigrateController.php b/framework/console/controllers/BaseMigrateController.php
index dc94497cc70..0d3f0de7d39 100644
--- a/framework/console/controllers/BaseMigrateController.php
+++ b/framework/console/controllers/BaseMigrateController.php
@@ -84,6 +84,20 @@ abstract class BaseMigrateController extends Controller
      * or a file path.
      */
     public $templateFile;
+    /**
+     * @var int the permission to be set for newly generated migration files.
+     * This value will be used by PHP chmod() function. No umask will be applied.
+     * If not set, the permission will be determined by the current environment.
+     * @since 2.0.43
+     */
+    public $newFileMode;
+    /**
+     * @var string|int the user and/or group ownership to be set for newly generated migration files.
+     * If not set, the ownership will be determined by the current environment.
+     * @since 2.0.43
+     * @see FileHelper::changeOwnership()
+     */
+    public $newFileOwnership;
     /**
      * @var bool indicates whether the console output should be compacted.
      * If this is set to true, the individual commands ran within the migration will not be output to the console.
@@ -573,9 +587,7 @@ public function actionHistory($limit = 10)
      */
     public function actionNew($limit = 10)
     {
-        if ($limit === 'all') {
-            $limit = null;
-        } else {
+        if ($limit !== 'all') {
             $limit = (int) $limit;
             if ($limit < 1) {
                 throw new Exception('The limit must be greater than 0.');
@@ -588,7 +600,7 @@ public function actionNew($limit = 10)
             $this->stdout("No new migrations found. Your system is up-to-date.\n", Console::FG_GREEN);
         } else {
             $n = count($migrations);
-            if ($limit && $n > $limit) {
+            if ($limit !== 'all' && $n > $limit) {
                 $migrations = array_slice($migrations, 0, $limit);
                 $this->stdout("Showing $limit out of $n new " . ($n === 1 ? 'migration' : 'migrations') . ":\n", Console::FG_YELLOW);
             } else {
@@ -663,6 +675,8 @@ public function actionCreate($name)
                 return ExitCode::IOERR;
             }
 
+            FileHelper::changeOwnership($file, $this->newFileOwnership, $this->newFileMode);
+
             $this->stdout("New migration created successfully.\n", Console::FG_GREEN);
         }
 
diff --git a/framework/console/controllers/CacheController.php b/framework/console/controllers/CacheController.php
index b53fe73d194..8675c53410c 100644
--- a/framework/console/controllers/CacheController.php
+++ b/framework/console/controllers/CacheController.php
@@ -84,11 +84,11 @@ public function actionFlush()
         $foundCaches = array_keys($caches);
         $notFoundCaches = array_diff($cachesInput, array_keys($caches));
 
-        if ($notFoundCaches) {
+        if ($notFoundCaches !== []) {
             $this->notifyNotFoundCaches($notFoundCaches);
         }
 
-        if (!$foundCaches) {
+        if ($foundCaches === []) {
             $this->notifyNoCachesFound();
             return ExitCode::OK;
         }
diff --git a/framework/console/controllers/FixtureController.php b/framework/console/controllers/FixtureController.php
index cce951f8004..667c2a56bcf 100644
--- a/framework/console/controllers/FixtureController.php
+++ b/framework/console/controllers/FixtureController.php
@@ -122,7 +122,7 @@ public function actionLoad(array $fixturesInput = [])
             $foundFixtures = $this->findFixtures($fixtures);
             $notFoundFixtures = array_diff($fixtures, $foundFixtures);
 
-            if ($notFoundFixtures) {
+            if ($notFoundFixtures !== []) {
                 $this->notifyNotFound($notFoundFixtures);
             }
         } else {
@@ -138,7 +138,7 @@ public function actionLoad(array $fixturesInput = [])
             );
         }
 
-        if (!$fixturesToLoad) {
+        if ($fixturesToLoad === []) {
             $this->notifyNothingToLoad($foundFixtures, $except);
             return ExitCode::OK;
         }
@@ -198,23 +198,23 @@ public function actionUnload(array $fixturesInput = [])
             $foundFixtures = $this->findFixtures($fixtures);
             $notFoundFixtures = array_diff($fixtures, $foundFixtures);
 
-            if ($notFoundFixtures) {
+            if ($notFoundFixtures !== []) {
                 $this->notifyNotFound($notFoundFixtures);
             }
         } else {
             $foundFixtures = $this->findFixtures();
         }
 
-        $fixturesToUnload = array_diff($foundFixtures, $except);
-
-        if (!$foundFixtures) {
+        if ($foundFixtures === []) {
             throw new Exception(
                 'No files were found for: "' . implode(', ', $fixturesInput) . "\".\n" .
                 "Check that files exist under fixtures path: \n\"" . $this->getFixturePath() . '".'
             );
         }
 
-        if (!$fixturesToUnload) {
+        $fixturesToUnload = array_diff($foundFixtures, $except);
+
+        if ($fixturesToUnload === []) {
             $this->notifyNothingToUnload($foundFixtures, $except);
             return ExitCode::OK;
         }
@@ -225,7 +225,7 @@ public function actionUnload(array $fixturesInput = [])
 
         $fixtures = $this->getFixturesConfig(array_merge($this->globalFixtures, $fixturesToUnload));
 
-        if (!$fixtures) {
+        if ($fixtures === []) {
             throw new Exception('No fixtures were found in namespace: ' . $this->namespace . '".');
         }
 
diff --git a/framework/console/controllers/HelpController.php b/framework/console/controllers/HelpController.php
index 5185f4e011b..712fa76028a 100644
--- a/framework/console/controllers/HelpController.php
+++ b/framework/console/controllers/HelpController.php
@@ -485,7 +485,7 @@ protected function formatOptionHelp($name, $required, $type, $defaultValue, $com
             }
             if (is_bool($defaultValue)) {
                 // show as integer to avoid confusion
-                $defaultValue = (int)$defaultValue;
+                $defaultValue = (int) $defaultValue;
             }
             if (is_string($defaultValue)) {
                 $defaultValue = "'" . $defaultValue . "'";
diff --git a/framework/console/controllers/MigrateController.php b/framework/console/controllers/MigrateController.php
index aa2625ea06c..3f0efeaac12 100644
--- a/framework/console/controllers/MigrateController.php
+++ b/framework/console/controllers/MigrateController.php
@@ -301,11 +301,9 @@ protected function truncateDatabase()
 
         // First drop all foreign keys,
         foreach ($schemas as $schema) {
-            if ($schema->foreignKeys) {
-                foreach ($schema->foreignKeys as $name => $foreignKey) {
-                    $db->createCommand()->dropForeignKey($name, $schema->name)->execute();
-                    $this->stdout("Foreign key $name dropped.\n");
-                }
+            foreach ($schema->foreignKeys as $name => $foreignKey) {
+                $db->createCommand()->dropForeignKey($name, $schema->name)->execute();
+                $this->stdout("Foreign key $name dropped.\n");
             }
         }
 
@@ -580,10 +578,10 @@ protected function parseFields()
      */
     protected function splitFieldIntoChunks($field)
     {
-        $hasDoubleQuotes = false;
+        $originalDefaultValue = null;
+        $defaultValue = null;
         preg_match_all('/defaultValue\(["\'].*?:?.*?["\']\)/', $field, $matches, PREG_SET_ORDER, 0);
         if (isset($matches[0][0])) {
-            $hasDoubleQuotes = true;
             $originalDefaultValue = $matches[0][0];
             $defaultValue = str_replace(':', '{{colon}}', $originalDefaultValue);
             $field = str_replace($originalDefaultValue, $defaultValue, $field);
@@ -591,7 +589,7 @@ protected function splitFieldIntoChunks($field)
 
         $chunks = preg_split('/\s?:\s?/', $field);
 
-        if (is_array($chunks) && $hasDoubleQuotes) {
+        if (is_array($chunks) && $defaultValue !== null && $originalDefaultValue !== null) {
             foreach ($chunks as $key => $chunk) {
                 $chunks[$key] = str_replace($defaultValue, $originalDefaultValue, $chunk);
             }
diff --git a/framework/console/controllers/ServeController.php b/framework/console/controllers/ServeController.php
index 5eb98165974..67afee668b3 100644
--- a/framework/console/controllers/ServeController.php
+++ b/framework/console/controllers/ServeController.php
@@ -36,7 +36,7 @@ class ServeController extends Controller
      */
     public $docroot = '@app/web';
     /**
-     * @var string path to router script.
+     * @var string path or [path alias](guide:concept-aliases) to router script.
      * See https://secure.php.net/manual/en/features.commandline.webserver.php
      */
     public $router;
@@ -52,6 +52,7 @@ class ServeController extends Controller
     public function actionIndex($address = 'localhost')
     {
         $documentRoot = Yii::getAlias($this->docroot);
+        $router = $this->router !== null ? Yii::getAlias($this->router) : null;
 
         if (strpos($address, ':') === false) {
             $address = $address . ':' . $this->port;
@@ -67,19 +68,19 @@ public function actionIndex($address = 'localhost')
             return self::EXIT_CODE_ADDRESS_TAKEN_BY_ANOTHER_PROCESS;
         }
 
-        if ($this->router !== null && !file_exists($this->router)) {
-            $this->stdout("Routing file \"$this->router\" does not exist.\n", Console::FG_RED);
+        if ($this->router !== null && !file_exists($router)) {
+            $this->stdout("Routing file \"$router\" does not exist.\n", Console::FG_RED);
             return self::EXIT_CODE_NO_ROUTING_FILE;
         }
 
         $this->stdout("Server started on http://{$address}/\n");
         $this->stdout("Document root is \"{$documentRoot}\"\n");
         if ($this->router) {
-            $this->stdout("Routing file is \"$this->router\"\n");
+            $this->stdout("Routing file is \"$router\"\n");
         }
         $this->stdout("Quit the server with CTRL-C or COMMAND-C.\n");
 
-        passthru('"' . PHP_BINARY . '"' . " -S {$address} -t \"{$documentRoot}\" $this->router");
+        passthru('"' . PHP_BINARY . '"' . " -S {$address} -t \"{$documentRoot}\" $router");
     }
 
     /**
diff --git a/framework/data/DataFilter.php b/framework/data/DataFilter.php
index 6af8447caec..c07e2a86407 100644
--- a/framework/data/DataFilter.php
+++ b/framework/data/DataFilter.php
@@ -355,7 +355,7 @@ protected function detectSearchAttributeTypes()
     /**
      * Detect attribute type from given validator.
      *
-     * @param Validator validator from which to detect attribute type.
+     * @param Validator $validator validator from which to detect attribute type.
      * @return string|null detected attribute type.
      * @since 2.0.14
      */
diff --git a/framework/db/ActiveQuery.php b/framework/db/ActiveQuery.php
index 300f9dda7fe..434b59cd598 100644
--- a/framework/db/ActiveQuery.php
+++ b/framework/db/ActiveQuery.php
@@ -699,7 +699,7 @@ private function joinWithRelation($parent, $child, $joinType)
      * ```php
      * public function getActiveUsers()
      * {
-     *     return $this->hasMany(User::className(), ['id' => 'user_id'])
+     *     return $this->hasMany(User::class, ['id' => 'user_id'])
      *                 ->onCondition(['active' => true]);
      * }
      * ```
@@ -769,7 +769,7 @@ public function orOnCondition($condition, $params = [])
      * ```php
      * public function getItems()
      * {
-     *     return $this->hasMany(Item::className(), ['id' => 'item_id'])
+     *     return $this->hasMany(Item::class, ['id' => 'item_id'])
      *                 ->viaTable('order_item', ['order_id' => 'id']);
      * }
      * ```
diff --git a/framework/db/ActiveRelationTrait.php b/framework/db/ActiveRelationTrait.php
index 6f6e12c7f7e..461ea759cc2 100644
--- a/framework/db/ActiveRelationTrait.php
+++ b/framework/db/ActiveRelationTrait.php
@@ -87,11 +87,11 @@ public function __clone()
      * class Order extends ActiveRecord
      * {
      *    public function getOrderItems() {
-     *        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);
+     *        return $this->hasMany(OrderItem::class, ['order_id' => 'id']);
      *    }
      *
      *    public function getItems() {
-     *        return $this->hasMany(Item::className(), ['id' => 'item_id'])
+     *        return $this->hasMany(Item::class, ['id' => 'item_id'])
      *                    ->via('orderItems');
      *    }
      * }
@@ -126,7 +126,7 @@ public function via($relationName, callable $callable = null)
      * ```php
      * public function getOrders()
      * {
-     *     return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');
+     *     return $this->hasMany(Order::class, ['customer_id' => 'id'])->inverseOf('customer');
      * }
      * ```
      *
@@ -135,7 +135,7 @@ public function via($relationName, callable $callable = null)
      * ```php
      * public function getCustomer()
      * {
-     *     return $this->hasOne(Customer::className(), ['id' => 'customer_id'])->inverseOf('orders');
+     *     return $this->hasOne(Customer::class, ['id' => 'customer_id'])->inverseOf('orders');
      * }
      * ```
      *
diff --git a/framework/db/BaseActiveRecord.php b/framework/db/BaseActiveRecord.php
index 6555cf2f5db..d5675479c10 100644
--- a/framework/db/BaseActiveRecord.php
+++ b/framework/db/BaseActiveRecord.php
@@ -226,7 +226,7 @@ public static function deleteAll($condition = null)
      *    Or add [[\yii\behaviors\OptimisticLockBehavior|OptimisticLockBehavior]] to your model
      *    class in order to automate the process.
      * 3. In the Web form that collects the user input, add a hidden field that stores
-     *    the lock version of the recording being updated.
+     *    the lock version of the record being updated.
      * 4. In the controller action that does the data updating, try to catch the [[StaleObjectException]]
      *    and implement necessary business logic (e.g. merging the changes, prompting stated data)
      *    to resolve the conflict.
@@ -335,9 +335,9 @@ public function __isset($name)
     {
         try {
             return $this->__get($name) !== null;
-        } catch (\Throwable $t) {
+        } catch (\Exception $t) {
             return false;
-        } catch (\Exception $e) {
+        } catch (\Throwable $e) {
             return false;
         }
     }
@@ -376,7 +376,7 @@ public function __unset($name)
      * ```php
      * public function getCountry()
      * {
-     *     return $this->hasOne(Country::className(), ['id' => 'country_id']);
+     *     return $this->hasOne(Country::class, ['id' => 'country_id']);
      * }
      * ```
      *
@@ -411,7 +411,7 @@ public function hasOne($class, $link)
      * ```php
      * public function getOrders()
      * {
-     *     return $this->hasMany(Order::className(), ['customer_id' => 'id']);
+     *     return $this->hasMany(Order::class, ['customer_id' => 'id']);
      * }
      * ```
      *
@@ -1278,7 +1278,8 @@ public function getRelation($name, $throwException = true)
      *
      * The relationship is established by setting the foreign key value(s) in one model
      * to be the corresponding primary key value(s) in the other model.
-     * The model with the foreign key will be saved into database without performing validation.
+     * The model with the foreign key will be saved into database **without** performing validation
+     * and **without** events/behaviors.
      *
      * If the relationship involves a junction table, a new row will be inserted into the
      * junction table which contains the primary key values from both models.
@@ -1294,6 +1295,7 @@ public function getRelation($name, $throwException = true)
      */
     public function link($name, $model, $extraColumns = [])
     {
+        /* @var $relation ActiveQueryInterface|ActiveQuery */
         $relation = $this->getRelation($name);
 
         if ($relation->via !== null) {
@@ -1330,16 +1332,16 @@ public function link($name, $model, $extraColumns = [])
                 $record->insert(false);
             } else {
                 /* @var $viaTable string */
-                static::getDb()->createCommand()
-                    ->insert($viaTable, $columns)->execute();
+                static::getDb()->createCommand()->insert($viaTable, $columns)->execute();
             }
         } else {
             $p1 = $model->isPrimaryKey(array_keys($relation->link));
             $p2 = static::isPrimaryKey(array_values($relation->link));
             if ($p1 && $p2) {
-                if ($this->getIsNewRecord() && $model->getIsNewRecord()) {
-                    throw new InvalidCallException('Unable to link models: at most one model can be newly created.');
-                } elseif ($this->getIsNewRecord()) {
+                if ($this->getIsNewRecord()) {
+                    if ($model->getIsNewRecord()) {
+                        throw new InvalidCallException('Unable to link models: at most one model can be newly created.');
+                    }
                     $this->bindModels(array_flip($relation->link), $this, $model);
                 } else {
                     $this->bindModels($relation->link, $model, $this);
@@ -1492,6 +1494,7 @@ public function unlink($name, $model, $delete = false)
      */
     public function unlinkAll($name, $delete = false)
     {
+        /* @var $relation ActiveQueryInterface|ActiveQuery */
         $relation = $this->getRelation($name);
 
         if ($relation->via !== null) {
diff --git a/framework/db/ColumnSchema.php b/framework/db/ColumnSchema.php
index d392aba8c3d..5eb6b7b891b 100644
--- a/framework/db/ColumnSchema.php
+++ b/framework/db/ColumnSchema.php
@@ -154,6 +154,13 @@ protected function typecast($value)
                     // ensure type cast always has . as decimal separator in all locales
                     return StringHelper::floatToString($value);
                 }
+                if (is_numeric($value)
+                    && ColumnSchemaBuilder::CATEGORY_NUMERIC === ColumnSchemaBuilder::$typeCategoryMap[$this->type]
+                ) {
+                    // https://github.com/yiisoft/yii2/issues/14663
+                    return $value;
+                }
+
                 return (string) $value;
             case 'integer':
                 return (int) $value;
diff --git a/framework/db/ColumnSchemaBuilder.php b/framework/db/ColumnSchemaBuilder.php
index cb0e84942dd..b9616148da2 100644
--- a/framework/db/ColumnSchemaBuilder.php
+++ b/framework/db/ColumnSchemaBuilder.php
@@ -16,6 +16,8 @@
  *
  * See [[SchemaBuilderTrait]] for more detailed description and usage examples.
  *
+ * @property array $categoryMap Mapping of abstract column types (keys) to type categories (values).
+ *
  * @author Vasenin Matvey <vaseninm@gmail.com>
  * @since 2.0.6
  */
@@ -81,9 +83,9 @@ class ColumnSchemaBuilder extends BaseObject
 
     /**
      * @var array mapping of abstract column types (keys) to type categories (values).
-     * @since 2.0.8
+     * @since 2.0.43
      */
-    public $categoryMap = [
+    public static $typeCategoryMap = [
         Schema::TYPE_PK => self::CATEGORY_PK,
         Schema::TYPE_UPK => self::CATEGORY_PK,
         Schema::TYPE_BIGPK => self::CATEGORY_PK,
@@ -289,6 +291,24 @@ public function __toString()
         return $this->buildCompleteString($format);
     }
 
+    /**
+     * @return array mapping of abstract column types (keys) to type categories (values).
+     * @since 2.0.43
+     */
+    public function getCategoryMap()
+    {
+        return static::$typeCategoryMap;
+    }
+
+    /**
+     * @param array $categoryMap mapping of abstract column types (keys) to type categories (values).
+     * @since 2.0.43
+     */
+    public function setCategoryMap($categoryMap)
+    {
+        static::$typeCategoryMap = $categoryMap;
+    }
+
     /**
      * Builds the length/precision part of the column.
      * @return string
diff --git a/framework/db/Connection.php b/framework/db/Connection.php
index 391ef7f7f75..c31a8689f47 100644
--- a/framework/db/Connection.php
+++ b/framework/db/Connection.php
@@ -694,20 +694,24 @@ protected function createPdoInstance()
     {
         $pdoClass = $this->pdoClass;
         if ($pdoClass === null) {
-            $pdoClass = 'PDO';
+            $driver = null;
             if ($this->_driverName !== null) {
                 $driver = $this->_driverName;
             } elseif (($pos = strpos($this->dsn, ':')) !== false) {
                 $driver = strtolower(substr($this->dsn, 0, $pos));
             }
-            if (isset($driver)) {
-                if ($driver === 'mssql') {
+            switch ($driver) {
+                case 'mssql':
                     $pdoClass = 'yii\db\mssql\PDO';
-                } elseif ($driver === 'dblib') {
+                    break;
+                case 'dblib':
                     $pdoClass = 'yii\db\mssql\DBLibPDO';
-                } elseif ($driver === 'sqlsrv') {
+                    break;
+                case 'sqlsrv':
                     $pdoClass = 'yii\db\mssql\SqlsrvPDO';
-                }
+                    break;
+                default:
+                    $pdoClass = 'PDO';
             }
         }
 
diff --git a/framework/db/Query.php b/framework/db/Query.php
index f85881ffa2b..1892c8a272e 100644
--- a/framework/db/Query.php
+++ b/framework/db/Query.php
@@ -145,7 +145,7 @@ class Query extends Component implements QueryInterface, ExpressionInterface
 
     /**
      * Creates a DB command that can be used to execute this query.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return Command the created DB command instance.
      */
@@ -236,7 +236,7 @@ public function each($batchSize = 100, $db = null)
 
     /**
      * Executes the query and returns all results as an array.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return array the query results. If the query results in nothing, an empty array will be returned.
      */
@@ -273,7 +273,7 @@ public function populate($rows)
 
     /**
      * Executes the query and returns a single row of result.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return array|bool the first row (in terms of an array) of the query result. False is returned if the query
      * results in nothing.
@@ -306,7 +306,7 @@ public function scalar($db = null)
 
     /**
      * Executes the query and returns the first column of the result.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return array the first column of the query result. An empty array is returned if the query results in nothing.
      */
@@ -354,9 +354,9 @@ public function column($db = null)
      * Returns the number of records.
      * @param string $q the COUNT expression. Defaults to '*'.
      * Make sure you properly [quote](guide:db-dao#quoting-table-and-column-names) column names in the expression.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given (or null), the `db` application component will be used.
-     * @return int|string number of records. The result may be a string depending on the
+     * @return int|string|null number of records. The result may be a string depending on the
      * underlying database engine and to support integer values higher than a 32bit PHP integer can handle.
      */
     public function count($q = '*', $db = null)
@@ -406,7 +406,7 @@ public function average($q, $db = null)
      * Returns the minimum of the specified column values.
      * @param string $q the column name or expression.
      * Make sure you properly [quote](guide:db-dao#quoting-table-and-column-names) column names in the expression.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return mixed the minimum of the specified column values.
      */
@@ -419,7 +419,7 @@ public function min($q, $db = null)
      * Returns the maximum of the specified column values.
      * @param string $q the column name or expression.
      * Make sure you properly [quote](guide:db-dao#quoting-table-and-column-names) column names in the expression.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return mixed the maximum of the specified column values.
      */
@@ -430,7 +430,7 @@ public function max($q, $db = null)
 
     /**
      * Returns a value indicating whether the query result contains any row of data.
-     * @param Connection $db the database connection used to generate the SQL statement.
+     * @param Connection|null $db the database connection used to generate the SQL statement.
      * If this parameter is not given, the `db` application component will be used.
      * @return bool whether the query result contains any row of data.
      */
@@ -450,8 +450,9 @@ public function exists($db = null)
      * Queries a scalar value by setting [[select]] first.
      * Restores the value of select to make this query reusable.
      * @param string|ExpressionInterface $selectExpression
-     * @param Connection|null $db
-     * @return bool|string
+     * @param Connection|null $db the database connection used to execute the query.
+     * @return bool|string|null
+     * @throws \Throwable if can't create command
      */
     protected function queryScalar($selectExpression, $db)
     {
@@ -479,7 +480,7 @@ protected function queryScalar($selectExpression, $db)
             try {
                 $command = $this->createCommand($db);
             } catch (\Exception $e) {
-                // throw it later
+                // throw it later (for PHP < 7.0)
             } catch (\Throwable $e) {
                 // throw it later
             }
diff --git a/framework/db/QueryInterface.php b/framework/db/QueryInterface.php
index df57ad38385..4f266f490a9 100644
--- a/framework/db/QueryInterface.php
+++ b/framework/db/QueryInterface.php
@@ -42,15 +42,15 @@ public function one($db = null);
     /**
      * Returns the number of records.
      * @param string $q the COUNT expression. Defaults to '*'.
-     * @param Connection $db the database connection used to execute the query.
+     * @param Connection|null $db the database connection used to execute the query.
      * If this parameter is not given, the `db` application component will be used.
-     * @return int number of records.
+     * @return int|string|null number of records.
      */
     public function count($q = '*', $db = null);
 
     /**
      * Returns a value indicating whether the query result contains any row of data.
-     * @param Connection $db the database connection used to execute the query.
+     * @param Connection|null $db the database connection used to execute the query.
      * If this parameter is not given, the `db` application component will be used.
      * @return bool whether the query result contains any row of data.
      */
diff --git a/framework/db/SqlToken.php b/framework/db/SqlToken.php
index 0e947c17458..fa570689cc3 100644
--- a/framework/db/SqlToken.php
+++ b/framework/db/SqlToken.php
@@ -267,10 +267,8 @@ private function tokensMatch(SqlToken $patternToken, SqlToken $token, $offset =
 
                 if ($firstMatchIndex === null) {
                     $firstMatchIndex = $offset;
-                    $lastMatchIndex = $offset;
-                } else {
-                    $lastMatchIndex = $offset;
                 }
+                $lastMatchIndex = $offset;
                 $wildcard = false;
                 $offset++;
                 continue 2;
diff --git a/framework/db/conditions/InConditionBuilder.php b/framework/db/conditions/InConditionBuilder.php
index f685216c111..dd238b7a7ce 100644
--- a/framework/db/conditions/InConditionBuilder.php
+++ b/framework/db/conditions/InConditionBuilder.php
@@ -54,18 +54,16 @@ public function build(ExpressionInterface $expression, array &$params = [])
         if (is_array($column)) {
             if (count($column) > 1) {
                 return $this->buildCompositeInCondition($operator, $column, $values, $params);
-            } else {
-                $column = reset($column);
             }
+            $column = reset($column);
         }
 
         if ($column instanceof \Traversable) {
             if (iterator_count($column) > 1) {
                 return $this->buildCompositeInCondition($operator, $column, $values, $params);
-            } else {
-                $column->rewind();
-                $column = $column->current();
             }
+            $column->rewind();
+            $column = $column->current();
         }
 
         if (is_array($values)) {
@@ -74,6 +72,8 @@ public function build(ExpressionInterface $expression, array &$params = [])
             $rawValues = $this->getRawValuesFromTraversableObject($values);
         }
 
+        $nullCondition = null;
+        $nullConditionOperator = null;
         if (isset($rawValues) && in_array(null, $rawValues, true)) {
             $nullCondition = $this->getNullCondition($operator, $column);
             $nullConditionOperator = $operator === 'IN' ? 'OR' : 'AND';
@@ -81,7 +81,7 @@ public function build(ExpressionInterface $expression, array &$params = [])
 
         $sqlValues = $this->buildValues($expression, $values, $params);
         if (empty($sqlValues)) {
-            if (!isset($nullCondition)) {
+            if ($nullCondition === null) {
                 return $operator === 'IN' ? '0=1' : '';
             }
             return $nullCondition;
@@ -97,7 +97,9 @@ public function build(ExpressionInterface $expression, array &$params = [])
             $sql = $column . $operator . reset($sqlValues);
         }
 
-        return isset($nullCondition) ? sprintf('%s %s %s', $sql, $nullConditionOperator, $nullCondition) : $sql;
+        return $nullCondition !== null && $nullConditionOperator !== null
+            ? sprintf('%s %s %s', $sql, $nullConditionOperator, $nullCondition)
+            : $sql;
     }
 
     /**
diff --git a/framework/db/mssql/QueryBuilder.php b/framework/db/mssql/QueryBuilder.php
index 8e250a5af02..79c5d3d180f 100644
--- a/framework/db/mssql/QueryBuilder.php
+++ b/framework/db/mssql/QueryBuilder.php
@@ -11,6 +11,7 @@
 use yii\base\NotSupportedException;
 use yii\db\Constraint;
 use yii\db\Expression;
+use yii\db\TableSchema;
 
 /**
  * QueryBuilder is the query builder for MS SQL Server databases (version 2008 and above).
@@ -107,7 +108,7 @@ protected function newBuildOrderByAndLimit($sql, $orderBy, $limit, $offset)
      * Builds the ORDER BY/LIMIT/OFFSET clauses for SQL SERVER 2005 to 2008.
      * @param string $sql the existing SQL (without ORDER BY/LIMIT/OFFSET)
      * @param array $orderBy the order by columns. See [[\yii\db\Query::orderBy]] for more details on how to specify this parameter.
-     * @param int $limit the limit number. See [[\yii\db\Query::limit]] for more details.
+     * @param int|Expression $limit the limit number. See [[\yii\db\Query::limit]] for more details.
      * @param int $offset the offset number. See [[\yii\db\Query::offset]] for more details.
      * @return string the SQL completed with ORDER BY/LIMIT/OFFSET (if any)
      */
@@ -483,10 +484,11 @@ public function insert($table, $columns, &$params)
         $version2005orLater = version_compare($this->db->getSchema()->getServerVersion(), '9', '>=');
 
         list($names, $placeholders, $values, $params) = $this->prepareInsertValues($table, $columns, $params);
+        $cols = [];
+        $columns = [];
         if ($version2005orLater) {
+            /* @var $schema TableSchema */
             $schema = $this->db->getTableSchema($table);
-            $cols = [];
-            $columns = [];
             foreach ($schema->columns as $column) {
                 if ($column->isComputed) {
                     continue;
diff --git a/framework/db/mssql/Schema.php b/framework/db/mssql/Schema.php
index a2ad449c63e..cb451e68d12 100644
--- a/framework/db/mssql/Schema.php
+++ b/framework/db/mssql/Schema.php
@@ -394,9 +394,9 @@ protected function loadColumnSchema($info)
             }
             if (!empty($matches[2])) {
                 $values = explode(',', $matches[2]);
-                $column->size = $column->precision = (int)$values[0];
+                $column->size = $column->precision = (int) $values[0];
                 if (isset($values[1])) {
-                    $column->scale = (int)$values[1];
+                    $column->scale = (int) $values[1];
                 }
                 if ($column->size === 1 && ($type === 'tinyint' || $type === 'bit')) {
                     $column->type = 'boolean';
diff --git a/framework/db/pgsql/Schema.php b/framework/db/pgsql/Schema.php
index 5959b1bf98f..8f0f1e7d42a 100644
--- a/framework/db/pgsql/Schema.php
+++ b/framework/db/pgsql/Schema.php
@@ -607,7 +607,7 @@ protected function loadColumnSchema($info)
         $column->precision = $info['numeric_precision'];
         $column->scale = $info['numeric_scale'];
         $column->size = $info['size'] === null ? null : (int) $info['size'];
-        $column->dimension = (int)$info['dimension'];
+        $column->dimension = (int) $info['dimension'];
         // pg_get_serial_sequence() doesn't track DEFAULT value change. GENERATED BY IDENTITY columns always have null default value
         if (isset($column->defaultValue) && preg_match("/nextval\\('\"?\\w+\"?\.?\"?\\w+\"?'(::regclass)?\\)/", $column->defaultValue) === 1) {
             $column->sequenceName = preg_replace(['/nextval/', '/::/', '/regclass/', '/\'\)/', '/\(\'/'], '', $column->defaultValue);
diff --git a/framework/di/Instance.php b/framework/di/Instance.php
index 52943860488..bea4fe8cdd4 100644
--- a/framework/di/Instance.php
+++ b/framework/di/Instance.php
@@ -102,9 +102,9 @@ public static function of($id, $optional = false)
      * use yii\db\Connection;
      *
      * // returns Yii::$app->db
-     * $db = Instance::ensure('db', Connection::className());
+     * $db = Instance::ensure('db', Connection::class);
      * // returns an instance of Connection using the given configuration
-     * $db = Instance::ensure(['dsn' => 'sqlite:path/to/my.db'], Connection::className());
+     * $db = Instance::ensure(['dsn' => 'sqlite:path/to/my.db'], Connection::class);
      * ```
      *
      * @param object|string|array|static $reference an object or a reference to the desired object.
diff --git a/framework/filters/AccessControl.php b/framework/filters/AccessControl.php
index 4224f487265..3e91b80a22e 100644
--- a/framework/filters/AccessControl.php
+++ b/framework/filters/AccessControl.php
@@ -31,7 +31,7 @@
  * {
  *     return [
  *         'access' => [
- *             'class' => \yii\filters\AccessControl::className(),
+ *             'class' => \yii\filters\AccessControl::class,
  *             'only' => ['create', 'update'],
  *             'rules' => [
  *                 // deny all POST requests
diff --git a/framework/filters/AccessRule.php b/framework/filters/AccessRule.php
index 606c1701026..aece5ccf68a 100644
--- a/framework/filters/AccessRule.php
+++ b/framework/filters/AccessRule.php
@@ -66,10 +66,10 @@ class AccessRule extends Component
      * @see $roleParams
      */
     public $roles;
-    /** 
+    /**
      * @var array list of RBAC (Role-Based Access Control) permissions that this rules applies to.
      * [[User::can()]] will be called to check access.
-     * 
+     *
      * If this property is not set or empty, it means this rule applies regardless of permissions.
      * @since 2.0.12
      * @see $roles
@@ -264,16 +264,17 @@ protected function matchIP($ip)
             return true;
         }
         foreach ($this->ips as $rule) {
-            if ($rule === '*' ||
-                $rule === $ip ||
-                (
-                    $ip !== null &&
-                    ($pos = strpos($rule, '*')) !== false &&
-                    strncmp($ip, $rule, $pos) === 0
-                ) ||
-                (
-                    ($pos = strpos($rule, '/')) !== false &&
-                    IpHelper::inRange($ip, $rule) === true
+            if (
+                $rule === '*'
+                || $rule === $ip
+                || (
+                    $ip !== null
+                    && ($pos = strpos($rule, '*')) !== false
+                    && strncmp($ip, $rule, $pos) === 0
+                )
+                || (
+                    strpos($rule, '/') !== false
+                    && IpHelper::inRange($ip, $rule) === true
                 )
             ) {
                 return true;
diff --git a/framework/filters/Cors.php b/framework/filters/Cors.php
index cdfe280868d..356053f514b 100644
--- a/framework/filters/Cors.php
+++ b/framework/filters/Cors.php
@@ -26,7 +26,7 @@
  * {
  *     return [
  *         'corsFilter' => [
- *             'class' => \yii\filters\Cors::className(),
+ *             'class' => \yii\filters\Cors::class,
  *         ],
  *     ];
  * }
@@ -40,7 +40,7 @@
  * {
  *     return [
  *         'corsFilter' => [
- *             'class' => \yii\filters\Cors::className(),
+ *             'class' => \yii\filters\Cors::class,
  *             'cors' => [
  *                 // restrict access to
  *                 'Origin' => ['http://www.myserver.com', 'https://www.myserver.com'],
@@ -197,7 +197,7 @@ public function prepareHeaders($requestHeaders)
         if (isset($this->cors['Access-Control-Expose-Headers'])) {
             $responseHeaders['Access-Control-Expose-Headers'] = implode(', ', $this->cors['Access-Control-Expose-Headers']);
         }
-        
+
         if (isset($this->cors['Access-Control-Allow-Headers'])) {
             $responseHeaders['Access-Control-Allow-Headers'] = implode(', ', $this->cors['Access-Control-Allow-Headers']);
         }
diff --git a/framework/filters/HostControl.php b/framework/filters/HostControl.php
index 0c9b7fbc2c2..51aa5bee24a 100644
--- a/framework/filters/HostControl.php
+++ b/framework/filters/HostControl.php
@@ -45,7 +45,7 @@
  *     {
  *         return [
  *             'hostControl' => [
- *                 'class' => HostControl::className(),
+ *                 'class' => HostControl::class,
  *                 'allowedHosts' => [
  *                     'example.com',
  *                     '*.example.com',
diff --git a/framework/filters/RateLimiter.php b/framework/filters/RateLimiter.php
index daa8310d269..5ffc1a69ff2 100644
--- a/framework/filters/RateLimiter.php
+++ b/framework/filters/RateLimiter.php
@@ -24,7 +24,7 @@
  * {
  *     return [
  *         'rateLimiter' => [
- *             'class' => \yii\filters\RateLimiter::className(),
+ *             'class' => \yii\filters\RateLimiter::class,
  *         ],
  *     ];
  * }
diff --git a/framework/filters/VerbFilter.php b/framework/filters/VerbFilter.php
index 272797c21cf..76b6d9e4fe0 100644
--- a/framework/filters/VerbFilter.php
+++ b/framework/filters/VerbFilter.php
@@ -28,7 +28,7 @@
  * {
  *     return [
  *         'verbs' => [
- *             'class' => \yii\filters\VerbFilter::className(),
+ *             'class' => \yii\filters\VerbFilter::class,
  *             'actions' => [
  *                 'index'  => ['GET'],
  *                 'view'   => ['GET'],
@@ -57,6 +57,8 @@ class VerbFilter extends Behavior
      * You can use `'*'` to stand for all actions. When an action is explicitly
      * specified, it takes precedence over the specification given by `'*'`.
      *
+     * @see https://www.yiiframework.com/doc/guide/2.0/en/structure-controllers#action-ids
+     *
      * For example,
      *
      * ```php
@@ -64,6 +66,7 @@ class VerbFilter extends Behavior
      *   'create' => ['GET', 'POST'],
      *   'update' => ['GET', 'PUT', 'POST'],
      *   'delete' => ['POST', 'DELETE'],
+     *   'author-comment' => ['POST', 'DELETE'],
      *   '*' => ['GET'],
      * ]
      * ```
diff --git a/framework/filters/auth/CompositeAuth.php b/framework/filters/auth/CompositeAuth.php
index 3b63c5af4ae..37043d4235d 100644
--- a/framework/filters/auth/CompositeAuth.php
+++ b/framework/filters/auth/CompositeAuth.php
@@ -23,10 +23,10 @@
  * {
  *     return [
  *         'compositeAuth' => [
- *             'class' => \yii\filters\auth\CompositeAuth::className(),
+ *             'class' => \yii\filters\auth\CompositeAuth::class,
  *             'authMethods' => [
- *                 \yii\filters\auth\HttpBasicAuth::className(),
- *                 \yii\filters\auth\QueryParamAuth::className(),
+ *                 \yii\filters\auth\HttpBasicAuth::class,
+ *                 \yii\filters\auth\QueryParamAuth::class,
  *             ],
  *         ],
  *     ];
diff --git a/framework/filters/auth/HttpBasicAuth.php b/framework/filters/auth/HttpBasicAuth.php
index 3d60077f6ae..8ba40e0bf73 100644
--- a/framework/filters/auth/HttpBasicAuth.php
+++ b/framework/filters/auth/HttpBasicAuth.php
@@ -17,7 +17,7 @@
  * {
  *     return [
  *         'basicAuth' => [
- *             'class' => \yii\filters\auth\HttpBasicAuth::className(),
+ *             'class' => \yii\filters\auth\HttpBasicAuth::class,
  *         ],
  *     ];
  * }
@@ -34,7 +34,7 @@
  * {
  *     return [
  *         'basicAuth' => [
- *             'class' => \yii\filters\auth\HttpBasicAuth::className(),
+ *             'class' => \yii\filters\auth\HttpBasicAuth::class,
  *             'auth' => function ($username, $password) {
  *                 $user = User::find()->where(['username' => $username])->one();
  *                 if ($user->verifyPassword($password)) {
diff --git a/framework/filters/auth/HttpBearerAuth.php b/framework/filters/auth/HttpBearerAuth.php
index 82b97762746..f5fb80a97df 100644
--- a/framework/filters/auth/HttpBearerAuth.php
+++ b/framework/filters/auth/HttpBearerAuth.php
@@ -17,7 +17,7 @@
  * {
  *     return [
  *         'bearerAuth' => [
- *             'class' => \yii\filters\auth\HttpBearerAuth::className(),
+ *             'class' => \yii\filters\auth\HttpBearerAuth::class,
  *         ],
  *     ];
  * }
diff --git a/framework/filters/auth/HttpHeaderAuth.php b/framework/filters/auth/HttpHeaderAuth.php
index ea32b7050bb..1b0dbbff152 100644
--- a/framework/filters/auth/HttpHeaderAuth.php
+++ b/framework/filters/auth/HttpHeaderAuth.php
@@ -17,7 +17,7 @@
  * {
  *     return [
  *         'basicAuth' => [
- *             'class' => \yii\filters\auth\HttpHeaderAuth::className(),
+ *             'class' => \yii\filters\auth\HttpHeaderAuth::class,
  *         ],
  *     ];
  * }
diff --git a/framework/grid/ActionColumn.php b/framework/grid/ActionColumn.php
index e8dbfed287a..d945e1ea1a0 100644
--- a/framework/grid/ActionColumn.php
+++ b/framework/grid/ActionColumn.php
@@ -20,7 +20,7 @@
  * 'columns' => [
  *     // ...
  *     [
- *         'class' => ActionColumn::className(),
+ *         'class' => ActionColumn::class,
  *         // you may configure additional properties here
  *     ],
  * ]
diff --git a/framework/grid/GridView.php b/framework/grid/GridView.php
index 6de342d86c8..1fa783f9adb 100644
--- a/framework/grid/GridView.php
+++ b/framework/grid/GridView.php
@@ -148,14 +148,14 @@ class GridView extends BaseListView
      *
      * ```php
      * [
-     *     ['class' => SerialColumn::className()],
+     *     ['class' => SerialColumn::class],
      *     [
-     *         'class' => DataColumn::className(), // this line is optional
+     *         'class' => DataColumn::class, // this line is optional
      *         'attribute' => 'name',
      *         'format' => 'text',
      *         'label' => 'Name',
      *     ],
-     *     ['class' => CheckboxColumn::className()],
+     *     ['class' => CheckboxColumn::class],
      * ]
      * ```
      *
@@ -359,7 +359,7 @@ public function renderItems()
 
         $tableFooter = false;
         $tableFooterAfterBody = false;
-        
+
         if ($this->showFooter) {
             if ($this->placeFooterAfterBody) {
                 $tableFooterAfterBody = $this->renderTableFooter();
diff --git a/framework/helpers/BaseFileHelper.php b/framework/helpers/BaseFileHelper.php
index 4fa96cf281b..b1bf1c19e52 100644
--- a/framework/helpers/BaseFileHelper.php
+++ b/framework/helpers/BaseFileHelper.php
@@ -9,6 +9,7 @@
 
 use Yii;
 use yii\base\ErrorException;
+use yii\base\Exception;
 use yii\base\InvalidArgumentException;
 use yii\base\InvalidConfigException;
 
@@ -595,19 +596,15 @@ public static function filterPath($path, $options)
 
         $path = str_replace('\\', '/', $path);
 
-        if (!empty($options['except'])) {
-            if (($except = self::lastExcludeMatchingFromList($options['basePath'], $path, $options['except'])) !== null) {
-                return $except['flags'] & self::PATTERN_NEGATIVE;
-            }
+        if (
+            !empty($options['except'])
+            && ($except = self::lastExcludeMatchingFromList($options['basePath'], $path, $options['except'])) !== null
+        ) {
+            return $except['flags'] & self::PATTERN_NEGATIVE;
         }
 
         if (!empty($options['only']) && !is_dir($path)) {
-            if (($except = self::lastExcludeMatchingFromList($options['basePath'], $path, $options['only'])) !== null) {
-                // don't check PATTERN_NEGATIVE since those entries are not prefixed with !
-                return true;
-            }
-
-            return false;
+            return self::lastExcludeMatchingFromList($options['basePath'], $path, $options['only']) !== null;
         }
 
         return true;
@@ -874,4 +871,83 @@ protected static function normalizeOptions(array $options)
 
         return $options;
     }
+
+    /**
+     * Changes the Unix user and/or group ownership of a file or directory, and optionally the mode.
+     * Note: This function will not work on remote files as the file to be examined must be accessible
+     * via the server's filesystem.
+     * Note: On Windows, this function fails silently when applied on a regular file.
+     * @param string $path the path to the file or directory.
+     * @param string|array|int|null $ownership the user and/or group ownership for the file or directory.
+     * When $ownership is a string, the format is 'user:group' where both are optional. E.g.
+     * 'user' or 'user:' will only change the user,
+     * ':group' will only change the group,
+     * 'user:group' will change both.
+     * When $owners is an index array the format is [0 => user, 1 => group], e.g. `[$myUser, $myGroup]`.
+     * It is also possible to pass an associative array, e.g. ['user' => $myUser, 'group' => $myGroup].
+     * In case $owners is an integer it will be used as user id.
+     * If `null`, an empty array or an empty string is passed, the ownership will not be changed.
+     * @param int|null $mode the permission to be set for the file or directory.
+     * If `null` is passed, the mode will not be changed.
+     *
+     * @since 2.0.43
+     */
+    public static function changeOwnership($path, $ownership, $mode = null)
+    {
+        if (!file_exists($path)) {
+            throw new InvalidArgumentException('Unable to change ownerhip, "' . $path . '" is not a file or directory.');
+        }
+
+        if (empty($ownership) && $ownership !== 0 && $mode === null) {
+            return;
+        }
+
+        $user = $group = null;
+        if (!empty($ownership) || $ownership === 0 || $ownership === '0') {
+            if (is_int($ownership)) {
+                $user = $ownership;
+            } elseif (is_string($ownership)) {
+                $ownerParts = explode(':', $ownership);
+                $user = $ownerParts[0];
+                if (count($ownerParts) > 1) {
+                    $group = $ownerParts[1];
+                }
+            } elseif (is_array($ownership)) {
+                $ownershipIsIndexed = ArrayHelper::isIndexed($ownership);
+                $user = ArrayHelper::getValue($ownership, $ownershipIsIndexed ? 0 : 'user');
+                $group = ArrayHelper::getValue($ownership, $ownershipIsIndexed ? 1 : 'group');
+            } else {
+                throw new InvalidArgumentException('$ownership must be an integer, string, array, or null.');
+            }
+        }
+
+        if ($mode !== null) {
+            if (!is_int($mode)) {
+                throw new InvalidArgumentException('$mode must be an integer or null.');
+            }
+            if (!chmod($path, $mode)) {
+                throw new Exception('Unable to change mode of "' . $path . '" to "0' . decoct($mode) . '".');
+            }
+        }
+        if ($user !== null && $user !== '') {
+            if (is_numeric($user)) {
+                $user = (int) $user;
+            } elseif (!is_string($user)) {
+                throw new InvalidArgumentException('The user part of $ownership must be an integer, string, or null.');
+            }
+            if (!chown($path, $user)) {
+                throw new Exception('Unable to change user ownership of "' . $path . '" to "' . $user . '".');
+            }
+        }
+        if ($group !== null && $group !== '') {
+            if (is_numeric($group)) {
+                $group = (int) $group;
+            } elseif (!is_string($group)) {
+                throw new InvalidArgumentException('The group part of $ownership must be an integer, string or null.');
+            }
+            if (!chgrp($path, $group)) {
+                throw new Exception('Unable to change group ownership of "' . $path . '" to "' . $group . '".');
+            }
+        }
+    }
 }
diff --git a/framework/helpers/BaseFormatConverter.php b/framework/helpers/BaseFormatConverter.php
index 1a96120c3d6..340f7d4447e 100644
--- a/framework/helpers/BaseFormatConverter.php
+++ b/framework/helpers/BaseFormatConverter.php
@@ -335,7 +335,7 @@ public static function convertDatePhpToIcu($pattern)
             '\\\\' => '\\',
         ]);
 
-        // remove `''` - the're result of consecutive escaped chars (`\A\B` will be `'A''B'`, but should be `'AB'`)
+        // remove `''` - they're result of consecutive escaped chars (`\A\B` will be `'A''B'`, but should be `'AB'`)
         // real `'` are encoded as `''''`
         return strtr($result, [
             "''''" => "''",
diff --git a/framework/helpers/BaseHtml.php b/framework/helpers/BaseHtml.php
index 93bc4c6b723..83caf53b8b0 100644
--- a/framework/helpers/BaseHtml.php
+++ b/framework/helpers/BaseHtml.php
@@ -2306,21 +2306,34 @@ public static function getInputName($model, $attribute)
         throw new InvalidArgumentException(get_class($model) . '::formName() cannot be empty for tabular inputs.');
     }
 
+    /**
+     * Converts input name to ID.
+     *
+     * For example, if `$name` is `Post[content]`, this method will return `post-content`.
+     *
+     * @param string $name the input name
+     * @return string the generated input ID
+     * @since 2.0.43
+     */
+    public static function getInputIdByName($name)
+    {
+        $charset = Yii::$app ? Yii::$app->charset : 'UTF-8';
+        $name = mb_strtolower($name, $charset);
+        return str_replace(['[]', '][', '[', ']', ' ', '.', '--'], ['', '-', '-', '', '-', '-', '-'], $name);
+    }
+
     /**
      * Generates an appropriate input ID for the specified attribute name or expression.
      *
-     * This method converts the result [[getInputName()]] into a valid input ID.
-     * For example, if [[getInputName()]] returns `Post[content]`, this method will return `post-content`.
      * @param Model $model the model object
      * @param string $attribute the attribute name or expression. See [[getAttributeName()]] for explanation of attribute expression.
-     * @return string the generated input ID
+     * @return string the generated input ID.
      * @throws InvalidArgumentException if the attribute name contains non-word characters.
      */
     public static function getInputId($model, $attribute)
     {
-        $charset = Yii::$app ? Yii::$app->charset : 'UTF-8';
-        $name = mb_strtolower(static::getInputName($model, $attribute), $charset);
-        return str_replace(['[]', '][', '[', ']', ' ', '.'], ['', '-', '-', '', '-', '-'], $name);
+        $name = static::getInputName($model, $attribute);
+        return static::getInputIdByName($name);
     }
 
     /**
diff --git a/framework/helpers/BaseInflector.php b/framework/helpers/BaseInflector.php
index 410ee59bd82..2e01e761907 100644
--- a/framework/helpers/BaseInflector.php
+++ b/framework/helpers/BaseInflector.php
@@ -219,6 +219,8 @@ class BaseInflector
         'whiting' => 'whiting',
         'wildebeest' => 'wildebeest',
         'Yengeese' => 'Yengeese',
+        'software' => 'software',
+        'hardware' => 'hardware',
     ];
     /**
      * @var array fallback map for transliteration used by [[transliterate()]] when intl isn't available.
diff --git a/framework/helpers/BaseJson.php b/framework/helpers/BaseJson.php
index 0e3663e4a2c..2637653e845 100644
--- a/framework/helpers/BaseJson.php
+++ b/framework/helpers/BaseJson.php
@@ -22,6 +22,13 @@
  */
 class BaseJson
 {
+    /**
+     * @var bool|null Enables human readable output a.k.a. Pretty Print.
+     * This can useful for debugging during development but is not recommended in a production environment!
+     * In case `prettyPrint` is `null` (default) the `options` passed to `encode` functions will not be changed.
+     * @since 2.0.43
+     */
+    public static $prettyPrint = null;
     /**
      * List of JSON Error messages assigned to constant names for better handling of version differences.
      * @var array
@@ -62,6 +69,13 @@ public static function encode($value, $options = 320)
         set_error_handler(function () {
             static::handleJsonError(JSON_ERROR_SYNTAX);
         }, E_WARNING);
+
+        if (static::$prettyPrint === true) {
+            $options |= JSON_PRETTY_PRINT;
+        } elseif (static::$prettyPrint === false) {
+            $options &= ~JSON_PRETTY_PRINT;
+        }
+
         $json = json_encode($value, $options);
         restore_error_handler();
         static::handleJsonError(json_last_error());
diff --git a/framework/helpers/BaseStringHelper.php b/framework/helpers/BaseStringHelper.php
index 417c0ae40bc..8ab4db035d4 100644
--- a/framework/helpers/BaseStringHelper.php
+++ b/framework/helpers/BaseStringHelper.php
@@ -23,6 +23,7 @@ class BaseStringHelper
     /**
      * Returns the number of bytes in the given string.
      * This method ensures the string is treated as a byte array by using `mb_strlen()`.
+     *
      * @param string $string the string being measured for length
      * @return int the number of bytes in the given string.
      */
@@ -34,6 +35,7 @@ public static function byteLength($string)
     /**
      * Returns the portion of string specified by the start and length parameters.
      * This method ensures the string is treated as a byte array by using `mb_substr()`.
+     *
      * @param string $string the input string. Must be one character or longer.
      * @param int $start the starting position
      * @param int $length the desired portion length. If not specified or `null`, there will be
@@ -43,7 +45,11 @@ public static function byteLength($string)
      */
     public static function byteSubstr($string, $start, $length = null)
     {
-        return mb_substr($string, $start, $length === null ? mb_strlen($string, '8bit') : $length, '8bit');
+        if ($length === null) {
+            $length = static::byteLength($string);
+        }
+ 
+        return mb_substr($string, $start, $length, '8bit');
     }
 
     /**
@@ -61,11 +67,14 @@ public static function byteSubstr($string, $start, $length = null)
      */
     public static function basename($path, $suffix = '')
     {
-        if (($len = mb_strlen($suffix)) > 0 && mb_substr($path, -$len) === $suffix) {
+        $len = mb_strlen($suffix);
+        if ($len > 0 && mb_substr($path, -$len) === $suffix) {
             $path = mb_substr($path, 0, -$len);
         }
-        $path = rtrim(str_replace('\\', '/', $path), '/\\');
-        if (($pos = mb_strrpos($path, '/')) !== false) {
+ 
+        $path = rtrim(str_replace('\\', '/', $path), '/');
+        $pos = mb_strrpos($path, '/');
+        if ($pos !== false) {
             return mb_substr($path, $pos + 1);
         }
 
@@ -146,9 +155,9 @@ public static function truncateWords($string, $count, $suffix = '...', $asHtml =
      * Truncate a string while preserving the HTML.
      *
      * @param string $string The string to truncate
-     * @param int $count
+     * @param int $count The counter
      * @param string $suffix String to append to the end of the truncated string.
-     * @param string|bool $encoding
+     * @param string|bool $encoding Encoding flag or charset.
      * @return string
      * @since 2.0.1
      */
@@ -205,12 +214,12 @@ protected static function truncateHtml($string, $count, $suffix, $encoding = fal
     }
 
     /**
-     * Check if given string starts with specified substring.
-     * Binary and multibyte safe.
+     * Check if given string starts with specified substring. Binary and multibyte safe.
      *
      * @param string $string Input string
      * @param string $with Part to search inside the $string
-     * @param bool $caseSensitive Case sensitive search. Default is true. When case sensitive is enabled, $with must exactly match the starting of the string in order to get a true value.
+     * @param bool $caseSensitive Case sensitive search. Default is true. When case sensitive is enabled, `$with` must
+     * exactly match the starting of the string in order to get a true value.
      * @return bool Returns true if first input starts with second input, false otherwise
      */
     public static function startsWith($string, $with, $caseSensitive = true)
@@ -220,19 +229,21 @@ public static function startsWith($string, $with, $caseSensitive = true)
         }
         if ($caseSensitive) {
             return strncmp($string, $with, $bytes) === 0;
-
         }
+
         $encoding = Yii::$app ? Yii::$app->charset : 'UTF-8';
-        return mb_strtolower(mb_substr($string, 0, $bytes, '8bit'), $encoding) === mb_strtolower($with, $encoding);
+        $string = static::byteSubstr($string, 0, $bytes);
+
+        return mb_strtolower($string, $encoding) === mb_strtolower($with, $encoding);
     }
 
     /**
-     * Check if given string ends with specified substring.
-     * Binary and multibyte safe.
+     * Check if given string ends with specified substring. Binary and multibyte safe.
      *
      * @param string $string Input string to check
-     * @param string $with Part to search inside of the $string.
-     * @param bool $caseSensitive Case sensitive search. Default is true. When case sensitive is enabled, $with must exactly match the ending of the string in order to get a true value.
+     * @param string $with Part to search inside of the `$string`.
+     * @param bool $caseSensitive Case sensitive search. Default is true. When case sensitive is enabled, `$with` must
+     * exactly match the ending of the string in order to get a true value.
      * @return bool Returns true if first input ends with second input, false otherwise
      */
     public static function endsWith($string, $with, $caseSensitive = true)
@@ -241,7 +252,7 @@ public static function endsWith($string, $with, $caseSensitive = true)
             return true;
         }
         if ($caseSensitive) {
-            // Warning check, see https://secure.php.net/manual/en/function.substr-compare.php#refsect1-function.substr-compare-returnvalues
+            // Warning check, see https://php.net/substr-compare#refsect1-function.substr-compare-returnvalues
             if (static::byteLength($string) < $bytes) {
                 return false;
             }
@@ -250,7 +261,9 @@ public static function endsWith($string, $with, $caseSensitive = true)
         }
 
         $encoding = Yii::$app ? Yii::$app->charset : 'UTF-8';
-        return mb_strtolower(mb_substr($string, -$bytes, mb_strlen($string, '8bit'), '8bit'), $encoding) === mb_strtolower($with, $encoding);
+        $string = static::byteSubstr($string, -$bytes);
+
+        return mb_strtolower($string, $encoding) === mb_strtolower($with, $encoding);
     }
 
     /**
@@ -291,10 +304,10 @@ public static function explode($string, $delimiter = ',', $trim = true, $skipEmp
 
     /**
      * Counts words in a string.
-     * @since 2.0.8
      *
-     * @param string $string
+     * @param string $string the text to calculate
      * @return int
+     * @since 2.0.8
      */
     public static function countWords($string)
     {
@@ -304,13 +317,14 @@ public static function countWords($string)
     /**
      * Returns string representation of number value with replaced commas to dots, if decimal point
      * of current locale is comma.
-     * @param int|float|string $value
+     *
+     * @param int|float|string $value the value to normalize.
      * @return string
      * @since 2.0.11
      */
     public static function normalizeNumber($value)
     {
-        $value = (string)$value;
+        $value = (string) $value;
 
         $localeInfo = localeconv();
         $decimalSeparator = isset($localeInfo['decimal_point']) ? $localeInfo['decimal_point'] : null;
@@ -328,9 +342,9 @@ public static function normalizeNumber($value)
      * > Note: Base 64 padding `=` may be at the end of the returned string.
      * > `=` is not transparent to URL encoding.
      *
-     * @see https://tools.ietf.org/html/rfc4648#page-7
      * @param string $input the string to encode.
      * @return string encoded string.
+     * @see https://tools.ietf.org/html/rfc4648#page-7
      * @since 2.0.12
      */
     public static function base64UrlEncode($input)
@@ -341,9 +355,9 @@ public static function base64UrlEncode($input)
     /**
      * Decodes "Base 64 Encoding with URL and Filename Safe Alphabet" (RFC 4648).
      *
-     * @see https://tools.ietf.org/html/rfc4648#page-7
      * @param string $input encoded string.
      * @return string decoded string.
+     * @see https://tools.ietf.org/html/rfc4648#page-7
      * @since 2.0.12
      */
     public static function base64UrlDecode($input)
@@ -353,8 +367,8 @@ public static function base64UrlDecode($input)
 
     /**
      * Safely casts a float to string independent of the current locale.
-     *
      * The decimal separator will always be `.`.
+     *
      * @param float|int $number a floating point number or integer.
      * @return string the string representation of the number.
      * @since 2.0.13
@@ -369,6 +383,7 @@ public static function floatToString($number)
     /**
      * Checks if the passed string would match the given shell wildcard pattern.
      * This function emulates [[fnmatch()]], which may be unavailable at certain environment, using PCRE.
+     *
      * @param string $pattern the shell wildcard pattern.
      * @param string $string the tested string.
      * @param array $options options for matching. Valid options are:
@@ -442,17 +457,25 @@ public static function mb_ucfirst($string, $encoding = 'UTF-8')
      * @param string $string the string to be proceeded
      * @param string $encoding Optional, defaults to "UTF-8"
      * @return string
-     * @see https://secure.php.net/manual/en/function.ucwords.php
+     * @see https://www.php.net/manual/en/function.ucwords
      * @since 2.0.16
      */
     public static function mb_ucwords($string, $encoding = 'UTF-8')
     {
-        $words = preg_split("/\s/u", $string, -1, PREG_SPLIT_NO_EMPTY);
+        $string = (string) $string;
+        if (empty($string)) {
+            return $string;
+        }
 
-        $titelized = array_map(function ($word) use ($encoding) {
-            return static::mb_ucfirst($word, $encoding);
-        }, $words);
+        $parts = preg_split('/(\s+[^\w]+\s+|^[^\w]+\s+|\s+)/u', $string, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
+        $ucfirstEven = !trim(mb_substr($parts[0], -1, 1, $encoding));
+        foreach ($parts as $key => $value) {
+            $isEven = (bool)($key % 2);
+            if ($ucfirstEven === $isEven) {
+                $parts[$key] = static::mb_ucfirst($value, $encoding);
+            }
+        }
 
-        return implode(' ', $titelized);
+        return implode('', $parts);
     }
 }
diff --git a/framework/helpers/BaseUrl.php b/framework/helpers/BaseUrl.php
index 4b44551f4f3..4da728e6816 100644
--- a/framework/helpers/BaseUrl.php
+++ b/framework/helpers/BaseUrl.php
@@ -232,12 +232,12 @@ public static function to($url = '', $scheme = false)
     }
 
     /**
-     * Normalize URL by ensuring that it use specified scheme.
+     * Normalize the URL by ensuring it uses specified scheme.
      *
-     * If URL is relative or scheme is not string, normalization is skipped.
+     * If the URL is relative or the scheme is not a string, normalization is skipped.
      *
      * @param string $url the URL to process
-     * @param string $scheme the URI scheme used in URL (e.g. `http` or `https`). Use empty string to
+     * @param string $scheme the URI scheme used in the URL (e.g. `http` or `https`). Use an empty string to
      * create protocol-relative URL (e.g. `//example.com/path`)
      * @return string the processed URL
      * @since 2.0.11
diff --git a/framework/i18n/Formatter.php b/framework/i18n/Formatter.php
index 0af9e3e4ed4..27bad524d5c 100644
--- a/framework/i18n/Formatter.php
+++ b/framework/i18n/Formatter.php
@@ -18,9 +18,11 @@
 use yii\base\Component;
 use yii\base\InvalidArgumentException;
 use yii\base\InvalidConfigException;
+use yii\helpers\ArrayHelper;
 use yii\helpers\FormatConverter;
 use yii\helpers\Html;
 use yii\helpers\HtmlPurifier;
+use yii\helpers\Url;
 
 /**
  * Formatter provides a set of commonly used data formatting methods.
@@ -210,7 +212,7 @@ class Formatter extends Component
      */
     public $calendar;
     /**
-     * @var string the character displayed as the decimal point when formatting a number.
+     * @var string|null the character displayed as the decimal point when formatting a number.
      * If not set, the decimal separator corresponding to [[locale]] will be used.
      * If [PHP intl extension](https://secure.php.net/manual/en/book.intl.php) is not available, the default value is '.'.
      */
@@ -223,7 +225,7 @@ class Formatter extends Component
      */
     public $currencyDecimalSeparator;
     /**
-     * @var string the character displayed as the thousands separator (also called grouping separator) character when formatting a number.
+     * @var string|null the character displayed as the thousands separator (also called grouping separator) character when formatting a number.
      * If not set, the thousand separator corresponding to [[locale]] will be used.
      * If [PHP intl extension](https://secure.php.net/manual/en/book.intl.php) is not available, the default value is ','.
      */
@@ -286,7 +288,7 @@ class Formatter extends Component
      */
     public $numberFormatterSymbols = [];
     /**
-     * @var string the 3-letter ISO 4217 currency code indicating the default currency to use for [[asCurrency]].
+     * @var string|null the 3-letter ISO 4217 currency code indicating the default currency to use for [[asCurrency]].
      * If not set, the currency code corresponding to [[locale]] will be used.
      * Note that in this case the [[locale]] has to be specified with a country code, e.g. `en-US` otherwise it
      * is not possible to determine the default currency.
@@ -443,8 +445,9 @@ public function init()
     public function format($value, $format)
     {
         if ($format instanceof Closure) {
-            return call_user_func($format, $value, $this);
-        } elseif (is_array($format)) {
+            return $format($value, $this);
+        }
+        if (is_array($format)) {
             if (!isset($format[0])) {
                 throw new InvalidArgumentException('The $format array must contain at least one element.');
             }
@@ -463,10 +466,8 @@ public function format($value, $format)
         throw new InvalidArgumentException("Unknown format type: $format");
     }
 
-
     // simple formats
 
-
     /**
      * Formats the value as is without any formatting.
      * This method simply returns back the parameter without any format.
@@ -577,7 +578,11 @@ public function asImage($value, $options = [])
     /**
      * Formats the value as a hyperlink.
      * @param mixed $value the value to be formatted.
-     * @param array $options the tag options in terms of name-value pairs. See [[Html::a()]].
+     * @param array $options the tag options in terms of name-value pairs. See [[Html::a()]]. Since 2.0.43 there is
+     * a special option available `scheme` - if set it won't be passed to [[Html::a()]] but it will control the URL
+     * protocol part of the link by normalizing URL and ensuring that it uses specified scheme. See [[Url::ensureScheme()]].
+     * If `scheme` is not set the original behavior is preserved which is to add "http://" prefix when "://" string is
+     * not found in the $value.
      * @return string the formatted result.
      */
     public function asUrl($value, $options = [])
@@ -586,8 +591,13 @@ public function asUrl($value, $options = [])
             return $this->nullDisplay;
         }
         $url = $value;
-        if (strpos($url, '://') === false) {
-            $url = 'http://' . $url;
+        $scheme = ArrayHelper::remove($options, 'scheme');
+        if ($scheme === null) {
+            if (strpos($url, '://') === false) {
+                $url = 'http://' . $url;
+            }
+        } else {
+            $url = Url::ensureScheme($url, $scheme);
         }
 
         return Html::a(Html::encode($value), $url, $options);
@@ -608,10 +618,8 @@ public function asBoolean($value)
         return $value ? $this->booleanFormat[1] : $this->booleanFormat[0];
     }
 
-
     // date and time formats
 
-
     /**
      * Formats the value as a date.
      * @param int|string|DateTime|DateTimeInterface $value the value to be formatted. The following
@@ -735,7 +743,7 @@ public function asDatetime($value, $format = null)
     ];
 
     /**
-     * @param int|string|DateTime|DateTimeInterface $value the value to be formatted. The following
+     * @param int|string|DateTime|DateTimeInterface|null $value the value to be formatted. The following
      * types of value are supported:
      *
      * - an integer representing a UNIX timestamp
@@ -754,7 +762,7 @@ private function formatDateTimeValue($value, $format, $type)
         // avoid time zone conversion for date-only and time-only values
         if ($type === 'date' || $type === 'time') {
             list($timestamp, $hasTimeInfo, $hasDateInfo) = $this->normalizeDatetimeValue($value, true);
-            if ($type === 'date' && !$hasTimeInfo || $type === 'time' && !$hasDateInfo) {
+            if (($type === 'date' && !$hasTimeInfo) || ($type === 'time' && !$hasDateInfo)) {
                 $timeZone = $this->defaultTimeZone;
             }
         } else {
@@ -772,18 +780,41 @@ private function formatDateTimeValue($value, $format, $type)
             }
             if (isset($this->_dateFormats[$format])) {
                 if ($type === 'date') {
-                    $formatter = new IntlDateFormatter($this->locale, $this->_dateFormats[$format], IntlDateFormatter::NONE, $timeZone, $this->calendar);
+                    $formatter = new IntlDateFormatter(
+                        $this->locale,
+                        $this->_dateFormats[$format],
+                        IntlDateFormatter::NONE,
+                        $timeZone,
+                        $this->calendar
+                    );
                 } elseif ($type === 'time') {
-                    $formatter = new IntlDateFormatter($this->locale, IntlDateFormatter::NONE, $this->_dateFormats[$format], $timeZone, $this->calendar);
+                    $formatter = new IntlDateFormatter(
+                        $this->locale,
+                        IntlDateFormatter::NONE,
+                        $this->_dateFormats[$format],
+                        $timeZone,
+                        $this->calendar
+                    );
                 } else {
-                    $formatter = new IntlDateFormatter($this->locale, $this->_dateFormats[$format], $this->_dateFormats[$format], $timeZone, $this->calendar);
+                    $formatter = new IntlDateFormatter(
+                        $this->locale,
+                        $this->_dateFormats[$format],
+                        $this->_dateFormats[$format],
+                        $timeZone,
+                        $this->calendar
+                    );
                 }
             } else {
-                $formatter = new IntlDateFormatter($this->locale, IntlDateFormatter::NONE, IntlDateFormatter::NONE, $timeZone, $this->calendar, $format);
-            }
-            if ($formatter === null) {
-                throw new InvalidConfigException(intl_get_error_message());
+                $formatter = new IntlDateFormatter(
+                    $this->locale,
+                    IntlDateFormatter::NONE,
+                    IntlDateFormatter::NONE,
+                    $timeZone,
+                    $this->calendar,
+                    $format
+                );
             }
+
             // make IntlDateFormatter work with DateTimeImmutable
             if ($timestamp instanceof \DateTimeImmutable) {
                 $timestamp = new DateTime($timestamp->format(DateTime::ISO8601), $timestamp->getTimezone());
@@ -811,7 +842,7 @@ private function formatDateTimeValue($value, $format, $type)
     /**
      * Normalizes the given datetime value as a DateTime object that can be taken by various date/time formatting methods.
      *
-     * @param int|string|DateTime|DateTimeInterface $value the datetime value to be normalized. The following
+     * @param int|string|DateTime|DateTimeInterface|null $value the datetime value to be normalized. The following
      * types of value are supported:
      *
      * - an integer representing a UNIX timestamp
@@ -824,7 +855,7 @@ private function formatDateTimeValue($value, $format, $type)
      * timestamp, the second a boolean indicating whether the timestamp has time information and third a boolean indicating
      * whether the timestamp has date information.
      * This parameter is available since version 2.0.1.
-     * @return DateTime|array the normalized datetime value.
+     * @return DateTime|array the normalized datetime value
      * Since version 2.0.1 this may also return an array if `$checkDateTimeInfo` is true.
      * The first element of the array is the normalized timestamp and the second is a boolean indicating whether
      * the timestamp has time information or it is just a date value.
@@ -846,9 +877,23 @@ protected function normalizeDatetimeValue($value, $checkDateTimeInfo = false)
             if (is_numeric($value)) { // process as unix timestamp, which is always in UTC
                 $timestamp = new DateTime('@' . (int) $value, new DateTimeZone('UTC'));
                 return $checkDateTimeInfo ? [$timestamp, true, true] : $timestamp;
-            } elseif (($timestamp = DateTime::createFromFormat('Y-m-d|', $value, new DateTimeZone($this->defaultTimeZone))) !== false) { // try Y-m-d format (support invalid dates like 2012-13-01)
+            }
+            if (
+                ($timestamp = DateTime::createFromFormat(
+                    'Y-m-d|',
+                    $value,
+                    new DateTimeZone($this->defaultTimeZone))
+                ) !== false
+            ) { // try Y-m-d format (support invalid dates like 2012-13-01)
                 return $checkDateTimeInfo ? [$timestamp, false, true] : $timestamp;
-            } elseif (($timestamp = DateTime::createFromFormat('Y-m-d H:i:s', $value, new DateTimeZone($this->defaultTimeZone))) !== false) { // try Y-m-d H:i:s format (support invalid dates like 2012-13-01 12:63:12)
+            }
+            if (
+                ($timestamp = DateTime::createFromFormat(
+                    'Y-m-d H:i:s',
+                    $value,
+                    new DateTimeZone($this->defaultTimeZone))
+                ) !== false
+            ) { // try Y-m-d H:i:s format (support invalid dates like 2012-13-01 12:63:12)
                 return $checkDateTimeInfo ? [$timestamp, true, true] : $timestamp;
             }
             // finally try to create a DateTime object with the value
@@ -923,30 +968,17 @@ public function asRelativeTime($value, $referenceTime = null)
             $interval = $value;
         } else {
             $timestamp = $this->normalizeDatetimeValue($value);
+            $timeZone = new DateTimeZone($this->timeZone);
 
-            if ($timestamp === false) {
-                // $value is not a valid date/time value, so we try
-                // to create a DateInterval with it
-                try {
-                    $interval = new DateInterval($value);
-                } catch (\Exception $e) {
-                    // invalid date/time and invalid interval
-                    return $this->nullDisplay;
-                }
+            if ($referenceTime === null) {
+                $dateNow = new DateTime('now', $timeZone);
             } else {
-                $timeZone = new DateTimeZone($this->timeZone);
-
-                if ($referenceTime === null) {
-                    $dateNow = new DateTime('now', $timeZone);
-                } else {
-                    $dateNow = $this->normalizeDatetimeValue($referenceTime);
-                    $dateNow->setTimezone($timeZone);
-                }
-
-                $dateThen = $timestamp->setTimezone($timeZone);
-
-                $interval = $dateThen->diff($dateNow);
+                $dateNow = $this->normalizeDatetimeValue($referenceTime);
+                $dateNow->setTimezone($timeZone);
             }
+
+            $dateThen = $timestamp->setTimezone($timeZone);
+            $interval = $dateThen->diff($dateNow);
         }
 
         if ($interval->invert) {
@@ -1213,7 +1245,8 @@ public function asPercent($value, $decimals = null, $options = [], $textOptions
      * If not given, the number of digits depends in the input value and is determined based on
      * `NumberFormatter::MIN_FRACTION_DIGITS` and `NumberFormatter::MAX_FRACTION_DIGITS`, which can be configured
      * using [[$numberFormatterOptions]].
-     * If the [PHP intl extension](https://secure.php.net/manual/en/book.intl.php) is not available, the default value depends on your PHP configuration.
+     * If the [PHP intl extension](https://secure.php.net/manual/en/book.intl.php) is not available, the default value
+     * depends on your PHP configuration.
      * If you want consistent behavior between environments where intl is available and not, you should explicitly
      * specify a value here.
      * @param array $options optional configuration for the number formatter. This parameter will be merged with [[numberFormatterOptions]].
@@ -1497,7 +1530,7 @@ public function asSize($value, $decimals = null, $options = [], $textOptions = [
      */
     public function asLength($value, $decimals = null, $numberOptions = [], $textOptions = [])
     {
-        return $this->formatUnit(self::UNIT_LENGTH, self::FORMAT_WIDTH_LONG, $value, null, null, $decimals, $numberOptions, $textOptions);
+        return $this->formatUnit(self::UNIT_LENGTH, self::FORMAT_WIDTH_LONG, $value, $decimals, $numberOptions, $textOptions);
     }
 
     /**
@@ -1520,7 +1553,7 @@ public function asLength($value, $decimals = null, $numberOptions = [], $textOpt
      */
     public function asShortLength($value, $decimals = null, $options = [], $textOptions = [])
     {
-        return $this->formatUnit(self::UNIT_LENGTH, self::FORMAT_WIDTH_SHORT, $value, null, null, $decimals, $options, $textOptions);
+        return $this->formatUnit(self::UNIT_LENGTH, self::FORMAT_WIDTH_SHORT, $value, $decimals, $options, $textOptions);
     }
 
     /**
@@ -1540,7 +1573,7 @@ public function asShortLength($value, $decimals = null, $options = [], $textOpti
      */
     public function asWeight($value, $decimals = null, $options = [], $textOptions = [])
     {
-        return $this->formatUnit(self::UNIT_WEIGHT, self::FORMAT_WIDTH_LONG, $value, null, null, $decimals, $options, $textOptions);
+        return $this->formatUnit(self::UNIT_WEIGHT, self::FORMAT_WIDTH_LONG, $value, $decimals, $options, $textOptions);
     }
 
     /**
@@ -1562,38 +1595,29 @@ public function asWeight($value, $decimals = null, $options = [], $textOptions =
      */
     public function asShortWeight($value, $decimals = null, $options = [], $textOptions = [])
     {
-        return $this->formatUnit(self::UNIT_WEIGHT, self::FORMAT_WIDTH_SHORT, $value, null, null, $decimals, $options, $textOptions);
+        return $this->formatUnit(self::UNIT_WEIGHT, self::FORMAT_WIDTH_SHORT, $value, $decimals, $options, $textOptions);
     }
 
     /**
      * @param string $unitType one of [[UNIT_WEIGHT]], [[UNIT_LENGTH]]
      * @param string $unitFormat one of [[FORMAT_WIDTH_SHORT]], [[FORMAT_WIDTH_LONG]]
      * @param float|int|null $value to be formatted
-     * @param float $baseUnit unit of value as the multiplier of the smallest unit. When `null`, property [[baseUnits]]
-     * will be used to determine base unit using $unitType and $unitSystem.
-     * @param string $unitSystem either [[UNIT_SYSTEM_METRIC]] or [[UNIT_SYSTEM_IMPERIAL]]. When `null`, property [[systemOfUnits]] will be used.
-     * @param int $decimals the number of digits after the decimal point.
+     * @param int|null $decimals the number of digits after the decimal point.
      * @param array $options optional configuration for the number formatter. This parameter will be merged with [[numberFormatterOptions]].
      * @param array $textOptions optional configuration for the number formatter. This parameter will be merged with [[numberFormatterTextOptions]].
      * @return string
      * @throws InvalidConfigException when INTL is not installed or does not contain required information
      */
-    private function formatUnit($unitType, $unitFormat, $value, $baseUnit, $unitSystem, $decimals, $options, $textOptions)
+    private function formatUnit($unitType, $unitFormat, $value, $decimals, $options, $textOptions)
     {
         if ($value === null) {
             return $this->nullDisplay;
         }
-        if ($unitSystem === null) {
-            $unitSystem = $this->systemOfUnits;
-        }
-        if ($baseUnit === null) {
-            $baseUnit = $this->baseUnits[$unitType][$unitSystem];
-        }
 
-        $multipliers = array_values($this->measureUnits[$unitType][$unitSystem]);
+        $multipliers = array_values($this->measureUnits[$unitType][$this->systemOfUnits]);
 
         list($params, $position) = $this->formatNumber(
-            $this->normalizeNumericValue($value) * $baseUnit,
+            $this->normalizeNumericValue($value) * $this->baseUnits[$unitType][$this->systemOfUnits],
             $decimals,
             null,
             $multipliers,
@@ -1601,7 +1625,7 @@ private function formatUnit($unitType, $unitFormat, $value, $baseUnit, $unitSyst
             $textOptions
         );
 
-        $message = $this->getUnitMessage($unitType, $unitFormat, $unitSystem, $position);
+        $message = $this->getUnitMessage($unitType, $unitFormat, $this->systemOfUnits, $position);
 
         return (new \MessageFormatter($this->locale, $message))->format([
             '0' => $params['nFormatted'],
@@ -1638,7 +1662,10 @@ private function getUnitMessage($unitType, $unitFormat, $system, $position)
 
         $unitBundle = $this->_resourceBundle[$bundleKey][$unitType][$unitNames[$position]];
         if ($unitBundle === null) {
-            throw new InvalidConfigException('Current ICU data version does not contain information about unit type "' . $unitType . '" and unit measure "' . $unitNames[$position] . '". Check system requirements.');
+            throw new InvalidConfigException(
+                'Current ICU data version does not contain information about unit type "' . $unitType
+                . '" and unit measure "' . $unitNames[$position] . '". Check system requirements.'
+            );
         }
 
         $message = [];
@@ -1656,7 +1683,7 @@ private function getUnitMessage($unitType, $unitFormat, $system, $position)
      * Given the value in bytes formats number part of the human readable form.
      *
      * @param string|int|float $value value in bytes to be formatted.
-     * @param int $decimals the number of digits after the decimal point
+     * @param int|null $decimals the number of digits after the decimal point
      * @param int $maxPosition maximum internal position of size unit, ignored if $formatBase is an array
      * @param array|int $formatBase the base at which each next unit is calculated, either 1000 or 1024, or an array
      * @param array $options optional configuration for the number formatter. This parameter will be merged with [[numberFormatterOptions]].
@@ -1705,7 +1732,7 @@ protected function formatNumber($value, $decimals, $maxPosition, $formatBase, $o
         $oldThousandSeparator = $this->thousandSeparator;
         $this->thousandSeparator = '';
         if ($this->_intlLoaded && !isset($options[NumberFormatter::GROUPING_USED])) {
-            $options[NumberFormatter::GROUPING_USED] = false;
+            $options[NumberFormatter::GROUPING_USED] = 0;
         }
         // format the size value
         $params = [
@@ -1766,19 +1793,19 @@ protected function createNumberFormatter($style, $decimals = null, $options = []
         $formatter = new NumberFormatter($this->locale, $style);
 
         // set text attributes
-        foreach ($this->numberFormatterTextOptions as $name => $attribute) {
-            $formatter->setTextAttribute($name, $attribute);
+        foreach ($this->numberFormatterTextOptions as $attribute => $value) {
+            $this->setFormatterTextAttribute($formatter, $attribute, $value, 'numberFormatterTextOptions', 'numberFormatterOptions');
         }
-        foreach ($textOptions as $name => $attribute) {
-            $formatter->setTextAttribute($name, $attribute);
+        foreach ($textOptions as $attribute => $value) {
+            $this->setFormatterTextAttribute($formatter, $attribute, $value, '$textOptions', '$options');
         }
 
         // set attributes
-        foreach ($this->numberFormatterOptions as $name => $value) {
-            $formatter->setAttribute($name, $value);
+        foreach ($this->numberFormatterOptions as $attribute => $value) {
+            $this->setFormatterIntAttribute($formatter, $attribute, $value, 'numberFormatterOptions', 'numberFormatterTextOptions');
         }
-        foreach ($options as $name => $value) {
-            $formatter->setAttribute($name, $value);
+        foreach ($options as $attribute => $value) {
+            $this->setFormatterIntAttribute($formatter, $attribute, $value, '$options', '$textOptions');
         }
         if ($decimals !== null) {
             $formatter->setAttribute(NumberFormatter::MAX_FRACTION_DIGITS, $decimals);
@@ -1796,13 +1823,91 @@ protected function createNumberFormatter($style, $decimals = null, $options = []
             $formatter->setSymbol(NumberFormatter::GROUPING_SEPARATOR_SYMBOL, $this->thousandSeparator);
             $formatter->setSymbol(NumberFormatter::MONETARY_GROUPING_SEPARATOR_SYMBOL, $this->thousandSeparator);
         }
-        foreach ($this->numberFormatterSymbols as $name => $symbol) {
-            $formatter->setSymbol($name, $symbol);
+        foreach ($this->numberFormatterSymbols as $symbol => $value) {
+            $this->setFormatterSymbol($formatter, $symbol, $value, 'numberFormatterSymbols');
         }
 
         return $formatter;
     }
 
+    /**
+     * @param NumberFormatter $formatter
+     * @param mixed $attribute
+     * @param mixed $value
+     * @param string $source
+     * @param string $alternative
+     */
+    private function setFormatterTextAttribute($formatter, $attribute, $value, $source, $alternative)
+    {
+        if (!is_int($attribute)) {
+            throw new InvalidArgumentException(
+                "The $source array keys must be integers recognizable by NumberFormatter::setTextAttribute(). \""
+                . gettype($attribute) . '" provided instead.'
+            );
+        }
+        if (!is_string($value)) {
+            if (is_int($value)) {
+                throw new InvalidArgumentException(
+                    "The $source array values must be strings. Did you mean to use $alternative?"
+                );
+            }
+            throw new InvalidArgumentException(
+                "The $source array values must be strings. \"" . gettype($value) . '" provided instead.'
+            );
+        }
+        $formatter->setTextAttribute($attribute, $value);
+    }
+
+    /**
+     * @param NumberFormatter $formatter
+     * @param mixed $symbol
+     * @param mixed $value
+     * @param string $source
+     */
+    private function setFormatterSymbol($formatter, $symbol, $value, $source)
+    {
+        if (!is_int($symbol)) {
+            throw new InvalidArgumentException(
+                "The $source array keys must be integers recognizable by NumberFormatter::setSymbol(). \""
+                . gettype($symbol) . '" provided instead.'
+            );
+        }
+        if (!is_string($value)) {
+            throw new InvalidArgumentException(
+                "The $source array values must be strings. \"" . gettype($value) . '" provided instead.'
+            );
+        }
+        $formatter->setSymbol($symbol, $value);
+    }
+
+    /**
+     * @param NumberFormatter $formatter
+     * @param mixed $attribute
+     * @param mixed $value
+     * @param string $source
+     * @param string $alternative
+     */
+    private function setFormatterIntAttribute($formatter, $attribute, $value, $source, $alternative)
+    {
+        if (!is_int($attribute)) {
+            throw new InvalidArgumentException(
+                "The $source array keys must be integers recognizable by NumberFormatter::setAttribute(). \""
+                . gettype($attribute) . '" provided instead.'
+            );
+        }
+        if (!is_int($value)) {
+            if (is_string($value)) {
+                throw new InvalidArgumentException(
+                    "The $source array values must be integers. Did you mean to use $alternative?"
+                );
+            }
+            throw new InvalidArgumentException(
+                "The $source array values must be integers. \"" . gettype($value) . '" provided instead.'
+            );
+        }
+        $formatter->setAttribute($attribute, $value);
+    }
+
     /**
      * Checks if string representations of given value and its normalized version are different.
      * @param string|float|int $value
@@ -1881,7 +1986,7 @@ protected function normalizeNumericStringValue($value)
      * to the defined decimal digits.
      *
      * @param string|int|float $value the value to be formatted.
-     * @param int $decimals the number of digits after the decimal point. The default value is `2`.
+     * @param int|null $decimals the number of digits after the decimal point. The default value is `2`.
      * @return string the formatted result.
      * @see decimalSeparator
      * @see thousandSeparator
diff --git a/framework/i18n/GettextMessageSource.php b/framework/i18n/GettextMessageSource.php
index 251bd7fb5ad..d96fb5290f0 100644
--- a/framework/i18n/GettextMessageSource.php
+++ b/framework/i18n/GettextMessageSource.php
@@ -113,7 +113,7 @@ protected function loadFallbackMessages($category, $fallbackLanguage, $messages,
         } elseif (!empty($fallbackMessages)) {
             foreach ($fallbackMessages as $key => $value) {
                 if (!empty($value) && empty($messages[$key])) {
-                    $messages[$key] = $fallbackMessages[$key];
+                    $messages[$key] = $value;
                 }
             }
         }
diff --git a/framework/i18n/PhpMessageSource.php b/framework/i18n/PhpMessageSource.php
index 975846874ab..4bcfcd9adff 100644
--- a/framework/i18n/PhpMessageSource.php
+++ b/framework/i18n/PhpMessageSource.php
@@ -115,7 +115,7 @@ protected function loadFallbackMessages($category, $fallbackLanguage, $messages,
         } elseif (!empty($fallbackMessages)) {
             foreach ($fallbackMessages as $key => $value) {
                 if (!empty($value) && empty($messages[$key])) {
-                    $messages[$key] = $fallbackMessages[$key];
+                    $messages[$key] = $value;
                 }
             }
         }
diff --git a/framework/log/DbTarget.php b/framework/log/DbTarget.php
index 343ade6bb7f..bef9c50c771 100644
--- a/framework/log/DbTarget.php
+++ b/framework/log/DbTarget.php
@@ -78,7 +78,7 @@ public function export()
             list($text, $level, $category, $timestamp) = $message;
             if (!is_string($text)) {
                 // exceptions may not be serializable if in the call stack somewhere is a Closure
-                if ($text instanceof \Throwable || $text instanceof \Exception) {
+                if ($text instanceof \Exception || $text instanceof \Throwable) {
                     $text = (string) $text;
                 } else {
                     $text = VarDumper::export($text);
diff --git a/framework/log/Logger.php b/framework/log/Logger.php
index 76e993d3061..42d71cc988d 100644
--- a/framework/log/Logger.php
+++ b/framework/log/Logger.php
@@ -59,7 +59,7 @@ class Logger extends Component
      */
     const LEVEL_INFO = 0x04;
     /**
-     * Tracing message level. An tracing message is one that reveals the code execution flow.
+     * Tracing message level. A tracing message is one that reveals the code execution flow.
      */
     const LEVEL_TRACE = 0x08;
     /**
@@ -67,13 +67,13 @@ class Logger extends Component
      */
     const LEVEL_PROFILE = 0x40;
     /**
-     * Profiling message level. This indicates the message is for profiling purpose. It marks the
-     * beginning of a profiling block.
+     * Profiling message level. This indicates the message is for profiling purpose. It marks the beginning
+     * of a profiling block.
      */
     const LEVEL_PROFILE_BEGIN = 0x50;
     /**
-     * Profiling message level. This indicates the message is for profiling purpose. It marks the
-     * end of a profiling block.
+     * Profiling message level. This indicates the message is for profiling purpose. It marks the end
+     * of a profiling block.
      */
     const LEVEL_PROFILE_END = 0x60;
 
@@ -95,7 +95,7 @@ class Logger extends Component
     public $messages = [];
     /**
      * @var int how many messages should be logged before they are flushed from memory and sent to targets.
-     * Defaults to 1000, meaning the [[flush]] method will be invoked once every 1000 messages logged.
+     * Defaults to 1000, meaning the [[flush()]] method will be invoked once every 1000 messages logged.
      * Set this property to be 0 if you don't want to flush messages until the application terminates.
      * This property mainly affects how much memory will be taken by the logged messages.
      * A smaller value means less memory, but will increase the execution time due to the overhead of [[flush()]].
@@ -108,7 +108,7 @@ class Logger extends Component
      */
     public $traceLevel = 0;
     /**
-     * @var Dispatcher the message dispatcher
+     * @var Dispatcher the message dispatcher.
      */
     public $dispatcher;
     /**
@@ -116,6 +116,15 @@ class Logger extends Component
      * @since 2.0.41
      */
     public $dbEventNames = ['yii\db\Command::query', 'yii\db\Command::execute'];
+    /**
+     * @var bool whether the profiling-aware mode should be switched on.
+     * If on, [[flush()]] makes sure that profiling blocks are flushed in pairs. In case that any dangling messages are
+     * detected these are kept for the next flush interval to find their pair. To prevent memory leaks, when number of
+     * dangling messages reaches flushInterval value, logger flushes them immediately and triggers a warning.
+     * Keep in mind that profiling-aware mode is more time and memory consuming.
+     * @since 2.0.43
+     */
+    public $profilingAware = false;
 
 
     /**
@@ -140,7 +149,7 @@ public function init()
      * @param string|array $message the message to be logged. This can be a simple string or a more
      * complex data structure that will be handled by a [[Target|log target]].
      * @param int $level the level of the message. This must be one of the following:
-     * `Logger::LEVEL_ERROR`, `Logger::LEVEL_WARNING`, `Logger::LEVEL_INFO`, `Logger::LEVEL_TRACE`,
+     * `Logger::LEVEL_ERROR`, `Logger::LEVEL_WARNING`, `Logger::LEVEL_INFO`, `Logger::LEVEL_TRACE`, `Logger::LEVEL_PROFILE`,
      * `Logger::LEVEL_PROFILE_BEGIN`, `Logger::LEVEL_PROFILE_END`.
      * @param string $category the category of the message.
      */
@@ -162,7 +171,13 @@ public function log($message, $level, $category = 'application')
                 }
             }
         }
-        $this->messages[] = [$message, $level, $category, $time, $traces, memory_get_usage()];
+        $data = [$message, $level, $category, $time, $traces, memory_get_usage()];
+        if ($this->profilingAware && in_array($level, [self::LEVEL_PROFILE_BEGIN, self::LEVEL_PROFILE_END])) {
+            $this->messages[($level == self::LEVEL_PROFILE_BEGIN ? 'begin-' : 'end-') . md5(json_encode($message))] = $data;
+        } else {
+            $this->messages[] = $data;
+        }
+
         if ($this->flushInterval > 0 && count($this->messages) >= $this->flushInterval) {
             $this->flush();
         }
@@ -174,10 +189,40 @@ public function log($message, $level, $category = 'application')
      */
     public function flush($final = false)
     {
-        $messages = $this->messages;
-        // https://github.com/yiisoft/yii2/issues/5619
-        // new messages could be logged while the existing ones are being handled by targets
-        $this->messages = [];
+        if ($this->profilingAware) {
+            $keep = [];
+            $messages = [];
+            foreach ($this->messages as $index => $message) {
+                if (is_int($index)) {
+                    $messages[] = $message;
+                } else {
+                    if (strpos($index, 'begin-') === 0) {
+                        $oppositeProfile = 'end-' . substr($index, 6);
+                    } else {
+                        $oppositeProfile = 'begin-' . substr($index, 4);
+                    }
+                    if (array_key_exists($oppositeProfile, $this->messages)) {
+                        $messages[] = $message;
+                    } else {
+                        $keep[$index] = $message;
+                    }
+                }
+            }
+            if ($this->flushInterval > 0 && count($keep) >= $this->flushInterval) {
+                $this->messages = [];
+                $this->log(
+                    'Number of dangling profiling block messages reached flushInterval value and therefore these were flushed. Please consider setting higher flushInterval value or making profiling blocks shorter.',
+                    self::LEVEL_WARNING
+                );
+                $messages = array_merge($messages, array_values($keep));
+            } else {
+                $this->messages = $keep;
+            }
+        } else {
+            $messages = $this->messages;
+            $this->messages = [];
+        }
+
         if ($this->dispatcher instanceof Dispatcher) {
             $this->dispatcher->dispatch($messages, $final);
         }
@@ -218,11 +263,15 @@ public function getProfiling($categories = [], $excludeCategories = [])
             return $timings;
         }
 
-        foreach ($timings as $i => $timing) {
+        foreach ($timings as $outerIndex => $outerTimingItem) {
+            $currentIndex = $outerIndex;
             $matched = empty($categories);
             foreach ($categories as $category) {
                 $prefix = rtrim($category, '*');
-                if (($timing['category'] === $category || $prefix !== $category) && strpos($timing['category'], $prefix) === 0) {
+                if (
+                    ($outerTimingItem['category'] === $category || $prefix !== $category)
+                    && strpos($outerTimingItem['category'], $prefix) === 0
+                ) {
                     $matched = true;
                     break;
                 }
@@ -231,8 +280,12 @@ public function getProfiling($categories = [], $excludeCategories = [])
             if ($matched) {
                 foreach ($excludeCategories as $category) {
                     $prefix = rtrim($category, '*');
-                    foreach ($timings as $i => $timing) {
-                        if (($timing['category'] === $category || $prefix !== $category) && strpos($timing['category'], $prefix) === 0) {
+                    foreach ($timings as $innerIndex => $innerTimingItem) {
+                        $currentIndex = $innerIndex;
+                        if (
+                            ($innerTimingItem['category'] === $category || $prefix !== $category)
+                            && strpos($innerTimingItem['category'], $prefix) === 0
+                        ) {
                             $matched = false;
                             break;
                         }
@@ -241,7 +294,7 @@ public function getProfiling($categories = [], $excludeCategories = [])
             }
 
             if (!$matched) {
-                unset($timings[$i]);
+                unset($timings[$currentIndex]);
             }
         }
 
diff --git a/framework/log/SyslogTarget.php b/framework/log/SyslogTarget.php
index 4d766fa4155..6a9b0cfbb7d 100644
--- a/framework/log/SyslogTarget.php
+++ b/framework/log/SyslogTarget.php
@@ -84,7 +84,7 @@ public function formatMessage($message)
         $level = Logger::getLevelName($level);
         if (!is_string($text)) {
             // exceptions may not be serializable if in the call stack somewhere is a Closure
-            if ($text instanceof \Throwable || $text instanceof \Exception) {
+            if ($text instanceof \Exception || $text instanceof \Throwable) {
                 $text = (string) $text;
             } else {
                 $text = VarDumper::export($text);
diff --git a/framework/log/Target.php b/framework/log/Target.php
index 2a192e80d55..d57c2614ec9 100644
--- a/framework/log/Target.php
+++ b/framework/log/Target.php
@@ -11,7 +11,6 @@
 use yii\base\Component;
 use yii\base\InvalidConfigException;
 use yii\helpers\ArrayHelper;
-use yii\helpers\StringHelper;
 use yii\helpers\VarDumper;
 use yii\web\Request;
 
@@ -297,7 +296,7 @@ public function formatMessage($message)
         $level = Logger::getLevelName($level);
         if (!is_string($text)) {
             // exceptions may not be serializable if in the call stack somewhere is a Closure
-            if ($text instanceof \Throwable || $text instanceof \Exception) {
+            if ($text instanceof \Exception || $text instanceof \Throwable) {
                 $text = (string) $text;
             } else {
                 $text = VarDumper::export($text);
diff --git a/framework/mail/BaseMailer.php b/framework/mail/BaseMailer.php
index c4546fbd1f4..63b6904ee52 100644
--- a/framework/mail/BaseMailer.php
+++ b/framework/mail/BaseMailer.php
@@ -343,7 +343,7 @@ public function generateMessageFileName()
     {
         $time = microtime(true);
 
-        return date('Ymd-His-', $time) . sprintf('%04d', (int) (($time - (int) $time) * 10000)) . '-' . sprintf('%04d', mt_rand(0, 10000)) . '.eml';
+        return date('Ymd-His-', $time) . sprintf('%04d', (int) (($time - (int) $time) * 10000)) . '-' . sprintf('%04d', random_int(0, 10000)) . '.eml';
     }
 
     /**
diff --git a/framework/messages/hr/yii.php b/framework/messages/hr/yii.php
index 58265276442..772ef9493e4 100644
--- a/framework/messages/hr/yii.php
+++ b/framework/messages/hr/yii.php
@@ -28,7 +28,7 @@
     'Are you sure you want to delete this item' => 'Želiš li to obrisati?',
     'Delete' => 'Obrisati',
     'Error' => 'Pogreška',
-    'File upload failed.' => 'Upload podatka nije uspio.',
+    'File upload failed.' => 'Upload datoteke nije uspio.',
     'Home' => 'Home',
     'Invalid data received for parameter "{param}".' => 'Nevažeći podaci primljeni za parametar "{param}"',
     'Login Required' => 'Prijava potrebna',
@@ -39,14 +39,14 @@
     'No help for unknown sub-command "{command}".' => 'Nema pomoći za nepoznatu pod-naredbu "{command}"',
     'No results found.' => 'Nema rezultata.',
     'Only files with these MIME types are allowed: {mimeTypes}.' => 'Samo datoteke s ovim MIME vrstama su dopuštene: {mimeTypes}.',
-    'Only files with these extensions are allowed: {extensions}.' => 'Samo datoteke s ovim eksentinzijama su dopuštene:: {extensions}',
+    'Only files with these extensions are allowed: {extensions}.' => 'Samo datoteke s ovim ekstenzijama su dopuštene: {extensions}',
     'Page not found.' => 'Stranica nije pronađena.',
     'Please fix the following errors:' => 'Molimo vas ispravite pogreške:',
     'Please upload a file.' => 'Molimo vas da uploadate datoteku.',
     'Showing <b>{begin, number}-{end, number}</b> of <b>{totalCount, number}</b> {totalCount, plural, one{item} other{items}}.' => 'Prikazuj  <b>{begin, number}-{end, number}</b> od <b>{totalCount, number}</b> {totalCount, plural, one{stavka} few{stavke} many{stavki} other{stavki}}.',
-    'The file "{file}" is not an image.' => 'Podatak "{file}" nije slika.',
-    'The file "{file}" is too big. Its size cannot exceed {formattedLimit}.' => 'Podatak "{file}" je prevelik. Ne smije biti veći od {formattedLimit}.',
-    'The file "{file}" is too small. Its size cannot be smaller than {formattedLimit}.' => 'Podatak "{file}" je premalen. Ne smije biti manji od {formattedLimit}.',
+    'The file "{file}" is not an image.' => 'Datoteka "{file}" nije slika.',
+    'The file "{file}" is too big. Its size cannot exceed {formattedLimit}.' => 'Datoteka "{file}" je prevelika. Ne smije biti veća od {formattedLimit}.',
+    'The file "{file}" is too small. Its size cannot be smaller than {formattedLimit}.' => 'Datoteka "{file}" je premalena. Ne smije biti manja od {formattedLimit}.',
     'The format of {attribute} is invalid.' => 'Format od {attribute} je nevažeći.',
     'The image "{file}" is too large. The height cannot be larger than {limit, number} {limit, plural, one{pixel} other{pixels}}.' => 'Slika "{file}" je prevelika. Visina slike ne smije biti veća od {limit, number} {limit, plural, one{piksel} other{piksela}}.',
     'The image "{file}" is too large. The width cannot be larger than {limit, number} {limit, plural, one{pixel} other{pixels}}.' => 'Slika "{file}" je prevelika. Širina slike ne smije biti veća od {limit, number} {limit, plural, one{piksel} other{piksela}}.',
@@ -54,14 +54,14 @@
     'The image "{file}" is too small. The width cannot be smaller than {limit, number} {limit, plural, one{pixel} other{pixels}}.' => 'Slika "{file}" je premalena.  Širina slike ne smije biti manja od {limit, number} {limit, plural, one{piksel} other{piksela}}.',
     'The verification code is incorrect.' => 'Kod za provjeru nije točan.',
     'Total <b>{count, number}</b> {count, plural, one{item} other{items}}.' => 'Ukupno <b>{count, number}</b> {count, plural, =1{stavka} one{# stavka} few{# stavke} many{# stavki} other{# stavki}}.',
-    'Unable to verify your data submission.' => 'Nije moguće provjeriti podnesene podatke.',
+    'Unable to verify your data submission.' => 'Nije moguće provjeriti poslane podatke.',
     'Unknown command "{command}".' => 'Nepoznata naredba "{command}".',
     'Unknown option: --{name}' => 'Nepoznata opcija: --{name}',
     'Update' => 'Uredi',
     'View' => 'Pregled',
     'Yes' => 'Da',
     'You are not allowed to perform this action.' => 'Nije vam dopušteno obavljati tu radnju.',
-    'You can upload at most {limit, number} {limit, plural, one{file} other{files}}.' => 'Najviše možete uploadat {limit, number} {limit, plural, one{fajl} other{fajlova}}.',
+    'You can upload at most {limit, number} {limit, plural, one{file} other{files}}.' => 'Najviše možete uploadat {limit, number} {limit, plural, one{datoteku} few{datoteke} other{datoteka}}.',
     'in {delta, plural, =1{a day} other{# days}}' => 'u {delta, plural, =1{dan} one{# dan} few{# dana} many{# dana} other{# dana}}',
     'in {delta, plural, =1{a minute} other{# minutes}}' => 'u {delta, plural, =1{minuta} one{# minuta} few{# minute} many{# minuta} other{# minuta}}',
     'in {delta, plural, =1{a month} other{# months}}' => 'u {delta, plural, =1{mjesec} one{# mjesec} few{# mjeseca} many{# mjeseci} other{# mjeseci}}',
diff --git a/framework/mutex/PgsqlMutex.php b/framework/mutex/PgsqlMutex.php
index 8c38c75f46f..900ac5ff391 100644
--- a/framework/mutex/PgsqlMutex.php
+++ b/framework/mutex/PgsqlMutex.php
@@ -7,7 +7,6 @@
 
 namespace yii\mutex;
 
-use yii\base\InvalidArgumentException;
 use yii\base\InvalidConfigException;
 
 /**
diff --git a/framework/requirements/views/console/index.php b/framework/requirements/views/console/index.php
index d1559b68bcf..68c4cb543e1 100644
--- a/framework/requirements/views/console/index.php
+++ b/framework/requirements/views/console/index.php
@@ -23,7 +23,6 @@
 foreach ($requirements as $key => $requirement) {
     if ($requirement['condition']) {
         echo $requirement['name'] . ": OK\n";
-        echo "\n";
     } else {
         echo $requirement['name'] . ': ' . ($requirement['mandatory'] ? 'FAILED!!!' : 'WARNING!!!') . "\n";
         echo 'Required by: ' . strip_tags($requirement['by']) . "\n";
@@ -31,8 +30,8 @@
         if (!empty($memo)) {
             echo 'Memo: ' . strip_tags($requirement['memo']) . "\n";
         }
-        echo "\n";
     }
+    echo "\n";
 }
 
 $summaryString = 'Errors: ' . $summary['errors'] . '   Warnings: ' . $summary['warnings'] . '   Total checks: ' . $summary['total'];
diff --git a/framework/test/FixtureTrait.php b/framework/test/FixtureTrait.php
index e5dc9b09a35..7a72610da55 100644
--- a/framework/test/FixtureTrait.php
+++ b/framework/test/FixtureTrait.php
@@ -43,12 +43,12 @@ trait FixtureTrait
      * ```php
      * [
      *     // anonymous fixture
-     *     PostFixture::className(),
+     *     PostFixture::class,
      *     // "users" fixture
-     *     'users' => UserFixture::className(),
+     *     'users' => UserFixture::class,
      *     // "cache" fixture with configuration
      *     'cache' => [
-     *          'class' => CacheFixture::className(),
+     *          'class' => CacheFixture::class,
      *          'host' => 'xxx',
      *     ],
      * ]
diff --git a/framework/validators/EmailValidator.php b/framework/validators/EmailValidator.php
index cfb6a32e5b5..984d00d4510 100644
--- a/framework/validators/EmailValidator.php
+++ b/framework/validators/EmailValidator.php
@@ -63,6 +63,12 @@ class EmailValidator extends Validator
      * otherwise an exception would be thrown.
      */
     public $enableIDN = false;
+    /**
+     * @var bool whether [[enableIDN]] should apply to the local part of the email (left side
+     * of the `@`). Only applies if [[enableIDN]] is `true`.
+     * @since 2.0.43
+     */
+    public $enableLocalIDN = true;
 
 
     /**
@@ -90,7 +96,9 @@ protected function validateValue($value)
             $valid = false;
         } else {
             if ($this->enableIDN) {
-                $matches['local'] = $this->idnToAsciiWithFallback($matches['local']);
+                if ($this->enableLocalIDN) {
+                    $matches['local'] = $this->idnToAsciiWithFallback($matches['local']);
+                }
                 $matches['domain'] = $this->idnToAscii($matches['domain']);
                 $value = $matches['name'] . $matches['open'] . $matches['local'] . '@' . $matches['domain'] . $matches['close'];
             }
diff --git a/framework/validators/ExistValidator.php b/framework/validators/ExistValidator.php
index 8bbcd69195e..679bf57d26b 100644
--- a/framework/validators/ExistValidator.php
+++ b/framework/validators/ExistValidator.php
@@ -131,15 +131,13 @@ private function checkTargetRelationExistence($model, $attribute)
             $relationQuery->andWhere($this->filter);
         }
 
-        if ($this->forceMasterDb && method_exists($model::getDb(), 'useMaster')) {
-            $model::getDb()->useMaster(function() use ($relationQuery, &$exists) {
-                $exists = $relationQuery->exists();
-            });
+        $connection = $model::getDb();
+        if ($this->forceMasterDb && method_exists($connection, 'useMaster')) {
+            $exists = $connection->useMaster([$relationQuery, 'exists']);
         } else {
             $exists = $relationQuery->exists();
         }
 
-
         if (!$exists) {
             $this->addError($model, $attribute, $this->message);
         }
@@ -169,7 +167,7 @@ private function checkTargetAttributeExistence($model, $attribute)
             $conditions[] = $params;
         }
 
-        $targetClass = $this->targetClass === null ? get_class($model) : $this->targetClass;
+        $targetClass = $this->getTargetClass($model);
         $query = $this->createQuery($targetClass, $conditions);
 
         if (!$this->valueExists($targetClass, $query, $model->$attribute)) {
@@ -246,9 +244,9 @@ protected function validateValue($value)
     }
 
     /**
-     * Check whether value exists in target table
+     * Check whether value exists in target table.
      *
-     * @param string $targetClass
+     * @param string $targetClass the model
      * @param QueryInterface $query
      * @param mixed $value the value want to be checked
      * @return bool
@@ -259,8 +257,8 @@ private function valueExists($targetClass, $query, $value)
         $exists = false;
 
         if ($this->forceMasterDb && method_exists($db, 'useMaster')) {
-            $db->useMaster(function ($db) use ($query, $value, &$exists) {
-                $exists = $this->queryValueExists($query, $value);
+            $exists = $db->useMaster(function () use ($query, $value) {
+                return $this->queryValueExists($query, $value);
             });
         } else {
             $exists = $this->queryValueExists($query, $value);
@@ -271,7 +269,7 @@ private function valueExists($targetClass, $query, $value)
 
 
     /**
-     * Run query to check if value exists
+     * Run query to check if value exists.
      *
      * @param QueryInterface $query
      * @param mixed $value the value to be checked
@@ -280,7 +278,7 @@ private function valueExists($targetClass, $query, $value)
     private function queryValueExists($query, $value)
     {
         if (is_array($value)) {
-            return $query->count("DISTINCT [[$this->targetAttribute]]") == count($value) ;
+            return $query->count("DISTINCT [[$this->targetAttribute]]") == count(array_unique($value));
         }
         return $query->exists();
     }
diff --git a/framework/web/Cookie.php b/framework/web/Cookie.php
index 2c0d909a32f..84b694b4768 100644
--- a/framework/web/Cookie.php
+++ b/framework/web/Cookie.php
@@ -33,6 +33,16 @@ class Cookie extends \yii\base\BaseObject
      * @see $sameSite
      */
     const SAME_SITE_STRICT = 'Strict';
+    /**
+     * SameSite policy None disables the SameSite policy so cookies will be sent in all contexts,
+     * i.e in responses to both first-party and cross-origin requests.
+     * E.g. a POST request from https://otherdomain.com to https://yourdomain.com will include the cookie.
+     * Note: If `sameSite` is set to None, the `secure` attribute must be set to `true` (otherwise the cookie will be blocked by the browser).
+     * @see $sameSite
+     * @see $secure
+     * @since 2.0.43
+     */
+    const SAME_SITE_NONE = 'None';
 
     /**
      * @var string name of the cookie
@@ -68,7 +78,7 @@ class Cookie extends \yii\base\BaseObject
     /**
      * @var string SameSite prevents the browser from sending this cookie along with cross-site requests.
      *
-     * See https://owasp.org/www-community/SameSite for more information about sameSite.
+     * See https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite for more information about sameSite.
      *
      * @since 2.0.21
      */
diff --git a/framework/web/ErrorHandler.php b/framework/web/ErrorHandler.php
index 8c9ee2728f9..0d573ad7927 100644
--- a/framework/web/ErrorHandler.php
+++ b/framework/web/ErrorHandler.php
@@ -180,7 +180,7 @@ protected function convertExceptionToArray($exception)
      */
     public function htmlEncode($text)
     {
-        return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
+        return htmlspecialchars($text, ENT_NOQUOTES | ENT_SUBSTITUTE | ENT_HTML5, 'UTF-8');
     }
 
     /**
diff --git a/framework/web/JsExpression.php b/framework/web/JsExpression.php
index 2b8bd5650b6..83c76abf8f8 100644
--- a/framework/web/JsExpression.php
+++ b/framework/web/JsExpression.php
@@ -10,9 +10,9 @@
 use yii\base\BaseObject;
 
 /**
- * JsExpression marks a string as a JavaScript expression.
+ * `JsExpression` marks a string as a JavaScript expression.
  *
- * When using [[\yii\helpers\Json::encode()]] or [[\yii\helpers\Json::htmlEncode()]] to encode a value, JsonExpression objects
+ * When using [[\yii\helpers\Json::encode()]] or [[\yii\helpers\Json::htmlEncode()]] to encode a value, `JsExpression` objects
  * will be specially handled and encoded as a JavaScript expression instead of a string.
  *
  * @author Qiang Xue <qiang.xue@gmail.com>
@@ -43,6 +43,6 @@ public function __construct($expression, $config = [])
      */
     public function __toString()
     {
-        return $this->expression;
+        return (string) $this->expression;
     }
 }
diff --git a/framework/web/JsonParser.php b/framework/web/JsonParser.php
index d741ba73744..94353fb5626 100644
--- a/framework/web/JsonParser.php
+++ b/framework/web/JsonParser.php
@@ -33,7 +33,7 @@ class JsonParser implements RequestParserInterface
      */
     public $asArray = true;
     /**
-     * @var bool whether to throw a [[BadRequestHttpException]] if the body is invalid json
+     * @var bool whether to throw a [[BadRequestHttpException]] if the body is invalid JSON
      */
     public $throwException = true;
 
@@ -42,11 +42,16 @@ class JsonParser implements RequestParserInterface
      * Parses a HTTP request body.
      * @param string $rawBody the raw HTTP request body.
      * @param string $contentType the content type specified for the request body.
-     * @return array parameters parsed from the request body
+     * @return array|\stdClass parameters parsed from the request body
      * @throws BadRequestHttpException if the body contains invalid json and [[throwException]] is `true`.
      */
     public function parse($rawBody, $contentType)
     {
+        // converts JSONP to JSON
+        if (strpos($contentType, 'application/javascript') !== false) {
+            $rawBody = preg_filter('/(^[^{]+|[^}]+$)/', '', $rawBody);
+        }
+
         try {
             $parameters = Json::decode($rawBody, $this->asArray);
             return $parameters === null ? [] : $parameters;
diff --git a/framework/web/MultipartFormDataParser.php b/framework/web/MultipartFormDataParser.php
index c6f8c8ccaa6..9cfac9b1996 100644
--- a/framework/web/MultipartFormDataParser.php
+++ b/framework/web/MultipartFormDataParser.php
@@ -109,7 +109,7 @@ public function setUploadFileMaxSize($uploadFileMaxSize)
     public function getUploadFileMaxCount()
     {
         if ($this->_uploadFileMaxCount === null) {
-            $this->_uploadFileMaxCount = ini_get('max_file_uploads');
+            $this->_uploadFileMaxCount = (int)ini_get('max_file_uploads');
         }
 
         return $this->_uploadFileMaxCount;
diff --git a/framework/web/Request.php b/framework/web/Request.php
index 70fa32dffda..51dd502ba1b 100644
--- a/framework/web/Request.php
+++ b/framework/web/Request.php
@@ -371,10 +371,16 @@ public function getHeaders()
                     $this->_headers->add($name, $value);
                 }
             } else {
+                // ['prefix' => length]
+                $headerPrefixes = ['HTTP_' => 5, 'REDIRECT_HTTP_' => 14];
+
                 foreach ($_SERVER as $name => $value) {
-                    if (strncmp($name, 'HTTP_', 5) === 0) {
-                        $name = str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($name, 5)))));
-                        $this->_headers->add($name, $value);
+                    foreach ($headerPrefixes as $prefix => $length) {
+                        if (strncmp($name, $prefix, $length) === 0) {
+                            $name = str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($name, $length)))));
+                            $this->_headers->add($name, $value);
+                            continue 2;
+                        }
                     }
                 }
             }
@@ -1321,13 +1327,16 @@ public function getAuthCredentials()
             return [$username, $password];
         }
 
-        /*
+        /**
          * Apache with php-cgi does not pass HTTP Basic authentication to PHP by default.
-         * To make it work, add the following line to to your .htaccess file:
+         * To make it work, add one of the following lines to to your .htaccess file:
          *
+         * SetEnvIf Authorization .+ HTTP_AUTHORIZATION=$0
+         * --OR--
          * RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
          */
-        $auth_token = $this->getHeaders()->get('HTTP_AUTHORIZATION') ?: $this->getHeaders()->get('REDIRECT_HTTP_AUTHORIZATION');
+        $auth_token = $this->getHeaders()->get('Authorization');
+
         if ($auth_token !== null && strncasecmp($auth_token, 'basic', 5) === 0) {
             $parts = array_map(function ($value) {
                 return strlen($value) === 0 ? null : $value;
diff --git a/framework/web/Session.php b/framework/web/Session.php
index 03d4ece7c63..a7de39f1824 100644
--- a/framework/web/Session.php
+++ b/framework/web/Session.php
@@ -105,7 +105,7 @@ class Session extends Component implements \IteratorAggregate, \ArrayAccess, \Co
      */
     private $_cookieParams = ['httponly' => true];
     /**
-     * @var $frozenSessionData array|null is used for saving session between recreations due to session parameters update.
+     * @var array|null is used for saving session between recreations due to session parameters update.
      */
     private $frozenSessionData;
 
diff --git a/framework/web/User.php b/framework/web/User.php
index 5550fcd576e..1aa791b6f67 100644
--- a/framework/web/User.php
+++ b/framework/web/User.php
@@ -99,7 +99,7 @@ class User extends Component
      */
     public $identityCookie = ['name' => '_identity', 'httpOnly' => true];
     /**
-     * @var int the number of seconds in which the user will be logged out automatically if he
+     * @var int the number of seconds in which the user will be logged out automatically if the user
      * remains inactive. If this property is not set, the user will be logged out after
      * the current session expires (c.f. [[Session::timeout]]).
      * Note that this will not work if [[enableAutoLogin]] is `true`.
@@ -771,7 +771,7 @@ public function can($permissionName, $params = [], $allowCaching = true)
      * @see acceptableRedirectTypes
      * @since 2.0.8
      */
-    protected function checkRedirectAcceptable()
+    public function checkRedirectAcceptable()
     {
         $acceptableTypes = Yii::$app->getRequest()->getAcceptableContentTypes();
         if (empty($acceptableTypes) || (count($acceptableTypes) === 1 && array_keys($acceptableTypes)[0] === '*/*')) {
diff --git a/framework/widgets/ActiveField.php b/framework/widgets/ActiveField.php
index 4ffe3fc90fe..484d2998be4 100644
--- a/framework/widgets/ActiveField.php
+++ b/framework/widgets/ActiveField.php
@@ -551,7 +551,7 @@ public function radio($options = [], $enclosedByLabel = true)
 
         $this->addAriaAttributes($options);
         $this->adjustLabelFor($options);
-        
+
         if ($enclosedByLabel) {
             $this->parts['{input}'] = Html::activeRadio($this->model, $this->attribute, $options);
             $this->parts['{label}'] = '';
@@ -603,7 +603,7 @@ public function checkbox($options = [], $enclosedByLabel = true)
 
         $this->addAriaAttributes($options);
         $this->adjustLabelFor($options);
-        
+
         if ($enclosedByLabel) {
             $this->parts['{input}'] = Html::activeCheckbox($this->model, $this->attribute, $options);
             $this->parts['{label}'] = '';
@@ -756,7 +756,7 @@ public function radioList($items, $options = [])
      * the following code, assuming that `$form` is your [[ActiveForm]] instance:
      *
      * ```php
-     * $form->field($model, 'date')->widget(\yii\widgets\MaskedInput::className(), [
+     * $form->field($model, 'date')->widget(\yii\widgets\MaskedInput::class, [
      *     'mask' => '99/99/9999',
      * ]);
      * ```
diff --git a/framework/widgets/MaskedInput.php b/framework/widgets/MaskedInput.php
index 8208e139846..632af1f3daa 100644
--- a/framework/widgets/MaskedInput.php
+++ b/framework/widgets/MaskedInput.php
@@ -8,7 +8,6 @@
 namespace yii\widgets;
 
 use yii\base\InvalidConfigException;
-use yii\helpers\Html;
 use yii\helpers\Json;
 use yii\web\JsExpression;
 use yii\web\View;
@@ -33,7 +32,7 @@
  * method, for example like this:
  *
  * ```php
- * <?= $form->field($model, 'from_date')->widget(\yii\widgets\MaskedInput::className(), [
+ * <?= $form->field($model, 'from_date')->widget(\yii\widgets\MaskedInput::class, [
  *     'mask' => '999-999-9999',
  * ]) ?>
  * ```
diff --git a/phpunit.xml.dist b/phpunit.xml.dist
index 179666277ff..34e150ef8ed 100644
--- a/phpunit.xml.dist
+++ b/phpunit.xml.dist
@@ -17,16 +17,9 @@
                 <directory suffix=".php">framework/</directory>
             </whitelist>
 			<blacklist>
-				<file>framework/helpers/Json.php</file>
-				<file>framework/helpers/StringHelper.php</file>
-				<file>framework/helpers/VarDumper.php</file>
-				<file>framework/helpers/Html.php</file>
-				<file>framework/helpers/Inflector.php</file>
-				<file>framework/helpers/FileHelper.php</file>
-				<file>framework/helpers/ArrayHelper.php</file>
-				<file>framework/helpers/Console.php</file>
 				<file>framework/i18n/GettextFile.php</file>
 				<file>framework/web/ResponseFormatterInterface.php</file>
+				<file>framework/.phpstorm.meta.php</file>
 				<directory suffix="Exception.php">framework/base</directory>
 				<directory suffix=".php">framework/db/mssql</directory>
 				<directory suffix=".php">framework/bootstrap</directory>
diff --git a/tests/data/mysql.sql b/tests/data/mysql.sql
index afc8a4cc757..f4ff097347b 100644
--- a/tests/data/mysql.sql
+++ b/tests/data/mysql.sql
@@ -138,8 +138,10 @@ CREATE TABLE `negative_default_values` (
 CREATE TABLE `type` (
   `int_col` integer NOT NULL,
   `int_col2` integer DEFAULT '1',
+  `int_col3` integer(11) unsigned DEFAULT '1',
   `tinyint_col` tinyint(3) DEFAULT '1',
   `smallint_col` smallint(1) DEFAULT '1',
+  `bigint_col` bigint unsigned,
   `char_col` char(100) NOT NULL,
   `char_col2` varchar(100) DEFAULT 'something',
   `char_col3` text,
diff --git a/tests/framework/base/SecurityTest.php b/tests/framework/base/SecurityTest.php
index e84714000e0..215999c12aa 100644
--- a/tests/framework/base/SecurityTest.php
+++ b/tests/framework/base/SecurityTest.php
@@ -5,53 +5,7 @@
  * @license http://www.yiiframework.com/license/
  */
 
-namespace yii\base {
-
-    /**
-     * emulate availability of functions, to test different branches of Security class
-     * where different execution paths are chosen based on calling function_exists.
-     *
-     * This function overrides function_exists from the root namespace in yii\base.
-     * @param string $name
-     */
-    function function_exists($name)
-    {
-        if (isset(\yiiunit\framework\base\SecurityTest::$functions[$name])) {
-            return \yiiunit\framework\base\SecurityTest::$functions[$name];
-        }
-
-        return \function_exists($name);
-    }
-    /**
-     * Emulate chunked reading of fread(), to test different branches of Security class
-     * where different execution paths are chosen based on the return value of fopen/fread.
-     *
-     * This function overrides fopen and fread from the root namespace in yii\base.
-     * @param string $filename
-     * @param mixed $mode
-     */
-    function fopen($filename, $mode)
-    {
-        if (\yiiunit\framework\base\SecurityTest::$fopen !== null) {
-            return \yiiunit\framework\base\SecurityTest::$fopen;
-        }
-
-        return \fopen($filename, $mode);
-    }
-    function fread($handle, $length)
-    {
-        if (\yiiunit\framework\base\SecurityTest::$fread !== null) {
-            return \yiiunit\framework\base\SecurityTest::$fread;
-        }
-        if (\yiiunit\framework\base\SecurityTest::$fopen !== null) {
-            return $length < 8 ? \str_repeat('s', $length) : 'test1234';
-        }
-
-        return \fread($handle, $length);
-    }
-} // closing namespace yii\base;
-
-namespace yiiunit\framework\base {
+namespace yiiunit\framework\base;
 
 use yii\base\Security;
 use yiiunit\TestCase;
@@ -63,16 +17,6 @@ class SecurityTest extends TestCase
 {
     const CRYPT_VECTORS = 'old';
 
-    /**
-     * @var array set of functions for which a fake return value for `function_exists()` is provided.
-     */
-    public static $functions = [];
-    /**
-     * @var resource|false|null fake return value for fopen() in \yii\base namespace. Normal behavior if this is null.
-     */
-    public static $fopen;
-    public static $fread;
-
     /**
      * @var ExposedSecurity
      */
@@ -80,27 +24,11 @@ class SecurityTest extends TestCase
 
     protected function setUp()
     {
-        static::$functions = [];
-        static::$fopen = null;
-        static::$fread = null;
         parent::setUp();
         $this->security = new ExposedSecurity();
         $this->security->derivationIterations = 1000; // speed up test running
     }
 
-    protected function tearDown()
-    {
-        static::$functions = [];
-        static::$fopen = null;
-        static::$fread = null;
-        parent::tearDown();
-    }
-
-    private function isWindows()
-    {
-        return DIRECTORY_SEPARATOR !== '/';
-    }
-
     // Tests :
 
     public function testHashData()
@@ -893,76 +821,8 @@ public function testRandomKeyInvalidInput($input)
         $key1 = $this->security->generateRandomKey($input);
     }
 
-    /**
-     * Test the case where opening /dev/urandom fails.
-     */
-    public function testRandomKeyNoOptions()
-    {
-        static::$functions = ['random_bytes' => false, 'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => false];
-        static::$fopen = false;
-        $this->expectException('yii\base\Exception');
-        $this->expectExceptionMessage('Unable to generate a random key');
-
-        $this->security->generateRandomKey(42);
-    }
-
-    /**
-     * Test the case where reading from /dev/urandom fails.
-     */
-    public function testRandomKeyFreadFailure()
-    {
-        static::$functions = ['random_bytes' => false, 'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => false];
-        static::$fread = false;
-        $this->expectException('yii\base\Exception');
-        $this->expectExceptionMessage('Unable to generate a random key');
-
-        $this->security->generateRandomKey(42);
-    }
-
-    /**
-     * returns a set of different combinations of functions available.
-     */
-    public function randomKeyVariants()
+    public function testGenerateRandomKey()
     {
-        return [
-            [['random_bytes' => true,  'openssl_random_pseudo_bytes' => true,  'mcrypt_create_iv' => true]],
-            [['random_bytes' => true,  'openssl_random_pseudo_bytes' => true,  'mcrypt_create_iv' => false]],
-            [['random_bytes' => true,  'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => true]],
-            [['random_bytes' => true,  'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => false]],
-            [['random_bytes' => false, 'openssl_random_pseudo_bytes' => true,  'mcrypt_create_iv' => true]],
-            [['random_bytes' => false, 'openssl_random_pseudo_bytes' => true,  'mcrypt_create_iv' => false]],
-            [['random_bytes' => false, 'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => true]],
-            [['random_bytes' => false, 'openssl_random_pseudo_bytes' => false, 'mcrypt_create_iv' => false]],
-        ];
-    }
-
-    /**
-     * @dataProvider randomKeyVariants
-     * @param array $functions
-     */
-    public function testGenerateRandomKey($functions)
-    {
-        foreach ($functions as $fun => $available) {
-            if ($available && !\function_exists($fun)) {
-                $this->markTestSkipped("Can not test generateRandomKey() branch that includes $fun, because it is not available on your system.");
-            }
-        }
-        // there is no /dev/urandom on windows so we expect this to fail
-        if ($this->isWindows() && $functions['random_bytes'] === false && $functions['openssl_random_pseudo_bytes'] === false && $functions['mcrypt_create_iv'] === false) {
-            $this->expectException('yii\base\Exception');
-            $this->expectExceptionMessage('Unable to generate a random key');
-        }
-        // Function mcrypt_create_iv() is deprecated since PHP 7.1
-        if (version_compare(PHP_VERSION, '7.1.0alpha', '>=') && $functions['random_bytes'] === false && $functions['mcrypt_create_iv'] === true) {
-            if ($functions['openssl_random_pseudo_bytes'] === false) {
-                $this->markTestSkipped('Function mcrypt_create_iv() is deprecated as of PHP 7.1');
-            } elseif (!$this->security->shouldUseLibreSSL() && !$this->isWindows()) {
-                $this->markTestSkipped('Function openssl_random_pseudo_bytes need LibreSSL version >=2.1.5 or Windows system on server');
-            }
-        }
-
-        static::$functions = $functions;
-
         // test various string lengths
         for ($length = 1; $length < 64; $length++) {
             $key1 = $this->security->generateRandomKey($length);
@@ -985,16 +845,6 @@ public function testGenerateRandomKey($functions)
         $this->assertInternalType('string', $key2);
         $this->assertEquals($length, strlen($key2));
         $this->assertNotEquals($key1, $key2);
-
-        // force /dev/urandom reading loop to deal with chunked data
-        // the above test may have read everything in one run.
-        // not sure if this can happen in real life but if it does
-        // we should be prepared
-        static::$fopen = fopen('php://memory', 'rwb');
-        $length = 1024 * 1024;
-        $key1 = $this->security->generateRandomKey($length);
-        $this->assertInternalType('string', $key1);
-        $this->assertEquals($length, strlen($key1));
     }
 
     protected function randTime(Security $security, $count, $length, $message)
@@ -1010,42 +860,6 @@ protected function randTime(Security $security, $count, $length, $message)
         fwrite(STDERR, "$message: $count x $length B = $nbytes B in $milisec ms => $rate MB/s\n");
     }
 
-    public function testGenerateRandomKeySpeed()
-    {
-        self::markTestSkipped('Comment markTestSkipped in testGenerateRandomKeySpeed() in order to get RNG benchmark.');
-        $tests = [
-            "function_exists('random_bytes')",
-            "defined('OPENSSL_VERSION_TEXT') ? OPENSSL_VERSION_TEXT : null",
-            'PHP_VERSION_ID',
-            'PHP_OS',
-            "function_exists('mcrypt_create_iv') ? bin2hex(mcrypt_create_iv(4, MCRYPT_DEV_URANDOM)) : null",
-            'DIRECTORY_SEPARATOR',
-            "ini_get('open_basedir')",
-        ];
-        if ($this->isWindows()) {
-            $tests[] = "sprintf('%o', lstat(PHP_OS === 'FreeBSD' ? '/dev/random' : '/dev/urandom')['mode'] & 0170000)";
-            $tests[] = "bin2hex(file_get_contents(PHP_OS === 'FreeBSD' ? '/dev/random' : '/dev/urandom', false, null, 0, 8))";
-        }
-        foreach ($tests as $i => $test) {
-            $result = eval('return ' . $test . ';');
-            fwrite(STDERR, sprintf("%2d %s ==> %s\n", $i + 1, $test, var_export($result, true)));
-        }
-
-        foreach ([16, 2000, 262144] as $block) {
-            $security = new Security();
-            foreach (range(1, 10) as $nth) {
-                $this->randTime($security, 1, $block, "Call $nth");
-            }
-            unset($security);
-        }
-
-        $security = new Security();
-        $this->randTime($security, 10000, 16, 'Rate test');
-
-        $security = new Security();
-        $this->randTime($security, 10000, 5000, 'Rate test');
-    }
-
     public function testGenerateRandomString()
     {
         $length = 21;
@@ -1305,4 +1119,3 @@ public function maskProvider()
         ];
     }
 }
-} // closing namespace yiiunit\framework\base;
diff --git a/tests/framework/db/CommandTest.php b/tests/framework/db/CommandTest.php
index 526ee5c4c91..ec88e98dcbe 100644
--- a/tests/framework/db/CommandTest.php
+++ b/tests/framework/db/CommandTest.php
@@ -221,7 +221,7 @@ public function testBindParamValue()
         }
         $this->assertEquals($numericCol, $row['numeric_col']);
         if ($this->driverName === 'mysql' || $this->driverName === 'oci' || (\defined('HHVM_VERSION') && \in_array($this->driverName, ['sqlite', 'pgsql']))) {
-            $this->assertEquals($boolCol, (int)$row['bool_col']);
+            $this->assertEquals($boolCol, (int) $row['bool_col']);
         } else {
             $this->assertEquals($boolCol, $row['bool_col']);
         }
diff --git a/tests/framework/db/QueryTest.php b/tests/framework/db/QueryTest.php
index 18179085e44..ac7df07ea39 100644
--- a/tests/framework/db/QueryTest.php
+++ b/tests/framework/db/QueryTest.php
@@ -606,7 +606,7 @@ protected function countLikeQuery(Connection $db, $tableName, $columnName, array
             ->where($whereCondition)
             ->count('*', $db);
         if (is_numeric($result)) {
-            $result = (int)$result;
+            $result = (int) $result;
         }
 
         return $result;
diff --git a/tests/framework/db/mysql/QueryBuilderTest.php b/tests/framework/db/mysql/QueryBuilderTest.php
index 2865dc395ad..21399b4f351 100644
--- a/tests/framework/db/mysql/QueryBuilderTest.php
+++ b/tests/framework/db/mysql/QueryBuilderTest.php
@@ -374,23 +374,22 @@ public function testIssue17449()
     public function testInsertInteger()
     {
         $db = $this->getConnection();
-
         $command = $db->createCommand();
 
-        $sql = $command->insert(
-            '{{customer}}',
-            [
-                'profile_id' => 22,
-            ]
-        )->getRawSql();
-        $this->assertEquals('INSERT INTO `customer` (`profile_id`) VALUES (22)', $sql);
+        // int value should not be converted to string, when column is `int`
+        $sql = $command->insert('{{type}}', ['int_col' => 22])->getRawSql();
+        $this->assertEquals('INSERT INTO `type` (`int_col`) VALUES (22)', $sql);
 
-        $sql = $command->insert(
-            '{{customer}}',
-            [
-                'profile_id' => '1000000000000',
-            ]
-        )->getRawSql();
-        $this->assertEquals('INSERT INTO `customer` (`profile_id`) VALUES (1000000000000)', $sql);
+        // int value should not be converted to string, when column is `int unsigned`
+        $sql = $command->insert('{{type}}', ['int_col3' => 22])->getRawSql();
+        $this->assertEquals('INSERT INTO `type` (`int_col3`) VALUES (22)', $sql);
+
+        // int value should not be converted to string, when column is `bigint unsigned`
+        $sql = $command->insert('{{type}}', ['bigint_col' => 22])->getRawSql();
+        $this->assertEquals("INSERT INTO `type` (`bigint_col`) VALUES (22)", $sql);
+
+        // string value should not be converted
+        $sql = $command->insert('{{type}}', ['bigint_col' => '1000000000000'])->getRawSql();
+        $this->assertEquals("INSERT INTO `type` (`bigint_col`) VALUES ('1000000000000')", $sql);
     }
 }
diff --git a/tests/framework/db/mysql/SchemaTest.php b/tests/framework/db/mysql/SchemaTest.php
index 6fa6a5d2be6..b5419821e8e 100644
--- a/tests/framework/db/mysql/SchemaTest.php
+++ b/tests/framework/db/mysql/SchemaTest.php
@@ -121,9 +121,9 @@ public function testAlternativeDisplayOfDefaultCurrentTimestampInMariaDB()
 
     public function getExpectedColumns()
     {
-        $version = $this->getConnection()->pdo->getAttribute(\PDO::ATTR_SERVER_VERSION);
+        $version = $this->getConnection()->getSchema()->getServerVersion();
 
-        return array_merge(
+        $columns = array_merge(
             parent::getExpectedColumns(),
             [
                 'int_col' => [
@@ -150,6 +150,18 @@ public function getExpectedColumns()
                     'scale' => null,
                     'defaultValue' => 1,
                 ],
+                'int_col3' => [
+                    'type' => 'integer',
+                    'dbType' => \version_compare($version, '8.0.17', '>') ? 'int unsigned' : 'int(11) unsigned',
+                    'phpType' => 'integer',
+                    'allowNull' => true,
+                    'autoIncrement' => false,
+                    'enumValues' => null,
+                    'size' => \version_compare($version, '8.0.17', '>') ? null : 11,
+                    'precision' => \version_compare($version, '8.0.17', '>') ? null : 11,
+                    'scale' => null,
+                    'defaultValue' => 1,
+                ],
                 'tinyint_col' => [
                     'type' => 'tinyint',
                     'dbType' => \version_compare($version, '8.0.17', '>') ? 'tinyint' : 'tinyint(3)',
@@ -174,7 +186,29 @@ public function getExpectedColumns()
                     'scale' => null,
                     'defaultValue' => 1,
                 ],
+                'bigint_col' => [
+                    'type' => 'bigint',
+                    'dbType' => \version_compare($version, '8.0.17', '>') ? 'bigint unsigned' : 'bigint(20) unsigned',
+                    'phpType' => 'string',
+                    'allowNull' => true,
+                    'autoIncrement' => false,
+                    'enumValues' => null,
+                    'size' => \version_compare($version, '8.0.17', '>') ? null : 20,
+                    'precision' => \version_compare($version, '8.0.17', '>') ? null : 20,
+                    'scale' => null,
+                    'defaultValue' => null,
+                ],
             ]
         );
+
+        if (version_compare($version, '5.7', '<')) {
+            $columns['int_col3']['phpType'] = 'string';
+
+            $columns['json_col']['type'] = 'text';
+            $columns['json_col']['dbType'] = 'longtext';
+            $columns['json_col']['phpType'] = 'string';
+        }
+
+        return $columns;
     }
 }
diff --git a/tests/framework/filters/auth/BasicAuthTest.php b/tests/framework/filters/auth/BasicAuthTest.php
index 55d8ec2c572..1bde8a853f8 100644
--- a/tests/framework/filters/auth/BasicAuthTest.php
+++ b/tests/framework/filters/auth/BasicAuthTest.php
@@ -27,10 +27,13 @@ class BasicAuthTest extends AuthTest
      */
     public function testHttpBasicAuth($token, $login)
     {
+        $original = $_SERVER;
+
         $_SERVER['PHP_AUTH_USER'] = $token;
         $_SERVER['PHP_AUTH_PW'] = 'whatever, we are testers';
         $filter = ['class' => HttpBasicAuth::className()];
         $this->ensureFilterApplies($token, $login, $filter);
+        $_SERVER = $original;
     }
 
     /**
@@ -40,9 +43,12 @@ public function testHttpBasicAuth($token, $login)
      */
     public function testHttpBasicAuthWithHttpAuthorizationHeader($token, $login)
     {
-        Yii::$app->request->headers->set('HTTP_AUTHORIZATION', 'Basic ' . base64_encode($token . ':' . 'mypw'));
+        $original = $_SERVER;
+
+        $_SERVER['HTTP_AUTHORIZATION'] = 'Basic ' . base64_encode($token . ':' . 'mypw');
         $filter = ['class' => HttpBasicAuth::className()];
         $this->ensureFilterApplies($token, $login, $filter);
+        $_SERVER = $original;
     }
 
     /**
@@ -52,9 +58,12 @@ public function testHttpBasicAuthWithHttpAuthorizationHeader($token, $login)
      */
     public function testHttpBasicAuthWithRedirectHttpAuthorizationHeader($token, $login)
     {
-        Yii::$app->request->headers->set('REDIRECT_HTTP_AUTHORIZATION', 'Basic ' . base64_encode($token . ':' . 'mypw'));
+        $original = $_SERVER;
+
+        $_SERVER['REDIRECT_HTTP_AUTHORIZATION'] = 'Basic ' . base64_encode($token . ':' . 'mypw');
         $filter = ['class' => HttpBasicAuth::className()];
         $this->ensureFilterApplies($token, $login, $filter);
+        $_SERVER = $original;
     }
 
     /**
diff --git a/tests/framework/helpers/ArrayHelperTest.php b/tests/framework/helpers/ArrayHelperTest.php
index fae9d0237c4..538bb8af78c 100644
--- a/tests/framework/helpers/ArrayHelperTest.php
+++ b/tests/framework/helpers/ArrayHelperTest.php
@@ -15,131 +15,6 @@
 use yii\helpers\ArrayHelper;
 use yiiunit\TestCase;
 
-class Post1
-{
-    public $id = 23;
-    public $title = 'tt';
-}
-
-class Post2 extends BaseObject
-{
-    public $id = 123;
-    public $content = 'test';
-    private $secret = 's';
-    public function getSecret()
-    {
-        return $this->secret;
-    }
-}
-
-class Post3 extends BaseObject
-{
-    public $id = 33;
-    /** @var BaseObject */
-    public $subObject;
-
-    public function init()
-    {
-        $this->subObject = new Post2();
-    }
-}
-
-class ArrayAccessibleObject implements ArrayAccess
-{
-    public $name = 'bar1';
-    protected $container = [];
-
-    public function __construct($container)
-    {
-        $this->container = $container;
-    }
-
-    public function offsetSet($offset, $value)
-    {
-        if (is_null($offset)) {
-            $this->container[] = $value;
-        } else {
-            $this->container[$offset] = $value;
-        }
-    }
-
-    public function offsetExists($offset)
-    {
-        return array_key_exists($offset, $this->container);
-    }
-
-    public function offsetUnset($offset)
-    {
-        unset($this->container[$offset]);
-    }
-
-    public function offsetGet($offset)
-    {
-        return $this->offsetExists($offset) ? $this->container[$offset] : null;
-    }
-}
-
-class TraversableArrayAccessibleObject extends ArrayAccessibleObject implements Iterator
-{
-    private $position = 0;
-
-    public function __construct($container)
-    {
-        $this->position = 0;
-
-        parent::__construct($container);
-    }
-
-    protected function getContainerKey($keyIndex)
-    {
-        $keys = array_keys($this->container);
-        return array_key_exists($keyIndex, $keys) ? $keys[$keyIndex] : false;
-    }
-
-    public function rewind()
-    {
-        $this->position = 0;
-    }
-
-    public function current()
-    {
-        return $this->offsetGet($this->getContainerKey($this->position));
-    }
-
-    public function key()
-    {
-        return $this->getContainerKey($this->position);
-    }
-
-    public function next()
-    {
-        ++$this->position;
-    }
-
-    public function valid()
-    {
-        $key = $this->getContainerKey($this->position);
-        return !(!$key || !$this->offsetExists($key));
-    }
-}
-
-class MagicModel extends Model
-{
-    protected $magic;
-
-    public function getMagic()
-    {
-        return 42;
-    }
-
-    private $moreMagic;
-
-    public function getMoreMagic()
-    {
-        return 'ta-da';
-    }
-}
-
 /**
  * @group helpers
  */
@@ -181,7 +56,7 @@ public function testToArray()
             '_content' => 'test',
             'length' => 4,
         ], ArrayHelper::toArray($object, [
-            $object->className() => [
+            $object::className() => [
                 'id', 'secret',
                 '_content' => 'content',
                 'length' => function ($post) {
@@ -200,7 +75,8 @@ public function testToArray()
             ],
         ], ArrayHelper::toArray($object));
 
-        //recursive with attributes of object and subobject
+        //recursive with attributes of object and sub-object
+        $subObject = $object->subObject;
         $this->assertEquals([
             'id' => 33,
             'id_plus_1' => 34,
@@ -209,13 +85,13 @@ public function testToArray()
                 'id_plus_1' => 124,
             ],
         ], ArrayHelper::toArray($object, [
-            $object->className() => [
+            $object::className() => [
                 'id', 'subObject',
                 'id_plus_1' => function ($post) {
                     return $post->id + 1;
                 },
             ],
-            $object->subObject->className() => [
+            $subObject::className() => [
                 'id',
                 'id_plus_1' => function ($post) {
                     return $post->id + 1;
@@ -231,7 +107,7 @@ public function testToArray()
                 'id_plus_1' => 124,
             ],
         ], ArrayHelper::toArray($object, [
-            $object->subObject->className() => [
+            $subObject::className() => [
                 'id',
                 'id_plus_1' => function ($post) {
                     return $post->id + 1;
@@ -442,20 +318,16 @@ public function testMultisortClosure()
         ], $changelog);
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     */
     public function testMultisortInvalidParamExceptionDirection()
     {
+        $this->expectException('yii\base\InvalidParamException');
         $data = ['foo' => 'bar'];
         ArrayHelper::multisort($data, ['foo'], []);
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     */
     public function testMultisortInvalidParamExceptionSortFlag()
     {
+        $this->expectException('yii\base\InvalidParamException');
         $data = ['foo' => 'bar'];
         ArrayHelper::multisort($data, ['foo'], ['foo'], []);
     }
@@ -857,12 +729,10 @@ public function testKeyExistsArrayAccess()
         $this->assertFalse(ArrayHelper::keyExists('c', $array));
     }
 
-    /**
-     * @expectedException \yii\base\InvalidArgumentException
-     * @expectedExceptionMessage Second parameter($array) cannot be ArrayAccess in case insensitive mode
-     */
     public function testKeyExistsArrayAccessCaseInsensitiveThrowsError()
     {
+        $this->expectException('yii\base\InvalidArgumentException');
+        $this->expectExceptionMessage('Second parameter($array) cannot be ArrayAccess in case insensitive mode');
         $array = new TraversableArrayAccessibleObject([
             'a' => 1,
             'B' => 2,
@@ -945,26 +815,21 @@ public function testGetValueObjects()
         $this->assertEquals(23, ArrayHelper::getValue($object, 'id'));
     }
 
-    /**
-     * This is expected to result in a PHP error.
-     * @requires PHPUnit 6.0
-     */
     public function testGetValueNonexistingProperties1()
     {
-        $this->expectException('PHPUnit\Framework\Error\Notice');
+        if (PHP_VERSION_ID < 80000) {
+            $this->expectException('PHPUnit_Framework_Error_Notice');
+        } else {
+            $this->expectException('PHPUnit_Framework_Error_Warning');
+        }
         $object = new Post1();
-        $this->assertNull(ArrayHelper::getValue($object, 'nonExisting'));
+        ArrayHelper::getValue($object, 'nonExisting');
     }
 
-    /**
-     * This is expected to result in a PHP error.
-     * @requires PHPUnit 6.0
-     */
-    public function testGetValueNonexistingProperties2()
+    public function testGetValueNonexistingPropertiesForArrayObject()
     {
-        $this->expectException('PHPUnit\Framework\Error\Notice');
         $arrayObject = new \ArrayObject(['id' => 23], \ArrayObject::ARRAY_AS_PROPS);
-        $this->assertEquals(23, ArrayHelper::getValue($arrayObject, 'nonExisting'));
+        $this->assertNull(ArrayHelper::getValue($arrayObject, 'nonExisting'));
     }
 
     public function testGetValueFromArrayAccess()
@@ -1364,12 +1229,10 @@ public function testIsInStrict()
         $this->assertFalse(ArrayHelper::isIn('1', [1, 'a'], true));
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     * @expectedExceptionMessage Argument $haystack must be an array or implement Traversable
-     */
     public function testInException()
     {
+        $this->expectException('yii\base\InvalidParamException');
+        $this->expectExceptionMessage('Argument $haystack must be an array or implement Traversable');
         ArrayHelper::isIn('value', null);
     }
 
@@ -1385,12 +1248,10 @@ public function testIsSubset()
         $this->assertFalse(ArrayHelper::isSubset(new \ArrayObject([1]), ['1', 'b'], true));
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     * @expectedExceptionMessage Argument $needles must be an array or implement Traversable
-     */
     public function testIsSubsetException()
     {
+        $this->expectException('yii\base\InvalidParamException');
+        $this->expectExceptionMessage('Argument $needles must be an array or implement Traversable');
         ArrayHelper::isSubset('a', new \ArrayObject(['a', 'b']));
     }
 
@@ -1504,6 +1365,9 @@ public function testFilter()
                 'C' => 2,
             ],
         ], ArrayHelper::filter($array, ['A', '!A.D']));
+        $this->assertEquals([
+            'G' => 1
+        ], ArrayHelper::filter($array, ['G', '!Z', '!X.A']));
 
         //Non existing keys tests
         $this->assertEquals([], ArrayHelper::filter($array, ['X']));
@@ -1566,3 +1430,128 @@ public function testArrayAccessWithMagicProperty()
         $this->assertEquals('ta-da', ArrayHelper::getValue($model, 'moreMagic'));
     }
 }
+
+class Post1
+{
+    public $id = 23;
+    public $title = 'tt';
+}
+
+class Post2 extends BaseObject
+{
+    public $id = 123;
+    public $content = 'test';
+    private $secret = 's';
+    public function getSecret()
+    {
+        return $this->secret;
+    }
+}
+
+class Post3 extends BaseObject
+{
+    public $id = 33;
+    /** @var BaseObject */
+    public $subObject;
+
+    public function init()
+    {
+        $this->subObject = new Post2();
+    }
+}
+
+class ArrayAccessibleObject implements ArrayAccess
+{
+    public $name = 'bar1';
+    protected $container = [];
+
+    public function __construct($container)
+    {
+        $this->container = $container;
+    }
+
+    public function offsetSet($offset, $value)
+    {
+        if (is_null($offset)) {
+            $this->container[] = $value;
+        } else {
+            $this->container[$offset] = $value;
+        }
+    }
+
+    public function offsetExists($offset)
+    {
+        return array_key_exists($offset, $this->container);
+    }
+
+    public function offsetUnset($offset)
+    {
+        unset($this->container[$offset]);
+    }
+
+    public function offsetGet($offset)
+    {
+        return $this->offsetExists($offset) ? $this->container[$offset] : null;
+    }
+}
+
+class TraversableArrayAccessibleObject extends ArrayAccessibleObject implements Iterator
+{
+    private $position = 0;
+
+    public function __construct($container)
+    {
+        $this->position = 0;
+
+        parent::__construct($container);
+    }
+
+    protected function getContainerKey($keyIndex)
+    {
+        $keys = array_keys($this->container);
+        return array_key_exists($keyIndex, $keys) ? $keys[$keyIndex] : false;
+    }
+
+    public function rewind()
+    {
+        $this->position = 0;
+    }
+
+    public function current()
+    {
+        return $this->offsetGet($this->getContainerKey($this->position));
+    }
+
+    public function key()
+    {
+        return $this->getContainerKey($this->position);
+    }
+
+    public function next()
+    {
+        ++$this->position;
+    }
+
+    public function valid()
+    {
+        $key = $this->getContainerKey($this->position);
+        return !(!$key || !$this->offsetExists($key));
+    }
+}
+
+class MagicModel extends Model
+{
+    protected $magic;
+
+    public function getMagic()
+    {
+        return 42;
+    }
+
+    private $moreMagic;
+
+    public function getMoreMagic()
+    {
+        return 'ta-da';
+    }
+}
diff --git a/tests/framework/helpers/BaseConsoleTest.php b/tests/framework/helpers/BaseConsoleTest.php
index 0a655dfeab8..d9a4391dc10 100644
--- a/tests/framework/helpers/BaseConsoleTest.php
+++ b/tests/framework/helpers/BaseConsoleTest.php
@@ -80,4 +80,10 @@ public function ansiColorizedSubstr_withColors_data()
             ['Foo%yBar%nYes', 5, 3, '%yr%nYe'],
         ];
     }
+
+    public function testAnsiStrlen()
+    {
+        $this->assertSame(3, BaseConsole::ansiStrlen('Foo'));
+        $this->assertSame(3, BaseConsole::ansiStrlen(BaseConsole::renderColoredString('Bar%y')));
+    }
 }
diff --git a/tests/framework/helpers/FileHelperTest.php b/tests/framework/helpers/FileHelperTest.php
index 7fd94a99dcd..09da3d29606 100644
--- a/tests/framework/helpers/FileHelperTest.php
+++ b/tests/framework/helpers/FileHelperTest.php
@@ -6,6 +6,7 @@
  */
 
 use yii\helpers\FileHelper;
+use yii\helpers\VarDumper;
 use yiiunit\TestCase;
 
 /**
@@ -937,4 +938,309 @@ public function testFindDirectories()
         sort($foundFiles);
         $this->assertEquals($expectedFiles, $foundFiles);
     }
+
+    public function testChangeOwnership()
+    {
+        if (DIRECTORY_SEPARATOR !== '/') {
+            $this->markTestSkipped('FileHelper::changeOwnership() fails silently on Windows, nothing to test.');
+        }
+
+        if (!extension_loaded('posix')) {
+            $this->markTestSkipped('posix extension is required.');
+        }
+
+        $dirName = 'change_ownership_test_dir';
+        $fileName = 'file_1.txt';
+        $testFile = $this->testFilePath . DIRECTORY_SEPARATOR . $dirName . DIRECTORY_SEPARATOR . $fileName;
+
+        $currentUserId = posix_getuid();
+        $currentUserName = posix_getpwuid($currentUserId)['name'];
+        $currentGroupId = posix_getgid();
+        $currentGroupName = posix_getgrgid($currentGroupId)['name'];
+
+        /////////////
+        /// Setup ///
+        /////////////
+
+        $this->createFileStructure([
+            $dirName => [
+                $fileName => 'test 1',
+            ],
+        ]);
+
+        // Ensure the test file is created as the current user/group and has a specific file mode
+        $this->assertFileExists($testFile);
+        $fileMode = 0770;
+        @chmod($testFile, $fileMode);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected created test file owner to be current user.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected created test file group to be current group.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be changed.');
+
+
+        /////////////////
+        /// File Mode ///
+        /////////////////
+
+        // Test file mode
+        $fileMode = 0777;
+        FileHelper::changeOwnership($testFile, null, $fileMode);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be changed.');
+
+        if ($currentUserId !== 0) {
+            $this->markTestInComplete(__METHOD__ . ' could only run partially, chown() can only to be tested as root user. Current user: ' . $currentUserName);
+        }
+
+        //////////////////////
+        /// User Ownership ///
+        //////////////////////
+
+        // Test user ownership as integer
+        $ownership = 10001;
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership, fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as numeric string (should be treated as integer)
+        $ownership = '10002';
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)$ownership, fileowner($testFile), 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as string
+        $ownership = $currentUserName;
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership, posix_getpwuid(fileowner($testFile))['name'], 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as numeric string with trailing colon (should be treated as integer)
+        $ownership = '10003:';
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)$ownership, fileowner($testFile), 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as string with trailing colon
+        $ownership = $currentUserName . ':';
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals(substr($ownership, 0, -1), posix_getpwuid(fileowner($testFile))['name'], 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as indexed array (integer value)
+        $ownership = [10004];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership[0], fileowner($testFile), 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as indexed array (numeric string value)
+        $ownership = ['10005'];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)$ownership[0], fileowner($testFile), 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user ownership as associative array (string value)
+        $ownership = ['user' => $currentUserName];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership['user'], posix_getpwuid(fileowner($testFile))['name'], 'Expected created test file owner to be changed.');
+        $this->assertEquals($currentGroupId, filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        ///////////////////////
+        /// Group Ownership ///
+        ///////////////////////
+
+        // Test group ownership as numeric string
+        $ownership = ':10006';
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals((int)substr($ownership, 1), filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test group ownership as string
+        $ownership = ':' . $currentGroupName;
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals(substr($ownership, 1), posix_getgrgid(filegroup($testFile))['name'], 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test group ownership as associative array (integer value)
+        $ownership = ['group' => 10007];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals($ownership['group'], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test group ownership as associative array (numeric string value)
+        $ownership = ['group' => '10008'];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals((int)$ownership['group'], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test group ownership as associative array (string value)
+        $ownership = ['group' => $currentGroupName];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($currentUserId, fileowner($testFile), 'Expected file owner to be unchanged.');
+        $this->assertEquals($ownership['group'], posix_getgrgid(filegroup($testFile))['name'], 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        /////////////////////////////////
+        /// User- and Group Ownership ///
+        /////////////////////////////////
+
+        // Test user and group ownership as numeric string
+        $ownership = '10009:10010';
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)explode(':', $ownership)[0], fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals((int)explode(':', $ownership)[1], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as string
+        $ownership = $currentUserName . ':' . $currentGroupName;
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals(explode(':', $ownership)[0], posix_getpwuid(fileowner($testFile))['name'], 'Expected file owner to be changed.');
+        $this->assertEquals(explode(':', $ownership)[1], posix_getgrgid(filegroup($testFile))['name'], 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as indexed array (integer values)
+        $ownership = [10011, 10012];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership[0], fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals($ownership[1], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as indexed array (numeric string values)
+        $ownership = ['10013', '10014'];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)$ownership[0], fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals((int)$ownership[1], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as indexed array (string values)
+        $ownership = [$currentUserName, $currentGroupName];
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership[0], posix_getpwuid(fileowner($testFile))['name'], 'Expected file owner to be changed.');
+        $this->assertEquals($ownership[1], posix_getgrgid(filegroup($testFile))['name'], 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as associative array (integer values)
+        $ownership = ['group' => 10015, 'user' => 10016]; // user/group reversed on purpose
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership['user'], fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals($ownership['group'], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as associative array (numeric string values)
+        $ownership = ['group' => '10017', 'user' => '10018']; // user/group reversed on purpose
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals((int)$ownership['user'], fileowner($testFile), 'Expected file owner to be changed.');
+        $this->assertEquals((int)$ownership['group'], filegroup($testFile), 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        // Test user and group ownership as associative array (string values)
+        $ownership = ['group' => $currentGroupName, 'user' => $currentUserName]; // user/group reversed on purpose
+        FileHelper::changeOwnership($testFile, $ownership);
+        clearstatcache(true, $testFile);
+        $this->assertEquals($ownership['user'], posix_getpwuid(fileowner($testFile))['name'], 'Expected file owner to be changed.');
+        $this->assertEquals($ownership['group'], posix_getgrgid(filegroup($testFile))['name'], 'Expected created test file group to be changed.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected file mode to be unchanged.');
+
+        ///////////////////////////////////////
+        /// Mode, User- and Group Ownership ///
+        ///////////////////////////////////////
+
+        // Test user ownership as integer with file mode
+        $ownership = '10019:10020';
+        $fileMode = 0774;
+        FileHelper::changeOwnership($testFile, $ownership, $fileMode);
+        clearstatcache(true, $testFile);
+        $this->assertEquals(explode(':', $ownership)[0], fileowner($testFile), 'Expected created test file owner to be changed.');
+        $this->assertEquals(explode(':', $ownership)[1], filegroup($testFile), 'Expected file group to be unchanged.');
+        $this->assertEquals('0'.decoct($fileMode), substr(decoct(fileperms($testFile)), -4), 'Expected created test file mode to be changed.');
+
+    }
+
+    public function testChangeOwnershipNonExistingUser()
+    {
+        $dirName = 'change_ownership_non_existing_user';
+        $fileName = 'file_1.txt';
+        $testFile = $this->testFilePath . DIRECTORY_SEPARATOR . $dirName . DIRECTORY_SEPARATOR . $fileName;
+
+        $this->createFileStructure([
+            $dirName => [
+                $fileName => 'test 1',
+            ],
+        ]);
+
+        // Test user ownership as integer with file mode (Due to the nature of chown we can't use PHPUnit's `expectException`)
+        $ownership = 'non_existing_user';
+        try {
+            FileHelper::changeOwnership($testFile, $ownership);
+            throw new \Exception('FileHelper::changeOwnership() should have thrown error for non existing user.');
+        } catch(\Exception $e) {
+            $this->assertEquals('chown(): Unable to find uid for non_existing_user', $e->getMessage());
+        }
+    }
+
+    /**
+     * @dataProvider changeOwnershipInvalidArgumentsProvider
+     * @param bool $useFile
+     * @param mixed $ownership
+     * @param mixed $mode
+     */
+    public function testChangeOwnershipInvalidArguments($useFile, $ownership, $mode)
+    {
+        $dirName = 'change_ownership_invalid_arguments';
+        $fileName = 'file_1.txt';
+        $file = $this->testFilePath . DIRECTORY_SEPARATOR . $dirName . DIRECTORY_SEPARATOR . $fileName;
+
+        $this->createFileStructure([
+            $dirName => [
+                $fileName => 'test 1',
+            ],
+        ]);
+
+        $this->expectException('yii\base\InvalidArgumentException');
+        FileHelper::changeOwnership($useFile ? $file : null, $ownership, $mode);
+    }
+
+    public function changeOwnershipInvalidArgumentsProvider()
+    {
+        return [
+            [false, '123:123', null],
+            [true, new stdClass(), null],
+            [true, ['user' => new stdClass()], null],
+            [true, ['group' => new stdClass()], null],
+            [true, null, 'test'],
+        ];
+    }
 }
diff --git a/tests/framework/helpers/FormatConverterTest.php b/tests/framework/helpers/FormatConverterTest.php
index cd06418821c..ecd2d706247 100644
--- a/tests/framework/helpers/FormatConverterTest.php
+++ b/tests/framework/helpers/FormatConverterTest.php
@@ -43,18 +43,297 @@ public function testIntlIcuToPhpShortForm()
         $this->assertEquals('d.m.y', FormatConverter::convertDateIcuToPhp('short', 'date', 'de-DE'));
     }
 
-    public function testEscapedIcuToPhp()
+    public function testIntlIcuToPhpShortFormDefaultLang()
+    {
+        Yii::$app->language = 'en';
+        $this->assertEquals('n/j/y', FormatConverter::convertDateIcuToPhp('short', 'date'));
+        Yii::$app->language = 'de';
+        $this->assertEquals('d.m.y', FormatConverter::convertDateIcuToPhp('short', 'date'));
+    }
+
+    public function testIntlIcuToPhpShortFormTime()
+    {
+        $this->assertEquals('g:i A', FormatConverter::convertDateIcuToPhp('short', 'time', 'en-US'));
+        $this->assertEquals('H:i', FormatConverter::convertDateIcuToPhp('short', 'time', 'de-DE'));
+    }
+
+    public function testIntlIcuToPhpShortFormDateTime()
+    {
+        $this->assertEquals('n/j/y, g:i A', FormatConverter::convertDateIcuToPhp('short', 'datetime', 'en-US'));
+        $this->assertEquals(
+            PHP_VERSION_ID < 50600 ? 'd.m.y H:i' : 'd.m.y, H:i',
+            FormatConverter::convertDateIcuToPhp('short', 'datetime', 'de-DE')
+        );
+    }
+
+    public function testEscapedIcuToPhpMixedPatterns()
     {
         $this->assertEquals('l, F j, Y \\a\\t g:i:s A T', FormatConverter::convertDateIcuToPhp('EEEE, MMMM d, y \'at\' h:mm:ss a zzzz'));
         $this->assertEquals('\\o\\\'\\c\\l\\o\\c\\k', FormatConverter::convertDateIcuToPhp('\'o\'\'clock\''));
     }
 
+    public function providerForICU2PHPPatterns()
+    {
+        return [
+            'two single quotes produce one' => ["''", "\\'"],
+            'era designator like (Anno Domini)' => ['G', ''],
+            '4digit year of "Week of Year"' => ['Y', 'o'],
+            '4digit year #1' => ['y', 'Y'],
+            '4digit year #2' => ['yyyy', 'Y'],
+            '2digit year number' => ['yy', 'y'],
+            'extended year e.g. 4601' => ['u', ''],
+            'cyclic year name, as in Chinese lunar calendar' => ['U', ''],
+            'related Gregorian year e.g. 1996' => ['r', ''],
+            'number of quarter' => ['Q', ''],
+            'number of quarter "02"' => ['QQ', ''],
+            'quarter "Q2"' => ['QQQ', ''],
+            'quarter 2nd quarter' => ['QQQQ', ''],
+            'number of quarter 2' => ['QQQQQ', ''],
+            'number of Stand Alone quarter' => ['q', ''],
+            'number of Stand Alone quarter "02"' => ['qq', ''],
+            'Stand Alone quarter "Q2"' => ['qqq', ''],
+            'Stand Alone quarter "2nd quarter"' => ['qqqq', ''],
+            'number of Stand Alone quarter "2"' => ['qqqqq', ''],
+            'Numeric representation of a month, without leading zeros' => ['M', 'n'],
+            'Numeric representation of a month, with leading zeros' => ['MM', 'm'],
+            'A short textual representation of a month, three letters' => ['MMM', 'M'],
+            'A full textual representation of a month, such as January or March' => ['MMMM', 'F'],
+            'MMMMM' => ['MMMMM', ''],
+            'Stand alone month in year #1' => ['L', 'n'],
+            'Stand alone month in year #2' => ['LL', 'm'],
+            'Stand alone month in year #3' => ['LLL', 'M'],
+            'Stand alone month in year #4' => ['LLLL', 'F'],
+            'Stand alone month in year #5' => ['LLLLL', ''],
+            'ISO-8601 week number of year #1' => ['w', 'W'],
+            'ISO-8601 week number of year #2' => ['ww', 'W'],
+            'week of the current month' => ['W', ''],
+            'day without leading zeros' => ['d', 'j'],
+            'day with leading zeros' => ['dd', 'd'],
+            'day of the year 0 to 365' => ['D', 'z'],
+            'Day of Week in Month. eg. 2nd Wednesday in July' => ['F', ''],
+            'Modified Julian day. This is different from the conventional Julian day number in two regards.' => ['g', ''],
+            'day of week written in short form eg. Sun' => ['E', 'D'],
+            'EE' => ['EE', 'D'],
+            'EEE' => ['EEE', 'D'],
+            'day of week fully written eg. Sunday' => ['EEEE', 'l'],
+            'EEEEE' => ['EEEEE', ''],
+            'EEEEEE' => ['EEEEEE', ''],
+            'ISO-8601 numeric representation of the day of the week 1=Mon to 7=Sun #1' => ['e', 'N'],
+            'php "w" 0=Sun to 6=Sat isn`t supported by ICU -> "w" means week number of year #1' => ['ee', 'N'],
+            'eee' => ['eee', 'D'],
+            'eeee' => ['eeee', 'l'],
+            'eeeee' => ['eeeee', ''],
+            'eeeeee' => ['eeeeee', ''],
+            'ISO-8601 numeric representation of the day of the week 1=Mon to 7=Sun #2' => ['c', 'N'],
+            'php "w" 0=Sun to 6=Sat isn`t supported by ICU -> "w" means week number of year #2' => ['cc', 'N'],
+            'ccc' => ['ccc', 'D'],
+            'cccc' => ['cccc', 'l'],
+            'ccccc' => ['ccccc', ''],
+            'cccccc' => ['cccccc', ''],
+            'AM/PM marker' => ['a', 'A'],
+            '12-hour format of an hour without leading zeros 1 to 12h' => ['h', 'g'],
+            '12-hour format of an hour with leading zeros, 01 to 12 h' => ['hh', 'h'],
+            '24-hour format of an hour without leading zeros 0 to 23h' => ['H', 'G'],
+            '24-hour format of an hour with leading zeros, 00 to 23 h' => ['HH', 'H'],
+            'hour in day (1~24) #1' => ['k', ''],
+            'hour in day (1~24) #2' => ['kk', ''],
+            'hour in am/pm (0~11) #1' => ['K', ''],
+            'hour in am/pm (0~11) #2' => ['KK', ''],
+            'Minutes without leading zeros, not supported by php but we fallback' => ['m', 'i'],
+            'Minutes with leading zeros' => ['mm', 'i'],
+            'Seconds, without leading zeros, not supported by php but we fallback' => ['s', 's'],
+            'Seconds, with leading zeros' => ['ss', 's'],
+            'fractional second #1' => ['S', ''],
+            'fractional second #2' => ['SS', ''],
+            'fractional second #3' => ['SSS', ''],
+            'fractional second #4' => ['SSSS', ''],
+            'milliseconds in day' => ['A', ''],
+            'Timezone abbreviation #1' => ['z', 'T'],
+            'Timezone abbreviation #2' => ['zz', 'T'],
+            'Timezone abbreviation #3' => ['zzz', 'T'],
+            'Timezone full name, not supported by php but we fallback' => ['zzzz', 'T'],
+            'Difference to Greenwich time (GMT) in hours #1' => ['Z', 'O'],
+            'Difference to Greenwich time (GMT) in hours #2' => ['ZZ', 'O'],
+            'Difference to Greenwich time (GMT) in hours #3' => ['ZZZ', 'O'],
+            'Time Zone: long localized GMT (=OOOO) e.g. GMT-08:00' => ['ZZZZ', '\G\M\TP'],
+            'TIme Zone: ISO8601 extended hms? (=XXXXX)' => ['ZZZZZ', ''],
+            'Time Zone: short localized GMT e.g. GMT-8' => ['O', ''],
+            'Time Zone: long localized GMT (=ZZZZ) e.g. GMT-08:00' => ['OOOO', '\G\M\TP'],
+            'Time Zone: generic non-location (falls back first to VVVV and then to OOOO) using the ICU defined fallback here #1' => ['v', '\G\M\TP'],
+            'Time Zone: generic non-location (falls back first to VVVV and then to OOOO) using the ICU defined fallback here #2' => ['vvvv', '\G\M\TP'],
+            'Time Zone: short time zone ID' => ['V', ''],
+            'Time Zone: long time zone ID' => ['VV', 'e'],
+            'Time Zone: time zone exemplar city' => ['VVV', ''],
+            'Time Zone: generic location (falls back to OOOO) using the ICU defined fallback here' => ['VVVV', '\G\M\TP'],
+            'Time Zone: ISO8601 basic hm?, with Z for 0, e.g. -08, +0530, Z' => ['X', ''],
+            'Time Zone: ISO8601 basic hm, with Z, e.g. -0800, Z' => ['XX', 'O, \Z'],
+            'Time Zone: ISO8601 extended hm, with Z, e.g. -08:00, Z' => ['XXX', 'P, \Z'],
+            'Time Zone: ISO8601 basic hms?, with Z, e.g. -0800, -075258, Z' => ['XXXX', ''],
+            'Time Zone: ISO8601 extended hms?, with Z, e.g. -08:00, -07:52:58, Z' => ['XXXXX', ''],
+            'Time Zone: ISO8601 basic hm?, without Z for 0, e.g. -08, +0530' => ['x', ''],
+            'Time Zone: ISO8601 basic hm, without Z, e.g. -0800' => ['xx', 'O'],
+            'Time Zone: ISO8601 extended hm, without Z, e.g. -08:00' => ['xxx', 'P'],
+            'Time Zone: ISO8601 basic hms?, without Z, e.g. -0800, -075258' => ['xxxx', ''],
+            'Time Zone: ISO8601 extended hms?, without Z, e.g. -08:00, -07:52:58' => ['xxxxx', ''],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForICU2PHPPatterns
+     */
+    public function testEscapedIcuToPhpSinglePattern($pattern, $expected)
+    {
+        $this->assertEquals($expected, FormatConverter::convertDateIcuToPhp($pattern));
+    }
+
     public function testEscapedIcuToJui()
     {
-        $this->assertEquals('l, F j, Y \\a\\t g:i:s A T', FormatConverter::convertDateIcuToPhp('EEEE, MMMM d, y \'at\' h:mm:ss a zzzz'));
+        $this->assertEquals('DD, MM d, yy \'at\' ', FormatConverter::convertDateIcuToJui('EEEE, MMMM d, y \'at\' zzzz'));
         $this->assertEquals('\'o\'\'clock\'', FormatConverter::convertDateIcuToJui('\'o\'\'clock\''));
     }
 
+    public function testIntlIcuToJuiShortForm()
+    {
+        $this->assertEquals('m/d/y', FormatConverter::convertDateIcuToJui('short', 'date', 'en-US'));
+        $this->assertEquals('dd.mm.y', FormatConverter::convertDateIcuToJui('short', 'date', 'de-DE'));
+    }
+
+    public function testIntlIcuToJuiShortFormDefaultLang()
+    {
+        Yii::$app->language = 'en';
+        $this->assertEquals('m/d/y', FormatConverter::convertDateIcuToJui('short', 'date'));
+        Yii::$app->language = 'de';
+        $this->assertEquals('dd.mm.y', FormatConverter::convertDateIcuToJui('short', 'date'));
+    }
+
+    public function testIntlIcuToJuiShortFormTime()
+    {
+        $this->assertEquals(': ', FormatConverter::convertDateIcuToJui('short', 'time', 'en-US'));
+        $this->assertEquals(':', FormatConverter::convertDateIcuToJui('short', 'time', 'de-DE'));
+    }
+
+    public function testIntlIcuToJuiShortFormDateTime()
+    {
+        $this->assertEquals('m/d/y, : ', FormatConverter::convertDateIcuToJui('short', 'datetime', 'en-US'));
+        $this->assertEquals(
+            PHP_VERSION_ID < 50600 ? 'dd.mm.y :' : 'dd.mm.y, :',
+            FormatConverter::convertDateIcuToJui('short', 'datetime', 'de-DE')
+        );
+    }
+
+    public function providerForICU2JUIPatterns()
+    {
+        return [
+            'era designator like (Anno Domini)' => ['G', ''],
+            '4digit year of "Week of Year"' => ['Y', ''],
+            '4digit year e.g. 2014 #1' => ['y', 'yy'],
+            '4digit year e.g. 2014 #2' => ['yyyy', 'yy'],
+            '2digit year number eg. 14' => ['yy', 'y'],
+            'extended year e.g. 4601' => ['u', ''],
+            'cyclic year name, as in Chinese lunar calendar' => ['U', ''],
+            'related Gregorian year e.g. 1996' => ['r', ''],
+            'number of quarter' => ['Q', ''],
+            'number of quarter "02"' => ['QQ', ''],
+            'quarter "Q2"' => ['QQQ', ''],
+            'quarter "2nd quarter"' => ['QQQQ', ''],
+            'number of quarter "2"' => ['QQQQQ', ''],
+            'number of Stand Alone quarter' => ['q', ''],
+            'number of Stand Alone quarter "02"' => ['qq', ''],
+            'Stand Alone quarter "Q2"' => ['qqq', ''],
+            'Stand Alone quarter "2nd quarter"' => ['qqqq', ''],
+            'number of Stand Alone quarter "2"' => ['qqqqq', ''],
+            'Numeric representation of a month, without leading zeros' => ['M', 'm'],
+            'Numeric representation of a month, with leading zeros' => ['MM', 'mm'],
+            'A short textual representation of a month, three letters' => ['MMM', 'M'],
+            'A full textual representation of a month, such as January or March' => ['MMMM', 'MM'],
+            'MMMMM' => ['MMMMM', ''],
+            'Stand alone month in year #1' => ['L', 'm'],
+            'Stand alone month in year #2' => ['LL', 'mm'],
+            'Stand alone month in year #3' => ['LLL', 'M'],
+            'Stand alone month in year #4' => ['LLLL', 'MM'],
+            'Stand alone month in year #5' => ['LLLLL', ''],
+            'ISO-8601 week number of year #1' => ['w', ''],
+            'ISO-8601 week number of year #2' => ['ww', ''],
+            'week of the current month' => ['W', ''],
+            'day without leading zeros' => ['d', 'd'],
+            'day with leading zeros' => ['dd', 'dd'],
+            'day of the year 0 to 365' => ['D', 'o'],
+            'Day of Week in Month. eg. 2nd Wednesday in July' => ['F', ''],
+            'Modified Julian day. This is different from the conventional Julian day number in two regards.' => ['g', ''],
+            'day of week written in short form eg. Sun' => ['E', 'D'],
+            'EE' => ['EE', 'D'],
+            'EEE' => ['EEE', 'D'],
+            'day of week fully written eg. Sunday' => ['EEEE', 'DD'],
+            'EEEEE' => ['EEEEE', ''],
+            'EEEEEE' => ['EEEEEE', ''],
+            'ISO-8601 numeric representation of the day of the week 1=Mon to 7=Sun #1' => ['e', ''],
+            'php "w" 0=Sun to 6=Sat isn`t supported by ICU -> "w" means week number of year #1' => ['ee', ''],
+            'eee' => ['eee', 'D'],
+            'eeee' => ['eeee', ''],
+            'eeeee' => ['eeeee', ''],
+            'eeeeee' => ['eeeeee', ''],
+            'ISO-8601 numeric representation of the day of the week 1=Mon to 7=Sun #2' => ['c', ''],
+            'php "w" 0=Sun to 6=Sat isn`t supported by ICU -> "w" means week number of year #2' => ['cc', ''],
+            'ccc' => ['ccc', 'D'],
+            'cccc' => ['cccc', 'DD'],
+            'ccccc' => ['ccccc', ''],
+            'cccccc' => ['cccccc', ''],
+            'am/pm marker' => ['a', ''],
+            '12-hour format of an hour without leading zeros 1 to 12h' => ['h', ''],
+            '12-hour format of an hour with leading zeros, 01 to 12 h' => ['hh', ''],
+            '24-hour format of an hour without leading zeros 0 to 23h' => ['H', ''],
+            '24-hour format of an hour with leading zeros, 00 to 23 h' => ['HH', ''],
+            'hour in day (1~24) #1' => ['k', ''],
+            'hour in day (1~24) #2' => ['kk', ''],
+            'hour in am/pm (0~11) #1' => ['K', ''],
+            'hour in am/pm (0~11) #2' => ['KK', ''],
+            'Minutes without leading zeros, not supported by php but we fallback' => ['m', ''],
+            'Minutes with leading zeros' => ['mm', ''],
+            'Seconds, without leading zeros, not supported by php but we fallback' => ['s', ''],
+            'Seconds, with leading zeros' => ['ss', ''],
+            'fractional second #1' => ['S', ''],
+            'fractional second #2' => ['SS', ''],
+            'fractional second #3' => ['SSS', ''],
+            'fractional second #4' => ['SSSS', ''],
+            'milliseconds in day' => ['A', ''],
+            'Timezone abbreviation #1' => ['z', ''],
+            'Timezone abbreviation #2' => ['zz', ''],
+            'Timezone abbreviation #3' => ['zzz', ''],
+            'Timezone full name, not supported by php but we fallback' => ['zzzz', ''],
+            'Difference to Greenwich time (GMT) in hours #1' => ['Z', ''],
+            'Difference to Greenwich time (GMT) in hours #2' => ['ZZ', ''],
+            'Difference to Greenwich time (GMT) in hours #3' => ['ZZZ', ''],
+            'Time Zone: long localized GMT (=OOOO) e.g. GMT-08:00' => ['ZZZZ', ''],
+            'Time Zone: ISO8601 extended hms? (=XXXXX)' => ['ZZZZZ', ''],
+            'Time Zone: short localized GMT e.g. GMT-8' => ['O', ''],
+            'Time Zone: long localized GMT (=ZZZZ) e.g. GMT-08:00' => ['OOOO', ''],
+            'Time Zone: generic non-location (falls back first to VVVV and then to OOOO) using the ICU defined fallback here #1' => ['v', ''],
+            'Time Zone: generic non-location (falls back first to VVVV and then to OOOO) using the ICU defined fallback here #2' => ['vvvv', ''],
+            'Time Zone: short time zone ID' => ['V', ''],
+            'Time Zone: long time zone ID' => ['VV', ''],
+            'Time Zone: time zone exemplar city' => ['VVV', ''],
+            'Time Zone: generic location (falls back to OOOO) using the ICU defined fallback here' => ['VVVV', ''],
+            'Time Zone: ISO8601 basic hm?, with Z for 0, e.g. -08, +0530, Z' => ['X', ''],
+            'Time Zone: ISO8601 basic hm, with Z, e.g. -0800, Z' => ['XX', ''],
+            'Time Zone: ISO8601 extended hm, with Z, e.g. -08:00, Z' => ['XXX', ''],
+            'Time Zone: ISO8601 basic hms?, with Z, e.g. -0800, -075258, Z' => ['XXXX', ''],
+            'Time Zone: ISO8601 extended hms?, with Z, e.g. -08:00, -07:52:58, Z' => ['XXXXX', ''],
+            'Time Zone: ISO8601 basic hm?, without Z for 0, e.g. -08, +0530' => ['x', ''],
+            'Time Zone: ISO8601 basic hm, without Z, e.g. -0800' => ['xx', ''],
+            'Time Zone: ISO8601 extended hm, without Z, e.g. -08:00' => ['xxx', ''],
+            'Time Zone: ISO8601 basic hms?, without Z, e.g. -0800, -075258' => ['xxxx', ''],
+            'Time Zone: ISO8601 extended hms?, without Z, e.g. -08:00, -07:52:58' => ['xxxxx', ''],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForICU2JUIPatterns
+     */
+    public function testEscapedIcuToJuiSinglePattern($pattern, $expected)
+    {
+        $this->assertEquals($expected, FormatConverter::convertDateIcuToJui($pattern));
+    }
+
     public function testIntlOneDigitIcu()
     {
         $formatter = new Formatter(['locale' => 'en-US']);
@@ -82,7 +361,7 @@ public function testIntlUtf8Ru()
         $this->assertRegExp('/24 авг\.? 2014 г\./', $formatter->asDate('2014-8-24', "dd MMM y 'г'."));
     }
 
-    public function testPhpToICU()
+    public function testPhpToICUMixedPatterns()
     {
         $expected = "yyyy-MM-dd'T'HH:mm:ssxxx";
         $actual = FormatConverter::convertDatePhpToIcu('Y-m-d\TH:i:sP');
@@ -109,6 +388,97 @@ public function testPhpToICU()
         $this->assertEquals($expected, $actual);
     }
 
+    public function providerForPHP2ICUPatterns()
+    {
+        return [
+            'single \' should be encoded as \'\', which internally should be encoded as \'\'\'\'' => ["'", "''"],
+            '\d' => ['\d', "'d'"],
+            'Day of the month, 2 digits with leading zeros 01 to 31' => ['d', 'dd'],
+            '\D' => ['\D', "'D'"],
+            'A textual representation of a day, three letters Mon through Sun' => ['D', 'eee'],
+            '\j' => ['\j', "'j'"],
+            'Day of the month without leading zeros 1 to 31' => ['j', 'd'],
+            '\l' => ['\l', "'l'"],
+            'A full textual representation of the day of the week Sunday through Saturday' => ['l', 'eeee'],
+            '\N' => ['\N', "'N'"],
+            'ISO-8601 numeric representation of the day of the week, 1 (for Monday) through 7 (for Sunday)' => ['N', 'e'],
+            '\S' => ['\S', "'S'"],
+            'English ordinal suffix for the day of the month, 2 characters 	st, nd, rd or th. Works well with j' => ['S', ''],
+            '\w' => ['\w', "'w'"],
+            'Numeric representation of the day of the week 	0 (for Sunday) through 6 (for Saturday)' => ['w', ''],
+            '\z' => ['\z', "'z'"],
+            'The day of the year (starting from 0) 0 through 365' => ['z', 'D'],
+            '\W' => ['\W', "'W'"],
+            'ISO-8601 week number of year, weeks starting on Monday (added in PHP 4.1.0) Example: 42 (the 42nd week in the year)' => ['W', 'w'],
+            '\F' => ['\F', "'F'"],
+            'A full textual representation of a month, January through December' => ['F', 'MMMM'],
+            '\m' => ['\m', "'m'"],
+            'Numeric representation of a month, with leading zeros 01 through 12' => ['m', 'MM'],
+            '\M' => ['\M', "'M'"],
+            'A short textual representation of a month, three letters Jan through Dec' => ['M', 'MMM'],
+            '\n' => ['\n', "'n'"],
+            'Numeric representation of a month, without leading zeros 1 through 12, not supported by ICU but we fallback to "with leading zero"' => ['n', 'M'],
+            '\t' => ['\t', "'t'"],
+            'Number of days in the given month 28 through 31' => ['t', ''],
+            '\L' => ['\L', "'L'"],
+            'Whether it`s a leap year, 1 if it is a leap year, 0 otherwise.' => ['L', ''],
+            '\o' => ['\o', "'o'"],
+            'ISO-8601 year number. This has the same value as Y, except that if the ISO week number (W) belongs to the previous or next year, that year is used instead.' => ['o', 'Y'],
+            '\Y' => ['\Y', "'Y'"],
+            'A full numeric representation of a year, 4 digits Examples: 1999 or 2003' => ['Y', 'yyyy'],
+            '\y' => ['\y', "'y'"],
+            'A two digit representation of a year Examples: 99 or 03' => ['y', 'yy'],
+            '\a' => ['\a', "'a'"],
+            'Lowercase Ante meridiem and Post meridiem, am or pm' => ['a', 'a'],
+            '\A' => ['\A', "'A'"],
+            'Uppercase Ante meridiem and Post meridiem, AM or PM, not supported by ICU but we fallback to lowercase' => ['A', 'a'],
+            '\B' => ['\B', "'B'"],
+            '\A\B' => ['\A\B', "'AB'"],
+            'Swatch Internet time 000 through 999' => ['B', ''],
+            '\g' => ['\g', "'g'"],
+            '12-hour format of an hour without leading zeros 1 through 12' => ['g', 'h'],
+            '\G' => ['\G', "'G'"],
+            '24-hour format of an hour without leading zeros 0 to 23h' => ['G', 'H'],
+            '\h' => ['\h', "'h'"],
+            '12-hour format of an hour with leading zeros, 01 to 12 h' => ['h', 'hh'],
+            '\H' => ['\H', "'H'"],
+            '24-hour format of an hour with leading zeros, 00 to 23 h' => ['H', 'HH'],
+            '\i' => ['\i', "'i'"],
+            'Minutes with leading zeros 00 to 59' => ['i', 'mm'],
+            '\s' => ['\s', "'s'"],
+            'Seconds, with leading zeros 00 through 59' => ['s', 'ss'],
+            '\u' => ['\u', "'u'"],
+            'Microseconds. Example: 654321' => ['u', ''],
+            '\e' => ['\e', "'e'"],
+            'Timezone identifier. Examples: UTC, GMT, Atlantic/Azores' => ['e', 'VV'],
+            '\I' => ['\I', "'I'"],
+            'Whether or not the date is in daylight saving time, 1 if Daylight Saving Time, 0 otherwise.' => ['I', ''],
+            '\O' => ['\O', "'O'"],
+            'Difference to Greenwich time (GMT) in hours, Example: +0200' => ['O', 'xx'],
+            '\P' => ['\P', "'P'"],
+            'Difference to Greenwich time (GMT) with colon between hours and minutes, Example: +02:00' => ['P', 'xxx'],
+            '\T' => ['\T', "'T'"],
+            'Timezone abbreviation, Examples: EST, MDT ...' => ['T', 'zzz'],
+            '\Z' => ['\Z', "'Z'"],
+            'Timezone offset in seconds. The offset for timezones west of UTC is always negative, and for those east of UTC is always positive. -43200 through 50400' => ['Z', ''],
+            '\c' => ['\c', "'c'"],
+            'ISO 8601 date, e.g. 2004-02-12T15:19:21+00:00' => ['c', "yyyy-MM-dd'T'HH:mm:ssxxx"],
+            '\r' => ['\r', "'r'"],
+            'RFC 2822 formatted date, Example: Thu, 21 Dec 2000 16:01:07 +0200' => ['r', 'eee, dd MMM yyyy HH:mm:ss xx'],
+            '\U' => ['\U', "'U'"],
+            'Seconds since the Unix Epoch (January 1 1970 00:00:00 GMT)' => ['U', ''],
+            '\\' => ['\\\\', '\\'],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForPHP2ICUPatterns
+     */
+    public function testPhpToICUSinglePattern($pattern, $expected)
+    {
+        $this->assertEquals($expected, FormatConverter::convertDatePhpToIcu($pattern));
+    }
+
     public function testPhpFormatC()
     {
         $time = time();
@@ -120,4 +490,60 @@ public function testPhpFormatC()
         $formatter = new Formatter(['locale' => 'ru-RU', 'timeZone' => 'Europe/Moscow']);
         $this->assertEquals(date('c', $time), $formatter->asDatetime($time, 'php:c'));
     }
+
+    public function testEscapedPhpToJuiMixedPatterns()
+    {
+        $this->assertEquals('dd-mm-yy', FormatConverter::convertDatePhpToJui('d-m-Y'));
+    }
+
+    public function providerForPHP2JUIPatterns()
+    {
+        return [
+            'Day of the month, 2 digits with leading zeros 	01 to 31' => ['d', 'dd'],
+            'A textual representation of a day, three letters 	Mon through Sun' => ['D', 'D'],
+            'Day of the month without leading zeros 1 to 31' => ['j', 'd'],
+            'A full textual representation of the day of the week Sunday through Saturday' => ['l', 'DD'],
+            'ISO-8601 numeric representation of the day of the week, 1 (for Monday) through 7 (for Sunday)' => ['N', ''],
+            'English ordinal suffix for the day of the month, 2 characters 	st, nd, rd or th. Works well with j' => ['S', ''],
+            'Numeric representation of the day of the week 0 (for Sunday) through 6 (for Saturday)' => ['w', ''],
+            'The day of the year (starting from 0) 0 through 365' => ['z', 'o'],
+            'ISO-8601 week number of year, weeks starting on Monday (added in PHP 4.1.0) Example: 42 (the 42nd week in the year)' => ['W', ''],
+            'A full textual representation of a month, January through December' => ['F', 'MM'],
+            'Numeric representation of a month, with leading zeros 01 through 12' => ['m', 'mm'],
+            'A short textual representation of a month, three letters Jan through Dec' => ['M', 'M'],
+            'Numeric representation of a month, without leading zeros 1 through 12' => ['n', 'm'],
+            'Number of days in the given month 	28 through 31' => ['t', ''],
+            'Whether it`s a leap year, 1 if it is a leap year, 0 otherwise.' => ['L', ''],
+            'ISO-8601 year number. This has the same value as Y, except that if the ISO week number (W) belongs to the previous or next year, that year is used instead.' => ['o', ''],
+            'A full numeric representation of a year, 4 digits 	Examples: 1999 or 2003' => ['Y', 'yy'],
+            'A two digit representation of a year Examples: 99 or 03' => ['y', 'y'],
+            'Lowercase Ante meridiem and Post meridiem, am or pm' => ['a', ''],
+            'Uppercase Ante meridiem and Post meridiem, AM or PM, not supported by ICU but we fallback to lowercase' => ['A', ''],
+            'Swatch Internet time 000 through 999' => ['B', ''],
+            '12-hour format of an hour without leading zeros 1 through 12' => ['g', ''],
+            '24-hour format of an hour without leading zeros 0 to 23h' => ['G', ''],
+            '12-hour format of an hour with leading zeros, 01 to 12 h' => ['h', ''],
+            '24-hour format of an hour with leading zeros, 00 to 23 h' => ['H', ''],
+            'Minutes with leading zeros 00 to 59' => ['i', ''],
+            'Seconds, with leading zeros 00 through 59' => ['s', ''],
+            'Microseconds. Example: 654321' => ['u', ''],
+            'Timezone identifier. Examples: UTC, GMT, Atlantic/Azores' => ['e', ''],
+            'Whether or not the date is in daylight saving time, 1 if Daylight Saving Time, 0 otherwise.' => ['I', ''],
+            'Difference to Greenwich time (GMT) in hours, Example: +0200' => ['O', ''],
+            'Difference to Greenwich time (GMT) with colon between hours and minutes, Example: +02:00' => ['P', ''],
+            'Timezone abbreviation, Examples: EST, MDT ...' => ['T', ''],
+            'Timezone offset in seconds. The offset for timezones west of UTC is always negative, and for those east of UTC is always positive. -43200 through 50400' => ['Z', ''],
+            'ISO 8601 date, e.g. 2004-02-12T15:19:21+00:00, skipping the time here because it is not supported' => ['c', 'yyyy-MM-dd'],
+            'RFC 2822 formatted date, Example: Thu, 21 Dec 2000 16:01:07 +0200, skipping the time here because it is not supported' => ['r', 'D, d M yy'],
+            'Seconds since the Unix Epoch (January 1 1970 00:00:00 GMT)' => ['U', '@'],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForPHP2JUIPatterns
+     */
+    public function testEscapedPhpToJuiSinglePattern($pattern, $expected)
+    {
+        $this->assertEquals($expected, FormatConverter::convertDatePhpToJui($pattern));
+    }
 }
diff --git a/tests/framework/helpers/HtmlTest.php b/tests/framework/helpers/HtmlTest.php
index 066d6873a57..5b2c9de0090 100644
--- a/tests/framework/helpers/HtmlTest.php
+++ b/tests/framework/helpers/HtmlTest.php
@@ -1943,6 +1943,19 @@ public function testGetInputId($attributeName, $inputIdExpected)
         $this->assertSame($inputIdExpected, $inputIdActual);
     }
 
+    /**
+     * @dataProvider testGetInputIdByNameDataProvider
+     */
+    public function testGetInputIdByName($attributeName, $inputIdExpected)
+    {
+        $model = new DynamicModel();
+        $model->defineAttribute($attributeName);
+        $inputNameActual = Html::getInputName($model, $attributeName);
+        $inputIdActual = Html::getInputIdByName($inputNameActual);
+
+        $this->assertSame($inputIdExpected, $inputIdActual);
+    }
+
     public function testEscapeJsRegularExpression()
     {
         $expected = '/[a-z0-9-]+/';
@@ -2078,6 +2091,45 @@ public function testGetInputIdDataProvider()
             ],
         ];
     }
+
+    public function testGetInputIdByNameDataProvider()
+    {
+        return [
+            [
+                'foo',
+                'dynamicmodel-foo',
+            ],
+            [
+                'FooBar',
+                'dynamicmodel-foobar',
+            ],
+            [
+                'Foo_Bar',
+                'dynamicmodel-foo_bar',
+            ],
+            [
+                'foo[]',
+                'dynamicmodel-foo',
+            ],
+            [
+                'foo[bar][baz]',
+                'dynamicmodel-foo-bar-baz',
+            ],
+
+            [
+                'foo.bar',
+                'dynamicmodel-foo-bar',
+            ],
+            [
+                'bild_groß_dateiname',
+                'dynamicmodel-bild_groß_dateiname',
+            ],
+            [
+                'ФуБарБаз',
+                'dynamicmodel-фубарбаз',
+            ],
+        ];
+    }
 }
 
 /**
diff --git a/tests/framework/helpers/InflectorTest.php b/tests/framework/helpers/InflectorTest.php
index 7b80522066a..eaadb1c8650 100644
--- a/tests/framework/helpers/InflectorTest.php
+++ b/tests/framework/helpers/InflectorTest.php
@@ -44,6 +44,8 @@ public function testPluralize()
             'car' => 'cars',
             'netherlands' => 'netherlands',
             'currency' => 'currencies',
+            'software' => 'software',
+            'hardware' => 'hardware',
         ];
 
         foreach ($testData as $testIn => $testOut) {
@@ -73,6 +75,8 @@ public function testSingularize()
             'cars' => 'car',
             'Netherlands' => 'Netherlands',
             'currencies' => 'currency',
+            'software' => 'software',
+            'hardware' => 'hardware',
         ];
         foreach ($testData as $testIn => $testOut) {
             $this->assertEquals($testOut, Inflector::singularize($testIn));
diff --git a/tests/framework/helpers/JsonTest.php b/tests/framework/helpers/JsonTest.php
index 785b093ea31..9695af91c0f 100644
--- a/tests/framework/helpers/JsonTest.php
+++ b/tests/framework/helpers/JsonTest.php
@@ -230,6 +230,37 @@ public function testEncodeDateTime()
         $output = Json::encode($input);
         $this->assertEquals('{"date":"2014-10-12 00:00:00.000000","timezone_type":3,"timezone":"UTC"}', $output);
     }
+
+    public function testPrettyPrint()
+    {
+        $defaultValue = Json::$prettyPrint;
+        $input = ['a' => 1, 'b' => 2];
+        $defOutput = '{"a":1,"b":2}';
+        $ppOutput = "{\n    \"a\": 1,\n    \"b\": 2\n}";
+
+        // Test unchanged options
+        Json::$prettyPrint = null;
+        $output = Json::encode($input, 320);
+        $this->assertEquals($defOutput, $output);
+        $output = Json::encode($input, 448);
+        $this->assertEquals($ppOutput, $output);
+
+        // Test pretty print enabled
+        Json::$prettyPrint = true;
+        $output = Json::encode($input, 320);
+        $this->assertEquals($ppOutput, $output);
+        $output = Json::encode($input, 448);
+        $this->assertEquals($ppOutput, $output);
+
+        // Test pretty print disabled
+        Json::$prettyPrint = false;
+        $output = Json::encode($input, 320);
+        $this->assertEquals($defOutput, $output);
+        $output = Json::encode($input, 448);
+        $this->assertEquals($defOutput, $output);
+
+        Json::$prettyPrint = $defaultValue;
+    }
 }
 
 class JsonModel extends DynamicModel implements \JsonSerializable
diff --git a/tests/framework/helpers/MimeTest.php b/tests/framework/helpers/MimeTest.php
new file mode 100644
index 00000000000..fd9d848c57c
--- /dev/null
+++ b/tests/framework/helpers/MimeTest.php
@@ -0,0 +1,1031 @@
+<?php
+/**
+ * @link http://www.yiiframework.com/
+ * @copyright Copyright (c) 2008 Yii Software LLC
+ * @license http://www.yiiframework.com/license/
+ */
+
+namespace yiiunit\framework\helpers;
+
+use yiiunit\TestCase;
+
+/**
+ * @group helpers
+ */
+class MimeTest extends TestCase
+{
+    public function testMimeAliases()
+    {
+        $this->assertSame(
+            [
+                'text/xml' => 'application/xml',
+                'image/svg' => 'image/svg+xml',
+                'image/x-bmp' => 'image/bmp',
+                'image/x-bitmap' => 'image/bmp',
+                'image/x-xbitmap' => 'image/bmp',
+                'image/x-win-bitmap' => 'image/bmp',
+                'image/x-windows-bmp' => 'image/bmp',
+                'image/ms-bmp' => 'image/bmp',
+                'image/x-ms-bmp' => 'image/bmp',
+                'application/bmp' => 'image/bmp',
+                'application/x-bmp' => 'image/bmp',
+                'application/x-win-bitmap' => 'image/bmp',
+            ],
+            require __DIR__ . '/../../../framework/helpers/mimeAliases.php'
+        );
+    }
+
+    public function testMimeTypes()
+    {
+        $this->assertSame(
+            [
+                '3dml' => 'text/vnd.in3d.3dml',
+                '3ds' => 'image/x-3ds',
+                '3g2' => 'video/3gpp2',
+                '3gp' => 'video/3gpp',
+                '7z' => 'application/x-7z-compressed',
+                'aab' => 'application/x-authorware-bin',
+                'aac' => 'audio/x-aac',
+                'aam' => 'application/x-authorware-map',
+                'aas' => 'application/x-authorware-seg',
+                'abw' => 'application/x-abiword',
+                'ac' => 'application/pkix-attr-cert',
+                'acc' => 'application/vnd.americandynamics.acc',
+                'ace' => 'application/x-ace-compressed',
+                'acu' => 'application/vnd.acucobol',
+                'acutc' => 'application/vnd.acucorp',
+                'adp' => 'audio/adpcm',
+                'aep' => 'application/vnd.audiograph',
+                'afm' => 'application/x-font-type1',
+                'afp' => 'application/vnd.ibm.modcap',
+                'ahead' => 'application/vnd.ahead.space',
+                'ai' => 'application/postscript',
+                'aif' => 'audio/x-aiff',
+                'aifc' => 'audio/x-aiff',
+                'aiff' => 'audio/x-aiff',
+                'air' => 'application/vnd.adobe.air-application-installer-package+zip',
+                'ait' => 'application/vnd.dvb.ait',
+                'ami' => 'application/vnd.amiga.ami',
+                'apk' => 'application/vnd.android.package-archive',
+                'appcache' => 'text/cache-manifest',
+                'application' => 'application/x-ms-application',
+                'apr' => 'application/vnd.lotus-approach',
+                'arc' => 'application/x-freearc',
+                'asc' => 'application/pgp-signature',
+                'asf' => 'video/x-ms-asf',
+                'asm' => 'text/x-asm',
+                'aso' => 'application/vnd.accpac.simply.aso',
+                'asx' => 'video/x-ms-asf',
+                'atc' => 'application/vnd.acucorp',
+                'atom' => 'application/atom+xml',
+                'atomcat' => 'application/atomcat+xml',
+                'atomsvc' => 'application/atomsvc+xml',
+                'atx' => 'application/vnd.antix.game-component',
+                'au' => 'audio/basic',
+                'avi' => 'video/x-msvideo',
+                'aw' => 'application/applixware',
+                'azf' => 'application/vnd.airzip.filesecure.azf',
+                'azs' => 'application/vnd.airzip.filesecure.azs',
+                'azw' => 'application/vnd.amazon.ebook',
+                'bat' => 'application/x-msdownload',
+                'bcpio' => 'application/x-bcpio',
+                'bdf' => 'application/x-font-bdf',
+                'bdm' => 'application/vnd.syncml.dm+wbxml',
+                'bed' => 'application/vnd.realvnc.bed',
+                'bh2' => 'application/vnd.fujitsu.oasysprs',
+                'bin' => 'application/octet-stream',
+                'blb' => 'application/x-blorb',
+                'blorb' => 'application/x-blorb',
+                'bmi' => 'application/vnd.bmi',
+                'bmp' => 'image/bmp',
+                'book' => 'application/vnd.framemaker',
+                'box' => 'application/vnd.previewsystems.box',
+                'boz' => 'application/x-bzip2',
+                'bpk' => 'application/octet-stream',
+                'btif' => 'image/prs.btif',
+                'bz' => 'application/x-bzip',
+                'bz2' => 'application/x-bzip2',
+                'c' => 'text/x-c',
+                'c11amc' => 'application/vnd.cluetrust.cartomobile-config',
+                'c11amz' => 'application/vnd.cluetrust.cartomobile-config-pkg',
+                'c4d' => 'application/vnd.clonk.c4group',
+                'c4f' => 'application/vnd.clonk.c4group',
+                'c4g' => 'application/vnd.clonk.c4group',
+                'c4p' => 'application/vnd.clonk.c4group',
+                'c4u' => 'application/vnd.clonk.c4group',
+                'cab' => 'application/vnd.ms-cab-compressed',
+                'caf' => 'audio/x-caf',
+                'cap' => 'application/vnd.tcpdump.pcap',
+                'car' => 'application/vnd.curl.car',
+                'cat' => 'application/vnd.ms-pki.seccat',
+                'cb7' => 'application/x-cbr',
+                'cba' => 'application/x-cbr',
+                'cbr' => 'application/x-cbr',
+                'cbt' => 'application/x-cbr',
+                'cbz' => 'application/x-cbr',
+                'cc' => 'text/x-c',
+                'cct' => 'application/x-director',
+                'ccxml' => 'application/ccxml+xml',
+                'cdbcmsg' => 'application/vnd.contact.cmsg',
+                'cdf' => 'application/x-netcdf',
+                'cdkey' => 'application/vnd.mediastation.cdkey',
+                'cdmia' => 'application/cdmi-capability',
+                'cdmic' => 'application/cdmi-container',
+                'cdmid' => 'application/cdmi-domain',
+                'cdmio' => 'application/cdmi-object',
+                'cdmiq' => 'application/cdmi-queue',
+                'cdx' => 'chemical/x-cdx',
+                'cdxml' => 'application/vnd.chemdraw+xml',
+                'cdy' => 'application/vnd.cinderella',
+                'cer' => 'application/pkix-cert',
+                'cfs' => 'application/x-cfs-compressed',
+                'cgm' => 'image/cgm',
+                'chat' => 'application/x-chat',
+                'chm' => 'application/vnd.ms-htmlhelp',
+                'chrt' => 'application/vnd.kde.kchart',
+                'cif' => 'chemical/x-cif',
+                'cii' => 'application/vnd.anser-web-certificate-issue-initiation',
+                'cil' => 'application/vnd.ms-artgalry',
+                'cla' => 'application/vnd.claymore',
+                'class' => 'application/java-vm',
+                'clkk' => 'application/vnd.crick.clicker.keyboard',
+                'clkp' => 'application/vnd.crick.clicker.palette',
+                'clkt' => 'application/vnd.crick.clicker.template',
+                'clkw' => 'application/vnd.crick.clicker.wordbank',
+                'clkx' => 'application/vnd.crick.clicker',
+                'clp' => 'application/x-msclip',
+                'cmc' => 'application/vnd.cosmocaller',
+                'cmdf' => 'chemical/x-cmdf',
+                'cml' => 'chemical/x-cml',
+                'cmp' => 'application/vnd.yellowriver-custom-menu',
+                'cmx' => 'image/x-cmx',
+                'cod' => 'application/vnd.rim.cod',
+                'com' => 'application/x-msdownload',
+                'conf' => 'text/plain',
+                'cpio' => 'application/x-cpio',
+                'cpp' => 'text/x-c',
+                'cpt' => 'application/mac-compactpro',
+                'crd' => 'application/x-mscardfile',
+                'crl' => 'application/pkix-crl',
+                'crt' => 'application/x-x509-ca-cert',
+                'cryptonote' => 'application/vnd.rig.cryptonote',
+                'csh' => 'application/x-csh',
+                'csml' => 'chemical/x-csml',
+                'csp' => 'application/vnd.commonspace',
+                'css' => 'text/css',
+                'cst' => 'application/x-director',
+                'csv' => 'text/csv',
+                'cu' => 'application/cu-seeme',
+                'curl' => 'text/vnd.curl',
+                'cww' => 'application/prs.cww',
+                'cxt' => 'application/x-director',
+                'cxx' => 'text/x-c',
+                'dae' => 'model/vnd.collada+xml',
+                'daf' => 'application/vnd.mobius.daf',
+                'dart' => 'application/vnd.dart',
+                'dataless' => 'application/vnd.fdsn.seed',
+                'davmount' => 'application/davmount+xml',
+                'dbk' => 'application/docbook+xml',
+                'dcr' => 'application/x-director',
+                'dcurl' => 'text/vnd.curl.dcurl',
+                'dd2' => 'application/vnd.oma.dd2+xml',
+                'ddd' => 'application/vnd.fujixerox.ddd',
+                'deb' => 'application/x-debian-package',
+                'def' => 'text/plain',
+                'deploy' => 'application/octet-stream',
+                'der' => 'application/x-x509-ca-cert',
+                'dfac' => 'application/vnd.dreamfactory',
+                'dgc' => 'application/x-dgc-compressed',
+                'dic' => 'text/x-c',
+                'dir' => 'application/x-director',
+                'dis' => 'application/vnd.mobius.dis',
+                'dist' => 'application/octet-stream',
+                'distz' => 'application/octet-stream',
+                'djv' => 'image/vnd.djvu',
+                'djvu' => 'image/vnd.djvu',
+                'dll' => 'application/x-msdownload',
+                'dmg' => 'application/x-apple-diskimage',
+                'dmp' => 'application/vnd.tcpdump.pcap',
+                'dms' => 'application/octet-stream',
+                'dna' => 'application/vnd.dna',
+                'doc' => 'application/msword',
+                'docm' => 'application/vnd.ms-word.document.macroenabled.12',
+                'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
+                'dot' => 'application/msword',
+                'dotm' => 'application/vnd.ms-word.template.macroenabled.12',
+                'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
+                'dp' => 'application/vnd.osgi.dp',
+                'dpg' => 'application/vnd.dpgraph',
+                'dra' => 'audio/vnd.dra',
+                'dsc' => 'text/prs.lines.tag',
+                'dssc' => 'application/dssc+der',
+                'dtb' => 'application/x-dtbook+xml',
+                'dtd' => 'application/xml-dtd',
+                'dts' => 'audio/vnd.dts',
+                'dtshd' => 'audio/vnd.dts.hd',
+                'dump' => 'application/octet-stream',
+                'dvb' => 'video/vnd.dvb.file',
+                'dvi' => 'application/x-dvi',
+                'dwf' => 'model/vnd.dwf',
+                'dwg' => 'image/vnd.dwg',
+                'dxf' => 'image/vnd.dxf',
+                'dxp' => 'application/vnd.spotfire.dxp',
+                'dxr' => 'application/x-director',
+                'ecelp4800' => 'audio/vnd.nuera.ecelp4800',
+                'ecelp7470' => 'audio/vnd.nuera.ecelp7470',
+                'ecelp9600' => 'audio/vnd.nuera.ecelp9600',
+                'ecma' => 'application/ecmascript',
+                'edm' => 'application/vnd.novadigm.edm',
+                'edx' => 'application/vnd.novadigm.edx',
+                'efif' => 'application/vnd.picsel',
+                'ei6' => 'application/vnd.pg.osasli',
+                'elc' => 'application/octet-stream',
+                'emf' => 'application/x-msmetafile',
+                'eml' => 'message/rfc822',
+                'emma' => 'application/emma+xml',
+                'emz' => 'application/x-msmetafile',
+                'eol' => 'audio/vnd.digital-winds',
+                'eot' => 'application/vnd.ms-fontobject',
+                'eps' => 'application/postscript',
+                'epub' => 'application/epub+zip',
+                'es3' => 'application/vnd.eszigno3+xml',
+                'esa' => 'application/vnd.osgi.subsystem',
+                'esf' => 'application/vnd.epson.esf',
+                'et3' => 'application/vnd.eszigno3+xml',
+                'etx' => 'text/x-setext',
+                'eva' => 'application/x-eva',
+                'evy' => 'application/x-envoy',
+                'exe' => 'application/x-msdownload',
+                'exi' => 'application/exi',
+                'ext' => 'application/vnd.novadigm.ext',
+                'ez' => 'application/andrew-inset',
+                'ez2' => 'application/vnd.ezpix-album',
+                'ez3' => 'application/vnd.ezpix-package',
+                'f' => 'text/x-fortran',
+                'f4v' => 'video/x-f4v',
+                'f77' => 'text/x-fortran',
+                'f90' => 'text/x-fortran',
+                'fbs' => 'image/vnd.fastbidsheet',
+                'fcdt' => 'application/vnd.adobe.formscentral.fcdt',
+                'fcs' => 'application/vnd.isac.fcs',
+                'fdf' => 'application/vnd.fdf',
+                'fe_launch' => 'application/vnd.denovo.fcselayout-link',
+                'fg5' => 'application/vnd.fujitsu.oasysgp',
+                'fgd' => 'application/x-director',
+                'fh' => 'image/x-freehand',
+                'fh4' => 'image/x-freehand',
+                'fh5' => 'image/x-freehand',
+                'fh7' => 'image/x-freehand',
+                'fhc' => 'image/x-freehand',
+                'fig' => 'application/x-xfig',
+                'flac' => 'audio/x-flac',
+                'fli' => 'video/x-fli',
+                'flo' => 'application/vnd.micrografx.flo',
+                'flv' => 'video/x-flv',
+                'flw' => 'application/vnd.kde.kivio',
+                'flx' => 'text/vnd.fmi.flexstor',
+                'fly' => 'text/vnd.fly',
+                'fm' => 'application/vnd.framemaker',
+                'fnc' => 'application/vnd.frogans.fnc',
+                'for' => 'text/x-fortran',
+                'fpx' => 'image/vnd.fpx',
+                'frame' => 'application/vnd.framemaker',
+                'fsc' => 'application/vnd.fsc.weblaunch',
+                'fst' => 'image/vnd.fst',
+                'ftc' => 'application/vnd.fluxtime.clip',
+                'fti' => 'application/vnd.anser-web-funds-transfer-initiation',
+                'fvt' => 'video/vnd.fvt',
+                'fxp' => 'application/vnd.adobe.fxp',
+                'fxpl' => 'application/vnd.adobe.fxp',
+                'fzs' => 'application/vnd.fuzzysheet',
+                'g2w' => 'application/vnd.geoplan',
+                'g3' => 'image/g3fax',
+                'g3w' => 'application/vnd.geospace',
+                'gac' => 'application/vnd.groove-account',
+                'gam' => 'application/x-tads',
+                'gbr' => 'application/rpki-ghostbusters',
+                'gca' => 'application/x-gca-compressed',
+                'gdl' => 'model/vnd.gdl',
+                'geo' => 'application/vnd.dynageo',
+                'gex' => 'application/vnd.geometry-explorer',
+                'ggb' => 'application/vnd.geogebra.file',
+                'ggt' => 'application/vnd.geogebra.tool',
+                'ghf' => 'application/vnd.groove-help',
+                'gif' => 'image/gif',
+                'gim' => 'application/vnd.groove-identity-message',
+                'gml' => 'application/gml+xml',
+                'gmx' => 'application/vnd.gmx',
+                'gnumeric' => 'application/x-gnumeric',
+                'gph' => 'application/vnd.flographit',
+                'gpx' => 'application/gpx+xml',
+                'gqf' => 'application/vnd.grafeq',
+                'gqs' => 'application/vnd.grafeq',
+                'gram' => 'application/srgs',
+                'gramps' => 'application/x-gramps-xml',
+                'gre' => 'application/vnd.geometry-explorer',
+                'grv' => 'application/vnd.groove-injector',
+                'grxml' => 'application/srgs+xml',
+                'gsf' => 'application/x-font-ghostscript',
+                'gtar' => 'application/x-gtar',
+                'gtm' => 'application/vnd.groove-tool-message',
+                'gtw' => 'model/vnd.gtw',
+                'gv' => 'text/vnd.graphviz',
+                'gxf' => 'application/gxf',
+                'gxt' => 'application/vnd.geonext',
+                'h' => 'text/x-c',
+                'h261' => 'video/h261',
+                'h263' => 'video/h263',
+                'h264' => 'video/h264',
+                'hal' => 'application/vnd.hal+xml',
+                'hbci' => 'application/vnd.hbci',
+                'hdf' => 'application/x-hdf',
+                'hh' => 'text/x-c',
+                'hlp' => 'application/winhlp',
+                'hpgl' => 'application/vnd.hp-hpgl',
+                'hpid' => 'application/vnd.hp-hpid',
+                'hps' => 'application/vnd.hp-hps',
+                'hqx' => 'application/mac-binhex40',
+                'htke' => 'application/vnd.kenameaapp',
+                'htm' => 'text/html',
+                'html' => 'text/html',
+                'hvd' => 'application/vnd.yamaha.hv-dic',
+                'hvp' => 'application/vnd.yamaha.hv-voice',
+                'hvs' => 'application/vnd.yamaha.hv-script',
+                'i2g' => 'application/vnd.intergeo',
+                'icc' => 'application/vnd.iccprofile',
+                'ice' => 'x-conference/x-cooltalk',
+                'icm' => 'application/vnd.iccprofile',
+                'ico' => 'image/x-icon',
+                'ics' => 'text/calendar',
+                'ief' => 'image/ief',
+                'ifb' => 'text/calendar',
+                'ifm' => 'application/vnd.shana.informed.formdata',
+                'iges' => 'model/iges',
+                'igl' => 'application/vnd.igloader',
+                'igm' => 'application/vnd.insors.igm',
+                'igs' => 'model/iges',
+                'igx' => 'application/vnd.micrografx.igx',
+                'iif' => 'application/vnd.shana.informed.interchange',
+                'imp' => 'application/vnd.accpac.simply.imp',
+                'ims' => 'application/vnd.ms-ims',
+                'in' => 'text/plain',
+                'ink' => 'application/inkml+xml',
+                'inkml' => 'application/inkml+xml',
+                'install' => 'application/x-install-instructions',
+                'iota' => 'application/vnd.astraea-software.iota',
+                'ipfix' => 'application/ipfix',
+                'ipk' => 'application/vnd.shana.informed.package',
+                'irm' => 'application/vnd.ibm.rights-management',
+                'irp' => 'application/vnd.irepository.package+xml',
+                'iso' => 'application/x-iso9660-image',
+                'itp' => 'application/vnd.shana.informed.formtemplate',
+                'ivp' => 'application/vnd.immervision-ivp',
+                'ivu' => 'application/vnd.immervision-ivu',
+                'jad' => 'text/vnd.sun.j2me.app-descriptor',
+                'jam' => 'application/vnd.jam',
+                'jar' => 'application/java-archive',
+                'java' => 'text/x-java-source',
+                'jisp' => 'application/vnd.jisp',
+                'jlt' => 'application/vnd.hp-jlyt',
+                'jnlp' => 'application/x-java-jnlp-file',
+                'joda' => 'application/vnd.joost.joda-archive',
+                'jpe' => 'image/jpeg',
+                'jpeg' => 'image/jpeg',
+                'jpg' => 'image/jpeg',
+                'jpgm' => 'video/jpm',
+                'jpgv' => 'video/jpeg',
+                'jpm' => 'video/jpm',
+                'js' => 'application/javascript',
+                'json' => 'application/json',
+                'jsonml' => 'application/jsonml+json',
+                'kar' => 'audio/midi',
+                'karbon' => 'application/vnd.kde.karbon',
+                'kfo' => 'application/vnd.kde.kformula',
+                'kia' => 'application/vnd.kidspiration',
+                'kml' => 'application/vnd.google-earth.kml+xml',
+                'kmz' => 'application/vnd.google-earth.kmz',
+                'kne' => 'application/vnd.kinar',
+                'knp' => 'application/vnd.kinar',
+                'kon' => 'application/vnd.kde.kontour',
+                'kpr' => 'application/vnd.kde.kpresenter',
+                'kpt' => 'application/vnd.kde.kpresenter',
+                'kpxx' => 'application/vnd.ds-keypoint',
+                'ksp' => 'application/vnd.kde.kspread',
+                'ktr' => 'application/vnd.kahootz',
+                'ktx' => 'image/ktx',
+                'ktz' => 'application/vnd.kahootz',
+                'kwd' => 'application/vnd.kde.kword',
+                'kwt' => 'application/vnd.kde.kword',
+                'lasxml' => 'application/vnd.las.las+xml',
+                'latex' => 'application/x-latex',
+                'lbd' => 'application/vnd.llamagraphics.life-balance.desktop',
+                'lbe' => 'application/vnd.llamagraphics.life-balance.exchange+xml',
+                'les' => 'application/vnd.hhe.lesson-player',
+                'lha' => 'application/x-lzh-compressed',
+                'link66' => 'application/vnd.route66.link66+xml',
+                'list' => 'text/plain',
+                'list3820' => 'application/vnd.ibm.modcap',
+                'listafp' => 'application/vnd.ibm.modcap',
+                'lnk' => 'application/x-ms-shortcut',
+                'log' => 'text/plain',
+                'lostxml' => 'application/lost+xml',
+                'lrf' => 'application/octet-stream',
+                'lrm' => 'application/vnd.ms-lrm',
+                'ltf' => 'application/vnd.frogans.ltf',
+                'lvp' => 'audio/vnd.lucent.voice',
+                'lwp' => 'application/vnd.lotus-wordpro',
+                'lzh' => 'application/x-lzh-compressed',
+                'm13' => 'application/x-msmediaview',
+                'm14' => 'application/x-msmediaview',
+                'm1v' => 'video/mpeg',
+                'm21' => 'application/mp21',
+                'm2a' => 'audio/mpeg',
+                'm2v' => 'video/mpeg',
+                'm3a' => 'audio/mpeg',
+                'm3u' => 'audio/x-mpegurl',
+                'm3u8' => 'application/vnd.apple.mpegurl',
+                'm4a' => 'audio/mp4',
+                'm4u' => 'video/vnd.mpegurl',
+                'm4v' => 'video/x-m4v',
+                'ma' => 'application/mathematica',
+                'mads' => 'application/mads+xml',
+                'mag' => 'application/vnd.ecowin.chart',
+                'maker' => 'application/vnd.framemaker',
+                'man' => 'text/troff',
+                'mar' => 'application/octet-stream',
+                'mathml' => 'application/mathml+xml',
+                'mb' => 'application/mathematica',
+                'mbk' => 'application/vnd.mobius.mbk',
+                'mbox' => 'application/mbox',
+                'mc1' => 'application/vnd.medcalcdata',
+                'mcd' => 'application/vnd.mcd',
+                'mcurl' => 'text/vnd.curl.mcurl',
+                'mdb' => 'application/x-msaccess',
+                'mdi' => 'image/vnd.ms-modi',
+                'me' => 'text/troff',
+                'mesh' => 'model/mesh',
+                'meta4' => 'application/metalink4+xml',
+                'metalink' => 'application/metalink+xml',
+                'mets' => 'application/mets+xml',
+                'mfm' => 'application/vnd.mfmp',
+                'mft' => 'application/rpki-manifest',
+                'mgp' => 'application/vnd.osgeo.mapguide.package',
+                'mgz' => 'application/vnd.proteus.magazine',
+                'mid' => 'audio/midi',
+                'midi' => 'audio/midi',
+                'mie' => 'application/x-mie',
+                'mif' => 'application/vnd.mif',
+                'mime' => 'message/rfc822',
+                'mj2' => 'video/mj2',
+                'mjp2' => 'video/mj2',
+                'mjs' => 'text/javascript',
+                'mk3d' => 'video/x-matroska',
+                'mka' => 'audio/x-matroska',
+                'mks' => 'video/x-matroska',
+                'mkv' => 'video/x-matroska',
+                'mlp' => 'application/vnd.dolby.mlp',
+                'mmd' => 'application/vnd.chipnuts.karaoke-mmd',
+                'mmf' => 'application/vnd.smaf',
+                'mmr' => 'image/vnd.fujixerox.edmics-mmr',
+                'mng' => 'video/x-mng',
+                'mny' => 'application/x-msmoney',
+                'mobi' => 'application/x-mobipocket-ebook',
+                'mods' => 'application/mods+xml',
+                'mov' => 'video/quicktime',
+                'movie' => 'video/x-sgi-movie',
+                'mp2' => 'audio/mpeg',
+                'mp21' => 'application/mp21',
+                'mp2a' => 'audio/mpeg',
+                'mp3' => 'audio/mpeg',
+                'mp4' => 'video/mp4',
+                'mp4a' => 'audio/mp4',
+                'mp4s' => 'application/mp4',
+                'mp4v' => 'video/mp4',
+                'mpc' => 'application/vnd.mophun.certificate',
+                'mpe' => 'video/mpeg',
+                'mpeg' => 'video/mpeg',
+                'mpg' => 'video/mpeg',
+                'mpg4' => 'video/mp4',
+                'mpga' => 'audio/mpeg',
+                'mpkg' => 'application/vnd.apple.installer+xml',
+                'mpm' => 'application/vnd.blueice.multipass',
+                'mpn' => 'application/vnd.mophun.application',
+                'mpp' => 'application/vnd.ms-project',
+                'mpt' => 'application/vnd.ms-project',
+                'mpy' => 'application/vnd.ibm.minipay',
+                'mqy' => 'application/vnd.mobius.mqy',
+                'mrc' => 'application/marc',
+                'mrcx' => 'application/marcxml+xml',
+                'ms' => 'text/troff',
+                'mscml' => 'application/mediaservercontrol+xml',
+                'mseed' => 'application/vnd.fdsn.mseed',
+                'mseq' => 'application/vnd.mseq',
+                'msf' => 'application/vnd.epson.msf',
+                0 => 'application/vnd.lotus-1-2-3',
+                'msh' => 'model/mesh',
+                'msi' => 'application/x-msdownload',
+                'msl' => 'application/vnd.mobius.msl',
+                'msty' => 'application/vnd.muvee.style',
+                'mts' => 'model/vnd.mts',
+                'mus' => 'application/vnd.musician',
+                'musicxml' => 'application/vnd.recordare.musicxml+xml',
+                'mvb' => 'application/x-msmediaview',
+                'mwf' => 'application/vnd.mfer',
+                'mxf' => 'application/mxf',
+                'mxl' => 'application/vnd.recordare.musicxml',
+                'mxml' => 'application/xv+xml',
+                'mxs' => 'application/vnd.triscape.mxs',
+                'mxu' => 'video/vnd.mpegurl',
+                'n-gage' => 'application/vnd.nokia.n-gage.symbian.install',
+                'n3' => 'text/n3',
+                'nb' => 'application/mathematica',
+                'nbp' => 'application/vnd.wolfram.player',
+                'nc' => 'application/x-netcdf',
+                'ncx' => 'application/x-dtbncx+xml',
+                'nfo' => 'text/x-nfo',
+                'ngdat' => 'application/vnd.nokia.n-gage.data',
+                'nitf' => 'application/vnd.nitf',
+                'nlu' => 'application/vnd.neurolanguage.nlu',
+                'nml' => 'application/vnd.enliven',
+                'nnd' => 'application/vnd.noblenet-directory',
+                'nns' => 'application/vnd.noblenet-sealer',
+                'nnw' => 'application/vnd.noblenet-web',
+                'npx' => 'image/vnd.net-fpx',
+                'nsc' => 'application/x-conference',
+                'nsf' => 'application/vnd.lotus-notes',
+                'ntf' => 'application/vnd.nitf',
+                'nzb' => 'application/x-nzb',
+                'oa2' => 'application/vnd.fujitsu.oasys2',
+                'oa3' => 'application/vnd.fujitsu.oasys3',
+                'oas' => 'application/vnd.fujitsu.oasys',
+                'obd' => 'application/x-msbinder',
+                'obj' => 'application/x-tgif',
+                'oda' => 'application/oda',
+                'odb' => 'application/vnd.oasis.opendocument.database',
+                'odc' => 'application/vnd.oasis.opendocument.chart',
+                'odf' => 'application/vnd.oasis.opendocument.formula',
+                'odft' => 'application/vnd.oasis.opendocument.formula-template',
+                'odg' => 'application/vnd.oasis.opendocument.graphics',
+                'odi' => 'application/vnd.oasis.opendocument.image',
+                'odm' => 'application/vnd.oasis.opendocument.text-master',
+                'odp' => 'application/vnd.oasis.opendocument.presentation',
+                'ods' => 'application/vnd.oasis.opendocument.spreadsheet',
+                'odt' => 'application/vnd.oasis.opendocument.text',
+                'oga' => 'audio/ogg',
+                'ogg' => 'audio/ogg',
+                'ogv' => 'video/ogg',
+                'ogx' => 'application/ogg',
+                'omdoc' => 'application/omdoc+xml',
+                'onepkg' => 'application/onenote',
+                'onetmp' => 'application/onenote',
+                'onetoc' => 'application/onenote',
+                'onetoc2' => 'application/onenote',
+                'opf' => 'application/oebps-package+xml',
+                'opml' => 'text/x-opml',
+                'oprc' => 'application/vnd.palm',
+                'opus' => 'audio/ogg',
+                'org' => 'application/vnd.lotus-organizer',
+                'osf' => 'application/vnd.yamaha.openscoreformat',
+                'osfpvg' => 'application/vnd.yamaha.openscoreformat.osfpvg+xml',
+                'otc' => 'application/vnd.oasis.opendocument.chart-template',
+                'otf' => 'font/otf',
+                'otg' => 'application/vnd.oasis.opendocument.graphics-template',
+                'oth' => 'application/vnd.oasis.opendocument.text-web',
+                'oti' => 'application/vnd.oasis.opendocument.image-template',
+                'otp' => 'application/vnd.oasis.opendocument.presentation-template',
+                'ots' => 'application/vnd.oasis.opendocument.spreadsheet-template',
+                'ott' => 'application/vnd.oasis.opendocument.text-template',
+                'oxps' => 'application/oxps',
+                'oxt' => 'application/vnd.openofficeorg.extension',
+                'p' => 'text/x-pascal',
+                'p10' => 'application/pkcs10',
+                'p12' => 'application/x-pkcs12',
+                'p7b' => 'application/x-pkcs7-certificates',
+                'p7c' => 'application/pkcs7-mime',
+                'p7m' => 'application/pkcs7-mime',
+                'p7r' => 'application/x-pkcs7-certreqresp',
+                'p7s' => 'application/pkcs7-signature',
+                'p8' => 'application/pkcs8',
+                'pas' => 'text/x-pascal',
+                'paw' => 'application/vnd.pawaafile',
+                'pbd' => 'application/vnd.powerbuilder6',
+                'pbm' => 'image/x-portable-bitmap',
+                'pcap' => 'application/vnd.tcpdump.pcap',
+                'pcf' => 'application/x-font-pcf',
+                'pcl' => 'application/vnd.hp-pcl',
+                'pclxl' => 'application/vnd.hp-pclxl',
+                'pct' => 'image/x-pict',
+                'pcurl' => 'application/vnd.curl.pcurl',
+                'pcx' => 'image/x-pcx',
+                'pdb' => 'application/vnd.palm',
+                'pdf' => 'application/pdf',
+                'pfa' => 'application/x-font-type1',
+                'pfb' => 'application/x-font-type1',
+                'pfm' => 'application/x-font-type1',
+                'pfr' => 'application/font-tdpfr',
+                'pfx' => 'application/x-pkcs12',
+                'pgm' => 'image/x-portable-graymap',
+                'pgn' => 'application/x-chess-pgn',
+                'pgp' => 'application/pgp-encrypted',
+                'pic' => 'image/x-pict',
+                'pkg' => 'application/octet-stream',
+                'pki' => 'application/pkixcmp',
+                'pkipath' => 'application/pkix-pkipath',
+                'plb' => 'application/vnd.3gpp.pic-bw-large',
+                'plc' => 'application/vnd.mobius.plc',
+                'plf' => 'application/vnd.pocketlearn',
+                'pls' => 'application/pls+xml',
+                'pml' => 'application/vnd.ctc-posml',
+                'png' => 'image/png',
+                'pnm' => 'image/x-portable-anymap',
+                'portpkg' => 'application/vnd.macports.portpkg',
+                'pot' => 'application/vnd.ms-powerpoint',
+                'potm' => 'application/vnd.ms-powerpoint.template.macroenabled.12',
+                'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',
+                'ppam' => 'application/vnd.ms-powerpoint.addin.macroenabled.12',
+                'ppd' => 'application/vnd.cups-ppd',
+                'ppm' => 'image/x-portable-pixmap',
+                'pps' => 'application/vnd.ms-powerpoint',
+                'ppsm' => 'application/vnd.ms-powerpoint.slideshow.macroenabled.12',
+                'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
+                'ppt' => 'application/vnd.ms-powerpoint',
+                'pptm' => 'application/vnd.ms-powerpoint.presentation.macroenabled.12',
+                'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
+                'pqa' => 'application/vnd.palm',
+                'prc' => 'application/x-mobipocket-ebook',
+                'pre' => 'application/vnd.lotus-freelance',
+                'prf' => 'application/pics-rules',
+                'ps' => 'application/postscript',
+                'psb' => 'application/vnd.3gpp.pic-bw-small',
+                'psd' => 'image/vnd.adobe.photoshop',
+                'psf' => 'application/x-font-linux-psf',
+                'pskcxml' => 'application/pskc+xml',
+                'ptid' => 'application/vnd.pvi.ptid1',
+                'pub' => 'application/x-mspublisher',
+                'pvb' => 'application/vnd.3gpp.pic-bw-var',
+                'pwn' => 'application/vnd.3m.post-it-notes',
+                'pya' => 'audio/vnd.ms-playready.media.pya',
+                'pyv' => 'video/vnd.ms-playready.media.pyv',
+                'qam' => 'application/vnd.epson.quickanime',
+                'qbo' => 'application/vnd.intu.qbo',
+                'qfx' => 'application/vnd.intu.qfx',
+                'qps' => 'application/vnd.publishare-delta-tree',
+                'qt' => 'video/quicktime',
+                'qwd' => 'application/vnd.quark.quarkxpress',
+                'qwt' => 'application/vnd.quark.quarkxpress',
+                'qxb' => 'application/vnd.quark.quarkxpress',
+                'qxd' => 'application/vnd.quark.quarkxpress',
+                'qxl' => 'application/vnd.quark.quarkxpress',
+                'qxt' => 'application/vnd.quark.quarkxpress',
+                'ra' => 'audio/x-pn-realaudio',
+                'ram' => 'audio/x-pn-realaudio',
+                'rar' => 'application/x-rar-compressed',
+                'ras' => 'image/x-cmu-raster',
+                'rcprofile' => 'application/vnd.ipunplugged.rcprofile',
+                'rdf' => 'application/rdf+xml',
+                'rdz' => 'application/vnd.data-vision.rdz',
+                'rep' => 'application/vnd.businessobjects',
+                'res' => 'application/x-dtbresource+xml',
+                'rgb' => 'image/x-rgb',
+                'rif' => 'application/reginfo+xml',
+                'rip' => 'audio/vnd.rip',
+                'ris' => 'application/x-research-info-systems',
+                'rl' => 'application/resource-lists+xml',
+                'rlc' => 'image/vnd.fujixerox.edmics-rlc',
+                'rld' => 'application/resource-lists-diff+xml',
+                'rm' => 'application/vnd.rn-realmedia',
+                'rmi' => 'audio/midi',
+                'rmp' => 'audio/x-pn-realaudio-plugin',
+                'rms' => 'application/vnd.jcp.javame.midlet-rms',
+                'rmvb' => 'application/vnd.rn-realmedia-vbr',
+                'rnc' => 'application/relax-ng-compact-syntax',
+                'roa' => 'application/rpki-roa',
+                'roff' => 'text/troff',
+                'rp9' => 'application/vnd.cloanto.rp9',
+                'rpss' => 'application/vnd.nokia.radio-presets',
+                'rpst' => 'application/vnd.nokia.radio-preset',
+                'rq' => 'application/sparql-query',
+                'rs' => 'application/rls-services+xml',
+                'rsd' => 'application/rsd+xml',
+                'rss' => 'application/rss+xml',
+                'rtf' => 'application/rtf',
+                'rtx' => 'text/richtext',
+                's' => 'text/x-asm',
+                's3m' => 'audio/s3m',
+                'saf' => 'application/vnd.yamaha.smaf-audio',
+                'sbml' => 'application/sbml+xml',
+                'sc' => 'application/vnd.ibm.secure-container',
+                'scd' => 'application/x-msschedule',
+                'scm' => 'application/vnd.lotus-screencam',
+                'scq' => 'application/scvp-cv-request',
+                'scs' => 'application/scvp-cv-response',
+                'scurl' => 'text/vnd.curl.scurl',
+                'sda' => 'application/vnd.stardivision.draw',
+                'sdc' => 'application/vnd.stardivision.calc',
+                'sdd' => 'application/vnd.stardivision.impress',
+                'sdkd' => 'application/vnd.solent.sdkm+xml',
+                'sdkm' => 'application/vnd.solent.sdkm+xml',
+                'sdp' => 'application/sdp',
+                'sdw' => 'application/vnd.stardivision.writer',
+                'see' => 'application/vnd.seemail',
+                'seed' => 'application/vnd.fdsn.seed',
+                'sema' => 'application/vnd.sema',
+                'semd' => 'application/vnd.semd',
+                'semf' => 'application/vnd.semf',
+                'ser' => 'application/java-serialized-object',
+                'setpay' => 'application/set-payment-initiation',
+                'setreg' => 'application/set-registration-initiation',
+                'sfd-hdstx' => 'application/vnd.hydrostatix.sof-data',
+                'sfs' => 'application/vnd.spotfire.sfs',
+                'sfv' => 'text/x-sfv',
+                'sgi' => 'image/sgi',
+                'sgl' => 'application/vnd.stardivision.writer-global',
+                'sgm' => 'text/sgml',
+                'sgml' => 'text/sgml',
+                'sh' => 'application/x-sh',
+                'shar' => 'application/x-shar',
+                'shf' => 'application/shf+xml',
+                'sid' => 'image/x-mrsid-image',
+                'sig' => 'application/pgp-signature',
+                'sil' => 'audio/silk',
+                'silo' => 'model/mesh',
+                'sis' => 'application/vnd.symbian.install',
+                'sisx' => 'application/vnd.symbian.install',
+                'sit' => 'application/x-stuffit',
+                'sitx' => 'application/x-stuffitx',
+                'skd' => 'application/vnd.koan',
+                'skm' => 'application/vnd.koan',
+                'skp' => 'application/vnd.koan',
+                'skt' => 'application/vnd.koan',
+                'sldm' => 'application/vnd.ms-powerpoint.slide.macroenabled.12',
+                'sldx' => 'application/vnd.openxmlformats-officedocument.presentationml.slide',
+                'slt' => 'application/vnd.epson.salt',
+                'sm' => 'application/vnd.stepmania.stepchart',
+                'smf' => 'application/vnd.stardivision.math',
+                'smi' => 'application/smil+xml',
+                'smil' => 'application/smil+xml',
+                'smv' => 'video/x-smv',
+                'smzip' => 'application/vnd.stepmania.package',
+                'snd' => 'audio/basic',
+                'snf' => 'application/x-font-snf',
+                'so' => 'application/octet-stream',
+                'spc' => 'application/x-pkcs7-certificates',
+                'spf' => 'application/vnd.yamaha.smaf-phrase',
+                'spl' => 'application/x-futuresplash',
+                'spot' => 'text/vnd.in3d.spot',
+                'spp' => 'application/scvp-vp-response',
+                'spq' => 'application/scvp-vp-request',
+                'spx' => 'audio/ogg',
+                'sql' => 'application/x-sql',
+                'src' => 'application/x-wais-source',
+                'srt' => 'application/x-subrip',
+                'sru' => 'application/sru+xml',
+                'srx' => 'application/sparql-results+xml',
+                'ssdl' => 'application/ssdl+xml',
+                'sse' => 'application/vnd.kodak-descriptor',
+                'ssf' => 'application/vnd.epson.ssf',
+                'ssml' => 'application/ssml+xml',
+                'st' => 'application/vnd.sailingtracker.track',
+                'stc' => 'application/vnd.sun.xml.calc.template',
+                'std' => 'application/vnd.sun.xml.draw.template',
+                'stf' => 'application/vnd.wt.stf',
+                'sti' => 'application/vnd.sun.xml.impress.template',
+                'stk' => 'application/hyperstudio',
+                'stl' => 'application/vnd.ms-pki.stl',
+                'str' => 'application/vnd.pg.format',
+                'stw' => 'application/vnd.sun.xml.writer.template',
+                'sub' => 'text/vnd.dvb.subtitle',
+                'sus' => 'application/vnd.sus-calendar',
+                'susp' => 'application/vnd.sus-calendar',
+                'sv4cpio' => 'application/x-sv4cpio',
+                'sv4crc' => 'application/x-sv4crc',
+                'svc' => 'application/vnd.dvb.service',
+                'svd' => 'application/vnd.svd',
+                'svg' => 'image/svg+xml',
+                'svgz' => 'image/svg+xml',
+                'swa' => 'application/x-director',
+                'swf' => 'application/x-shockwave-flash',
+                'swi' => 'application/vnd.aristanetworks.swi',
+                'sxc' => 'application/vnd.sun.xml.calc',
+                'sxd' => 'application/vnd.sun.xml.draw',
+                'sxg' => 'application/vnd.sun.xml.writer.global',
+                'sxi' => 'application/vnd.sun.xml.impress',
+                'sxm' => 'application/vnd.sun.xml.math',
+                'sxw' => 'application/vnd.sun.xml.writer',
+                't' => 'text/troff',
+                't3' => 'application/x-t3vm-image',
+                'taglet' => 'application/vnd.mynfc',
+                'tao' => 'application/vnd.tao.intent-module-archive',
+                'tar' => 'application/x-tar',
+                'tcap' => 'application/vnd.3gpp2.tcap',
+                'tcl' => 'application/x-tcl',
+                'teacher' => 'application/vnd.smart.teacher',
+                'tei' => 'application/tei+xml',
+                'teicorpus' => 'application/tei+xml',
+                'tex' => 'application/x-tex',
+                'texi' => 'application/x-texinfo',
+                'texinfo' => 'application/x-texinfo',
+                'text' => 'text/plain',
+                'tfi' => 'application/thraud+xml',
+                'tfm' => 'application/x-tex-tfm',
+                'tga' => 'image/x-tga',
+                'thmx' => 'application/vnd.ms-officetheme',
+                'tif' => 'image/tiff',
+                'tiff' => 'image/tiff',
+                'tmo' => 'application/vnd.tmobile-livetv',
+                'torrent' => 'application/x-bittorrent',
+                'tpl' => 'application/vnd.groove-tool-template',
+                'tpt' => 'application/vnd.trid.tpt',
+                'tr' => 'text/troff',
+                'tra' => 'application/vnd.trueapp',
+                'trm' => 'application/x-msterminal',
+                'tsd' => 'application/timestamped-data',
+                'tsv' => 'text/tab-separated-values',
+                'ttc' => 'font/collection',
+                'ttf' => 'font/ttf',
+                'ttl' => 'text/turtle',
+                'twd' => 'application/vnd.simtech-mindmapper',
+                'twds' => 'application/vnd.simtech-mindmapper',
+                'txd' => 'application/vnd.genomatix.tuxedo',
+                'txf' => 'application/vnd.mobius.txf',
+                'txt' => 'text/plain',
+                'u32' => 'application/x-authorware-bin',
+                'udeb' => 'application/x-debian-package',
+                'ufd' => 'application/vnd.ufdl',
+                'ufdl' => 'application/vnd.ufdl',
+                'ulx' => 'application/x-glulx',
+                'umj' => 'application/vnd.umajin',
+                'unityweb' => 'application/vnd.unity',
+                'uoml' => 'application/vnd.uoml+xml',
+                'uri' => 'text/uri-list',
+                'uris' => 'text/uri-list',
+                'urls' => 'text/uri-list',
+                'ustar' => 'application/x-ustar',
+                'utz' => 'application/vnd.uiq.theme',
+                'uu' => 'text/x-uuencode',
+                'uva' => 'audio/vnd.dece.audio',
+                'uvd' => 'application/vnd.dece.data',
+                'uvf' => 'application/vnd.dece.data',
+                'uvg' => 'image/vnd.dece.graphic',
+                'uvh' => 'video/vnd.dece.hd',
+                'uvi' => 'image/vnd.dece.graphic',
+                'uvm' => 'video/vnd.dece.mobile',
+                'uvp' => 'video/vnd.dece.pd',
+                'uvs' => 'video/vnd.dece.sd',
+                'uvt' => 'application/vnd.dece.ttml+xml',
+                'uvu' => 'video/vnd.uvvu.mp4',
+                'uvv' => 'video/vnd.dece.video',
+                'uvva' => 'audio/vnd.dece.audio',
+                'uvvd' => 'application/vnd.dece.data',
+                'uvvf' => 'application/vnd.dece.data',
+                'uvvg' => 'image/vnd.dece.graphic',
+                'uvvh' => 'video/vnd.dece.hd',
+                'uvvi' => 'image/vnd.dece.graphic',
+                'uvvm' => 'video/vnd.dece.mobile',
+                'uvvp' => 'video/vnd.dece.pd',
+                'uvvs' => 'video/vnd.dece.sd',
+                'uvvt' => 'application/vnd.dece.ttml+xml',
+                'uvvu' => 'video/vnd.uvvu.mp4',
+                'uvvv' => 'video/vnd.dece.video',
+                'uvvx' => 'application/vnd.dece.unspecified',
+                'uvvz' => 'application/vnd.dece.zip',
+                'uvx' => 'application/vnd.dece.unspecified',
+                'uvz' => 'application/vnd.dece.zip',
+                'vcard' => 'text/vcard',
+                'vcd' => 'application/x-cdlink',
+                'vcf' => 'text/x-vcard',
+                'vcg' => 'application/vnd.groove-vcard',
+                'vcs' => 'text/x-vcalendar',
+                'vcx' => 'application/vnd.vcx',
+                'vis' => 'application/vnd.visionary',
+                'viv' => 'video/vnd.vivo',
+                'vob' => 'video/x-ms-vob',
+                'vor' => 'application/vnd.stardivision.writer',
+                'vox' => 'application/x-authorware-bin',
+                'vrml' => 'model/vrml',
+                'vsd' => 'application/vnd.visio',
+                'vsf' => 'application/vnd.vsf',
+                'vss' => 'application/vnd.visio',
+                'vst' => 'application/vnd.visio',
+                'vsw' => 'application/vnd.visio',
+                'vtu' => 'model/vnd.vtu',
+                'vxml' => 'application/voicexml+xml',
+                'w3d' => 'application/x-director',
+                'wad' => 'application/x-doom',
+                'wav' => 'audio/x-wav',
+                'wax' => 'audio/x-ms-wax',
+                'wbmp' => 'image/vnd.wap.wbmp',
+                'wbs' => 'application/vnd.criticaltools.wbs+xml',
+                'wbxml' => 'application/vnd.wap.wbxml',
+                'wcm' => 'application/vnd.ms-works',
+                'wdb' => 'application/vnd.ms-works',
+                'wdp' => 'image/vnd.ms-photo',
+                'weba' => 'audio/webm',
+                'webm' => 'video/webm',
+                'webp' => 'image/webp',
+                'wg' => 'application/vnd.pmi.widget',
+                'wgt' => 'application/widget',
+                'wks' => 'application/vnd.ms-works',
+                'wm' => 'video/x-ms-wm',
+                'wma' => 'audio/x-ms-wma',
+                'wmd' => 'application/x-ms-wmd',
+                'wmf' => 'application/x-msmetafile',
+                'wml' => 'text/vnd.wap.wml',
+                'wmlc' => 'application/vnd.wap.wmlc',
+                'wmls' => 'text/vnd.wap.wmlscript',
+                'wmlsc' => 'application/vnd.wap.wmlscriptc',
+                'wmv' => 'video/x-ms-wmv',
+                'wmx' => 'video/x-ms-wmx',
+                'wmz' => 'application/x-msmetafile',
+                'woff' => 'font/woff',
+                'woff2' => 'font/woff2',
+                'wpd' => 'application/vnd.wordperfect',
+                'wpl' => 'application/vnd.ms-wpl',
+                'wps' => 'application/vnd.ms-works',
+                'wqd' => 'application/vnd.wqd',
+                'wri' => 'application/x-mswrite',
+                'wrl' => 'model/vrml',
+                'wsdl' => 'application/wsdl+xml',
+                'wspolicy' => 'application/wspolicy+xml',
+                'wtb' => 'application/vnd.webturbo',
+                'wvx' => 'video/x-ms-wvx',
+                'x32' => 'application/x-authorware-bin',
+                'x3d' => 'model/x3d+xml',
+                'x3db' => 'model/x3d+binary',
+                'x3dbz' => 'model/x3d+binary',
+                'x3dv' => 'model/x3d+vrml',
+                'x3dvz' => 'model/x3d+vrml',
+                'x3dz' => 'model/x3d+xml',
+                'xaml' => 'application/xaml+xml',
+                'xap' => 'application/x-silverlight-app',
+                'xar' => 'application/vnd.xara',
+                'xbap' => 'application/x-ms-xbap',
+                'xbd' => 'application/vnd.fujixerox.docuworks.binder',
+                'xbm' => 'image/x-xbitmap',
+                'xdf' => 'application/xcap-diff+xml',
+                'xdm' => 'application/vnd.syncml.dm+xml',
+                'xdp' => 'application/vnd.adobe.xdp+xml',
+                'xdssc' => 'application/dssc+xml',
+                'xdw' => 'application/vnd.fujixerox.docuworks',
+                'xenc' => 'application/xenc+xml',
+                'xer' => 'application/patch-ops-error+xml',
+                'xfdf' => 'application/vnd.adobe.xfdf',
+                'xfdl' => 'application/vnd.xfdl',
+                'xht' => 'application/xhtml+xml',
+                'xhtml' => 'application/xhtml+xml',
+                'xhvml' => 'application/xv+xml',
+                'xif' => 'image/vnd.xiff',
+                'xla' => 'application/vnd.ms-excel',
+                'xlam' => 'application/vnd.ms-excel.addin.macroenabled.12',
+                'xlc' => 'application/vnd.ms-excel',
+                'xlf' => 'application/x-xliff+xml',
+                'xlm' => 'application/vnd.ms-excel',
+                'xls' => 'application/vnd.ms-excel',
+                'xlsb' => 'application/vnd.ms-excel.sheet.binary.macroenabled.12',
+                'xlsm' => 'application/vnd.ms-excel.sheet.macroenabled.12',
+                'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
+                'xlt' => 'application/vnd.ms-excel',
+                'xltm' => 'application/vnd.ms-excel.template.macroenabled.12',
+                'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
+                'xlw' => 'application/vnd.ms-excel',
+                'xm' => 'audio/xm',
+                'xml' => 'application/xml',
+                'xo' => 'application/vnd.olpc-sugar',
+                'xop' => 'application/xop+xml',
+                'xpi' => 'application/x-xpinstall',
+                'xpl' => 'application/xproc+xml',
+                'xpm' => 'image/x-xpixmap',
+                'xpr' => 'application/vnd.is-xpr',
+                'xps' => 'application/vnd.ms-xpsdocument',
+                'xpw' => 'application/vnd.intercon.formnet',
+                'xpx' => 'application/vnd.intercon.formnet',
+                'xsl' => 'application/xml',
+                'xslt' => 'application/xslt+xml',
+                'xsm' => 'application/vnd.syncml+xml',
+                'xspf' => 'application/xspf+xml',
+                'xul' => 'application/vnd.mozilla.xul+xml',
+                'xvm' => 'application/xv+xml',
+                'xvml' => 'application/xv+xml',
+                'xwd' => 'image/x-xwindowdump',
+                'xyz' => 'chemical/x-xyz',
+                'xz' => 'application/x-xz',
+                'yang' => 'application/yang',
+                'yin' => 'application/yin+xml',
+                'z1' => 'application/x-zmachine',
+                'z2' => 'application/x-zmachine',
+                'z3' => 'application/x-zmachine',
+                'z4' => 'application/x-zmachine',
+                'z5' => 'application/x-zmachine',
+                'z6' => 'application/x-zmachine',
+                'z7' => 'application/x-zmachine',
+                'z8' => 'application/x-zmachine',
+                'zaz' => 'application/vnd.zzazz.deck+xml',
+                'zip' => 'application/zip',
+                'zir' => 'application/vnd.zul',
+                'zirz' => 'application/vnd.zul',
+                'zmm' => 'application/vnd.handheld-entertainment+xml',
+            ],
+            require __DIR__ . '/../../../framework/helpers/mimeTypes.php'
+        );
+    }
+}
diff --git a/tests/framework/helpers/ReplaceArrayValueTest.php b/tests/framework/helpers/ReplaceArrayValueTest.php
new file mode 100644
index 00000000000..d055483ac3d
--- /dev/null
+++ b/tests/framework/helpers/ReplaceArrayValueTest.php
@@ -0,0 +1,33 @@
+<?php
+/**
+ * @link http://www.yiiframework.com/
+ * @copyright Copyright (c) 2008 Yii Software LLC
+ * @license http://www.yiiframework.com/license/
+ */
+
+namespace yiiunit\framework\helpers;
+
+use yii\helpers\ReplaceArrayValue;
+use yiiunit\TestCase;
+
+/**
+ * @group helpers
+ */
+class ReplaceArrayValueTest extends TestCase
+{
+    public function testSetStateWithoutValue()
+    {
+        $this->expectException('yii\base\InvalidConfigException');
+        $this->expectExceptionMessage('Failed to instantiate class "ReplaceArrayValue". Required parameter "value" is missing');
+        $object = new ReplaceArrayValue('test');
+        $object::__set_state([]);
+    }
+
+    public function testSetStateWithValue()
+    {
+        $object = new ReplaceArrayValue('test');
+        $result = $object::__set_state(['value' => 'test2']);
+        $this->assertInstanceOf('yii\helpers\ReplaceArrayValue', $result);
+        $this->assertSame('test2', $result->value);
+    }
+}
diff --git a/tests/framework/helpers/StringHelperTest.php b/tests/framework/helpers/StringHelperTest.php
index 90dc42e08e4..faac9bf6f93 100644
--- a/tests/framework/helpers/StringHelperTest.php
+++ b/tests/framework/helpers/StringHelperTest.php
@@ -429,8 +429,13 @@ public function dataProviderMb_ucwords()
         return [
             ['foo', 'Foo'],
             ['foo bar', 'Foo Bar'],
+            ['!foo bar-baz', '!foo Bar-baz'],
+            [' foo BAR', ' Foo BAR'],
+            [' ! foo BAR', ' ! Foo BAR'],
+            ["\tfoo\nbar  baz", "\tFoo\nBar  Baz"],
             ['👍🏻 foo bar', '👍🏻 Foo Bar'],
             ['', ''],
+            ['0', '0'],
             [null, ''],
             ['здесь我 multibyte我 строка', 'Здесь我 Multibyte我 Строка'],
         ];
diff --git a/tests/framework/helpers/UnsetArrayValueTest.php b/tests/framework/helpers/UnsetArrayValueTest.php
new file mode 100644
index 00000000000..6d3b943a29a
--- /dev/null
+++ b/tests/framework/helpers/UnsetArrayValueTest.php
@@ -0,0 +1,24 @@
+<?php
+/**
+ * @link http://www.yiiframework.com/
+ * @copyright Copyright (c) 2008 Yii Software LLC
+ * @license http://www.yiiframework.com/license/
+ */
+
+namespace yiiunit\framework\helpers;
+
+use yii\helpers\UnsetArrayValue;
+use yiiunit\TestCase;
+
+/**
+ * @group helpers
+ */
+class UnsetArrayValueTest extends TestCase
+{
+    public function testSetState()
+    {
+        $object = new UnsetArrayValue();
+        $result = $object::__set_state([]);
+        $this->assertInstanceOf('yii\helpers\UnsetArrayValue', $result);
+    }
+}
diff --git a/tests/framework/helpers/UrlTest.php b/tests/framework/helpers/UrlTest.php
index cf57f15078c..e8c11858e15 100644
--- a/tests/framework/helpers/UrlTest.php
+++ b/tests/framework/helpers/UrlTest.php
@@ -303,4 +303,17 @@ public function testIsRelative()
         $this->assertFalse(Url::isRelative('http://example.com/'));
         $this->assertFalse(Url::isRelative('https://example.com/'));
     }
+
+    public function testRemember()
+    {
+        Yii::$app->getUser()->login(UserIdentity::findIdentity('user1'));
+
+        Url::remember('test');
+        $this->assertSame('test', Yii::$app->getUser()->getReturnUrl());
+        $this->assertSame('test', Yii::$app->getSession()->get(Yii::$app->getUser()->returnUrlParam));
+
+        Yii::$app->getUser()->setReturnUrl(null);
+        Url::remember('test', 'remember-test');
+        $this->assertSame('test', Yii::$app->getSession()->get('remember-test'));
+    }
 }
diff --git a/tests/framework/i18n/FormatterDateTest.php b/tests/framework/i18n/FormatterDateTest.php
index ceb1aa0d208..d6c8a58ff38 100644
--- a/tests/framework/i18n/FormatterDateTest.php
+++ b/tests/framework/i18n/FormatterDateTest.php
@@ -74,7 +74,7 @@ public function testAsDate()
         $this->assertSame(date('n/j/y', $value->getTimestamp()), $this->formatter->asDate($value, 'short'));
         $this->assertSame(date('F j, Y', $value->getTimestamp()), $this->formatter->asDate($value, 'long'));
 
-        if (version_compare(PHP_VERSION, '5.5.0', '>=')) {
+        if (PHP_VERSION_ID >= 50500) {
             $value = new \DateTimeImmutable();
             $this->assertSame(date('M j, Y', $value->getTimestamp()), $this->formatter->asDate($value));
             $this->assertSame(date('Y/m/d', $value->getTimestamp()), $this->formatter->asDate($value, 'php:Y/m/d'));
@@ -410,6 +410,9 @@ public function testAsRelativeTime()
         // just now
         $this->assertSame('just now', $this->formatter->asRelativeTime($t = time(), $t));
         $this->assertSame('just now', $this->formatter->asRelativeTime(0, 0));
+        $interval_0_seconds = new DateInterval('PT0S');
+        $interval_0_seconds->invert = true;
+        $this->assertSame('just now', $this->formatter->asRelativeTime($interval_0_seconds));
 
         // empty input
         $this->assertSame('just now', $this->formatter->asRelativeTime(false, 0));
@@ -418,6 +421,10 @@ public function testAsRelativeTime()
         // null display
         $this->assertSame($this->formatter->nullDisplay, $this->formatter->asRelativeTime(null));
         $this->assertSame($this->formatter->nullDisplay, $this->formatter->asRelativeTime(null, time()));
+
+        // no reference time
+        $now = new DateTime('-1 minute');
+        $this->assertSame('a minute ago', $this->formatter->asRelativeTime($now));
     }
 
     public function testIntlAsDuration()
diff --git a/tests/framework/i18n/FormatterNumberTest.php b/tests/framework/i18n/FormatterNumberTest.php
index 6d1b7b7fa30..635917ec690 100755
--- a/tests/framework/i18n/FormatterNumberTest.php
+++ b/tests/framework/i18n/FormatterNumberTest.php
@@ -125,7 +125,6 @@ public function testIntlAsIntegerOptions()
         $this->formatter->numberFormatterTextOptions = [
             \NumberFormatter::POSITIVE_PREFIX => '+',
         ];
-
         $this->assertSame('+2', $this->formatter->asInteger(2));
         $this->assertSame('+10', $this->formatter->asInteger(10));
         $this->assertSame('+12', $this->formatter->asInteger(12));
@@ -141,19 +140,15 @@ public function testIntlAsIntegerOptions()
         $this->assertSame('+123,456', $this->formatter->asInteger(123456.789));
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     */
     public function testAsIntegerException()
     {
+        $this->expectException('\yii\base\InvalidParamException');
         $this->formatter->asInteger('a');
     }
 
-    /**
-     * @expectedException \yii\base\InvalidParamException
-     */
     public function testAsIntegerException2()
     {
+        $this->expectException('\yii\base\InvalidParamException');
         $this->formatter->asInteger('-123abc');
     }
 
@@ -270,6 +265,7 @@ public function testAsDecimal()
         $this->assertSame('87,654,321,098,765,436.00', $this->formatter->asDecimal('87654321098765436'));
         $this->assertSame('95,836,208,451,783,051.86', $this->formatter->asDecimal('95836208451783051.864'));
         $this->assertSame('95,836,208,451,783,052', $this->formatter->asDecimal('95836208451783051.864', 0));
+        $this->assertSame('95,836,208,451,783,051.9', $this->formatter->asDecimal('95836208451783051.864', 1));
 
         $this->formatter->thousandSeparator = ' ';
         $this->formatter->decimalSeparator = ',';
@@ -422,11 +418,9 @@ public function testIntlAsCurrency()
         $this->assertIsOneOf($this->formatter->asCurrency('123'), ["123.00\xc2\xa0₽", "123.00\xc2\xa0руб."]);
     }
 
-    /**
-     * @expectedException \yii\base\InvalidConfigException
-     */
     public function testAsCurrencyStringFallbackException()
     {
+        $this->expectException('\yii\base\InvalidConfigException');
         $this->formatter->asCurrency('87654321098765436');
     }
 
@@ -555,6 +549,13 @@ public function testAsScientific()
         $this->assertSame('8.765432E+16', $this->formatter->asScientific('87654321098765436'));
     }
 
+    public function testAsSpellout()
+    {
+        $this->expectException('\yii\base\InvalidConfigException');
+        $this->expectExceptionMessage('Format as Spellout is only supported when PHP intl extension is installed.');
+        $this->formatter->asSpellout(123);
+    }
+
     public function testIntlAsSpellout()
     {
         $this->assertSame('one hundred twenty-three', $this->formatter->asSpellout(123));
@@ -611,6 +612,8 @@ public function testIntlAsShortSize()
         $this->assertSame('999 B', $this->formatter->asShortSize(999));
         $this->assertSame('999 B', $this->formatter->asShortSize('999'));
         $this->assertSame('1.05 MB', $this->formatter->asShortSize(1024 * 1024));
+        $this->assertSame('1.07 GB', $this->formatter->asShortSize(1024 * 1024 * 1024));
+        $this->assertSame('1.1 TB', $this->formatter->asShortSize(1024 * 1024 * 1024 * 1024));
         $this->assertSame('1 kB', $this->formatter->asShortSize(1000));
         $this->assertSame('1.02 kB', $this->formatter->asShortSize(1023));
         $this->assertNotEquals('3 PB', $this->formatter->asShortSize(3 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000)); // this is 3 EB not 3 PB
@@ -627,6 +630,7 @@ public function testIntlAsShortSize()
         // https://github.com/yiisoft/yii2/issues/4960
         $this->assertSame('1023 B', $this->formatter->asShortSize(1023));
         $this->assertSame('5 GiB', $this->formatter->asShortSize(5 * 1024 * 1024 * 1024));
+        $this->assertSame('6 TiB', $this->formatter->asShortSize(6 * 1024 * 1024 * 1024 * 1024));
         $this->assertNotEquals('5 PiB', $this->formatter->asShortSize(5 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024)); // this is 5 EiB not 5 PiB
         //$this->assertSame("1 YiB", $this->formatter->asShortSize(pow(2, 80)));
         $this->assertSame('2 GiB', $this->formatter->asShortSize(2147483647)); // round 1.999 up to 2
@@ -648,6 +652,8 @@ public function testAsShortSize()
         $this->assertSame('999 B', $this->formatter->asShortSize(999));
         $this->assertSame('999 B', $this->formatter->asShortSize('999'));
         $this->assertSame('1.05 MB', $this->formatter->asShortSize(1024 * 1024));
+        $this->assertSame('1.07 GB', $this->formatter->asShortSize(1024 * 1024 * 1024));
+        $this->assertSame('1.10 TB', $this->formatter->asShortSize(1024 * 1024 * 1024 * 1024));
         $this->assertSame('1.0486 MB', $this->formatter->asShortSize(1024 * 1024, 4));
         $this->assertSame('1.00 kB', $this->formatter->asShortSize(1000));
         $this->assertSame('1.02 kB', $this->formatter->asShortSize(1023));
@@ -665,6 +671,7 @@ public function testAsShortSize()
         // https://github.com/yiisoft/yii2/issues/4960
         $this->assertSame('1023 B', $this->formatter->asShortSize(1023));
         $this->assertSame('5.00 GiB', $this->formatter->asShortSize(5 * 1024 * 1024 * 1024));
+        $this->assertSame('6.00 TiB', $this->formatter->asShortSize(6 * 1024 * 1024 * 1024 * 1024));
         $this->assertNotEquals('5.00 PiB', $this->formatter->asShortSize(5 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024)); // this is 5 EiB not 5 PiB
         //$this->assertSame("1 YiB", $this->formatter->asShortSize(pow(2, 80)));
         $this->assertSame('2.00 GiB', $this->formatter->asShortSize(2147483647)); // round 1.999 up to 2
@@ -693,6 +700,7 @@ public function testIntlAsSize()
         $this->assertSame('1 kilobyte', $this->formatter->asSize(1000));
         $this->assertSame('1.02 kilobytes', $this->formatter->asSize(1023));
         $this->assertSame('3 gigabytes', $this->formatter->asSize(3 * 1000 * 1000 * 1000));
+        $this->assertSame('4 terabytes', $this->formatter->asSize(4 * 1000 * 1000 * 1000 * 1000));
         $this->assertNotEquals('3 PB', $this->formatter->asSize(3 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000)); // this is 3 EB not 3 PB
         // tests for base 1024
         $this->formatter->sizeFormatBase = 1024;
@@ -700,6 +708,7 @@ public function testIntlAsSize()
         $this->assertSame('1 mebibyte', $this->formatter->asSize(1024 * 1024));
         $this->assertSame('1023 bytes', $this->formatter->asSize(1023));
         $this->assertSame('5 gibibytes', $this->formatter->asSize(5 * 1024 * 1024 * 1024));
+        $this->assertSame('6 tebibytes', $this->formatter->asSize(6 * 1024 * 1024 * 1024 * 1024));
         $this->assertNotEquals('5 pibibytes', $this->formatter->asSize(5 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024)); // this is 5 EiB not 5 PiB
         $this->assertSame('2 gibibytes', $this->formatter->asSize(2147483647)); // round 1.999 up to 2
         $this->formatter->decimalSeparator = ',';
@@ -750,6 +759,7 @@ public function testAsSize()
         $this->assertSame('1.00 kilobyte', $this->formatter->asSize(1000));
         $this->assertSame('1.02 kilobytes', $this->formatter->asSize(1023));
         $this->assertSame('3.00 gigabytes', $this->formatter->asSize(3 * 1000 * 1000 * 1000));
+        $this->assertSame('4.00 terabytes', $this->formatter->asSize(4 * 1000 * 1000 * 1000 * 1000));
         $this->assertNotEquals('3 PB', $this->formatter->asSize(3 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000)); // this is 3 EB not 3 PB
         // tests for base 1024
         $this->formatter->sizeFormatBase = 1024;
@@ -757,6 +767,7 @@ public function testAsSize()
         $this->assertSame('1.00 mebibyte', $this->formatter->asSize(1024 * 1024));
         $this->assertSame('1023 bytes', $this->formatter->asSize(1023));
         $this->assertSame('5.00 gibibytes', $this->formatter->asSize(5 * 1024 * 1024 * 1024));
+        $this->assertSame('6.00 tebibytes', $this->formatter->asSize(6 * 1024 * 1024 * 1024 * 1024));
         $this->assertNotEquals('5.00 pibibytes', $this->formatter->asSize(5 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024)); // this is 5 EiB not 5 PiB
         $this->assertSame('2.00 gibibytes', $this->formatter->asSize(2147483647)); // round 1.999 up to 2
         $this->formatter->decimalSeparator = ',';
@@ -812,4 +823,117 @@ public function testAsSizeConfiguration()
         $this->assertSame('1023 bytes', $this->formatter->asSize(1023));
         $this->assertSame('1023 B', $this->formatter->asShortSize(1023));
     }
+
+    public function providerForDirectWrongTypeAttributes()
+    {
+        return [
+            'not-int key for int options' => [
+                ['a' => 1],
+                [],
+                'The $options array keys must be integers recognizable by NumberFormatter::setAttribute(). "string" provided instead.'
+            ],
+            'string value for int options' => [
+                [1 => 'a'],
+                [],
+                'The $options array values must be integers. Did you mean to use $textOptions?'
+            ],
+            'non-string-int value for int options' => [
+                [1 => 1.1],
+                [],
+                'The $options array values must be integers. "double" provided instead.'
+            ],
+            'not-int key for text options' => [
+                [],
+                ['a' => 1],
+                'The $textOptions array keys must be integers recognizable by NumberFormatter::setTextAttribute(). "string" provided instead.'
+            ],
+            'int value for text options' => [
+                [],
+                [1 => 1],
+                'The $textOptions array values must be strings. Did you mean to use $options?'
+            ],
+            'non-string-int value for text options' => [
+                [],
+                [1 => 1.1],
+                'The $textOptions array values must be strings. "double" provided instead.'
+            ],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForDirectWrongTypeAttributes
+     */
+    public function testIntlAsIntegerDirectWrongTypeAttributes($intOptions, $textOptions, $message)
+    {
+        $this->expectException('yii\base\InvalidArgumentException');
+        $this->expectExceptionMessage($message);
+        $this->formatter->asInteger(1, $intOptions, $textOptions);
+    }
+
+    public function providerForConfiguredWrongTypeAttributes()
+    {
+        return [
+            'not-int key for int options' => [
+                ['a' => 1],
+                [],
+                [],
+                'The numberFormatterOptions array keys must be integers recognizable by NumberFormatter::setAttribute(). "string" provided instead.'
+            ],
+            'string value for int options' => [
+                [1 => 'a'],
+                [],
+                [],
+                'The numberFormatterOptions array values must be integers. Did you mean to use numberFormatterTextOptions?'
+            ],
+            'non-string-int value for int options' => [
+                [1 => 1.1],
+                [],
+                [],
+                'The numberFormatterOptions array values must be integers. "double" provided instead.'
+            ],
+            'not-int key for text options' => [
+                [],
+                ['a' => 1],
+                [],
+                'The numberFormatterTextOptions array keys must be integers recognizable by NumberFormatter::setTextAttribute(). "string" provided instead.'
+            ],
+            'int value for text options' => [
+                [],
+                [1 => 1],
+                [],
+                'The numberFormatterTextOptions array values must be strings. Did you mean to use numberFormatterOptions?'
+            ],
+            'non-string-int value for text options' => [
+                [],
+                [1 => 1.1],
+                [],
+                'The numberFormatterTextOptions array values must be strings. "double" provided instead.'
+            ],
+            'non-int key for symbol' => [
+                [],
+                [],
+                ['a' => 2],
+                'The numberFormatterSymbols array keys must be integers recognizable by NumberFormatter::setSymbol(). "string" provided instead.'
+            ],
+            'non-string value for symbol' => [
+                [],
+                [],
+                [1 => 3],
+                'The numberFormatterSymbols array values must be strings. "integer" provided instead.'
+            ],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForConfiguredWrongTypeAttributes
+     */
+    public function testIntlAsIntegerConfiguredWrongTypeAttributes($intOptions, $textOptions, $symbols, $message)
+    {
+        $this->expectException('yii\base\InvalidArgumentException');
+        $this->expectExceptionMessage($message);
+        $this->formatter->numberFormatterTextOptions = $textOptions;
+        $this->formatter->numberFormatterOptions = $intOptions;
+        $this->formatter->numberFormatterSymbols = $symbols;
+        $this->formatter->asInteger(1);
+    }
 }
diff --git a/tests/framework/i18n/FormatterTest.php b/tests/framework/i18n/FormatterTest.php
index 4716c67827b..300f2b7148f 100644
--- a/tests/framework/i18n/FormatterTest.php
+++ b/tests/framework/i18n/FormatterTest.php
@@ -7,7 +7,6 @@
 
 namespace yiiunit\framework\i18n;
 
-use Yii;
 use yii\i18n\Formatter;
 use yiiunit\TestCase;
 
@@ -45,23 +44,51 @@ protected function tearDown()
         $this->formatter = null;
     }
 
-
     public function testFormat()
     {
         $value = time();
         $this->assertSame(date('M j, Y', $value), $this->formatter->format($value, 'date'));
         $this->assertSame(date('M j, Y', $value), $this->formatter->format($value, 'DATE'));
         $this->assertSame(date('Y/m/d', $value), $this->formatter->format($value, ['date', 'php:Y/m/d']));
+    }
+
+    public function testInvalidFormat()
+    {
+        $value = time();
         $this->expectException('\yii\base\InvalidParamException');
+        $this->expectExceptionMessage('Unknown format type: data');
         $this->assertSame(date('Y-m-d', $value), $this->formatter->format($value, 'data'));
+    }
+
+    public function testInvalidFormatArray()
+    {
+        $value = time();
+        $this->expectException('\yii\base\InvalidParamException');
+        $this->expectExceptionMessage('Unknown format type: data');
+        $this->assertSame(date('Y-m-d', $value), $this->formatter->format($value, ['data']));
+    }
+
+    public function testFormatArrayInvalidStructure()
+    {
+        $value = time();
+        $this->expectException('\yii\base\InvalidParamException');
+        $this->expectExceptionMessage('The $format array must contain at least one element.');
+        $this->assertSame(date('Y-m-d', $value), $this->formatter->format($value, []));
+    }
+
+    public function testClosureFormat()
+    {
+        $value = time();
         $this->assertSame(date('Y-m-d', $value), $this->formatter->format($value, function ($value) {
             return date('Y-m-d', $value);
         }));
-        $this->assertSame('from: ' . date('Y-m-d', $value),
+        $this->assertSame(
+            'from: ' . date('Y-m-d', $value),
             $this->formatter->format($value, function ($value, $formatter) {
-                /** @var $formatter Formatter */
-                return 'from: ' . $formatter->asDate($value, 'php:Y-m-d');
-            }));
+              /** @var $formatter Formatter */
+              return 'from: ' . $formatter->asDate($value, 'php:Y-m-d');
+            })
+        );
     }
 
     public function testLocale()
@@ -162,10 +189,16 @@ public function testAsParagraphs()
         $this->assertSame($this->formatter->nullDisplay, $this->formatter->asParagraphs(null));
     }
 
-    /*public function testAsHtml()
+    public function testAsHtml()
     {
-        // todo: dependency on HtmlPurifier
-    }*/
+        $value = 'no HTML tags';
+        $this->assertSame($value, $this->formatter->asHtml($value));
+        $value = '<p>paragraph</p>';
+        $this->assertSame($value, $this->formatter->asHtml($value));
+        // null display
+        $this->assertSame($this->formatter->nullDisplay, $this->formatter->asHtml(null));
+        $this->assertSame('<p>w1 w2</p>', $this->formatter->asHtml('<p>w1 <b>w2</b><br></p>', ['HTML.Allowed' => 'p']));
+    }
 
     public function testAsEmail()
     {
@@ -183,13 +216,86 @@ public function testAsUrl()
     {
         $value = 'http://www.yiiframework.com/';
         $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => null]));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => false]));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'http']));
+        $this->assertSame(
+            "<a href=\"https://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => 'https'])
+        );
+        $this->assertSame(
+            "<a href=\"//www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => ''])
+        );
+
         $value = 'https://www.yiiframework.com/';
         $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => false]));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => null]));
+        $this->assertSame(
+            "<a href=\"http://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => 'http'])
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'https']));
+        $this->assertSame(
+            "<a href=\"//www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => ''])
+        );
+
         $value = 'www.yiiframework.com/';
-        $this->assertSame("<a href=\"http://$value\">$value</a>", $this->formatter->asUrl($value));
+        $this->assertSame(
+            "<a href=\"http://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value)
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => false]));
+        $this->assertSame(
+            "<a href=\"http://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => null])
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'http']));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'https']));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => '']));
+
+        $value = '//www.yiiframework.com/';
+        $this->assertSame(
+            "<a href=\"http:////www.yiiframework.com/\">$value</a>", // invalid but this is how it works
+            $this->formatter->asUrl($value)
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => false]));
+        $this->assertSame(
+            "<a href=\"http:////www.yiiframework.com/\">$value</a>", // invalid but this is how it works
+            $this->formatter->asUrl($value, ['scheme' => null])
+        );
+        $this->assertSame(
+            "<a href=\"http://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => 'http'])
+        );
+        $this->assertSame(
+            "<a href=\"https://www.yiiframework.com/\">$value</a>",
+            $this->formatter->asUrl($value, ['scheme' => 'https'])
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => '']));
+
+        $value = '/books/about/yii';
+        $this->assertSame(
+            "<a href=\"http:///books/about/yii\">$value</a>", // invalid but this is how it works
+            $this->formatter->asUrl($value)
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => false]));
+        $this->assertSame(
+            "<a href=\"http:///books/about/yii\">$value</a>", // invalid but this is how it works
+            $this->formatter->asUrl($value, ['scheme' => null])
+        );
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'http']));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => 'https']));
+        $this->assertSame("<a href=\"$value\">$value</a>", $this->formatter->asUrl($value, ['scheme' => '']));
+
         $value = 'https://www.yiiframework.com/?name=test&value=5"';
-        $this->assertSame('<a href="https://www.yiiframework.com/?name=test&amp;value=5&quot;">https://www.yiiframework.com/?name=test&amp;value=5&quot;</a>',
-            $this->formatter->asUrl($value));
+        $this->assertSame(
+            '<a href="https://www.yiiframework.com/?name=test&amp;value=5&quot;">https://www.yiiframework.com/?name=test&amp;value=5&quot;</a>',
+            $this->formatter->asUrl($value)
+        );
+
         $value = 'http://www.yiiframework.com/';
         $this->assertSame("<a href=\"$value\" target=\"_blank\">$value</a>",
             $this->formatter->asUrl($value, ['target' => '_blank']));
@@ -439,21 +545,17 @@ public function testIntlAsShortWeight($message, $arguments, $_weight, $expected,
         $this->assertSame($expected, call_user_func_array([$this->formatter, 'asShortWeight'], $arguments), 'Failed asserting that ' . $message);
     }
 
-    /**
-     * @expectedException \yii\base\InvalidConfigException
-     * @expectedExceptionMessage Format of mass is only supported when PHP intl extension is installed.
-     */
     public function testAsWeight()
     {
+        $this->expectException('\yii\base\InvalidConfigException');
+        $this->expectExceptionMessage('Format of mass is only supported when PHP intl extension is installed.');
         $this->formatter->asWeight(10);
     }
 
-    /**
-     * @expectedException \yii\base\InvalidConfigException
-     * @expectedExceptionMessage Format of length is only supported when PHP intl extension is installed.
-     */
     public function testAsLength()
     {
+        $this->expectException('\yii\base\InvalidConfigException');
+        $this->expectExceptionMessage('Format of length is only supported when PHP intl extension is installed.');
         $this->formatter->asShortLength(10);
     }
 
diff --git a/tests/framework/log/LoggerTest.php b/tests/framework/log/LoggerTest.php
index c23da90f67e..1aa5587b16e 100644
--- a/tests/framework/log/LoggerTest.php
+++ b/tests/framework/log/LoggerTest.php
@@ -350,7 +350,7 @@ public function testGetProfilingWithEmptyCategoriesAndExcludeCategories()
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals($returnValue, $logger->getProfiling());
     }
 
@@ -377,7 +377,7 @@ public function testGetProfilingWithNotEmptyCategoriesAndNotMatched()
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals([], $logger->getProfiling(['not-matched-category']));
     }
 
@@ -417,7 +417,7 @@ public function testGetProfilingWithNotEmptyCategoriesAndMatched()
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals([$matchedByCategoryName], $logger->getProfiling(['category']));
 
         /*
@@ -430,7 +430,7 @@ public function testGetProfilingWithNotEmptyCategoriesAndMatched()
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals([$matchedByCategoryName, $secondCategory], $logger->getProfiling(['category*']));
     }
 
@@ -479,7 +479,7 @@ public function testGetProfilingWithNotEmptyCategoriesMatchedAndExcludeCategorie
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals([$fistCategory, $secondCategory], $logger->getProfiling(['cat*'], ['category3']));
 
         /*
@@ -492,7 +492,48 @@ public function testGetProfilingWithNotEmptyCategoriesMatchedAndExcludeCategorie
 
         $logger->messages = $messages;
         $logger->method('calculateTimings')->willReturn($returnValue);
-        $logger->expects($this->once())->method('calculateTimings')->with($this->equalTo($messages));
+        $logger->expects($this->once())->method('calculateTimings')->with($messages);
         $this->assertEquals([$fistCategory], $logger->getProfiling(['cat*'], ['category*']));
     }
+
+    public function providerForNonProfilingMessages()
+    {
+        return [
+            [Logger::LEVEL_ERROR],
+            [Logger::LEVEL_WARNING],
+            [Logger::LEVEL_INFO],
+            [Logger::LEVEL_TRACE],
+            [Logger::LEVEL_PROFILE],
+        ];
+    }
+
+    /**
+     * @dataProvider providerForNonProfilingMessages
+     */
+    public function testGatheringNonProfilingMessages($level)
+    {
+        $logger = new Logger(['flushInterval' => 0]);
+        $logger->log('aaa', $level);
+        $logger->log('aaa', Logger::LEVEL_PROFILE_END);
+        $this->assertSame([], $logger->getProfiling());
+        $this->assertCount(2, $logger->messages);
+    }
+
+    public function testGatheringProfilingMessages()
+    {
+        $logger = new Logger(['flushInterval' => 0]);
+        $logger->log('aaa', Logger::LEVEL_PROFILE_BEGIN);
+        $logger->log('aaa', Logger::LEVEL_PROFILE_END);
+        $this->assertCount(1, $logger->getProfiling());
+        $profiling = $logger->getProfiling()[0];
+        $this->assertSame('aaa', $profiling['info']);
+        $this->assertSame('application', $profiling['category']);
+        $this->assertSame(0, $profiling['level']);
+        $this->assertSame([], $profiling['trace']);
+        $this->assertArrayHasKey('timestamp', $profiling);
+        $this->assertArrayHasKey('duration', $profiling);
+        $this->assertArrayHasKey('memory', $profiling);
+        $this->assertArrayHasKey('memoryDiff', $profiling);
+        $this->assertCount(2, $logger->messages);
+    }
 }
diff --git a/tests/framework/log/TargetTest.php b/tests/framework/log/TargetTest.php
index 22db667f0a6..c09757c83af 100644
--- a/tests/framework/log/TargetTest.php
+++ b/tests/framework/log/TargetTest.php
@@ -236,6 +236,110 @@ public function testCollectMessageStructure()
         $this->assertCount(6, static::$messages[0]);
         $this->assertCount(6, static::$messages[1]);
     }
+
+    public function testBreakProfilingWithFlushWithProfilingDisabled()
+    {
+        $dispatcher = $this->getMockBuilder('yii\log\Dispatcher')
+            ->setMethods(['dispatch'])
+            ->getMock();
+        $dispatcher->expects($this->once())->method('dispatch')->with($this->callback(function ($messages) {
+            return count($messages) === 2
+                && $messages[0][0] === 'token.a'
+                && $messages[0][1] == Logger::LEVEL_PROFILE_BEGIN
+                && $messages[1][0] === 'info';
+        }), false);
+
+        $logger = new Logger([
+            'dispatcher' => $dispatcher,
+            'flushInterval' => 2,
+        ]);
+
+        $logger->log('token.a', Logger::LEVEL_PROFILE_BEGIN, 'category');
+        $logger->log('info', Logger::LEVEL_INFO, 'category');
+        $logger->log('token.a', Logger::LEVEL_PROFILE_END, 'category');
+    }
+
+    public function testNotBreakProfilingWithFlushWithProfilingEnabled()
+    {
+        $dispatcher = $this->getMockBuilder('yii\log\Dispatcher')
+            ->setMethods(['dispatch'])
+            ->getMock();
+        $dispatcher->expects($this->exactly(2))->method('dispatch')->withConsecutive(
+            [
+                $this->callback(function ($messages) {
+                    return count($messages) === 1 && $messages[0][0] === 'info';
+                }),
+                false
+            ],
+            [
+                $this->callback(function ($messages) {
+                    return count($messages) === 2
+                        && $messages[0][0] === 'token.a'
+                        && $messages[0][1] == Logger::LEVEL_PROFILE_BEGIN
+                        && $messages[1][0] === 'token.a'
+                        && $messages[1][1] == Logger::LEVEL_PROFILE_END;
+                }),
+                false
+            ]
+        );
+
+        $logger = new Logger([
+            'profilingAware' => true,
+            'dispatcher' => $dispatcher,
+            'flushInterval' => 2,
+        ]);
+
+        $logger->log('token.a', Logger::LEVEL_PROFILE_BEGIN, 'category');
+        $logger->log('info', Logger::LEVEL_INFO, 'category');
+        $logger->log('token.a', Logger::LEVEL_PROFILE_END, 'category');
+    }
+
+    public function testFlushingWithProfilingEnabledAndOverflow()
+    {
+        $dispatcher = $this->getMockBuilder('yii\log\Dispatcher')
+            ->setMethods(['dispatch'])
+            ->getMock();
+        $dispatcher->expects($this->exactly(3))->method('dispatch')->withConsecutive(
+            [
+                $this->callback(function ($messages) {
+                    return count($messages) === 2
+                        && $messages[0][0] === 'token.a'
+                        && $messages[0][1] == Logger::LEVEL_PROFILE_BEGIN
+                        && $messages[1][0] === 'token.b'
+                        && $messages[1][1] == Logger::LEVEL_PROFILE_BEGIN;
+                }),
+                false
+            ],
+            [
+                $this->callback(function ($messages) {
+                    return count($messages) === 1
+                        && $messages[0][0] === 'Number of dangling profiling block messages reached flushInterval value and therefore these were flushed. Please consider setting higher flushInterval value or making profiling blocks shorter.';
+                }),
+                false
+            ],
+            [
+                $this->callback(function ($messages) {
+                    return count($messages) === 2
+                        && $messages[0][0] === 'token.b'
+                        && $messages[0][1] == Logger::LEVEL_PROFILE_END
+                        && $messages[1][0] === 'token.a'
+                        && $messages[1][1] == Logger::LEVEL_PROFILE_END;
+                }),
+                false
+            ]
+        );
+
+        $logger = new Logger([
+            'profilingAware' => true,
+            'dispatcher' => $dispatcher,
+            'flushInterval' => 2,
+        ]);
+
+        $logger->log('token.a', Logger::LEVEL_PROFILE_BEGIN, 'category');
+        $logger->log('token.b', Logger::LEVEL_PROFILE_BEGIN, 'category');
+        $logger->log('token.b', Logger::LEVEL_PROFILE_END, 'category');
+        $logger->log('token.a', Logger::LEVEL_PROFILE_END, 'category');
+    }
 }
 
 class TestTarget extends Target
diff --git a/tests/framework/validators/ExistValidatorTest.php b/tests/framework/validators/ExistValidatorTest.php
index 472c74e6b12..45759d90167 100644
--- a/tests/framework/validators/ExistValidatorTest.php
+++ b/tests/framework/validators/ExistValidatorTest.php
@@ -97,6 +97,13 @@ public function testValidateAttribute()
         $m->test_val = [2, 3, 4, 5];
         $val->validateAttribute($m, 'test_val');
         $this->assertFalse($m->hasErrors('test_val'));
+        // existing non-unique array
+        $val = new ExistValidator(['targetAttribute' => 'ref']);
+        $val->allowArray = true;
+        $m = new ValidatorTestRefModel();
+        $m->test_val = [2, 2, 3, 3, 4, 4, 5, 5];
+        $val->validateAttribute($m, 'test_val');
+        $this->assertFalse($m->hasErrors('test_val'));
         // non-existing array
         $val = new ExistValidator(['targetAttribute' => 'ref']);
         $val->allowArray = true;
diff --git a/tests/framework/validators/FileValidatorTest.php b/tests/framework/validators/FileValidatorTest.php
index cbed1fbabf1..2ce3c797ca3 100644
--- a/tests/framework/validators/FileValidatorTest.php
+++ b/tests/framework/validators/FileValidatorTest.php
@@ -324,7 +324,7 @@ protected function createTestFiles($params = [])
             $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
             $randomString = '';
             for ($i = 0; $i < $len; $i++) {
-                $randomString .= $characters[rand(0, strlen($characters) - 1)];
+                $randomString .= $characters[random_int(0, strlen($characters) - 1)];
             }
 
             return $randomString;
@@ -340,7 +340,7 @@ protected function createTestFiles($params = [])
             if (is_readable($tempName)) {
                 $size = filesize($tempName);
             } else {
-                $size = isset($param['size']) ? $param['size'] : rand(
+                $size = isset($param['size']) ? $param['size'] : random_int(
                     1,
                     $this->sizeToBytes(ini_get('upload_max_filesize'))
                 );
diff --git a/tests/framework/web/ErrorHandlerTest.php b/tests/framework/web/ErrorHandlerTest.php
index 14db1af0cb1..9fdd41fcb6d 100644
--- a/tests/framework/web/ErrorHandlerTest.php
+++ b/tests/framework/web/ErrorHandlerTest.php
@@ -79,6 +79,61 @@ public function testRenderCallStackItem()
 
         $this->assertContains('<a href="netbeans://open?file=' . $file . '&line=63">', $out);
     }
+
+    public function dataHtmlEncode()
+    {
+        return [
+            [
+                "a \t=<>&\"'\x80`\n",
+                "a \t=&lt;&gt;&amp;\"'�`\n",
+            ],
+            [
+                '<b>test</b>',
+                '&lt;b&gt;test&lt;/b&gt;',
+            ],
+            [
+                '"hello"',
+                '"hello"',
+            ],
+            [
+                "'hello world'",
+                "'hello world'",
+            ],
+            [
+                'Chip&amp;Dale',
+                'Chip&amp;amp;Dale',
+            ],
+            [
+                "\t\$x=24;",
+                "\t\$x=24;",
+            ],
+        ];
+    }
+
+    /**
+     * @dataProvider dataHtmlEncode
+     */
+    public function testHtmlEncode($text, $expected)
+    {
+        $handler = Yii::$app->getErrorHandler();
+
+        $this->assertSame($expected, $handler->htmlEncode($text));
+    }
+
+    public function testHtmlEncodeWithUnicodeSequence()
+    {
+        if (PHP_VERSION_ID < 70000) {
+            $this->markTestSkipped('Can not be tested on PHP < 7.0');
+            return;
+        }
+
+        $handler = Yii::$app->getErrorHandler();
+
+        $text = "a \t=<>&\"'\x80\u{20bd}`\u{000a}\u{000c}\u{0000}";
+        $expected = "a \t=&lt;&gt;&amp;\"'�₽`\n\u{000c}\u{0000}";
+
+        $this->assertSame($expected, $handler->htmlEncode($text));
+    }
 }
 
 class ErrorHandler extends \yii\web\ErrorHandler
diff --git a/tests/framework/web/RequestTest.php b/tests/framework/web/RequestTest.php
index 934148b1982..2891372ce79 100644
--- a/tests/framework/web/RequestTest.php
+++ b/tests/framework/web/RequestTest.php
@@ -12,6 +12,7 @@
 
 /**
  * @group web
+ * @backupGlobals enabled
  */
 class RequestTest extends TestCase
 {
@@ -991,18 +992,21 @@ public function httpAuthorizationHeadersProvider()
      */
     public function testHttpAuthCredentialsFromHttpAuthorizationHeader($secret, $expected)
     {
-        $request = new Request();
+        $original = $_SERVER;
 
-        $request->getHeaders()->set('HTTP_AUTHORIZATION', 'Basic ' . $secret);
+        $request = new Request();
+        $_SERVER['HTTP_AUTHORIZATION'] = 'Basic ' . $secret;
         $this->assertSame($request->getAuthCredentials(), $expected);
         $this->assertSame($request->getAuthUser(), $expected[0]);
         $this->assertSame($request->getAuthPassword(), $expected[1]);
-        $request->getHeaders()->offsetUnset('HTTP_AUTHORIZATION');
+        $_SERVER = $original;
 
-        $request->getHeaders()->set('REDIRECT_HTTP_AUTHORIZATION', 'Basic ' . $secret);
+        $request = new Request();
+        $_SERVER['REDIRECT_HTTP_AUTHORIZATION'] = 'Basic ' . $secret;
         $this->assertSame($request->getAuthCredentials(), $expected);
         $this->assertSame($request->getAuthUser(), $expected[0]);
         $this->assertSame($request->getAuthPassword(), $expected[1]);
+        $_SERVER = $original;
     }
 
     public function testHttpAuthCredentialsFromServerSuperglobal()
@@ -1013,7 +1017,7 @@ public function testHttpAuthCredentialsFromServerSuperglobal()
         $_SERVER['PHP_AUTH_PW'] = $pw;
 
         $request = new Request();
-        $request->getHeaders()->set('HTTP_AUTHORIZATION', 'Basic ' . base64_encode('less-priority:than-PHP_AUTH_*'));
+        $request->getHeaders()->set('Authorization', 'Basic ' . base64_encode('less-priority:than-PHP_AUTH_*'));
 
         $this->assertSame($request->getAuthCredentials(), [$user, $pw]);
         $this->assertSame($request->getAuthUser(), $user);
@@ -1046,6 +1050,30 @@ public function testGetBodyParam()
         $this->assertSame('default', $request->getBodyParam('unexisting', 'default'));
     }
 
+    public function getBodyParamsDataProvider()
+    {
+        return [
+            'json' => ['application/json', '{"foo":"bar","baz":1}', ['foo' => 'bar', 'baz' => 1]],
+            'jsonp' => ['application/javascript', 'parseResponse({"foo":"bar","baz":1});', ['foo' => 'bar', 'baz' => 1]],
+            'get' => ['application/x-www-form-urlencoded', 'foo=bar&baz=1', ['foo' => 'bar', 'baz' => '1']],
+        ];
+    }
+
+    /**
+     * @dataProvider getBodyParamsDataProvider
+     */
+    public function testGetBodyParams($contentType, $rawBody, array $expected)
+    {
+        $_SERVER['CONTENT_TYPE'] = $contentType;
+        $request = new Request();
+        $request->parsers = [
+            'application/json' => 'yii\web\JsonParser',
+            'application/javascript' => 'yii\web\JsonParser',
+        ];
+        $request->setRawBody($rawBody);
+        $this->assertSame($expected, $request->getBodyParams());
+    }
+
     public function trustedHostAndInjectedXForwardedForDataProvider()
     {
         return [
diff --git a/tests/framework/web/UploadedFileTest.php b/tests/framework/web/UploadedFileTest.php
index 4702c5adb6e..d374a733335 100644
--- a/tests/framework/web/UploadedFileTest.php
+++ b/tests/framework/web/UploadedFileTest.php
@@ -7,6 +7,7 @@
 
 namespace yiiunit\framework\web;
 
+use Yii;
 use yii\web\UploadedFile;
 use yiiunit\framework\web\mocks\UploadedFileMock;
 use yiiunit\framework\web\stubs\ModelStub;
@@ -28,10 +29,10 @@ protected function setUp()
     private function generateFakeFileData()
     {
         return [
-            'name' => md5(mt_rand()),
-            'tmp_name' => md5(mt_rand()),
+            'name' => md5(random_int(0, PHP_INT_MAX)),
+            'tmp_name' => md5(random_int(0, PHP_INT_MAX)),
             'type' => 'image/jpeg',
-            'size' => mt_rand(1000, 10000),
+            'size' => random_int(1000, 10000),
             'error' => '0',
         ];
     }
@@ -39,10 +40,10 @@ private function generateFakeFileData()
     private function generateTempFileData()
     {
         return [
-            'name' => md5(mt_rand()),
+            'name' => md5(random_int(0, PHP_INT_MAX)),
             'tmp_name' => tempnam(sys_get_temp_dir(), ''),
             'type' => 'image/jpeg',
-            'size' => mt_rand(1000, 10000),
+            'size' => random_int(1000, 10000),
             'error' => '0',
         ];
     }
